(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
require('./main.css');

const createWebPlayer = require('@securebroadcast/sbtwebplayer');
const SESSION_KEY='SESSION_ID';
var currentTimeInVideo = 0;
var urlParameters = "";
var localData = "";
var playerOptions = {};
var projectDuration;
var isFirstPLay = false;
var playFunction;
var pauseFunction;

//const baseUrl = "http://localhost:3000/dev/";
const baseUrl =  "https://1y0yuxp5wc.execute-api.eu-west-1.amazonaws.com/prod/";
// const baseUrl = "https://api.vml.technology/uat/";

//MARK: Networking
const callService = async (url, options, method, body) => {

    headers = {};
    headers['Authorization'] = getVariableFromLocalStorage(SESSION_KEY);
    headers['X-Host-Domain'] = (window.location != window.parent.location) ? document.referrer : document.location.href;

    try {
        return await fetch(url, {
        method: method,
        options,
        body: body,
        headers
        });
    } catch (e) {
        rg4js('send', 'callService: ' + e);
    }
};

const parseJson = async response => {

    try {
        return response.json()
    } catch (e) {
        rg4js('send', 'parseJson: ' + e);
    }

    return {};
};

//MARK: API Requests

const getVML = async (url, options, body) => {
    const response = await callService(url, options, 'GET', body);
    const json = await parseJson(response);
    setVariableInLocalStorage(SESSION_KEY, json.session);
    projectDuration = json.duration;
    delete json.session;
    return json;
};


const logAnalytics = async(event, timeInVideo, metaData) => {

    var projectId = getProjectID()
    var url = baseUrl + "analytics/"

    var body = {
        projectId: projectId,
        event:event,
        player_time: timeInVideo,
        meta_data: metaData
    };

    webkit.messageHandlers.appCallback.postMessage(JSON.stringify(body));
    const response = await callService(url, null, 'POST', JSON.stringify(body));
    const json = await parseJson(response);
    setVariableInLocalStorage(SESSION_KEY, json.session);
};

//MARK: URL Helpers

function getProjectID() {
    var vars = {};

    // local data parameter takes precidence
    if (this.localData.vml_id != undefined) {
        return this.localData.vml_id;
    }

    // Host window parameter used as a backup if not passed in with local data
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    if (vars.id != undefined) {
        return vars.id;
    }

    return vars.id;
}

function getParametersFromUrl() {
    var url;
    if (window.location.href.includes('?')) {
        url = window.location.href + "&" + this.urlParameters;
    } else {
        url = window.location.href + "?" + this.urlParameters;
    }

    // There are no URL parameters
    if (!url.includes("?")) {
        return "";
    }

    var urlParameters = url.substring(url.indexOf("?"));
    return urlParameters;
}

//MARK: Session helpers

function getVariableFromLocalStorage(key) {
   return window.localStorage.getItem(key);
}

function setVariableInLocalStorage(key, value) {
    window.localStorage.setItem(key, value);
}

//MARK: Player callback functions

function onPlay(currentTime) {
    currentTimeInVideo = currentTime;
    if (!isFirstPLay) {
        logAnalytics("PLAY_CLICK", currentTime, null);
        isFirstPLay = true;
    }
}

function onPause(currentTime) {
    currentTimeInVideo = currentTime;
    logAnalytics("PAUSE_CLICK", currentTime, null);
}

function onProgress(currentTime) {
    currentTimeInVideo = currentTime;
    var currentPercent = (currentTimeInVideo / projectDuration) * 100;
    logAnalytics("PLAYING", currentPercent, null);
}

function onFullScreenToggle(isFullScreen) {
    if (isFullScreen) {
        logAnalytics("FULL_SCREEN_ON", currentTimeInVideo, null);
    } else {
        logAnalytics("FULL_SCREEN_OFF", currentTimeInVideo, null);
    }
}

function onVideoEnd() {
    logAnalytics("COMPLETE", currentTimeInVideo, null);
}

window.playVideo = function() {
    playFunction()
}

window.pauseVideo = function() {
    pauseFunction()
}

function onReady({totalDuration, actions}) {
    logAnalytics("READY", 0.0, null);
    
    playFunction = actions.play;
    pauseFunction = actions.pause;

    console.log(this.playerOptions)

    if (this.playerOptions.autoplay == true) {

    console.log("Auto playing")
        actions.play();
    }

}

function onElementClicked(id, clickTime) {
    logAnalytics("ELEMENT_CLICKED", clickTime, id);
}


// The ID sent to the VML service can come from the host window or the parent window (if embedded in iFrame)
// The host window takes precidence over the parent window. If there is no ID in the host, we look at the parent
// All of the parents URL paramenters are sent to the VML service (not host as this is built to be embedded in sites as an iframe)
// The main usecase for this service to look at the parent window for the ID and not the iFrame is so we can dynamically set the video to be displayed
// The most common use case is for the host (iFrame) to contain the ID and have its data personalised from the host url parameters


const getService = async ({ url, options }) => getVML(baseUrl + "vml/" + getProjectID() + getParametersFromUrl(), { options, method: 'GET' });

window.initPlayer = function(initData, playerOptions) {
    
    this.urlParameters = initData.urlParameters;
    this.localData = initData.localData;
    this.playerOptions = playerOptions;
    var displayControls = playerOptions.showPlayerControls == true ?  ['time', 'progress', 'play'] : [];

    createWebPlayer({
        attachTo: "video",
        service: getService,
        projectId: 1,
        onPlay: onPlay,
        onPause: onPause,
        onFullScreenToggle: onFullScreenToggle,
        autoLoop: playerOptions.autoloop,
        onVideoEnd: onVideoEnd,
        progressInterval: 3,
        onReady: onReady,
        onProgress: onProgress,
        onElementClicked: onElementClicked,
        data: initData.localData,
        useOverlayControls: playerOptions.showPlayerControls,
        allowedControls: displayControls
    })
};
},{"./main.css":2,"@securebroadcast/sbtwebplayer":3}],2:[function(require,module,exports){
var css = ".webplayer-styles_videoContainer__2mHcM,\n.webplayer-styles_videoLayerElementContainer__1t0PF {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  max-width: 100%;\n  max-height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n}\n.webplayer-styles_videoLayerElementContainer__1t0PF {\n  z-index: 98;\n}\n.styles_root__Doaxf {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: 200;\n}\n.styles_img__2kLAC {\n  width: 100%;\n}\n.styles_root__2UBKF {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 500;\n}\n.styles_root__2UBKF.styles_controlsShowing__2XUFE {\n  z-index: 200;\n}\n.styles_root__2yUun {\n  position: relative;\n  background-color: transparent;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n  width: 100%;\n  height: 100%;\n}\n.styles_fullScreen__2Bof3 {\n  top: 0!important;\n  left: 0!important;\n  position: absolute!important;\n  width: 100%!important;\n  height: 100%!important;\n  z-index: 200;\n}\n.fake_fullscreen {\n  bottom: 0!important;\n  right: 0!important;\n  top: 0!important;\n  left: 0!important;\n  position: fixed!important;\n}\n.styles_sizer__a4fA6 {\n  width: 100%;\n  height: 100%;\n}\n.styles_controlsContainer__2g9B2 {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 260;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: column nowrap;\n  flex-flow: column nowrap;\n  -webkit-box-pack: end;\n  -ms-flex-pack: end;\n  justify-content: flex-end;\n  padding-top: 16px;\n}\n.styles_controlsContainer__2g9B2 button {\n  padding: initial;\n  margin: initial;\n}\n.styles_marginReset__QPDpN {\n  margin: 0!important;\n}\n.styles_paddingReset__2H-_K {\n  padding: 0!important;\n}\n.styles_controls__3kM6u:hover {\n  cursor: pointer;\n}\n.styles_overlayBackground__O_Srx {\n  background: -webkit-gradient(linear,left bottom,left top,from(rgba(0,4,29,.5)),color-stop(31.77%,rgba(0,4,29,.3)),color-stop(46.88%,rgba(0,4,29,.22)),color-stop(83.85%,rgba(0,4,29,.05)),to(rgba(0,4,29,0)));\n  background: linear-gradient(0deg,rgba(0,4,29,.5) 0,rgba(0,4,29,.3) 31.77%,rgba(0,4,29,.22) 46.88%,rgba(0,4,29,.05) 83.85%,rgba(0,4,29,0));\n}\n.styles_invisible__2uK5s {\n  display: none;\n}\n.styles_desktopControls__1M43E {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  height: 50px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: 47px;\n  margin-right: 47px;\n}\n.styles_leftControls__3dZCA,\n.styles_rightControls__ZLEwF {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.styles_mobileControls__2nMaQ {\n  padding: 0;\n  margin: 0 15px 10px;\n  text-align: right;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n}\n.styles_mobileControls__2nMaQ,\n.styles_mobileLeftControls__P2KV5 {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n}\n.styles_mobileLeftControls__P2KV5,\n.styles_mobileRightControls__5RblY {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.styles_mobileRightControls__5RblY {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n}\n.styles_mobileProgressBarArea__131Uk {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.styles_fadeIn__3k3S4 {\n  -webkit-animation: styles_fadeIn__3k3S4 .25s linear forwards;\n  animation: styles_fadeIn__3k3S4 .25s linear forwards;\n}\n@-webkit-keyframes styles_fadeIn__3k3S4 {\n  0% {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n    z-index: 262;\n  }\n}\n@keyframes styles_fadeIn__3k3S4 {\n  0% {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n    z-index: 262;\n  }\n}\n.styles_fadeOut__2jZKR {\n  -webkit-animation: styles_fadeOut__2jZKR .25s linear forwards;\n  animation: styles_fadeOut__2jZKR .25s linear forwards;\n}\n@-webkit-keyframes styles_fadeOut__2jZKR {\n  0% {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n    z-index: 260;\n  }\n}\n@keyframes styles_fadeOut__2jZKR {\n  0% {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n    z-index: 260;\n  }\n}\n.styles_overlayControls__3NWOE {\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n  position: absolute;\n  z-index: 250;\n}\n.styles_overlayControls__3NWOE.styles_mobile__11Clo {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n}\n.styles_left__30H9O {\n  height: 100%;\n  width: 20%;\n  float: left;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-appearance: none;\n}\n.styles_overlayControls__3NWOE.styles_mobile__11Clo .styles_left__30H9O {\n  float: none;\n}\n.styles_centre__BIiDC {\n  height: 100%;\n  width: 60%;\n  float: left;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-appearance: none;\n  position: relative;\n}\n.styles_overlayControls__3NWOE.styles_mobile__11Clo .styles_centre__BIiDC {\n  float: none;\n}\n.styles_right__PJId5 {\n  height: 100%;\n  width: 20%;\n  float: left;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-appearance: none;\n}\n.styles_overlayControls__3NWOE.styles_mobile__11Clo .styles_right__PJId5 {\n  float: none;\n}\n.styles_fullScreen__23imI {\n  position: absolute!important;\n  height: 100%!important;\n  width: 100%!important;\n}\n.styles_video__16wgh::-webkit-media-controls {\n  display: none!important;\n}\n.styles_root__1CWL- {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  top: 0;\n  display: none;\n  z-index: 200;\n}\n.styles_visible__2g5qd {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.styles_errorMessage__3eiyc {\n  background-color: #fff;\n  color: #000;\n  padding: 10px;\n  border-radius: 5px;\n}\n.styles_topOverlay__2Coe7 {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  z-index: 261;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 16px 30px 26px;\n  font-family: SF Pro Display,-apple-system,BlinkMacSystemFont,Helvetica Neue,Roboto,Arial,sans-serif;\n  font-size: 14px;\n}\n.styles_mobile__1THOG {\n  font-size: 12px;\n  padding: 10px 15px 16px;\n}\n.styles_topOverlayBackground__1olWK {\n  background: -webkit-gradient(linear,left top,left bottom,from(rgba(0,4,29,.5)),color-stop(31.77%,rgba(0,4,29,.3)),color-stop(46.88%,rgba(0,4,29,.22)),color-stop(83.85%,rgba(0,4,29,.05)),to(rgba(0,4,29,0)));\n  background: linear-gradient(180deg,rgba(0,4,29,.5),rgba(0,4,29,.3) 31.77%,rgba(0,4,29,.22) 46.88%,rgba(0,4,29,.05) 83.85%,rgba(0,4,29,0));\n}\n.styles_projectTitle__Ozdbd {\n  color: #fff!important;\n  line-height: normal!important;\n  margin: 0 10px 0 0;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.styles_poweredBy__3JbFU {\n  color: #fff!important;\n  line-height: normal!important;\n  text-decoration: none;\n  font-weight: 400;\n  text-align: right;\n}\n.styles_poweredBy__3JbFU span {\n  font-weight: 700;\n}\n.styles_invisible__2WnEw {\n  display: none;\n}\n.styles_fadeIn__2ITcH {\n  -webkit-animation: styles_fadeIn__2ITcH .25s linear forwards;\n  animation: styles_fadeIn__2ITcH .25s linear forwards;\n}\n@-webkit-keyframes styles_fadeIn__2ITcH {\n  0% {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n    z-index: 262;\n  }\n}\n@keyframes styles_fadeIn__2ITcH {\n  0% {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n    z-index: 262;\n  }\n}\n.styles_fadeOut__12Ts3 {\n  -webkit-animation: styles_fadeOut__12Ts3 .25s linear forwards;\n  animation: styles_fadeOut__12Ts3 .25s linear forwards;\n}\n@-webkit-keyframes styles_fadeOut__12Ts3 {\n  0% {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n    z-index: 260;\n  }\n}\n@keyframes styles_fadeOut__12Ts3 {\n  0% {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n    z-index: 260;\n  }\n}\n.styles_root__vQYBO {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.styles_root__vQYBO.styles_noPointer__1UOqn {\n  pointer-events: none;\n  z-index: auto;\n}\n.styles_root__34iVl {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: #000;\n  opacity: .4;\n  z-index: 250;\n}\n.styles_loaderContainer__yD3Bs {\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  position: absolute;\n  pointer-events: none;\n  z-index: 201;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.styles_root__33X8H {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: none;\n  background-color: transparent;\n  background-image: -webkit-gradient(linear,left bottom,left top,color-stop(24%,transparent),color-stop(25%,hsla(0,0%,100%,.5)),color-stop(26%,hsla(0,0%,100%,.5)),color-stop(27%,transparent),color-stop(74%,transparent),color-stop(75%,hsla(0,0%,100%,.5)),color-stop(76%,hsla(0,0%,100%,.5)),color-stop(77%,transparent),to(transparent)),-webkit-gradient(linear,left top,right top,color-stop(24%,transparent),color-stop(29%,hsla(0,0%,100%,.5)),color-stop(26%,hsla(0,0%,100%,.05)),color-stop(27%,transparent),color-stop(74%,transparent),color-stop(75%,hsla(0,0%,100%,.5)),color-stop(76%,hsla(0,0%,100%,.5)),color-stop(77%,transparent),to(transparent));\n  background-image: linear-gradient(0deg,transparent 24%,hsla(0,0%,100%,.5) 25%,hsla(0,0%,100%,.5) 26%,transparent 27%,transparent 74%,hsla(0,0%,100%,.5) 75%,hsla(0,0%,100%,.5) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,hsla(0,0%,100%,.5) 29%,hsla(0,0%,100%,.05) 0,transparent 27%,transparent 74%,hsla(0,0%,100%,.5) 75%,hsla(0,0%,100%,.5) 76%,transparent 77%,transparent);\n  z-index: 199;\n}\n.styles_root__Vfmc2 {\n  font-size: 30px;\n  color: #fff;\n  background: #000;\n  -ms-flex-pack: distribute;\n  justify-content: space-around;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  opacity: 0;\n  position: absolute;\n}\n.styles_fadeInAndOut__1rjqp {\n  -webkit-animation: styles_fadeInOut__3r7Nz .6s linear forwards;\n  animation: styles_fadeInOut__3r7Nz .6s linear forwards;\n}\n@-webkit-keyframes styles_fadeInOut__3r7Nz {\n  0% {\n    -webkit-transform: scale(.5);\n    transform: scale(.5);\n    opacity: 0;\n  }\n\n  55% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n\n  to {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n}\n@keyframes styles_fadeInOut__3r7Nz {\n  0% {\n    -webkit-transform: scale(.5);\n    transform: scale(.5);\n    opacity: 0;\n  }\n\n  55% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n\n  to {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n}\n.styles_fadeInDelayed__39F41 {\n  -webkit-animation: styles_fadeInDelayed__39F41 .8s linear forwards;\n  animation: styles_fadeInDelayed__39F41 .8s linear forwards;\n}\n@-webkit-keyframes styles_fadeInDelayed__39F41 {\n  0% {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n\n  50% {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n\n  to {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n}\n@keyframes styles_fadeInDelayed__39F41 {\n  0% {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n\n  50% {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n\n  to {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n}\n.styles_fadeIn__1ORSm {\n  -webkit-animation: styles_fadeIn__1ORSm .3s linear forwards;\n  animation: styles_fadeIn__1ORSm .3s linear forwards;\n}\n@-webkit-keyframes styles_fadeIn__1ORSm {\n  0% {\n    -webkit-transform: scale(.5);\n    transform: scale(.5);\n    opacity: 0;\n  }\n\n  to {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n}\n@keyframes styles_fadeIn__1ORSm {\n  0% {\n    -webkit-transform: scale(.5);\n    transform: scale(.5);\n    opacity: 0;\n  }\n\n  to {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n}\n.styles_fadeOut__ucpjX {\n  -webkit-animation: styles_fadeOut__ucpjX .3s linear forwards;\n  animation: styles_fadeOut__ucpjX .3s linear forwards;\n}\n@-webkit-keyframes styles_fadeOut__ucpjX {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n\n  to {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n}\n@keyframes styles_fadeOut__ucpjX {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: .5;\n  }\n\n  to {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n    opacity: 0;\n  }\n}\n.styles_loadingAnimation__1QyEi {\n  height: 80px;\n  width: 80px;\n}\n.styles_playButton__VWtoN {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  background: none;\n  color: #fff;\n  border: 0;\n  z-index: 200;\n  height: 20px;\n  width: 20px;\n}\n.styles_playButton__VWtoN img {\n  height: 100%;\n  width: 100%;\n}\n.styles_fullscreenButton__iJhiI {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  margin-left: 29px!important;\n  background: 0;\n  color: #e6e6e6;\n  border: 0;\n  height: 20px;\n  width: 20px;\n  z-index: 200;\n}\n.styles_fullscreenButton__iJhiI img {\n  height: 100%;\n  width: 100%;\n}\n.styles_mobile__1Y08u {\n  margin-left: 17px!important;\n}\n.styles_timeDisplay__wI2fO {\n  margin-left: 17px;\n  -webkit-tap-highlight-color: transparent;\n  color: #fff;\n  font-size: 13px;\n  font-family: SF Pro Display,-apple-system,BlinkMacSystemFont,Helvetica Neue,Roboto,Arial,sans-serif;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  z-index: 200;\n}\n.styles_currentTime__-6Xh1 {\n  padding-right: 3px;\n}\n.styles_duration__1FWMW {\n  color: hsla(0,0%,100%,.4);\n  padding-left: 3px;\n}\n.styles_muteButton__3H0Mu {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  margin-left: 29px!important;\n  background: 0;\n  color: #fff;\n  border: 0;\n  height: 20px;\n  width: 20px;\n  z-index: 200;\n}\n.styles_muteButton__3H0Mu img {\n  height: 100%;\n  width: 100%;\n}\n.styles_mobile__2qidx {\n  margin-left: 17px!important;\n}\n.styles_slider__Ce65I {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  width: 59px;\n  height: 4px;\n  background: hsla(0,0%,100%,.4);\n  border-radius: 10px;\n  outline: none;\n  margin: 0 0 0 7px;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.styles_slider__Ce65I:focus {\n  outline: none;\n  border: none!important;\n}\n.styles_slider__Ce65I::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  border-radius: 50%;\n  width: 10px;\n  height: 10px;\n  background: #fff;\n  cursor: pointer;\n  margin-top: -3px;\n}\n.styles_slider__Ce65I::-webkit-slider-runnable-track {\n  height: 4px;\n}\n.styles_slider__Ce65I::-moz-range-thumb {\n  -moz-appearance: none;\n  appearance: none;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #fff;\n  cursor: pointer;\n  outline: none;\n  border: none;\n}\n.styles_slider__Ce65I::-ms-fill-lower {\n  background-color: #fff;\n}\n.styles_slider__Ce65I::-ms-fill-upper {\n  background-color: hsla(0,0%,100%,.4);\n}\n.styles_subtitlesButton__36gHZ {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  color: #e6e6e6;\n  background: transparent;\n  border: 0;\n  z-index: 200;\n  height: 20px;\n  position: relative;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: column nowrap;\n  flex-flow: column nowrap;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.styles_subtitlesButton__36gHZ img {\n  height: 100%;\n  width: 100%;\n}\n.styles_hide__1vXoU {\n  display: none;\n}\n.styles_subtitlesButton__36gHZ div {\n  opacity: 0;\n  width: 0;\n}\n.styles_subtitlesButton__36gHZ div.styles_underline__2NLwu {\n  position: absolute;\n  bottom: -6px;\n  background: #6bb7b2;\n  border-radius: 5px;\n  width: 24px!important;\n  height: 3px!important;\n  opacity: 1;\n  -webkit-transition: opacity .25s,width .25s;\n  transition: opacity .25s,width .25s;\n}\n.styles_mobile__2m4A8 {\n  margin-left: 17px!important;\n}\n.styles_mobileTimeDisplay__3S9KD {\n  -webkit-tap-highlight-color: transparent;\n  color: #fff;\n  font-size: 13px;\n  font-family: SF Pro Display,-apple-system,BlinkMacSystemFont,Helvetica Neue,Roboto,Arial,sans-serif;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-flow: row nowrap;\n  flex-flow: row nowrap;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  z-index: 200;\n}\n.styles_currentTime__2ONLS {\n  padding-right: 3px;\n}\n.styles_duration__oryZ_ {\n  color: hsla(0,0%,100%,.4);\n  padding-left: 3px;\n}\n.styles_handle__342EU {\n  position: absolute;\n  padding: 0;\n  background-color: #d6eaff;\n  -webkit-box-shadow: 0 0 6px rgba(0,0,0,.14);\n  box-shadow: 0 0 6px rgba(0,0,0,.14);\n  height: 10px;\n  width: 10px;\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  border-radius: 50%;\n  margin-left: -4px;\n  opacity: 1;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  z-index: 200;\n  cursor: pointer;\n  display: none;\n}\n.styles_handleHover__13ddH {\n  height: 15px;\n  width: 15px;\n  margin-left: -7px;\n  cursor: pointer;\n}\n.styles_innerProgressBar__17mj_ {\n  background-color: #d6eaff;\n  width: 0;\n  bottom: 0;\n  height: 100%;\n}\n.styles_innerProgressBar__17mj_,\n.styles_progressBar__3NvWY {\n  -webkit-tap-highlight-color: transparent;\n  outline: 0;\n  border-radius: 20px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  z-index: 200;\n}\n.styles_progressBar__3NvWY {\n  background: hsla(0,0%,100%,.4);\n  height: 4px;\n  position: relative;\n  margin-left: 30px;\n  margin-right: 30px;\n  margin-bottom: 32px;\n  cursor: pointer;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row nowrap;\n  flex-direction: row nowrap;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.styles_progressBar__3NvWY.styles_mobile__3J9BG {\n  margin: 0 15px;\n}\n.styles_progressBarContainer__1x6ob {\n  padding-bottom: 20px;\n}\n.styles_progressBarContainer__1x6ob.styles_mobile__3J9BG {\n  padding: 20px 0 10px;\n}\n.styles_progressBarContainer__1x6ob:hover .styles_progressBar__3NvWY {\n  height: 6px;\n  margin-bottom: 31px;\n}\n.styles_progressBarContainer__1x6ob:hover .styles_progressBar__3NvWY.styles_mobile__3J9BG {\n  margin-bottom: 5px;\n}\n.styles_progressBarHover__xIS4R .styles_progressBar__3NvWY {\n  height: 6px;\n  margin-bottom: 31px;\n}\n.styles_progressBarHover__xIS4R .styles_progressBar__3NvWY.styles_mobile__3J9BG {\n  margin-bottom: 5px;\n}\n.styles_progressBarContainer__1x6ob:hover .styles_progressBar__3NvWY :nth-child(2) {\n  display: inline;\n  display: initial;\n  height: 15px;\n  width: 15px;\n  margin-left: -7px;\n}\nbody {\n  background-color: black;\n}\n.videoFrame {\n  width: 100vw;\n  height: 56.25vw;\n  /* height:width ratio = 9/16 = .5625  */\n  /* background: pink; */\n  max-height: 100vh;\n  max-width: 177.78vh;\n  /* 16/9 = 1.778 */\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  /* vertical center */\n  left: 0;\n  right: 0;\n  /* horizontal center */\n}\n"; (require("browserify-css").createStyle(css, { "href": "main.css" }, { "insertAt": "bottom" })); module.exports = css;
},{"browserify-css":4}],3:[function(require,module,exports){
(function (global){(function (){
"use strict";function ownKeys(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,i,n,a,s){try{var o=e[a](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(i,n)}function _asyncToGenerator(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var i=o.apply(e,s);function n(e){asyncGeneratorStep(i,t,r,n,a,"next",e)}function a(e){asyncGeneratorStep(i,t,r,n,a,"throw",e)}n(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);i=new(Function.bind.apply(e,i));return r&&_setPrototypeOf(i,r.prototype),i}).apply(null,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var r,i={},n=Object.keys(e),a=0;a<n.length;a++)r=n[a],0<=t.indexOf(r)||(i[r]=e[r]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),a=0;a<n.length;a++)r=n[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _createSuper(r){var i=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,i?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=_superPropBase(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return a}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,n=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw n}}}}function _initializerDefineProperty(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _applyDecoratedDescriptor(r,i,e,t,n){var a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(e,t){return t(r,i,e)||e},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(r,i,a),a=null),a}function escapeRegEx(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function registerPolyfills(){String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(escapeRegEx(e),"g"),t)})}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var ContentRect_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.ContentRect=function(e){if("getBBox"in e){var t=e.getBBox();return Object.freeze({height:t.height,left:0,top:0,width:t.width})}e=window.getComputedStyle(e);return Object.freeze({height:parseFloat(e.height||"0"),left:parseFloat(e.paddingLeft||"0"),top:parseFloat(e.paddingTop||"0"),width:parseFloat(e.width||"0")})}});unwrapExports(ContentRect_1);var ContentRect_2=ContentRect_1.ContentRect,ResizeObservation_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=(Object.defineProperty(i.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),i.prototype.isActive=function(){var e=ContentRect_1.ContentRect(this.target);return!!e&&(e.width!==this.broadcastWidth||e.height!==this.broadcastHeight)},i);function i(e){this.target=e,this.$$broadcastWidth=this.$$broadcastHeight=0}t.ResizeObservation=r});unwrapExports(ResizeObservation_1);var ResizeObservation_2=ResizeObservation_1.ResizeObservation,ResizeObserverEntry_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeObserverEntry=function(e){this.target=e,this.contentRect=ContentRect_1.ContentRect(e)}});unwrapExports(ResizeObserverEntry_1);var ResizeObserverEntry_2=ResizeObserverEntry_1.ResizeObserverEntry,ResizeObserver_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=[],i=(n.prototype.observe=function(e){var t=a("observe",e);if(t)throw TypeError(t);0<s(this.$$observationTargets,e)||(this.$$observationTargets.push(new ResizeObservation_1.ResizeObservation(e)),h())},n.prototype.unobserve=function(e){var t=a("unobserve",e);if(t)throw TypeError(t);e=s(this.$$observationTargets,e);e<0||(this.$$observationTargets.splice(e,1),f())},n.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[]},n);function n(e){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var t=function(e){if(void 0===e)return"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.";if("function"!=typeof e)return"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}(e);if(t)throw TypeError(t);this.$$callback=e,r.push(this)}function a(e,t){return void 0===t?"Failed to execute '"+e+"' on 'ResizeObserver': 1 argument required, but only 0 present.":t instanceof window.Element?void 0:"Failed to execute '"+e+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function s(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1}t.ResizeObserver=i;function o(i){r.forEach(function(r){r.$$activeTargets=[],r.$$skippedTargets=[],r.$$observationTargets.forEach(function(e){var t;e.isActive()&&(t=c(e.target),(i<t?r.$$activeTargets:r.$$skippedTargets).push(e))})})}function l(){var e,t;for(o(0);r.some(function(e){return!!e.$$activeTargets.length});)e=function(){var i=1/0;return r.forEach(function(e){var r;e.$$activeTargets.length&&(r=[],e.$$activeTargets.forEach(function(e){var t=new ResizeObserverEntry_1.ResizeObserverEntry(e.target);r.push(t),e.$$broadcastWidth=t.contentRect.width,e.$$broadcastHeight=t.contentRect.height;e=c(e.target);e<i&&(i=e)}),e.$$callback(r,e),e.$$activeTargets=[])}),i}(),o(e);r.some(function(e){return!!e.$$skippedTargets.length})&&(t=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."}),window.dispatchEvent(t))}var u,c=function(e){for(var t=0;e.parentNode;)e=e.parentNode,t+=1;return t},h=function(){u||d()},d=function(){u=window.requestAnimationFrame(function(){l(),d()})},f=function(){u&&!r.some(function(e){return!!e.$$observationTargets.length})&&(window.cancelAnimationFrame(u),u=void 0)};t.install=function(){return window.ResizeObserver=i}});unwrapExports(ResizeObserver_1);var ResizeObserver_2=ResizeObserver_1.ResizeObserver,ResizeObserver_3=ResizeObserver_1.install,_pointerEvents,_mouseEvents,_touchEvents,_eventTypes,startEvent="start",moveEvent="move",endEvent="end",mousemove="mousemove",mouseleave="mouseleave",mouseout="mouseout",pointerEvents=(_pointerEvents={},_defineProperty(_pointerEvents,startEvent,"pointerdown"),_defineProperty(_pointerEvents,moveEvent,"pointermove"),_defineProperty(_pointerEvents,endEvent,"pointerup"),_pointerEvents),mouseEvents=(_mouseEvents={},_defineProperty(_mouseEvents,startEvent,"mousedown"),_defineProperty(_mouseEvents,moveEvent,"mousemove"),_defineProperty(_mouseEvents,endEvent,"mouseup"),_mouseEvents),touchEvents=(_touchEvents={},_defineProperty(_touchEvents,startEvent,"touchstart"),_defineProperty(_touchEvents,moveEvent,"touchmove"),_defineProperty(_touchEvents,endEvent,"touchend"),_touchEvents),eventTypes=(_eventTypes={},_defineProperty(_eventTypes,startEvent,startEvent),_defineProperty(_eventTypes,moveEvent,moveEvent),_defineProperty(_eventTypes,endEvent,endEvent),_eventTypes),getEvents=function(e){return e in eventTypes?[mouseEvents[e],touchEvents[e]]:[e]},filterEvents=function(t){return function(e){3!==e.which&&2!==e.which&&t(e)}},applyEvents=function(t,e,r){var i=[];return e.forEach(function(e){t.addEventListener(e,r,{passive:!1}),i.push(function(){return t.removeEventListener(e,r)})}),i},addEventListeners=function(s,e){var o=[],t=Object.entries(e).reduce(function(e,t){var t=_slicedToArray(t,2),r=t[0],t=t[1],i=filterEvents(t),t=getEvents(r);if(t)for(var n=applyEvents(s,t,i),a=0;a<n.length;a++)o.push(n[a]);else s.addEventListener(r,i),o.push(function(){return s.removeEventListener(r,i)});return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},r,i))},{}),e=function e(){!function(){for(var e=0;e<o.length;e++)o[e]()}(),window.removeEventListener("removeAllPlayerEvents",e)};return window.addEventListener("removeAllPlayerEvents",e),t},removeEvents=function(t,e,r){e.forEach(function(e){t.removeEventListener(e,r,!1)})},removeEventListeners=function(i,e){Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],e=t[1],t=getEvents(r);t?removeEvents(i,t,e):i.removeEventListener(r,e,!1)})},PLAYING="PLAYING",PAUSED="PAUSED",LOADING$1="LOADING",READY="READY",INITIALISING="INITIALISING",SKIPPING="SKIPPING",REWINDING="REWINDING",SEEKING="SEEKING",SEEKED="SEEKED",PLAYBACK_ERROR="PLAYBACK_ERROR",LOADING_ERROR="LOADING_ERROR",LAYER_LOADING="LAYER_LOADING",NOT_USED="NOT_USED",isSafariMobile=function(){var e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)},isMobileOrTablet=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},isSafari=function(){var e=window.navigator.userAgent;return e.toLowerCase().includes("safari")&&!e.toLowerCase().includes("chome")&&window.navigator.vendor.toLowerCase().includes("apple")},browserDetection={isSafariMobile:isSafariMobile(),isMobileOrTablet:isMobileOrTablet(),isSafari:isSafari()},moveEventListener=null,endEventListener=null,calculateCurrentTime=function(e,t){return e*t},getCurrentTime=function(e,t,r,i){var n,a=0;e.clientX?n=e.clientX:e.changedTouches&&(n=e.changedTouches[0].clientX);i=n-r.offsetLeft-i;return t<(a=0<i?calculateCurrentTime(t,i/r.offsetWidth):a)?t:a},createMoveEvent=function(t,r,i){return function(e){e.preventDefault(),e.stopPropagation(),r.currentState===SEEKING&&(t.cancelAnimation(),t.setCurrentTime(getCurrentTime(e,r.duration,i,t.getVideoPlayerContainerOffsetLeft())))}},createUpEvent=function(a,s,o,l,u){return function(e){var t=s.state,r=s.duration,i=s.previousState,n=s.update;e.preventDefault(),e.stopPropagation(),t!==SEEKED&&(e=getCurrentTime(e,r,o,a.getVideoPlayerContainerOffsetLeft()),a.setCurrentTime(e),e<r&&i===PLAYING?a.play():i!==LAYER_LOADING&&n({state:u===READY?PAUSED:u})),removeEventListeners(document,(_defineProperty(n={},moveEvent,moveEventListener),_defineProperty(n,endEvent,endEventListener),n)),l()}},createControlsEventListeners=function(){return function(e){var a=e.store,s=e.playerEngine;return{container:function(){return _defineProperty({mousemove:function(){a.updateIsMouseOnControls(!0)},mouseout:function(){a.updateIsMouseOnControls(!1)}},endEvent,function(e){browserDetection.isMobileOrTablet||a.state===SEEKING||(e.preventDefault(),e.stopPropagation())})},playButton:function(){return _defineProperty({},endEvent,function(e){a.state!==LOADING$1&&(s.getActions().toggle(),a.updateIsMouseOnControls(!0)),e.preventDefault(),e.stopPropagation()})},progressBar:function(r,i,n){return _defineProperty({},startEvent,function(e){var t;a.controls.showControls&&(e.preventDefault(),e.stopPropagation(),t=a.currentState,s.getActions().cancelAnimation(),a.update({state:SEEKING}),e=addEventListeners(document,(_defineProperty(e={},moveEvent,createMoveEvent(s.getActions(),a,r)),_defineProperty(e,endEvent,createUpEvent(s.getActions(),a,r,n,t)),e)),moveEventListener=e[moveEvent],endEventListener=e[endEvent],i())})},fullScreenButton:function(){return{click:function(){s.getActions().toggleFullScreen(),a.currentState===PLAYING&&a.setShowControlsTimeout()}}},mutedButton:function(){return{click:function(){s.getActions().toggleMuted(),a.currentState===PLAYING&&a.setShowControlsTimeout()}}},volumeSlider:function(){return _defineProperty({input:function(e){s.getActions().changeVolume(Number(e.target.value)),a.currentState===PLAYING&&a.setShowControlsTimeout()}},endEvent,function(e){e.stopPropagation(),s.getActions().changeVolume(Number(e.target.value))})},subtitlesButton:function(){return{click:function(){s.getActions().toggleSubtitles(),a.currentState===PLAYING&&a.setShowControlsTimeout()}}}}}},documentElement=document,isFakeFullScreen=!1,fakeFullscreen=function(e){e.classList.add("fake_fullscreen"),isFakeFullScreen=!0},exitFakeFullscreen=function(e){isFakeFullScreen=!1,e.classList.remove("fake_fullscreen")},request=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():fakeFullscreen(e),r)try{screen.orientation.lock("landscape-primary")}catch(e){}t()}catch(e){}},exit=function(e,t){documentElement.exitFullscreen?documentElement.exitFullscreen():documentElement.webkitExitFullscreen?documentElement.webkitExitFullscreen():documentElement.mozCancelFullScreen?documentElement.mozCancelFullScreen():documentElement.msExitFullscreen?documentElement.msExitFullscreen():exitFakeFullscreen(e);try{screen.orientation.lock("natural")}catch(e){}t()},isFullScreen=function(){return!!(documentElement.fullscreenElement||documentElement.webkitFullscreenElement||documentElement.mozFullScreenElement||documentElement.msFullscreenElement||isFakeFullScreen)},createFullScreenHandler=function(r,i,n){return function(e){var t=isFullScreen();t?(r.setFullScreen(),i.setFullScreen()):(r.removeFullScreen(),i.removeFullScreen()),n.updateMeasurements({isFullScreen:t})}},createGlobalEventListeners=function(){return function(e){var t=e.videoController,r=e.videoPlayerContainer,i=e.videoPlayerEngine,n=e.store,a=e.pauseOnBlur,a=void 0!==a&&a,e=e.useKeyboardEvents,e=void 0===e||e,t=createFullScreenHandler(t,r,n),r={keyup:function(e){32===e.which&&i.getActions().toggle()}},a={resize:function(e){n.updateMeasurements({isFullScreen:isFullScreen()})},fullscreenchange:t,webkitfullscreenchange:t,mozfullscreenchange:t,MSFullscreenChange:t,blur:a?function(){i.getActions().pause()}:function(){}};return e?_objectSpread2(_objectSpread2({},a),r):a}},createOverlayControlsEventListeners=function(){return function(e){var t=e.store,r=e.playerEngine,i=e.controlCapabilities;return{left:{click:function(){var e=t.controls.showControls;browserDetection.isMobileOrTablet&&!e?t.setShowControlsTimeout():browserDetection.isMobileOrTablet&&e&&t.setShowControlsTimeout(1)}},centre:{click:function(){browserDetection.isMobileOrTablet&&!t.controls.showControls?t.setShowControlsTimeout():i.allowPlay?r.getActions().toggle():t.setShowControlsTimeout(1)}},right:{click:function(){var e=t.controls.showControls;browserDetection.isMobileOrTablet&&!e?t.setShowControlsTimeout():browserDetection.isMobileOrTablet&&e&&t.setShowControlsTimeout(1)}}}}},createVideoEventListeners=function(){return function(e){var t=e.store,r=e.videoPlayerEngine,i=e.onReady;return{loadedmetadata:function(e){t.state===INITIALISING&&(t.update({state:READY,isFullScreen:!1,startTime:0,currentTime:0,videoState:"SEEKED"}),t.updateMeasurements({originalVideoWidth:e.target.videoWidth,originalVideoHeight:e.target.videoHeight,isFullScreen:isFullScreen()}),i&&i({totalDuration:t.duration.toFixed(2),actions:_objectSpread2({},r.getActions())}))},resize:function(){t.updateMeasurements({isFullScreen:isFullScreen()})},seeked:function(){t.update({videoState:"SEEKED"})}}}},isElementInDOM=function(e){return document.body.contains(e)},convertStyleMapToInlineStyles=function(e){e=Object.entries(_objectSpread2(_objectSpread2({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),e)).reduce(function(e,t){var t=_slicedToArray(t,2),r=t[0],t=t[1];return Array.isArray(t)?"".concat(e).concat(t.map(function(e){return"".concat(r,":").concat(e,";")}).join("")):"".concat(e).concat(r,":").concat(t,";")},"");if("string"!=typeof e)throw Error("Layer styles should be a string!");return e},_excluded=["elementName","styles","eventListeners","className","attributes","textContent"],documentElement$1=document,createDOMElement=function(e){var t=e.elementName,r=e.styles,i=e.eventListeners,n=e.className,a=e.attributes,s=e.textContent,e=_objectWithoutProperties(e,_excluded);if("string"===t)return documentElement$1.createTextNode(s||"");var o=documentElement$1.createElement(t);return r&&o.setAttribute("style",convertStyleMapToInlineStyles(r)),i&&addEventListeners(o,i),n&&(0<(i=n.split(" ")).length?i.forEach(function(e){return o.classList.add(e)}):o.classList.add(n)),a&&Object.entries(a).forEach(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];o.setAttribute(e,t)}),s&&(o.textContent=s),0<Object.keys(e).length&&Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];o[e]=t}),o},isErrorState=function(e){return[PLAYBACK_ERROR,LOADING_ERROR].includes(e)},mouseCoords=createDOMElement({elementName:"div"}),showMouseCoords=function(e,t){var r=t.x,t=t.y;mouseCoords.innerHTML="".concat(r,", ").concat(t),mouseCoords.setAttribute("style",convertStyleMapToInlineStyles({left:"".concat(r,"px"),top:"".concat(t+20,"px"),position:"absolute","background-color":"white",padding:"3px","border-radius":"5%"})),isElementInDOM(mouseCoords)||e.currentTarget.appendChild(mouseCoords)},removeMouseCoords=function(){isElementInDOM(mouseCoords)&&mouseCoords.remove()},createVideoPlayerContainerEventListeners=function(){return function(e){var t=e.store,r=e.playerEngine,i=e.disableAllControls,n=e.controlCapabilities,e={end:function(){isErrorState(t.currentState)||i||browserDetection.isMobileOrTablet||!n.allowPlay||t.currentState===LOADING$1||t.currentState===SEEKING||(r.getActions().toggle(),t.setShowControlsTimeout())}};return _defineProperty(e,mousemove,function(e){browserDetection.isMobileOrTablet||t.currentState===SEEKING?browserDetection.isMobileOrTablet&&(e.stopPropagation(),e.preventDefault()):(t.setShowControlsTimeout(),t.showMouseCoords&&showMouseCoords(e,{x:e.pageX-e.currentTarget.offsetLeft,y:e.pageY-e.currentTarget.offsetTop}))}),_defineProperty(e,mouseout,function(){browserDetection.isMobileOrTablet||t.setShowControlsTimeout(),t.useMouseCoords&&removeMouseCoords()}),_defineProperty(e,mouseleave,function(e){e.preventDefault(),e.stopPropagation(),t.updateIsMouseOnControls(!1),t.setShowControlsTimeout(.25),t.currentState===SEEKING&&t.update({state:SEEKED})}),e}},createLoaderEventListeners=function(){return function(e){var t=e.store;return{click:function(){t.currentState===LOADING$1&&t.previousState===PLAYING&&t.update({previousState:PAUSED})}}}},linkRequests=[],handleLinkClick=function(e,t,r){var i=e.getAttribute("data-href"),n=e.getAttribute("data-method"),a=e.getAttribute("data-params"),e=e.getAttribute("data-headers"),e=e?JSON.parse(e):void 0;if(n&&i)if("OPEN"!==n&&"LEGACY"!==n){var s={url:i,method:n};if(!linkRequests.find(function(e){return e.url===s.url&&e.method===s.method})){if(linkRequests.push(s),"GET"===n)return void fetch(i,{headers:e});if("POST"===n||"PUT"===n)return void fetch(i,{method:n,body:a,headers:e})}}else{try{t.getActions().pause(),r.setShowControlsTimeout()}catch(e){}window.open(i)}},createLinkEventListeners=function(){return function(e){var r=e.store,i=e.playerEngine,n=e.onElementClicked;return{end:function(e){var t;e.stopPropagation(),e.preventDefault(),n&&(t=(t=e.currentTarget.getAttribute("data-layer-id")).slice(t.lastIndexOf(".")+1),n(t,r.currentTime)),handleLinkClick(e.currentTarget,i,r)}}}},handleTriggerEvent=function(e,t,r){var i;"click"===e.getAttribute("data-triggerevent")&&((i=e.getAttribute("data-triggerstate"))&&t.layerStates.addLayerState(i),0<=(i=e.getAttribute("data-trigger-setcurrenttime"))&&(r.getActions().setCurrentTime(i),e=e.getAttribute("data-trigger-playeraction"),r.getActions().pause(),"pause"===e?r.getActions().pause():r.getActions().play()))},createTriggerEventListeners=function(){return function(e){var r=e.store,i=e.playerEngine,n=e.onElementClicked;return{end:function(e){var t;e.stopPropagation(),e.preventDefault(),n&&(t=(t=e.currentTarget.getAttribute("data-layer-id")).slice(t.lastIndexOf(".")+1),n(t,r.currentTime)),handleTriggerEvent(e.currentTarget,r,i),handleLinkClick(e.currentTarget,i,r)}}}},createLayerContainerEventListeners=function(){return function(e){var t=e.store;return _defineProperty({},endEvent,function(e){browserDetection.isMobileOrTablet&&!t.controls.showControls&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),t.setShowControlsTimeout())})}},eventListeners=function(){return{createControlsEventListeners:createControlsEventListeners(),createWindowEventListeners:createGlobalEventListeners(),createOverlayControlsEventListeners:createOverlayControlsEventListeners(),createVideoEventListeners:createVideoEventListeners(),createVideoPlayerContainerEventListeners:createVideoPlayerContainerEventListeners(),createLoaderEventListeners:createLoaderEventListeners(),createLinkEventListeners:createLinkEventListeners(),createTriggerEventListeners:createTriggerEventListeners(),createLayerContainerEventListeners:createLayerContainerEventListeners()}},handler=function(e){return function(t){return e.some(function(e){return e(t)})}},logger=function(e){var t=e.useLogger,r=void 0!==t&&t,i=e.label,e=e.collapsed,n=void 0!==e&&e;return function(e,t){(r||window.useVideoEngineLogger)&&(n?console.groupCollapsed("".concat(i," - ").concat(e)):console.group("".concat(i," - ").concat(e)),console.log(t),console.groupEnd())}},hasHandled=!0,hasNotHandled=!1,handlePlayFromEnd=function(e){var a=e.logger,s=e.videoController,o=e.store,l=e.animation,u=e.update;return function(e){var t=e.currentTime,r=e.duration,i=e.isVideoInTimeRange,n=e.isVideoReady,e=e.hasVideo;return r<=t?(a("handlePlayFromEnd",{currentTime:t,duration:r,isVideoInTimeRange:i,isVideoReady:n}),e&&r<=t&&s.setCurrentTime(0),e&&i?s.playVideo().then(function(e){o.update({state:PLAYING,currentTime:e,startTime:Date.now()-1e3*e}),l.continueAnimation(u)}):(o.update({state:PLAYING,currentTime:t=r<=t?0:t,startTime:Date.now()-1e3*t}),l.startAnimation(u)),hasHandled):hasNotHandled}},adjustStateTimes=function(e,t){t=e+t;return{currentTime:t,startTime:Date.now()-1e3*t}},handlePlayVideo=function(e){var n=e.logger,a=e.videoController,s=e.store,o=e.animation,l=e.update;return function(e){var t=e.currentTime,r=e.videoStartOffsetTime,i=e.isVideoInTimeRange,e=e.isVideoReady;return i&&e&&a.playVideo().then(function(e){e=adjustStateTimes(e,r);return s.update(_objectSpread2({state:PLAYING},e)),n("handlePlayVideo",{currentTime:t,videoStartOffsetTime:r,adjustedStateTimes:e}),o.startAnimation(l),hasHandled}),hasNotHandled}},handlePlayLoadingVideo=function(e){var r=e.logger,i=e.store,n=e.animation,a=e.update;return function(e){var t=e.isVideoInTimeRange,e=e.isVideoReady;return t&&!e?(i.update({state:LOADING$1}),r("handlePlayLoadingVideo",{isVideoInTimeRange:t,isVideoReady:e}),n.startAnimation(a),hasHandled):hasNotHandled}},handlePlayWithoutVideo=function(e){var i=e.logger,n=e.store,a=e.animation,s=e.update;return function(e){var t=e.state,r=e.currentTime,e=e.isVideoInTimeRange;if(e||t===LAYER_LOADING)return hasNotHandled;t=Date.now()-1e3*r;return i("handlePlayWithoutVideo",{currentTime:r,startTime:t,isVideoInTimeRange:e}),n.update({state:PLAYING,startTime:t}),a.startAnimation(s),hasHandled}},createPlay=function(e){var a=e.onPlay,s=e.videoController,o=e.store,t=e.animation,r=e.update,e=e.useLogger,e=logger({useLogger:e,label:"VideoPlayerEngine - play"}),l=null,u=!1,l={videoController:s,store:o,animation:t,update:r,logger:e};return function(){var e,t=o.currentState,r=o.currentTime,i=o.duration,n=o.videoStartOffsetTime;t!==INITIALISING&&t!==LOADING$1&&t!==PLAYING&&(e=Promise.resolve(),(t===READY&&0<n||!u)&&(e=s.preloadVideo(),u=!0),e.then(function(){a(o.currentTime>=o.duration?0:o.currentTime),handler([handlePlayFromEnd(l),handlePlayVideo(l),handlePlayLoadingVideo(l),handlePlayWithoutVideo(l)])(_objectSpread2({currentState:t,currentTime:r,duration:i,videoStartOffsetTime:n},s.getVideoData(r)))})),o.setShowControlsTimeout()}},handleAutoLoop=function(e){var a=e.logger,s=e.animation,o=e.store,l=e.videoController,u=e.update;return function(e){var t=e.autoLoop,r=e.duration,i=e.currentTime,n=e.hasVideo,e=e.isVideoInTimeRange;return t&&r<=i?(a("handleAutoLoop",{autoLoop:t,duration:r,currentTime:i}),n&&r<=i&&l.setCurrentTime(0),n&&e?l.playVideo().then(function(e){o.update({state:PLAYING,currentTime:e,startTime:Date.now()-1e3*e}),s.continueAnimation(u)}):(o.update({state:PLAYING,currentTime:i=r<=i?0:i,startTime:Date.now()-1e3*i}),s.startAnimation(u)),hasHandled):hasNotHandled}},handleFinished=function(e){var r=e.logger,i=e.store,n=e.videoController;return function(e){var t=e.currentTime,e=e.duration;return e<=t?(r("handleFinished",{currentTime:t,duration:e}),n.pauseVideo(),i.update({state:PAUSED,currentTime:e}),n.onVideoEnd(),hasHandled):hasNotHandled}},handleLoadingState=function(e){var n=e.videoController,a=e.store,s=e.animation,o=e.update,l=e.logger;return function(e){var t=e.isVideoReady,r=e.isVideoInTimeRange,i=e.currentTime,e=e.state;if(t||!r||e===SEEKING||e===LAYER_LOADING)return t||r||e===PLAYING?hasNotHandled:(s.continueAnimation(o),hasHandled);e=Date.now()-1e3*i;return l("handleLoadingState",{isVideoReady:t,isVideoInTimeRange:r,startTime:e}),n.pauseVideo(),n.setCurrentTime(i),a.setLoadingStartTime(),a.update({state:LOADING$1,startTime:e}),s.continueAnimation(o),hasHandled}},handlePlayVideo$1=function(e){var o=e.store,l=e.videoController,u=e.logger,c=e.animation,h=e.update;return function(e){var t=e.isVideoInTimeRange,r=e.isVideoPlaying,i=e.isVideoReady,n=e.videoStartOffsetTime,a=e.state,s=e.hasVideoEnded;return!r&&t&&i&&a===PLAYING&&!s?(l.playVideo().then(function(e){e=adjustStateTimes(e,n);u("handlePlayVideo",_objectSpread2({isVideoPlaying:r,isVideoInTimeRange:t,isVideoReady:i,state:a,hasVideoEnded:s},e)),o.update(_objectSpread2({state:PLAYING},e)),c.continueAnimation(h)}),hasHandled):hasNotHandled}},handlePlayVideoAfterLoading=function(e){var s=e.videoController,o=e.logger,l=e.store,u=e.animation,c=e.update;return function(e){e.currentTime;var t=e.isVideoInTimeRange,r=e.isVideoPlaying,i=e.isVideoReady,n=e.videoStartOffsetTime,a=e.state,e=e.previousState;return!r&&t&&i&&a!==PAUSED&&a!==SEEKING&&a!==LAYER_LOADING&&a===LOADING$1&&e!==PAUSED&&e!==SEEKING?(s.playVideo().then(function(e){e=adjustStateTimes(e,n);o("handlePlayVideoAfterLoading",_objectSpread2({isVideoPlaying:r,isVideoInTimeRange:t,isVideoReady:i,state:a},e)),l.update(_objectSpread2({state:PLAYING},e)),u.continueAnimation(c)}),hasHandled):t&&r&&!i||e!==PAUSED&&e!==SEEKING||a!==LOADING$1?t||e!==PLAYING||a!==LOADING$1?a===LAYER_LOADING?(u.continueAnimation(c),hasHandled):hasNotHandled:(l.update({state:PLAYING}),u.continueAnimation(c),hasHandled):(l.update({state:e===PAUSED?PAUSED:PLAYING}),u.continueAnimation(c),hasHandled)}},handlePlayingState=function(e){var s=e.store,o=e.logger,l=e.animation,u=e.update;return function(e){var t=e.state,r=e.videoCurrentTime,i=e.videoStartOffsetTime,n=e.isVideoPlaying,a=e.startTime;if(t!==PLAYING)return hasNotHandled;e={},e=n?_objectSpread2({},adjustStateTimes(r,i)):{currentTime:(Date.now()-a)/1e3};return s.update(e),o("handlePlayingState",_objectSpread2({state:t,isVideoPlaying:n,videoStartOffsetTime:i,startTime:a},e)),l.continueAnimation(u),hasHandled}},_excluded$1=["currentTime","duration"],createUpdate=function(e){function o(e){var t=e.currentTime,r=e.duration,i=_objectWithoutProperties(e,_excluded$1);if(t<=r){c("handleCurrentTimeLessThanOrEqualDuration",{currentTime:t,duration:r});e=t/a;return s<e&&1<e-s?(n(t),s=Math.floor(e)):e<s&&(s=0),handler([handlePlayVideoAfterLoading(h),handlePlayVideo$1(h),handleLoadingState(h),handlePlayingState(h)])(_objectSpread2({currentTime:t,duration:r},i))}return hasNotHandled}var n=e.onProgress,a=e.progressInterval,l=e.videoController,u=e.store,t=e.animation,e=e.useLogger,c=logger({useLogger:e,label:"VideoPlayerEngine - update"}),h=null,s=0,e=function(){var e=u.currentTime,t=u.duration,r=u.autoLoop,i=u.state,n=u.previousState,a=u.startTime,s=u.videoStartOffsetTime,e=_objectSpread2({loadingStartTime:u.loadingStartTime,currentTime:e,startTime:a,duration:t,autoLoop:r,state:i,previousState:n,videoStartOffsetTime:s},l.getVideoData(e));c("update",e),handler([handleAutoLoop(h),handleFinished(h),o])(e)},h={logger:c,videoController:l,store:u,animation:t,update:e};return e},animation=function e(){var t=null;return{cancelAnimation:function(){return null!==t&&(cancelAnimationFrame(e),!(t=null))},startAnimation:function(e){t=requestAnimationFrame(e)},continueAnimation:function(e){t=requestAnimationFrame(e)},isAnimationRunning:function(){return null!==t},animation:t}},createVideoPlayerEngine=function(){function i(){var e=m.currentState;S(),e===PLAYING&&(m.update({state:PAUSED,startTime:Date.now()}),v.onPause(m.currentTime)),m.clearShowControlsTimeout()}function e(){(m.currentState!==PLAYING?b:i)()}function t(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];request(y.getElement(),e,t)}function r(e){exit(y.getElement(),e)}function n(){m.isFullScreen?r(function(){v.onFullScreenToggle(!1),m.updateMeasurements({isFullScreen:!1})}):t(function(){v.onFullScreenToggle(!0),m.updateMeasurements({isFullScreen:!0})},m.mobileLandscapeOnFullscreen)}function a(e){var t,r;0<=(r=parseFloat(e))&&r<m.duration&&((t=m.currentState)===PLAYING&&i(),g.setCurrentTime(e),m.update({state:(r=t)===READY?PAUSED:r,currentTime:e}),t===PLAYING&&b())}function s(){return m.currentTime}function o(e){m.updateAutoLoop(!!e)}function l(){return y.getOffsetLeft()}function u(){var e=!m.muted;m.update({muted:e}),g.setMuted(e)}function c(e){m.update({volume:e}),g.setVolume(e)}function h(){var e=!m.showSubtitles;m.update({showSubtitles:e})}var d,f,p=null,m=null,g=null,y=null,v={onPlay:function(e){return null},onPause:function(e){return null},onFullScreenToggle:function(e){return null},onProgress:function(e){return null}},b=function(){},S=function(){m.currentState!==PAUSED&&p.isAnimationRunning()&&(p.cancelAnimation(),g.pauseVideo())};return{setProps:function(e){m=e.store,g=e.videoController,y=e.videoPlayerContainer,d=e.progressInterval,e.onPlay&&(v.onPlay=e.onPlay),e.onProgress&&(v.onProgress=e.onProgress),e.onPause&&(v.onPause=e.onPause),e.onFullScreenToggle&&(v.onFullScreenToggle=e.onFullScreenToggle),p=animation(),f=createUpdate({onProgress:v.onProgress,progressInterval:d,videoController:g,store:m,animation:p,useLogger:e.useLogger}),b=createPlay({onPlay:v.onPlay,videoController:g,store:m,animation:p,update:f,useLogger:e.useLogger})},getActions:function(){return{play:b,toggle:e,pause:i,setCurrentTime:a,requestFullScreen:t,exitFullScreen:r,toggleFullScreen:n,getVideoPlayerContainerOffsetLeft:l,cancelAnimation:S,toggleMuted:u,setAutoLoop:o,getCurrentTime:s,changeVolume:c,toggleSubtitles:h}}}},runtime_1=createCommonjsModule(function(t){t=function(s){var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r,i){var n,a,s,o,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),i=new E(i||[]);return t._invoke=(n=e,a=r,s=i,o=h,function(e,t){if(o===f)throw new Error("Generator is already running");if(o===p){if("throw"===e)throw t;return _()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var i=function e(t,r){var i=t.iterator[r.method];if(i===l){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(i,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;i=i.arg;if(!i)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m;{if(!i.done)return i;r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l)}r.delegate=null;return m}(r,s);if(i){if(i===m)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===h)throw o=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=f;i=c(n,a,s);if("normal"===i.type){if(o=s.done?p:d,i.arg!==m)return{value:i.arg,done:s.done}}else"throw"===i.type&&(o=p,s.method="throw",s.arg=i.arg)}}),t}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}s.wrap=o;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function a(){}function y(){}var v={};v[i]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(D([])));t&&t!==e&&u.call(t,i)&&(v=t);var b=y.prototype=g.prototype=Object.create(v);function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function M(s,o){var t;this._invoke=function(r,i){function e(){return new o(function(e,t){!function t(e,r,i,n){e=c(s[e],s,r);if("throw"!==e.type){var a=e.arg;return(r=a.value)&&"object"==typeof r&&u.call(r,"__await")?o.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):o.resolve(r).then(function(e){a.value=e,i(a)},function(e){return t("throw",e,i,n)})}n(e.arg)}(r,i,e,t)})}return t=t?t.then(e,e):e()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e};return e.next=e}}return{next:_}}function _(){return{value:l,done:!0}}return(a.prototype=b.constructor=y).constructor=a,y[n]=a.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},S(M.prototype),M.prototype[r]=function(){return this},s.AsyncIterator=M,s.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var a=new M(o(e,t,r,i),n);return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(b),b[n]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(r){var e,i=[];for(e in r)i.push(e);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=D,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return a.type="throw",a.arg=r,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],a=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var s=u.call(n,"catchLoc"),o=u.call(n,"finallyLoc");if(s&&o){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var a=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i,n=r.completion;return"throw"===n.type&&(i=n.arg,A(r)),i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:D(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),m}},s}(t.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),regenerator=runtime_1,createVideoController=function(e){function t(){return!l||!l.paused()&&!l.ended()}function r(){return!l||3<l.readyState()}function i(){return!!l}function n(){return!!l.hasEnded()}function a(e){if(u<=e){if(l){var t=l.duration();if(t&&0<t)return l.currentTime()<=t&&e<=t+u}return e<c&&u<=e}return!1}function s(){l&&t()&&l.pause()}function o(){return l?l.currentTime():0}var l,u,c,h=function(){var e=_asyncToGenerator(regenerator.mark(function e(){return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&!t())return e.abrupt("return",l.play());e.next=2;break;case 2:return e.abrupt("return",Promise.resolve(0));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return{isVideoReady:r,isVideoInTimeRange:a,preloadVideo:function(){return l?l.preload():Promise.resolve()},playVideo:h,pauseVideo:s,setCurrentTime:function(e){var t=e-u;t<0&&(t=0),l&&l.setCurrentTime(t,e)},updateCurrentTime:function(e){var t,r=e-u;r<0&&(r=0),l&&(t=l.paused(),s(),l.setCurrentTime(r,e),t||l.play())},getCurrentTime:o,setFullScreen:function(){l&&l.setFullScreen()},removeFullScreen:function(){l&&l.removeFullScreen()},isVideoPlaying:t,hasVideo:i,hasVideoEnded:n,getVideoData:function(e){return i()?{isVideoInTimeRange:a(e),isVideoPlaying:t(),isVideoReady:r(),videoCurrentTime:o(),hasVideoEnded:n(),hasVideo:i()}:{}},reloadVideo:function(){var e=l.currentTime(),t=e+u;return l.load(),l.setCurrentTime(e,t),h()},setMuted:function(e){l.setMuted(e)},setVolume:function(e){l.setVolume(e)},onVideoEnd:e,setProps:function(e){l=e.video,u=e.startOffsetTime,e.endOffsetTime,c=e.videoDurationFromJson}}},documentElement$2=document,attachToDOM=function(e,t){e="string"==typeof e?documentElement$2.getElementById(e):e;e.appendChild(t)},createLoadingPromise=function(){var t=null;return{resolve:function(){t?t():t=Promise.resolve()},promise:new Promise(function(e){t=e})}},extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}}}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,a=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=a.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}var OBFUSCATED_ERROR="An invariant failed, however the error is obfuscated because this is a production build.",EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};function getNextId(){return++globalState.mobxGuid}function fail(e){throw invariant(!1,e),"X"}function invariant(e,t){if(!e)throw new Error("[mobx] "+(t||OBFUSCATED_ERROR))}function once(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}Object.freeze(EMPTY_OBJECT);var noop=function(){};function unique(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;e=Object.getPrototypeOf(e);return e===Object.prototype||null===e}function addHiddenProp(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function addHiddenFinalProp(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function isPropertyConfigurable(e,t){t=Object.getOwnPropertyDescriptor(e,t);return!t||!1!==t.configurable&&!1!==t.writable}function createInstanceofPredicate(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(e){return isObject(e)&&!0===e[r]}}function isES6Map(e){return e instanceof Map}function isES6Set(e){return e instanceof Set}function getPlainObjectKeys(t){var e,r=new Set;for(e in t)r.add(e);return Object.getOwnPropertySymbols(t).forEach(function(e){Object.getOwnPropertyDescriptor(t,e).enumerable&&r.add(e)}),Array.from(r)}function stringifyKey(e){return(e&&e.toString?e:new String(e)).toString()}function getMapLikeKeys(e){return isPlainObject(e)?Object.keys(e):Array.isArray(e)?e.map(function(e){return __read(e,1)[0]}):isES6Map(e)||isObservableMap(e)?Array.from(e.keys()):fail("Cannot get keys from '"+e+"'")}function toPrimitive(e){return null===e?null:"object"==typeof e?""+e:e}var $mobx=Symbol("mobx administration"),Atom=function(){function e(e){void 0===e&&(e="Atom@"+getNextId()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=IDerivationState.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.reportObserved=function(){return reportObserved(this)},e.prototype.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},e.prototype.toString=function(){return this.name},e}(),isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(e,t,r){void 0===t&&(t=noop),void 0===r&&(r=noop);e=new Atom(e);return t!==noop&&onBecomeObserved(e,t),r!==noop&&onBecomeUnobserved(e,r),e}function identityComparer(e,t){return e===t}function structuralComparer(e,t){return deepEqual(e,t)}function shallowComparer(e,t){return deepEqual(e,t,1)}function defaultComparer(e,t){return Object.is(e,t)}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer},mobxDidRunLazyInitializersSymbol=Symbol("mobx did run lazy initializers"),mobxPendingDecorators=Symbol("mobx pending decorators"),enumerableDescriptorCache={},nonEnumerableDescriptorCache={};function createPropertyInitializerDescriptor(t,e){var r=e?enumerableDescriptorCache:nonEnumerableDescriptorCache;return r[t]||(r[t]={configurable:!0,enumerable:e,get:function(){return initializeInstance(this),this[t]},set:function(e){initializeInstance(this),this[t]=e}})}function initializeInstance(e){var t,r;if(!0!==e[mobxDidRunLazyInitializersSymbol]){var i=e[mobxPendingDecorators];if(i){addHiddenProp(e,mobxDidRunLazyInitializersSymbol,!0);var n=__spread(Object.getOwnPropertySymbols(i),Object.keys(i));try{for(var a=__values(n),s=a.next();!s.done;s=a.next()){var o=i[s.value];o.propertyCreator(e,o.prop,o.descriptor,o.decoratorTarget,o.decoratorArguments)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}}}function createPropDecorator(a,s){return function(){function e(e,t,r,i){return!0===i?(s(e,t,r,e,n),null):(Object.prototype.hasOwnProperty.call(e,mobxPendingDecorators)||(i=e[mobxPendingDecorators],addHiddenProp(e,mobxPendingDecorators,__assign({},i))),e[mobxPendingDecorators][t]={prop:t,propertyCreator:s,descriptor:r,decoratorTarget:e,decoratorArguments:n},createPropertyInitializerDescriptor(t,a))}var n;return quacksLikeADecorator(arguments)?(n=EMPTY_ARRAY,e.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),e)}}function quacksLikeADecorator(e){return(2===e.length||3===e.length)&&("string"==typeof e[1]||"symbol"==typeof e[1])||4===e.length&&!0===e[3]}function deepEnhancer(e,t,r){return isObservable(e)?e:Array.isArray(e)?observable.array(e,{name:r}):isPlainObject(e)?observable.object(e,void 0,{name:r}):isES6Map(e)?observable.map(e,{name:r}):isES6Set(e)?observable.set(e,{name:r}):e}function shallowEnhancer(e,t,r){return null==e||isObservableObject(e)||isObservableArray(e)||isObservableMap(e)||isObservableSet(e)?e:Array.isArray(e)?observable.array(e,{name:r,deep:!1}):isPlainObject(e)?observable.object(e,void 0,{name:r,deep:!1}):isES6Map(e)?observable.map(e,{name:r,deep:!1}):isES6Set(e)?observable.set(e,{name:r,deep:!1}):fail(!1)}function referenceEnhancer(e){return e}function refStructEnhancer(e,t,r){return deepEqual(e,t)?t:e}function createDecoratorForEnhancer(a){invariant(a);var e=createPropDecorator(!0,function(e,t,r,i,n){r=r?r.initializer?r.initializer.call(e):r.value:void 0;asObservableObject(e).addObservableProp(t,r,a)}),e=e;return e.enhancer=a,e}var defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function asCreateObservableOptions(e){return null==e?defaultCreateObservableOptions:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(defaultCreateObservableOptions);var deepDecorator=createDecoratorForEnhancer(deepEnhancer),shallowDecorator=createDecoratorForEnhancer(shallowEnhancer),refDecorator=createDecoratorForEnhancer(referenceEnhancer),refStructDecorator=createDecoratorForEnhancer(refStructEnhancer);function getEnhancerFromOptions(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?referenceEnhancer:deepEnhancer}function createObservable(e,t,r){if("string"==typeof t||"symbol"==typeof t)return deepDecorator.apply(null,arguments);if(isObservable(e))return e;t=isPlainObject(e)?observable.object(e,t,r):Array.isArray(e)?observable.array(e,t):isES6Map(e)?observable.map(e,t):isES6Set(e)?observable.set(e,t):e;if(t!==e)return t;fail(!1)}var observableFactories={box:function(e,t){2<arguments.length&&incorrectlyUsedAsDecorator("box");t=asCreateObservableOptions(t);return new ObservableValue(e,getEnhancerFromOptions(t),t.name,!0,t.equals)},array:function(e,t){2<arguments.length&&incorrectlyUsedAsDecorator("array");t=asCreateObservableOptions(t);return createObservableArray(e,getEnhancerFromOptions(t),t.name)},map:function(e,t){2<arguments.length&&incorrectlyUsedAsDecorator("map");t=asCreateObservableOptions(t);return new ObservableMap(e,getEnhancerFromOptions(t),t.name)},set:function(e,t){2<arguments.length&&incorrectlyUsedAsDecorator("set");t=asCreateObservableOptions(t);return new ObservableSet(e,getEnhancerFromOptions(t),t.name)},object:function(e,t,r){"string"==typeof t&&incorrectlyUsedAsDecorator("object");var i=asCreateObservableOptions(r);if(!1===i.proxy)return extendObservable({},e,t,i);r=getDefaultDecoratorFromObjectOptions(i),i=createDynamicObservableObject(extendObservable({},void 0,void 0,i));return extendObservableObjectWithProperties(i,e,t,r),i},ref:refDecorator,shallow:shallowDecorator,deep:deepDecorator,struct:refStructDecorator},observable=createObservable;function incorrectlyUsedAsDecorator(e){fail("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(observableFactories).forEach(function(e){return observable[e]=observableFactories[e]});var computedDecorator=createPropDecorator(!1,function(e,t,r,i,n){var a=r.get,r=r.set,n=n[0]||{};asObservableObject(e).addComputedProp(e,t,__assign({get:a,set:r,context:e},n))}),computedStructDecorator=computedDecorator({equals:comparer.structural}),computed=function(e,t,r){if("string"==typeof t)return computedDecorator.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return computedDecorator.apply(null,arguments);var i="object"==typeof t?t:{};return i.get=e,i.set="function"==typeof t?t:i.set,i.name=i.name||e.name||"",new ComputedValue(i)},IDerivationState,TraceMode;computed.struct=computedStructDecorator,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(IDerivationState=IDerivationState||{}),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(TraceMode=TraceMode||{});var CaughtException=function(e){this.cause=e};function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(e){switch(e.dependenciesState){case IDerivationState.UP_TO_DATE:return!1;case IDerivationState.NOT_TRACKING:case IDerivationState.STALE:return!0;case IDerivationState.POSSIBLY_STALE:for(var t=allowStateReadsStart(!0),r=untrackedStart(),i=e.observing,n=i.length,a=0;a<n;a++){var s=i[a];if(isComputedValue(s)){if(globalState.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return untrackedEnd(r),allowStateReadsEnd(t),!0}if(e.dependenciesState===IDerivationState.STALE)return untrackedEnd(r),allowStateReadsEnd(t),!0}}return changeDependenciesStateTo0(e),untrackedEnd(r),allowStateReadsEnd(t),!1}}function checkIfStateModificationsAreAllowed(e){e=0<e.observers.size;0<globalState.computationDepth&&e&&fail(!1),globalState.allowStateChanges||!e&&"strict"!==globalState.enforceActions||fail(!1)}function trackDerivedFunction(e,t,r){var i=allowStateReadsStart(!0);changeDependenciesStateTo0(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++globalState.runId;var n,a=globalState.trackingDerivation;if(globalState.trackingDerivation=e,!0===globalState.disableErrorBoundaries)n=t.call(r);else try{n=t.call(r)}catch(e){n=new CaughtException(e)}return globalState.trackingDerivation=a,bindDependencies(e),allowStateReadsEnd(i),n}function bindDependencies(e){for(var t,r=e.observing,i=e.observing=e.newObserving,n=IDerivationState.UP_TO_DATE,a=0,s=e.unboundDepsCount,o=0;o<s;o++)0===(t=i[o]).diffValue&&(t.diffValue=1,a!==o&&(i[a]=t),a++),t.dependenciesState>n&&(n=t.dependenciesState);for(i.length=a,e.newObserving=null,s=r.length;s--;)0===(t=r[s]).diffValue&&removeObserver(t,e),t.diffValue=0;for(;a--;)1===(t=i[a]).diffValue&&(t.diffValue=0,addObserver(t,e));n!==IDerivationState.UP_TO_DATE&&(e.dependenciesState=n,e.onBecomeStale())}function clearObserving(e){var t=e.observing;e.observing=[];for(var r=t.length;r--;)removeObserver(t[r],e);e.dependenciesState=IDerivationState.NOT_TRACKING}function untracked(e){var t=untrackedStart();try{return e()}finally{untrackedEnd(t)}}function untrackedStart(){var e=globalState.trackingDerivation;return globalState.trackingDerivation=null,e}function untrackedEnd(e){globalState.trackingDerivation=e}function allowStateReadsStart(e){var t=globalState.allowStateReads;return globalState.allowStateReads=e,t}function allowStateReadsEnd(e){globalState.allowStateReads=e}function changeDependenciesStateTo0(e){if(e.dependenciesState!==IDerivationState.UP_TO_DATE){e.dependenciesState=IDerivationState.UP_TO_DATE;for(var t=e.observing,r=t.length;r--;)t[r].lowestObserverState=IDerivationState.UP_TO_DATE}}var currentActionId=0,nextActionId=1,functionNameDescriptor=Object.getOwnPropertyDescriptor(function(){},"name"),isFunctionNameConfigurable=functionNameDescriptor&&functionNameDescriptor.configurable;function createAction(e,t,r){function i(){return executeAction(e,t,r||this,arguments)}return i.isMobxAction=!0,i}function executeAction(e,t,r,i){var n=_startAction();try{return t.apply(r,i)}catch(e){throw n.error=e}finally{_endAction(n)}}function _startAction(e,t,r){var i=isSpyEnabled(),n=untrackedStart();startBatch();i={prevDerivation:n,prevAllowStateChanges:allowStateChangesStart(!0),prevAllowStateReads:allowStateReadsStart(!0),notifySpy:i,startTime:0,actionId:nextActionId++,parentActionId:currentActionId};return currentActionId=i.actionId,i}function _endAction(e){currentActionId!==e.actionId&&fail("invalid action stack. did you forget to finish an action?"),currentActionId=e.parentActionId,void 0!==e.error&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(e.prevAllowStateChanges),allowStateReadsEnd(e.prevAllowStateReads),endBatch(),untrackedEnd(e.prevDerivation),e.notifySpy,globalState.suppressReactionErrors=!1}function allowStateChangesStart(e){var t=globalState.allowStateChanges;return globalState.allowStateChanges=e,t}function allowStateChangesEnd(e){globalState.allowStateChanges=e}var ObservableValue=function(s){function e(e,t,r,i,n){void 0===r&&(r="ObservableValue@"+getNextId()),void 0===i&&(i=!0),void 0===n&&(n=comparer.default);var a=s.call(this,r)||this;return a.enhancer=t,a.name=r,a.equals=n,a.hasUnreportedChange=!1,a.value=t(e,void 0,r),i&&isSpyEnabled(),a}return __extends(e,s),e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.set=function(e){this.value;(e=this.prepareNewValue(e))!==globalState.UNCHANGED&&(isSpyEnabled(),this.setNewValue(e))},e.prototype.prepareNewValue=function(e){if(checkIfStateModificationsAreAllowed(this),hasInterceptors(this)){var t=interceptChange(this,{object:this,type:"update",newValue:e});if(!t)return globalState.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?globalState.UNCHANGED:e},e.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:"update",object:this,newValue:e,oldValue:t})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(e){return registerInterceptor(this,e)},e.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),registerListener(this,e)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return toPrimitive(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(Atom),isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue),ComputedValue=function(){function e(e){this.dependenciesState=IDerivationState.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=IDerivationState.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.value=new CaughtException(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=TraceMode.NONE,invariant(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+getNextId(),e.set&&(this.setter=createAction(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?comparer.structural:comparer.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){propagateMaybeChanged(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.get=function(){this.isComputing&&fail("Cycle detected in computation "+this.name+": "+this.derivation),0!==globalState.inBatch||0!==this.observers.size||this.keepAlive?(reportObserved(this),shouldCompute(this)&&this.trackAndCompute()&&propagateChangeConfirmed(this)):shouldCompute(this)&&(this.warnAboutUntrackedRead(),startBatch(),this.value=this.computeValue(!1),endBatch());var e=this.value;if(isCaughtException(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(isCaughtException(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){invariant(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else invariant(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===IDerivationState.NOT_TRACKING,r=this.computeValue(!0),e=t||isCaughtException(e)||isCaughtException(r)||!this.equals(e,r);return e&&(this.value=r),e},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,globalState.computationDepth++,e)t=trackDerivedFunction(this,this.derivation,this.scope);else if(!0===globalState.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new CaughtException(e)}return globalState.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(clearObserving(this),this.value=void 0)},e.prototype.observe=function(r,i){var n=this,a=!0,s=void 0;return autorun(function(){var e,t=n.get();a&&!i||(e=untrackedStart(),r({type:"update",object:n,newValue:t,oldValue:s}),untrackedEnd(e)),a=!1,s=t})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return toPrimitive(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),MobXGlobals=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},mockGlobal={};function getGlobal(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:mockGlobal}var canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var e=getGlobal();return 0<e.__mobxInstanceCount&&!e.__mobxGlobals&&(canMergeGlobalState=!1),(canMergeGlobalState=e.__mobxGlobals&&e.__mobxGlobals.version!==(new MobXGlobals).version?!1:canMergeGlobalState)?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||fail("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new MobXGlobals)}();function isolateGlobalState(){(globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&fail("isolateGlobalState should be called before MobX is running any reactions"),isolateCalled=!0,canMergeGlobalState&&(0==--getGlobal().__mobxInstanceCount&&(getGlobal().__mobxGlobals=void 0),globalState=new MobXGlobals)}function addObserver(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function removeObserver(e,t){e.observers.delete(t),0===e.observers.size&&queueForUnobservation(e)}function queueForUnobservation(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,globalState.pendingUnobservations.push(e))}function startBatch(){globalState.inBatch++}function endBatch(){if(0==--globalState.inBatch){runReactions();for(var e=globalState.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof ComputedValue&&r.suspend())}globalState.pendingUnobservations=[]}}function reportObserved(e){var t=globalState.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,(t.newObserving[t.unboundDepsCount++]=e).isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&0<globalState.inBatch&&queueForUnobservation(e),!1)}function propagateChanged(t){t.lowestObserverState!==IDerivationState.STALE&&(t.lowestObserverState=IDerivationState.STALE,t.observers.forEach(function(e){e.dependenciesState===IDerivationState.UP_TO_DATE&&(e.isTracing!==TraceMode.NONE&&logTraceInfo(e,t),e.onBecomeStale()),e.dependenciesState=IDerivationState.STALE}))}function propagateChangeConfirmed(t){t.lowestObserverState!==IDerivationState.STALE&&(t.lowestObserverState=IDerivationState.STALE,t.observers.forEach(function(e){e.dependenciesState===IDerivationState.POSSIBLY_STALE?e.dependenciesState=IDerivationState.STALE:e.dependenciesState===IDerivationState.UP_TO_DATE&&(t.lowestObserverState=IDerivationState.UP_TO_DATE)}))}function propagateMaybeChanged(t){t.lowestObserverState===IDerivationState.UP_TO_DATE&&(t.lowestObserverState=IDerivationState.POSSIBLY_STALE,t.observers.forEach(function(e){e.dependenciesState===IDerivationState.UP_TO_DATE&&(e.dependenciesState=IDerivationState.POSSIBLY_STALE,e.isTracing!==TraceMode.NONE&&logTraceInfo(e,t),e.onBecomeStale())}))}function logTraceInfo(e,t){var r;console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===TraceMode.BREAK&&(r=[],printDepTree(getDependencyTree(e),r,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ComputedValue?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")())}function printDepTree(e,t,r){1e3<=t.length?t.push("(and many more)"):(t.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return printDepTree(e,t,r+1)}))}var Reaction=function(){function e(e,t,r,i){void 0===e&&(e="Reaction@"+getNextId()),void 0===i&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=IDerivationState.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+getNextId(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=TraceMode.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(startBatch(),this._isScheduled=!1,shouldCompute(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&isSpyEnabled()}catch(e){this.reportExceptionInDerivation(e)}}endBatch()}},e.prototype.track=function(e){this.isDisposed||(startBatch(),this._isRunning=!0,e=trackDerivedFunction(this,e,void 0),this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(e)&&this.reportExceptionInDerivation(e.cause),endBatch())},e.prototype.reportExceptionInDerivation=function(t){var r=this;if(this.errorHandler)this.errorHandler(t,this);else{if(globalState.disableErrorBoundaries)throw t;var e="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";globalState.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(e,t),globalState.globalReactionErrorHandlers.forEach(function(e){return e(t,r)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(startBatch(),clearObserving(this),endBatch()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[$mobx]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){trace(this,e=void 0===e?!1:e)},e}(),MAX_REACTION_ITERATIONS=100,reactionScheduler=function(e){return e()};function runReactions(){0<globalState.inBatch||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var e=globalState.pendingReactions,t=0;0<e.length;){++t===MAX_REACTION_ITERATIONS&&(console.error("Reaction doesn't converge to a stable state after "+MAX_REACTION_ITERATIONS+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),i=0,n=r.length;i<n;i++)r[i].runReaction()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(t){var r=reactionScheduler;reactionScheduler=function(e){return t(function(){return r(e)})}}function isSpyEnabled(){return!1}function spyReport(e){}function spyReportStart(e){}function spyReportEnd(e){}function spy(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function dontReassignFields(){fail(!1)}function namedActionDecorator(n){return function(e,t,r){if(r){if(r.value)return{value:createAction(n,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return createAction(n,i.call(this))}}}return actionFieldDecorator(n).apply(this,arguments)}}function actionFieldDecorator(i){return function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){},set:function(e){addHiddenProp(this,t,action(i,e))}})}}function boundActionDecorator(e,t,r,i){return!0===i?(defineBoundAction(e,t,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return defineBoundAction(this,t,r.value||r.initializer.call(this)),this[t]},set:dontReassignFields}:{enumerable:!1,configurable:!0,set:function(e){defineBoundAction(this,t,e)},get:function(){}}}var action=function(e,t,r,i){return 1===arguments.length&&"function"==typeof e?createAction(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?createAction(e,t):1===arguments.length&&"string"==typeof e?namedActionDecorator(e):!0!==i?namedActionDecorator(t).apply(null,arguments):void addHiddenProp(e,t,createAction(e.name||t,r.value,this))};function defineBoundAction(e,t,r){addHiddenProp(e,t,createAction(t,r.bind(e)))}function autorun(e,t){var r,i,n,a=(t=void 0===t?EMPTY_OBJECT:t)&&t.name||e.name||"Autorun@"+getNextId(),s=!t.scheduler&&!t.delay;function o(){e(n)}return(n=s?new Reaction(a,function(){this.track(o)},t.onError,t.requiresObservable):(r=createSchedulerFromOptions(t),i=!1,new Reaction(a,function(){i||(i=!0,r(function(){i=!1,n.isDisposed||n.track(o)}))},t.onError,t.requiresObservable))).schedule(),n.getDisposer()}action.bound=boundActionDecorator;var run=function(e){return e()};function createSchedulerFromOptions(t){return t.scheduler||(t.delay?function(e){return setTimeout(e,t.delay)}:run)}function onBecomeObserved(e,t,r){return interceptHook("onBecomeObserved",e,t,r)}function onBecomeUnobserved(e,t,r){return interceptHook("onBecomeUnobserved",e,t,r)}function interceptHook(e,t,r,i){var n="function"==typeof i?getAtom(t,r):getAtom(t),a="function"==typeof i?i:r,s=e+"Listeners";return n[s]?n[s].add(a):n[s]=new Set([a]),"function"!=typeof n[e]?fail(!1):function(){var e=n[s];e&&(e.delete(a),0===e.size&&delete n[s])}}function configure(e){var t=e.enforceActions,r=e.computedRequiresReaction,i=e.computedConfigurable,n=e.disableErrorBoundaries,a=e.reactionScheduler,s=e.reactionRequiresObservable,o=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&isolateGlobalState(),void 0!==t){var l=void 0;switch(t){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:fail("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}globalState.enforceActions=l,globalState.allowStateChanges=!0!==l&&"strict"!==l}void 0!==r&&(globalState.computedRequiresReaction=!!r),void 0!==s&&(globalState.reactionRequiresObservable=!!s),void 0!==o&&(globalState.observableRequiresReaction=!!o,globalState.allowStateReads=!globalState.observableRequiresReaction),void 0!==i&&(globalState.computedConfigurable=!!i),void 0!==n&&(!0===n&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),globalState.disableErrorBoundaries=!!n),a&&setReactionScheduler(a)}function extendObservable(e,t,r,i){var n=getDefaultDecoratorFromObjectOptions(i=asCreateObservableOptions(i));return initializeInstance(e),asObservableObject(e,i.name,n.enhancer),t&&extendObservableObjectWithProperties(e,t,r,n),e}function getDefaultDecoratorFromObjectOptions(e){return e.defaultDecorator||(!1===e.deep?refDecorator:deepDecorator)}function extendObservableObjectWithProperties(e,t,r,i){var n,a;startBatch();try{var s=getPlainObjectKeys(t);try{for(var o=__values(s),l=o.next();!l.done;l=o.next()){var u=l.value,c=Object.getOwnPropertyDescriptor(t,u);0;var h=r&&u in r?r[u]:c.get?computedDecorator:i;0;var d=h(e,u,c,!0);d&&Object.defineProperty(e,u,d)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}}finally{endBatch()}}function getDependencyTree(e,t){return nodeToDependencyTree(getAtom(e,t))}function nodeToDependencyTree(e){var t={name:e.name};return e.observing&&0<e.observing.length&&(t.dependencies=unique(e.observing).map(nodeToDependencyTree)),t}function _isComputed(e,t){if(null==e)return!1;if(void 0===t)return isComputedValue(e);if(!1===isObservableObject(e))return!1;if(!e[$mobx].values.has(t))return!1;t=getAtom(e,t);return isComputedValue(t)}function isComputed(e){return 1<arguments.length?fail(!1):_isComputed(e)}function _isObservable(e,t){return null!=e&&(void 0!==t?!!isObservableObject(e)&&e[$mobx].values.has(t):isObservableObject(e)||!!e[$mobx]||isAtom(e)||isReaction(e)||isComputedValue(e))}function isObservable(e){return 1!==arguments.length&&fail(!1),_isObservable(e)}function set(e,t,r){if(2!==arguments.length||isObservableSet(e))if(isObservableObject(e)){var i=e[$mobx];i.values.get(t)?i.write(t,r):i.addObservableProp(t,r,i.defaultEnhancer)}else if(isObservableMap(e))e.set(t,r);else if(isObservableSet(e))e.add(t);else{if(!isObservableArray(e))return fail(!1);invariant(0<=(t="number"!=typeof t?parseInt(t,10):t),"Not a valid index: '"+t+"'"),startBatch(),t>=e.length&&(e.length=t+1),e[t]=r,endBatch()}else{startBatch();var n=t;try{for(var a in n)set(e,a,n[a])}finally{endBatch()}}}function trace(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var i=getAtomFromArgs(e);if(!i)return fail(!1);i.isTracing===TraceMode.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled"),i.isTracing=r?TraceMode.BREAK:TraceMode.LOG}function getAtomFromArgs(e){switch(e.length){case 0:return globalState.trackingDerivation;case 1:return getAtom(e[0]);case 2:return getAtom(e[0],e[1])}}function transaction(e,t){void 0===t&&(t=void 0),startBatch();try{return e.apply(t)}finally{endBatch()}}function getAdm(e){return e[$mobx]}function isPropertyKey(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e}var objectProxyTraps={has:function(e,t){if(t===$mobx||"constructor"===t||t===mobxDidRunLazyInitializersSymbol)return!0;var r=getAdm(e);return isPropertyKey(t)?r.has(t):t in e},get:function(e,t){if(t===$mobx||"constructor"===t||t===mobxDidRunLazyInitializersSymbol)return e[t];var r=getAdm(e),i=r.values.get(t);if(i instanceof Atom){i=i.get();return void 0===i&&r.has(t),i}return isPropertyKey(t)&&r.has(t),e[t]},set:function(e,t,r){return!!isPropertyKey(t)&&(set(e,t,r),!0)},deleteProperty:function(e,t){return!!isPropertyKey(t)&&(getAdm(e).remove(t),!0)},ownKeys:function(e){return getAdm(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return fail("Dynamic observable objects cannot be frozen"),!1}};function createDynamicObservableObject(e){var t=new Proxy(e,objectProxyTraps);return e[$mobx].proxy=t}function hasInterceptors(e){return void 0!==e.interceptors&&0<e.interceptors.length}function registerInterceptor(e,t){var r=e.interceptors||(e.interceptors=[]);return r.push(t),once(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function interceptChange(e,t){var r=untrackedStart();try{for(var i=__spread(e.interceptors||[]),n=0,a=i.length;n<a&&(invariant(!(t=i[n](t))||t.type,"Intercept handlers should return nothing or a change object"),t);n++);return t}finally{untrackedEnd(r)}}function hasListeners(e){return void 0!==e.changeListeners&&0<e.changeListeners.length}function registerListener(e,t){var r=e.changeListeners||(e.changeListeners=[]);return r.push(t),once(function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)})}function notifyListeners(e,t){var r=untrackedStart();if(i=e.changeListeners){for(var i,n=0,a=(i=i.slice()).length;n<a;n++)i[n](t);untrackedEnd(r)}}var MAX_SPLICE_SIZE=1e4,arrayTraps={get:function(e,t){return t===$mobx?e[$mobx]:"length"===t?e[$mobx].getArrayLength():"number"==typeof t?arrayExtensions.get.call(e,t):"string"!=typeof t||isNaN(t)?(arrayExtensions.hasOwnProperty(t)?arrayExtensions:e)[t]:arrayExtensions.get.call(e,parseInt(t))},set:function(e,t,r){return"length"===t&&e[$mobx].setArrayLength(r),"number"==typeof t&&arrayExtensions.set.call(e,t,r),"symbol"==typeof t||isNaN(t)?e[t]=r:arrayExtensions.set.call(e,parseInt(t),r),!0},preventExtensions:function(e){return fail("Observable arrays cannot be frozen"),!1}};function createObservableArray(e,t,r,i){void 0===r&&(r="ObservableArray@"+getNextId());r=new ObservableArrayAdministration(r,t,i=void 0===i?!1:i);addHiddenFinalProp(r.values,$mobx,r);t=new Proxy(r.values,arrayTraps);return r.proxy=t,e&&e.length&&(i=allowStateChangesStart(!0),r.spliceWithArray(0,0,e),allowStateChangesEnd(i)),t}var ObservableArrayAdministration=function(){function e(r,i,e){this.owned=e,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Atom(r||"ObservableArray@"+getNextId()),this.enhancer=function(e,t){return i(e,t,r+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&0<e.length?e.map(this.dehancer):e},e.prototype.intercept=function(e){return registerInterceptor(this,e)},e.prototype.observe=function(e,t){return(t=void 0===t?!1:t)&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),registerListener(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(t<e){for(var r=new Array(e-t),i=0;i<e-t;i++)r[i]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,r){var i=this;checkIfStateModificationsAreAllowed(this.atom);var n=this.values.length;if(void 0===e?e=0:n<e?e=n:e<0&&(e=Math.max(0,n+e)),t=1===arguments.length?n-e:null==t?0:Math.max(0,Math.min(t,n-e)),void 0===r&&(r=EMPTY_ARRAY),hasInterceptors(this)){var a=interceptChange(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:r});if(!a)return EMPTY_ARRAY;t=a.removedCount,r=a.added}r=0===r.length?r:r.map(function(e){return i.enhancer(e,void 0)});a=this.spliceItemsIntoValues(e,t,r);return 0===t&&0===r.length||this.notifyArraySplice(e,r,a),this.dehanceValues(a)},e.prototype.spliceItemsIntoValues=function(e,t,r){if(r.length<MAX_SPLICE_SIZE)return(i=this.values).splice.apply(i,__spread([e,t],r));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,r){var i=!this.owned&&isSpyEnabled(),n=hasListeners(this),r=n||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:r}:null;this.atom.reportChanged(),n&&notifyListeners(this,r)},e.prototype.notifyArraySplice=function(e,t,r){var i=!this.owned&&isSpyEnabled(),n=hasListeners(this),t=n||i?{object:this.proxy,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom.reportChanged(),n&&notifyListeners(this,t)},e}(),arrayExtensions={intercept:function(e){return this[$mobx].intercept(e)},observe:function(e,t){return this[$mobx].observe(e,t=void 0===t?!1:t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[$mobx];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=this[$mobx];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray(e);case 2:return n.spliceWithArray(e,t)}return n.spliceWithArray(e,t,r)},spliceWithArray:function(e,t,r){return this[$mobx].spliceWithArray(e,t,r)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[$mobx];return r.spliceWithArray(r.values.length,0,e),r.values.length},pop:function(){return this.splice(Math.max(this[$mobx].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this[$mobx];return r.spliceWithArray(0,0,e),r.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[$mobx],e=t.dehanceValues(t.values).indexOf(e);return-1<e&&(this.splice(e,1),!0)},get:function(e){var t=this[$mobx];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var r=this[$mobx],i=r.values;if(e<i.length){checkIfStateModificationsAreAllowed(r.atom);var n=i[e];if(hasInterceptors(r)){var a=interceptChange(r,{type:"update",object:r.proxy,index:e,newValue:t});if(!a)return;t=a.newValue}(t=r.enhancer(t,n))!==n&&(i[e]=t,r.notifyArrayChildUpdate(e,t,n))}else{if(e!==i.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+i.length);r.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){arrayExtensions[t]=function(){var e=this[$mobx];e.atom.reportObserved();e=e.dehanceValues(e.values);return e[t].apply(e,arguments)}});var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration),_a;function isObservableArray(e){return isObject(e)&&isObservableArrayAdministration(e[$mobx])}var ObservableMapMarker={},ObservableMap=function(){function e(e,t,r){if(void 0===t&&(t=deepEnhancer),void 0===r&&(r="ObservableMap@"+getNextId()),this.enhancer=t,this.name=r,this[_a]=ObservableMapMarker,this._keysAtom=createAtom(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!globalState.trackingDerivation)return this._has(e);var r,i=this._hasMap.get(e);return i||(r=i=new ObservableValue(this._has(e),referenceEnhancer,this.name+"."+stringifyKey(e)+"?",!1),this._hasMap.set(e,r),onBecomeUnobserved(r,function(){return t._hasMap.delete(e)})),i.get()},e.prototype.set=function(e,t){var r=this._has(e);if(hasInterceptors(this)){var i=interceptChange(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(hasInterceptors(this)&&!(n=interceptChange(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var r=isSpyEnabled(),i=hasListeners(this),n=i||r?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return transaction(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),i&&notifyListeners(this,n),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){e=this._hasMap.get(e);e&&e.setNewValue(t)},e.prototype._updateValue=function(e,t){var r,i,n=this._data.get(e);(t=n.prepareNewValue(t))!==globalState.UNCHANGED&&(r=isSpyEnabled(),e=(i=hasListeners(this))||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null,n.setNewValue(t),i&&notifyListeners(this,e))},e.prototype._addValue=function(t,r){var i=this;checkIfStateModificationsAreAllowed(this._keysAtom),transaction(function(){var e=new ObservableValue(r,i.enhancer,i.name+"."+stringifyKey(t),!1);i._data.set(t,e),r=e.value,i._updateHasMapEntry(t,!0),i._keysAtom.reportChanged()});var e=isSpyEnabled(),n=hasListeners(this);n&&notifyListeners(this,n||e?{type:"add",object:this,name:t,newValue:r}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,r=Array.from(this.keys());return makeIterable({next:function(){return t<r.length?{value:e.get(r[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var t=this,r=0,i=Array.from(this.keys());return makeIterable({next:function(){if(r<i.length){var e=i[r++];return{value:[e,t.get(e)],done:!1}}return{done:!0}}})},e.prototype[_a=$mobx,Symbol.iterator]=function(){return this.entries()},e.prototype.forEach=function(e,t){var r,i;try{for(var n=__values(this),a=n.next();!a.done;a=n.next()){var s=__read(a.value,2),o=s[0],l=s[1];e.call(t,l,o,this)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},e.prototype.merge=function(t){var r=this;return isObservableMap(t)&&(t=t.toJS()),transaction(function(){isPlainObject(t)?getPlainObjectKeys(t).forEach(function(e){return r.set(e,t[e])}):Array.isArray(t)?t.forEach(function(e){var t=__read(e,2),e=t[0],t=t[1];return r.set(e,t)}):isES6Map(t)?(t.constructor!==Map&&fail("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach(function(e,t){return r.set(t,e)})):null!=t&&fail("Cannot initialize map from "+t)}),this},e.prototype.clear=function(){var a=this;transaction(function(){untracked(function(){var t,e;try{for(var r=__values(a.keys()),i=r.next();!i.done;i=r.next()){var n=i.value;a.delete(n)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}})})},e.prototype.replace=function(e){var r=this;return transaction(function(){var t=getMapLikeKeys(e);Array.from(r.keys()).filter(function(e){return-1===t.indexOf(e)}).forEach(function(e){return r.delete(e)}),r.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var t,e,r={};try{for(var i=__values(this),n=i.next();!n.done;n=i.next()){var a=__read(n.value,2),s=a[0],o=a[1];r["symbol"==typeof s?s:stringifyKey(s)]=o}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map(function(e){return stringifyKey(e)+": "+t.get(e)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return registerListener(this,e)},e.prototype.intercept=function(e){return registerInterceptor(this,e)},e}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap),_a$1,ObservableSetMarker={},ObservableSet=function(){function e(e,r,i){if(void 0===r&&(r=deepEnhancer),void 0===i&&(i="ObservableSet@"+getNextId()),this.name=i,this[_a$1]=ObservableSetMarker,this._data=new Set,this._atom=createAtom(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,t){return r(e,t,i)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var a=this;transaction(function(){untracked(function(){var t,e;try{for(var r=__values(a._data.values()),i=r.next();!i.done;i=r.next()){var n=i.value;a.delete(n)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}})})},e.prototype.forEach=function(e,t){var r,i;try{for(var n=__values(this),a=n.next();!a.done;a=n.next()){var s=a.value;e.call(t,s,s,this)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t,r,i,n=this;if((checkIfStateModificationsAreAllowed(this._atom),hasInterceptors(this))&&!(i=interceptChange(this,{type:"add",object:this,newValue:e})))return this;return this.has(e)||(transaction(function(){n._data.add(n.enhancer(e,void 0)),n._atom.reportChanged()}),t=isSpyEnabled(),i=(r=hasListeners(this))||t?{type:"add",object:this,newValue:e}:null,r&&notifyListeners(this,i)),this},e.prototype.delete=function(e){var t=this;if(hasInterceptors(this)&&!(n=interceptChange(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var r=isSpyEnabled(),i=hasListeners(this),n=i||r?{type:"delete",object:this,oldValue:e}:null;return transaction(function(){t._atom.reportChanged(),t._data.delete(e)}),i&&notifyListeners(this,n),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var t=0,r=Array.from(this.keys()),i=Array.from(this.values());return makeIterable({next:function(){var e=t;return t+=1,e<i.length?{value:[r[e],i[e]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,r=Array.from(this._data.values());return makeIterable({next:function(){return t<r.length?{value:e.dehanceValue(r[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return isObservableSet(e)&&(e=e.toJS()),transaction(function(){Array.isArray(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):isES6Set(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):null!=e&&fail("Cannot initialize set from "+e)}),this},e.prototype.observe=function(e,t){return registerListener(this,e)},e.prototype.intercept=function(e){return registerInterceptor(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[_a$1=$mobx,Symbol.iterator]=function(){return this.values()},e}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),ObservableObjectAdministration=function(){function e(e,t,r,i){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=r,this.defaultEnhancer=i,this.keysAtom=new Atom(r+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var r,i,n,a=this.target,s=this.values.get(e);if(s instanceof ComputedValue)s.set(t);else{if(hasInterceptors(this)){if(!(n=interceptChange(this,{type:"update",object:this.proxy||a,name:e,newValue:t})))return;t=n.newValue}(t=s.prepareNewValue(t))!==globalState.UNCHANGED&&(r=hasListeners(this),i=isSpyEnabled(),n=r||i?{type:"update",object:this.proxy||a,oldValue:s.value,name:e,newValue:t}:null,s.setNewValue(t),r&&notifyListeners(this,n))}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map);if(i=t.get(e))return i.get();var r=!!this.values.get(e),i=new ObservableValue(r,referenceEnhancer,this.name+"."+stringifyKey(e)+"?",!1);return t.set(e,i),i.get()},e.prototype.addObservableProp=function(e,t,r){void 0===r&&(r=this.defaultEnhancer);var i=this.target;if(hasInterceptors(this)){var n=interceptChange(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!n)return;t=n.newValue}r=new ObservableValue(t,r,this.name+"."+stringifyKey(e),!1);this.values.set(e,r),t=r.value,Object.defineProperty(i,e,generateObservablePropConfig(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,r){var i=this.target;r.name=r.name||this.name+"."+stringifyKey(t),this.values.set(t,new ComputedValue(r)),e!==i&&!isPropertyConfigurable(e,t)||Object.defineProperty(e,t,generateComputedPropConfig(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(hasInterceptors(this))if(!(o=interceptChange(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{startBatch();var r,i=hasListeners(this),n=isSpyEnabled(),a=this.values.get(e),s=a&&a.get();a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),!this.pendingKeys||(r=this.pendingKeys.get(e))&&r.set(!1),delete this.target[e];var o=i||n?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;0,i&&notifyListeners(this,o)}finally{endBatch()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return registerListener(this,e)},e.prototype.intercept=function(e){return registerInterceptor(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var r=hasListeners(this),i=isSpyEnabled(),t=r||i?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;r&&notifyListeners(this,t),!this.pendingKeys||(e=this.pendingKeys.get(e))&&e.set(!0),this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var r=[];try{for(var i=__values(this.values),n=i.next();!n.done;n=i.next()){var a=__read(n.value,2),s=a[0];a[1]instanceof ObservableValue&&r.push(s)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},e}();function asObservableObject(e,t,r){if(void 0===t&&(t=""),void 0===r&&(r=deepEnhancer),Object.prototype.hasOwnProperty.call(e,$mobx))return e[$mobx];t=(t=!isPlainObject(e)?(e.constructor.name||"ObservableObject")+"@"+getNextId():t)||"ObservableObject@"+getNextId();r=new ObservableObjectAdministration(e,new Map,stringifyKey(t),r);return addHiddenProp(e,$mobx,r),r}var observablePropertyConfigs=Object.create(null),computedPropertyConfigs=Object.create(null);function generateObservablePropConfig(t){return observablePropertyConfigs[t]||(observablePropertyConfigs[t]={configurable:!0,enumerable:!0,get:function(){return this[$mobx].read(t)},set:function(e){this[$mobx].write(t,e)}})}function getAdministrationForComputedPropOwner(e){var t=e[$mobx];return t||(initializeInstance(e),e[$mobx])}function generateComputedPropConfig(t){return computedPropertyConfigs[t]||(computedPropertyConfigs[t]={configurable:globalState.computedConfigurable,enumerable:!1,get:function(){return getAdministrationForComputedPropOwner(this).read(t)},set:function(e){getAdministrationForComputedPropOwner(this).write(t,e)}})}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function isObservableObject(e){return!!isObject(e)&&(initializeInstance(e),isObservableObjectAdministration(e[$mobx]))}function getAtom(e,t){if("object"==typeof e&&null!==e){if(isObservableArray(e))return void 0!==t&&fail(!1),e[$mobx].atom;if(isObservableSet(e))return e[$mobx];if(isObservableMap(e)){var r=e;return void 0===t?r._keysAtom:((i=r._data.get(t)||r._hasMap.get(t))||fail(!1),i)}var i;if(initializeInstance(e),t&&!e[$mobx]&&e[t],isObservableObject(e))return t?((i=e[$mobx].values.get(t))||fail(!1),i):fail(!1);if(isAtom(e)||isComputedValue(e)||isReaction(e))return e}else if("function"==typeof e&&isReaction(e[$mobx]))return e[$mobx];return fail(!1)}function getAdministration(e,t){return e||fail("Expecting some object"),void 0!==t?getAdministration(getAtom(e,t)):isAtom(e)||isComputedValue(e)||isReaction(e)||isObservableMap(e)||isObservableSet(e)?e:(initializeInstance(e),e[$mobx]||void fail(!1))}function getDebugName(e,t){e=void 0!==t?getAtom(e,t):(isObservableObject(e)||isObservableMap(e)||isObservableSet(e)?getAdministration:getAtom)(e);return e.name}var toString=Object.prototype.toString,g;function deepEqual(e,t,r){return eq(e,t,r=void 0===r?-1:r)}function eq(e,t,r,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!=a&&"object"!=a&&"object"!=typeof t)return!1;var s=toString.call(e);if(s!==toString.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":0<=r&&r++}e=unwrap(e),t=unwrap(t);var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;a=e.constructor,s=t.constructor;if(a!==s&&!("function"==typeof a&&a instanceof a&&"function"==typeof s&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}if(0===r)return!1;r<0&&(r=-1),n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!eq(e[l],t[l],r-1,i,n))return!1}else{var u,c=Object.keys(e),l=c.length;if(Object.keys(t).length!==l)return!1;for(;l--;)if(!has$1(t,u=c[l])||!eq(e[u],t[u],r-1,i,n))return!1}return i.pop(),n.pop(),!0}function unwrap(e){return isObservableArray(e)?e.slice():isES6Map(e)||isObservableMap(e)||isES6Set(e)||isObservableSet(e)?Array.from(e.entries()):e}function has$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function makeIterable(e){return e[Symbol.iterator]=getSelf,e}function getSelf(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:spy,extras:{getDebugName:getDebugName},$mobx:$mobx});var autorunConfig={},isNullOrUndefined=function(e){return null==e},_dec,_dec2,_dec3,_class,_descriptor,_descriptor2,_descriptor3,timeoutId=null,timeout=2e3,Controls=(_dec=action.bound,_dec2=action.bound,_dec3=action.bound,_class=function(){function t(e){_classCallCheck(this,t),_initializerDefineProperty(this,"alwaysOn",_descriptor,this),_initializerDefineProperty(this,"display",_descriptor2,this),_initializerDefineProperty(this,"isMouseOnControls",_descriptor3,this),this.root=e}return _createClass(t,[{key:"updateAlwaysOn",value:function(e){this.alwaysOn=e,this.updateShowControls(!0)}},{key:"updateShowControls",value:function(e){this.alwaysOn||this.root.currentState!==PLAYING&&this.root.currentState!==PAUSED||!browserDetection.isMobileOrTablet&&this.isMouseOnControls||e?this.display=!0:this.display=!1}},{key:"updateIsMouseOnControls",value:function(e){this.isMouseOnControls=e}},{key:"setShowControlsTimeout",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.alwaysOn||(this.updateShowControls(!0),clearTimeout(timeoutId),timeoutId=null,timeoutId=setTimeout(function(){e.updateShowControls(!1)},t||timeout))}},{key:"clearShowControlsTimeout",value:function(e){this.alwaysOn||(clearTimeout(timeoutId),timeoutId=null,isNullOrUndefined(e)||this.updateShowControls(e))}},{key:"showControls",get:function(){return!isErrorState(this.root.currentState)&&(this.root.currentState===READY||this.root.currentState===INITIALISING||!browserDetection.isMobileOrTablet&&this.root.currentState===PAUSED||this.display||!browserDetection.isMobileOrTablet&&this.isMouseOnControls)}},{key:"getState",value:function(){return{showControls:this.showControls,alwaysOn:this.alwaysOn,isMouseOnControls:this.isMouseOnControls}}}]),t}(),_descriptor=_applyDecoratedDescriptor(_class.prototype,"alwaysOn",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,"display",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,"isMouseOnControls",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_applyDecoratedDescriptor(_class.prototype,"updateAlwaysOn",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"updateAlwaysOn"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"updateShowControls",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"updateShowControls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"updateIsMouseOnControls",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"updateIsMouseOnControls"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"showControls",[computed],Object.getOwnPropertyDescriptor(_class.prototype,"showControls"),_class.prototype),_class),_dec$1,_class$1,_descriptor$1,ErrorMessage=(_dec$1=action.bound,_class$1=function(){function t(e){_classCallCheck(this,t),_initializerDefineProperty(this,"message",_descriptor$1,this),this.root=e}return _createClass(t,[{key:"isVisible",get:function(){return isErrorState(this.root.currentState)&&""!==this.message}},{key:"getState",value:function(){return{isVisible:this.isVisible,message:this.message}}},{key:"update",value:function(){this.message=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Something went wrong!"}}]),t}(),_descriptor$1=_applyDecoratedDescriptor(_class$1.prototype,"message",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_applyDecoratedDescriptor(_class$1.prototype,"isVisible",[computed],Object.getOwnPropertyDescriptor(_class$1.prototype,"isVisible"),_class$1.prototype),_applyDecoratedDescriptor(_class$1.prototype,"update",[_dec$1],Object.getOwnPropertyDescriptor(_class$1.prototype,"update"),_class$1.prototype),_class$1),_dec$2,_dec2$1,_class$2,_descriptor$2,LayerStates=(_dec$2=action.bound,_dec2$1=action.bound,_class$2=function(){function t(e){_classCallCheck(this,t),_initializerDefineProperty(this,"layerStates",_descriptor$2,this),this.root=e}return _createClass(t,[{key:"getState",value:function(){return this.layerStates}},{key:"reset",value:function(){this.layerStates.splice(0,this.layerStates.length)}},{key:"addLayerState",value:function(t){this.layerStates.find(function(e){return e.name===t})||this.layerStates.push({name:t,timeApplied:this.root.currentTime})}}]),t}(),_descriptor$2=_applyDecoratedDescriptor(_class$2.prototype,"layerStates",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_applyDecoratedDescriptor(_class$2.prototype,"reset",[_dec$2],Object.getOwnPropertyDescriptor(_class$2.prototype,"reset"),_class$2.prototype),_applyDecoratedDescriptor(_class$2.prototype,"addLayerState",[_dec2$1],Object.getOwnPropertyDescriptor(_class$2.prototype,"addLayerState"),_class$2.prototype),_class$2),getWillChangeStyle=function(e){var t=[];return e.transform&&t.push("transform"),e.opacity&&t.push("opacity"),0<t.length?_objectSpread2(_objectSpread2({},e),{},{"will-change":t}):e},omitNullProps=function(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},n={};return Object.keys(r).forEach(function(e){var t=r[e];null!=t&&i(t)&&(n[e]=t)}),n},normaliseTransformScale=function(e){var t=e.scale,r=e.scaleX,e=e.scaleY;return r===e&&r?{scale:r}:omitNullProps({scale:t,scaleX:r,scaleY:e})},hasValue=function(e){return e||0===e},hasScaling=function(e){var t=e.scale,r=e.scaleX,e=e.scaleY;return hasValue(t)||hasValue(r)||hasValue(e)},combineTransformScaleStyles=function(e){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(hasScaling(e)||hasScaling(t)){if(hasScaling(e)&&hasScaling(t)){var r={};return hasValue(t.scale)?{scale:t.scale}:(hasValue(t.scaleX)?(r=_objectSpread2(_objectSpread2({},r),{},{scaleX:t.scaleX}),hasValue(e.scale)&&!hasValue(t.scaleY)&&(r=_objectSpread2(_objectSpread2({},r),{},{scaleY:e.scale}))):hasValue(e.scaleX)&&(r=_objectSpread2(_objectSpread2({},r),{},{scaleX:e.scaleX})),hasValue(t.scaleY)?(r=_objectSpread2(_objectSpread2({},r),{},{scaleY:t.scaleY}),hasValue(e.scale)&&!hasValue(t.scaleX)&&(r=_objectSpread2(_objectSpread2({},r),{},{scaleX:e.scale}))):hasValue(e.scaleY)&&(r=_objectSpread2(_objectSpread2({},r),{},{scaleY:e.scaleY})),normaliseTransformScale(r))}return hasScaling(e)?normaliseTransformScale(e):normaliseTransformScale(t)}return{}}},_excluded$2=["scale","scaleX","scaleY"],excludeScaling=function(e){e.scale,e.scaleX,e.scaleY;return _objectWithoutProperties(e,_excluded$2)},mergeTransformStyle=function(e){return function(e,t){return e.transform&&t.transform?_objectSpread2(_objectSpread2(_objectSpread2({},e),t),{},{transform:_objectSpread2(_objectSpread2(_objectSpread2({},excludeScaling(e.transform)),excludeScaling(t.transform)),combineTransformScaleStyles()(e.transform,t.transform))}):_objectSpread2(_objectSpread2({},e),t)}},calculateIndexValue=function(e,t,r){return t===e?t||0:t<e?(e-t)*(1-r)||0:r*t||0},opacity=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{opacity:calculateIndexValue(e,r,t)}}},calculateValue=function(e,t,r){return t===e?t||0:t<e||e<0?e-(e-t)*r||0:r*(t-e)+e||0},position=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{transform:{translate:{values:[calculateValue(e[0],r[0],t),calculateValue(e[1],r[1],t)],unit:"px"}}}}},transform_scale=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{transform:{scale:calculateValue(e,r,t)}}}},transform_scale_x=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{transform:{scaleX:calculateValue(e,r,t)}}}},transform_scale_y=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{transform:{scaleY:calculateValue(e,r,t)}}}},transform_rotation=function(e){return function(e,t){var r=e.toValue,e=e.fromValue;return{transform:{rotate:{value:calculateValue(-1*e,-1*r,t),unit:"rad"}}}}},transform_rotation3d=function(e){return function(e,t){var r=e.toValue,i=e.fromValue,e=i[3],r=r[3];return{transform:{rotate3d:{value:[i[0],i[1],i[2],calculateValue(e,r,t)],unit:"deg"}}}}},animationMap={position:position,opacity:opacity,transform_scale:transform_scale,transform_scale_x:transform_scale_x,transform_scale_y:transform_scale_y,transform_rotation:transform_rotation,transform_rotation3d:transform_rotation3d},resolveAnimation=function(e,t){var r=animationMap[e];if(r)return r(e);throw Error("Animation: ".concat(e," not found"))},c0x=0,c0y=0,c1x=.42,c1y=0,c2x=.58,c2y=1.1,c3x=1,c3y=1,coefficientsX=[c0x,-3*c0x+3*c1x,3*c0x-6*c1x+3*c2x,3*c1x-c0x-3*c2x+c3x],coefficientsY=[c0y,-3*c0y+3*c1y,3*c0y-6*c1y+3*c2y,3*c1y-c0y-3*c2y+c3y],evaluateAtParameterWithCoefficients=function(e,t){return t[0]+e*t[1]+e*e*t[2]+e*e*e*t[3]},evaluateDerivationAtParameterWithCoefficients=function(e,t){return t[1]+2*e*t[2]+3*e*e*t[3]},calcParameterViaNewtonRaphsonUsingXAndCoefficientsForX=function(e,t){for(var r=e,i=0;i<10;i++)r-=(evaluateAtParameterWithCoefficients(r,t)-e)/evaluateDerivationAtParameterWithCoefficients(r,t);return r},calcParameterUsingXAndCoefficientsForX=function(e,t){return calcParameterViaNewtonRaphsonUsingXAndCoefficientsForX(e,t)},evaluateYAtX=function(e){e=calcParameterUsingXAndCoefficientsForX(e,coefficientsX);return evaluateAtParameterWithCoefficients(e,coefficientsY)},_excluded$3=["keyPath","beginTime","duration","toValue","fromValue","autoRepeats","autoReverses","repeatCount"],calculatePercent=function(e,t,r){r=(e-t)/r;return 1<r?1:r},normalisePercent=function(e){return 1<e?1:e},getStylesFromAnimation=function(e){return function(e){var t=e.absoluteBeginTime,r=e.animation,i=r.keyPath,n=r.beginTime,a=r.duration,s=r.toValue,o=r.fromValue,l=r.autoRepeats,u=void 0===l?"NO":l,c=r.autoReverses,h=void 0===c?"NO":c,d=r.repeatCount,f=void 0===d?null:d,l=_objectWithoutProperties(r,_excluded$3),c=e.currentTime,d=n+t;if(d<=c){r=d,e=parseInt(Math.ceil((c-(d+a))/a),10),n="yes"===u.toLowerCase(),t="yes"===h.toLowerCase(),u=d+a<c,h=t&&u,f=t&&f?2*f+1:f;u&&n&&(!f||e<=f)?(r=d+e*a,h=t&&0<e%2):u&&t&&!n&&(r=d+a);a=normalisePercent(evaluateYAtX(calculatePercent(c,r,a)));return h&&(a=1-a),resolveAnimation(i)(_objectSpread2({toValue:s,fromValue:o},l),a)}return{}}},adjustSizeFromAspectRatio=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return(e||0===e)&&parseFloat(e)*t||0},_excluded$4=["translate"],adjustTransformSize=function(e,t){if(0<Object.keys(e).length){var r=e.translate,e=_objectWithoutProperties(e,_excluded$4);return omitNullProps(_objectSpread2({translate:r?_objectSpread2(_objectSpread2({},r),{},{values:[adjustSizeFromAspectRatio(r.values[0],t),adjustSizeFromAspectRatio(r.values[1],t)]}):null},e))}return null},adjustFontSize=function(e,t){t=e["font-size"]?adjustSizeFromAspectRatio(e["font-size"].value,t):null;return t?{value:t,unit:"px"}:null},adjustLineHeight=function(e,t){t=e["line-height"]?adjustSizeFromAspectRatio(e["line-height"].value,t):null;return t?{value:t,unit:"px"}:null},adjustLetterSpacing=function(e,t){t=e["letter-spacing"]?adjustSizeFromAspectRatio(e["letter-spacing"].value,t):null;return t?{value:t,unit:"px"}:null},adjustBoxShadowSize=function(e,t){var r,i,n=null;return e["box-shadow"]&&(r=e["box-shadow"].offset,i=e["box-shadow"].radius,e=e["box-shadow"].color,n={offset:_objectSpread2(_objectSpread2({},r),{},{value:[adjustSizeFromAspectRatio(r.value[0],t),adjustSizeFromAspectRatio(r.value[1],t)]}),radius:_objectSpread2(_objectSpread2({},i),{},{value:adjustSizeFromAspectRatio(i.value,t)}),color:e}),n},adjustBorderRadiusSize=function(e,r){e=e["border-radius"];return e?"".concat(e).split(" ").reduce(function(e,t){return"".concat(e," ").concat(parseInt(adjustSizeFromAspectRatio(t,r),10),"px")},"").trim():null},adjustPaddingSize=function(e,t){var r=null;return r=e?{values:e.values.map(function(e){return adjustSizeFromAspectRatio(e,t)}),unit:"px"}:r},adjustSizing=function(e,t,r){return omitNullProps(_objectSpread2(_objectSpread2({},t),{},{transform:t.transform?adjustTransformSize(t.transform,r.aspectRatioPercent):null,"border-radius":adjustBorderRadiusSize(t,r.aspectRatioPercent),left:_objectSpread2(_objectSpread2({},t.left),{},{value:adjustSizeFromAspectRatio(t.left.value,r.aspectRatioPercent)}),top:_objectSpread2(_objectSpread2({},t.top),{},{value:adjustSizeFromAspectRatio(t.top.value,r.aspectRatioPercent)}),height:t.height?_objectSpread2(_objectSpread2({},t.height),{},{value:adjustSizeFromAspectRatio(t.height.value,r.aspectRatioPercent)}):null,width:t.width?_objectSpread2(_objectSpread2({},t.width),{},{value:adjustSizeFromAspectRatio(t.width.value,r.aspectRatioPercent)}):null,"font-size":adjustFontSize(t,r.aspectRatioPercent),"line-height":adjustLineHeight(t,r.aspectRatioPercent),"letter-spacing":adjustLetterSpacing(t,r.aspectRatioPercent),"box-shadow":adjustBoxShadowSize(t,r.aspectRatioPercent),padding:adjustPaddingSize(t.padding,r.aspectRatioPercent),textPadding:adjustPaddingSize(t.textPadding,r.aspectRatioPercent)}),function(e){return"object"!==_typeof(e)||null!==e.value})},_excluded$5=["height","width"],adjustTransformTranslate=function(e){var t=e.height,r=e.width,i=_objectWithoutProperties(e,_excluded$5),n=i.transform||{},a=n.scale,s=n.scaleX,e=n.scaleY,n=n.translate;if(!n)return _objectSpread2({height:t,width:r},i);if(n&&(a||s||e)){e=i["transform-origin"].values,n=_objectSpread2(_objectSpread2({},n=n),{},{values:[n.values[0]-r.value*(e[0]/100-.5),n.values[1]-t.value*(e[1]/100-.5)]});return _objectSpread2(_objectSpread2({},i),{},{height:t,width:r,transform:_objectSpread2(_objectSpread2({},i.transform),{},{translate:n})})}return _objectSpread2(_objectSpread2({},i),{},{height:t,width:r})},combinePositionAndTranslate=function(e){var t=e.transform&&e.transform.translate;return _objectSpread2(_objectSpread2({},e),{},{left:_objectSpread2(_objectSpread2({},e.left),{},{value:t?0:e.left.value}),top:_objectSpread2(_objectSpread2({},e.top),{},{value:t?0:e.top.value})})},hasHeight=function(e){return 0<e.value},hasWidth=function(e){return 0<e.value},hasOpacity=function(e){return 0<e},hasScale=function(e){var t=e.scale,r=e.scaleX,e=e.scaleY;return 0<(void 0===t?1:t)&&0<(void 0===r?1:r)&&0<(void 0===e?1:e)},hasRotate=function(e){return void 0!==e&&0<e},isWithinViewport=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{value:0},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{value:0},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{value:0},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{value:0},n=4<arguments.length?arguments[4]:void 0,a=n.scale,s=void 0===a?1:a,o=n.scaleX,l=void 0===o?1:o,u=n.scaleY,a=void 0===u?1:u,o=n.translate,u=void 0===o?{values:[0,0]}:o,o=n.rotate,n=5<arguments.length?arguments[5]:void 0;if(hasRotate(o))return!0;e=e.value+u.values[0],u=t.value+u.values[1],l=e+r.value*s*l,a=u+i.value*s*a;return!(e>=n.right||u>=n.bottom)&&!(e<=0&&l<=0||u<=0&&a<=0)},isLayerVisible=function(e,t){var r=e.opacity,i=void 0===r?1:r,n=e.transform,a=void 0===n?{}:n,s=e.top,r=e.left,n=e.height,n=void 0===n?0:n,e=e.width,e=void 0===e?0:e;return hasHeight(n)&&hasWidth(e)&&hasOpacity(i)&&hasScale(a)&&isWithinViewport(r,s,e,n,a,t)},moment=createCommonjsModule(function(ls,e){ls.exports=function(){var t,n;function c(){return t.apply(null,arguments)}function e(e){t=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function o(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;else{var t;for(t in e)if(l(e,t))return false;return true}}function a(e){return e===void 0}function h(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function d(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function i(e,t){var r=[],i;for(i=0;i<e.length;++i)r.push(t(e[i],i));return r}function f(e,t){for(var r in t)if(l(t,r))e[r]=t[r];if(l(t,"toString"))e.toString=t.toString;if(l(t,"valueOf"))e.valueOf=t.valueOf;return e}function p(e,t,r,i){return Hr(e,t,r,i,true).utc()}function r(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function m(e){if(e._pf==null)e._pf=r();return e._pf}if(Array.prototype.some)n=Array.prototype.some;else n=function(e){var t=Object(this),r=t.length>>>0,i;for(i=0;i<r;i++)if(i in t&&e.call(this,t[i],i,t))return true;return false};function g(e){if(e._isValid==null){var t=m(e),r=n.call(t.parsedDateParts,function(e){return e!=null}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict)i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined;if(Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i}return e._isValid}function y(e){var t=p(NaN);if(e!=null)f(m(t),e);else m(t).userInvalidated=true;return t}var v=c.momentProperties=[],b=false;function S(e,t){var r,i,n;if(!a(t._isAMomentObject))e._isAMomentObject=t._isAMomentObject;if(!a(t._i))e._i=t._i;if(!a(t._f))e._f=t._f;if(!a(t._l))e._l=t._l;if(!a(t._strict))e._strict=t._strict;if(!a(t._tzm))e._tzm=t._tzm;if(!a(t._isUTC))e._isUTC=t._isUTC;if(!a(t._offset))e._offset=t._offset;if(!a(t._pf))e._pf=m(t);if(!a(t._locale))e._locale=t._locale;if(v.length>0)for(r=0;r<v.length;r++){i=v[r];n=t[i];if(!a(n))e[i]=n}return e}function M(e){S(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid())this._d=new Date(NaN);if(b===false){b=true;c.updateOffset(this);b=false}}function T(e){return e instanceof M||e!=null&&e._isAMomentObject!=null}function A(e){if(c.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn)console.warn("Deprecation warning: "+e)}function E(n,a){var s=true;return f(function(){if(c.deprecationHandler!=null)c.deprecationHandler(null,n);if(s){var e=[],t,r,i;for(r=0;r<arguments.length;r++){t="";if(typeof arguments[r]==="object"){t+="\n["+r+"] ";for(i in arguments[0])if(l(arguments[0],i))t+=i+": "+arguments[0][i]+", ";t=t.slice(0,-2)}else t=arguments[r];e.push(t)}A(n+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack);s=false}return a.apply(this,arguments)},a)}var D={},_;function x(e,t){if(c.deprecationHandler!=null)c.deprecationHandler(e,t);if(!D[e]){A(t);D[e]=true}}function I(e){return typeof Function!=="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function C(e){var t,r;for(r in e)if(l(e,r)){t=e[r];if(I(t))this[r]=t;else this["_"+r]=t}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k(e,t){var r=f({},e),i;for(i in t)if(l(t,i))if(o(e[i])&&o(t[i])){r[i]={};f(r[i],e[i]);f(r[i],t[i])}else if(t[i]!=null)r[i]=t[i];else delete r[i];for(i in e)if(l(e,i)&&!l(t,i)&&o(e[i]))r[i]=f({},r[i]);return r}function w(e){if(e!=null)this.set(e)}if(c.suppressDeprecationWarnings=false,c.deprecationHandler=null,Object.keys)_=Object.keys;else _=function(e){var t,r=[];for(t in e)if(l(e,t))r.push(t);return r};var L={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function O(e,t,r){var i=this._calendar[e]||this._calendar["sameElse"];return I(i)?i.call(t,r):i}function P(e,t,r){var i=""+Math.abs(e),n=t-i.length,a=e>=0;return(a?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,R=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},F={};function z(e,t,r,i){var n=i;if(typeof i==="string")n=function(){return this[i]()};if(e)F[e]=n;if(t)F[t[0]]=function(){return P(n.apply(this,arguments),t[1],t[2])};if(r)F[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)}}function B(e){if(e.match(/\[[\s\S]/))return e.replace(/^\[|\]$/g,"");return e.replace(/\\/g,"")}function V(i){var n=i.match(N),e,a;for(e=0,a=n.length;e<a;e++)if(F[n[e]])n[e]=F[n[e]];else n[e]=B(n[e]);return function(e){var t="",r;for(r=0;r<a;r++)t+=I(n[r])?n[r].call(e,i):n[r];return t}}function U(e,t){if(!e.isValid())return e.localeData().invalidDate();t=G(t,e.localeData());j[t]=j[t]||V(t);return j[t](e)}function G(e,t){var r=5;function i(e){return t.longDateFormat(e)||e}R.lastIndex=0;while(r>=0&&R.test(e)){e=e.replace(R,i);R.lastIndex=0;r-=1}return e}var Y={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];if(t||!r)return t;this._longDateFormat[e]=r.match(N).map(function(e){if(e==="MMMM"||e==="MM"||e==="DD"||e==="dddd")return e.slice(1);return e}).join("");return this._longDateFormat[e]}var W="Invalid date";function $(){return this._invalidDate}var Q="%d",K=/\d{1,2}/;function Z(e){return this._ordinal.replace("%d",e)}var X={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function q(e,t,r,i){var n=this._relativeTime[r];return I(n)?n(e,t,r,i):n.replace(/%d/i,e)}function J(e,t){var r=this._relativeTime[e>0?"future":"past"];return I(r)?r(t):r.replace(/%s/i,t)}var ee={};function te(e,t){var r=e.toLowerCase();ee[r]=ee[r+"s"]=ee[t]=e}function re(e){return typeof e==="string"?ee[e]||ee[e.toLowerCase()]:undefined}function ie(e){var t={},r,i;for(i in e)if(l(e,i)){r=re(i);if(r)t[r]=e[i]}return t}var ne={};function ae(e,t){ne[e]=t}function se(e){var t=[],r;for(r in e)if(l(e,r))t.push({unit:r,priority:ne[r]});t.sort(function(e,t){return e.priority-t.priority});return t}function oe(e){return e%4===0&&e%100!==0||e%400===0}function le(e){if(e<0)return Math.ceil(e)||0;else return Math.floor(e)}function ue(e){var t=+e,r=0;if(t!==0&&isFinite(t))r=le(t);return r}function ce(t,r){return function(e){if(e!=null){de(this,t,e);c.updateOffset(this,r);return this}else return he(this,t)}}function he(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function de(e,t,r){if(e.isValid()&&!isNaN(r))if(t==="FullYear"&&oe(e.year())&&e.month()===1&&e.date()===29){r=ue(r);e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),qe(r,e.month()))}else e._d["set"+(e._isUTC?"UTC":"")+t](r)}function fe(e){e=re(e);if(I(this[e]))return this[e]();return this}function pe(e,t){if(typeof e==="object"){e=ie(e);var r=se(e),i;for(i=0;i<r.length;i++)this[r[i].unit](e[r[i].unit])}else{e=re(e);if(I(this[e]))return this[e](t)}return this}var me=/\d/,ge=/\d\d/,ye=/\d{3}/,ve=/\d{4}/,be=/[+-]?\d{6}/,Se=/\d\d?/,Me=/\d\d\d\d?/,Te=/\d\d\d\d\d\d?/,Ae=/\d{1,3}/,Ee=/\d{1,4}/,De=/[+-]?\d{1,6}/,_e=/\d+/,xe=/[+-]?\d+/,Ie=/Z|[+-]\d\d:?\d\d/gi,Ce=/Z|[+-]\d\d(?::?\d\d)?/gi,ke=/[+-]?\d+(\.\d{1,3})?/,we=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Le;function Oe(e,r,i){Le[e]=I(r)?r:function(e,t){return e&&i?i:r}}function Pe(e,t){if(!l(Le,e))return new RegExp(Ne(e));return Le[e](t._strict,t._locale)}function Ne(e){return Re(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,i,n){return t||r||i||n}))}function Re(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Le={},je={};function Fe(e,r){var t,i=r;if(typeof e==="string")e=[e];if(h(r))i=function(e,t){t[r]=ue(e)};for(t=0;t<e.length;t++)je[e[t]]=i}function ze(e,n){Fe(e,function(e,t,r,i){r._w=r._w||{};n(e,r._w,r,i)})}function Be(e,t,r){if(t!=null&&l(je,e))je[e](t,r._a,r,e)}var Ve=0,Ue=1,Ge=2,Ye=3,He=4,We=5,$e=6,Qe=7,Ke=8,Ze;function Xe(e,t){return(e%t+t)%t}if(Array.prototype.indexOf)Ze=Array.prototype.indexOf;else Ze=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function qe(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=Xe(t,12);e+=(t-r)/12;return r===1?oe(e)?29:28:31-r%7%2}z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),z("MMMM",0,0,function(e){return this.localeData().months(this,e)}),te("month","M"),ae("month",8),Oe("M",Se),Oe("MM",Se,ge),Oe("MMM",function(e,t){return t.monthsShortRegex(e)}),Oe("MMMM",function(e,t){return t.monthsRegex(e)}),Fe(["M","MM"],function(e,t){t[Ue]=ue(e)-1}),Fe(["MMM","MMMM"],function(e,t,r,i){var n=r._locale.monthsParse(e,i,r._strict);if(n!=null)t[Ue]=n;else m(r).invalidMonth=e});var Je="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),et="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=we,it=we;function nt(e,t){if(!e)return s(this._months)?this._months:this._months["standalone"];return s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tt).test(t)?"format":"standalone"][e.month()]}function at(e,t){if(!e)return s(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"];return s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tt.test(t)?"format":"standalone"][e.month()]}function st(e,t,r){var i,n,a,s=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){a=p([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase()}}if(r)if(t==="MMM"){n=Ze.call(this._shortMonthsParse,s);return n!==-1?n:null}else{n=Ze.call(this._longMonthsParse,s);return n!==-1?n:null}else if(t==="MMM"){n=Ze.call(this._shortMonthsParse,s);if(n!==-1)return n;n=Ze.call(this._longMonthsParse,s);return n!==-1?n:null}else{n=Ze.call(this._longMonthsParse,s);if(n!==-1)return n;n=Ze.call(this._shortMonthsParse,s);return n!==-1?n:null}}function ot(e,t,r){var i,n,a;if(this._monthsParseExact)return st.call(this,e,t,r);if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){n=p([2e3,i]);if(r&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")}if(!r&&!this._monthsParse[i]){a="^"+this.months(n,"")+"|^"+this.monthsShort(n,"");this._monthsParse[i]=new RegExp(a.replace(".",""),"i")}if(r&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;else if(r&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;else if(!r&&this._monthsParse[i].test(e))return i}}function lt(e,t){var r;if(!e.isValid())return e;if(typeof t==="string")if(/^\d+$/.test(t))t=ue(t);else{t=e.localeData().monthsParse(t);if(!h(t))return e}r=Math.min(e.date(),qe(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r);return e}function ut(e){if(e!=null){lt(this,e);c.updateOffset(this,true);return this}else return he(this,"Month")}function ct(){return qe(this.year(),this.month())}function ht(e){if(this._monthsParseExact){if(!l(this,"_monthsRegex"))ft.call(this);if(e)return this._monthsShortStrictRegex;else return this._monthsShortRegex}else{if(!l(this,"_monthsShortRegex"))this._monthsShortRegex=rt;return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}function dt(e){if(this._monthsParseExact){if(!l(this,"_monthsRegex"))ft.call(this);if(e)return this._monthsStrictRegex;else return this._monthsRegex}else{if(!l(this,"_monthsRegex"))this._monthsRegex=it;return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function ft(){function e(e,t){return t.length-e.length}var t=[],r=[],i=[],n,a;for(n=0;n<12;n++){a=p([2e3,n]);t.push(this.monthsShort(a,""));r.push(this.months(a,""));i.push(this.months(a,""));i.push(this.monthsShort(a,""))}t.sort(e);r.sort(e);i.sort(e);for(n=0;n<12;n++){t[n]=Re(t[n]);r[n]=Re(r[n])}for(n=0;n<24;n++)i[n]=Re(i[n]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function pt(e){return oe(e)?366:365}z("Y",0,0,function(){var e=this.year();return e<=9999?P(e,4):"+"+e}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,true],0,"year"),te("year","y"),ae("year",1),Oe("Y",xe),Oe("YY",Se,ge),Oe("YYYY",Ee,ve),Oe("YYYYY",De,be),Oe("YYYYYY",De,be),Fe(["YYYYY","YYYYYY"],Ve),Fe("YYYY",function(e,t){t[Ve]=e.length===2?c.parseTwoDigitYear(e):ue(e)}),Fe("YY",function(e,t){t[Ve]=c.parseTwoDigitYear(e)}),Fe("Y",function(e,t){t[Ve]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var mt=ce("FullYear",true);function gt(){return oe(this.year())}function yt(e,t,r,i,n,a,s){var o;if(e<100&&e>=0){o=new Date(e+400,t,r,i,n,a,s);if(isFinite(o.getFullYear()))o.setFullYear(e)}else o=new Date(e,t,r,i,n,a,s);return o}function vt(e){var t,r;if(e<100&&e>=0){r=Array.prototype.slice.call(arguments);r[0]=e+400;t=new Date(Date.UTC.apply(null,r));if(isFinite(t.getUTCFullYear()))t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function bt(e,t,r){var i=7+t-r,n=(7+vt(e,0,i).getUTCDay()-t)%7;return-n+i-1}function St(e,t,r,i,n){var a=(7+r-i)%7,s=bt(e,i,n),o=1+7*(t-1)+a+s,l,u;if(o<=0){l=e-1;u=pt(l)+o}else if(o>pt(e)){l=e+1;u=o-pt(e)}else{l=e;u=o}return{year:l,dayOfYear:u}}function Mt(e,t,r){var i=bt(e.year(),t,r),n=Math.floor((e.dayOfYear()-i-1)/7)+1,a,s;if(n<1){s=e.year()-1;a=n+Tt(s,t,r)}else if(n>Tt(e.year(),t,r)){a=n-Tt(e.year(),t,r);s=e.year()+1}else{s=e.year();a=n}return{week:a,year:s}}function Tt(e,t,r){var i=bt(e,t,r),n=bt(e+1,t,r);return(pt(e)-i+n)/7}function At(e){return Mt(e,this._week.dow,this._week.doy).week}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),te("week","w"),te("isoWeek","W"),ae("week",5),ae("isoWeek",5),Oe("w",Se),Oe("ww",Se,ge),Oe("W",Se),Oe("WW",Se,ge),ze(["w","ww","W","WW"],function(e,t,r,i){t[i.substr(0,1)]=ue(e)});var Et={dow:0,doy:6};function Dt(){return this._week.dow}function _t(){return this._week.doy}function xt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function It(e){var t=Mt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function Ct(e,t){if(typeof e!=="string")return e;if(!isNaN(e))return parseInt(e,10);e=t.weekdaysParse(e);if(typeof e==="number")return e;return null}function kt(e,t){if(typeof e==="string")return t.weekdaysParse(e)%7||7;return isNaN(e)?null:e}function wt(e,t){return e.slice(t,7).concat(e.slice(0,t))}z("d",0,"do","day"),z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),te("day","d"),te("weekday","e"),te("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Oe("d",Se),Oe("e",Se),Oe("E",Se),Oe("dd",function(e,t){return t.weekdaysMinRegex(e)}),Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Oe("dddd",function(e,t){return t.weekdaysRegex(e)}),ze(["dd","ddd","dddd"],function(e,t,r,i){var n=r._locale.weekdaysParse(e,i,r._strict);if(n!=null)t.d=n;else m(r).invalidWeekday=e}),ze(["d","e","E"],function(e,t,r,i){t[i]=ue(e)});var Lt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nt=we,Rt=we,jt=we;function Ft(e,t){var r=s(this._weekdays)?this._weekdays:this._weekdays[e&&e!==true&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===true?wt(r,this._week.dow):e?r[e.day()]:r}function zt(e){return e===true?wt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return e===true?wt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,r){var i,n,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){a=p([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase()}}if(r)if(t==="dddd"){n=Ze.call(this._weekdaysParse,s);return n!==-1?n:null}else if(t==="ddd"){n=Ze.call(this._shortWeekdaysParse,s);return n!==-1?n:null}else{n=Ze.call(this._minWeekdaysParse,s);return n!==-1?n:null}else if(t==="dddd"){n=Ze.call(this._weekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._shortWeekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._minWeekdaysParse,s);return n!==-1?n:null}else if(t==="ddd"){n=Ze.call(this._shortWeekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._weekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._minWeekdaysParse,s);return n!==-1?n:null}else{n=Ze.call(this._minWeekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._weekdaysParse,s);if(n!==-1)return n;n=Ze.call(this._shortWeekdaysParse,s);return n!==-1?n:null}}function Ut(e,t,r){var i,n,a;if(this._weekdaysParseExact)return Vt.call(this,e,t,r);if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){n=p([2e3,1]).day(i);if(r&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[i]){a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,"");this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")}if(r&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;else if(r&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;else if(r&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;else if(!r&&this._weekdaysParse[i].test(e))return i}}function Gt(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=Ct(e,this.localeData());return this.add(e-t,"d")}else return t}function Yt(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Ht(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=kt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Wt(e){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Kt.call(this);if(e)return this._weekdaysStrictRegex;else return this._weekdaysRegex}else{if(!l(this,"_weekdaysRegex"))this._weekdaysRegex=Nt;return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}function $t(e){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Kt.call(this);if(e)return this._weekdaysShortStrictRegex;else return this._weekdaysShortRegex}else{if(!l(this,"_weekdaysShortRegex"))this._weekdaysShortRegex=Rt;return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function Qt(e){if(this._weekdaysParseExact){if(!l(this,"_weekdaysRegex"))Kt.call(this);if(e)return this._weekdaysMinStrictRegex;else return this._weekdaysMinRegex}else{if(!l(this,"_weekdaysMinRegex"))this._weekdaysMinRegex=jt;return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Kt(){function e(e,t){return t.length-e.length}var t=[],r=[],i=[],n=[],a,s,o,l,u;for(a=0;a<7;a++){s=p([2e3,1]).day(a);o=Re(this.weekdaysMin(s,""));l=Re(this.weekdaysShort(s,""));u=Re(this.weekdays(s,""));t.push(o);r.push(l);i.push(u);n.push(o);n.push(l);n.push(u)}t.sort(e);r.sort(e);i.sort(e);n.sort(e);this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Xt(){return this.hours()||24}function qt(e,t){z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Jt(e,t){return t._meridiemParse}function er(e){return(e+"").toLowerCase().charAt(0)==="p"}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Zt),z("k",["kk",2],0,Xt),z("hmm",0,0,function(){return""+Zt.apply(this)+P(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Zt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)}),qt("a",true),qt("A",false),te("hour","h"),ae("hour",13),Oe("a",Jt),Oe("A",Jt),Oe("H",Se),Oe("h",Se),Oe("k",Se),Oe("HH",Se,ge),Oe("hh",Se,ge),Oe("kk",Se,ge),Oe("hmm",Me),Oe("hmmss",Te),Oe("Hmm",Me),Oe("Hmmss",Te),Fe(["H","HH"],Ye),Fe(["k","kk"],function(e,t,r){var i=ue(e);t[Ye]=i===24?0:i}),Fe(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e);r._meridiem=e}),Fe(["h","hh"],function(e,t,r){t[Ye]=ue(e);m(r).bigHour=true}),Fe("hmm",function(e,t,r){var i=e.length-2;t[Ye]=ue(e.substr(0,i));t[He]=ue(e.substr(i));m(r).bigHour=true}),Fe("hmmss",function(e,t,r){var i=e.length-4,n=e.length-2;t[Ye]=ue(e.substr(0,i));t[He]=ue(e.substr(i,2));t[We]=ue(e.substr(n));m(r).bigHour=true}),Fe("Hmm",function(e,t,r){var i=e.length-2;t[Ye]=ue(e.substr(0,i));t[He]=ue(e.substr(i))}),Fe("Hmmss",function(e,t,r){var i=e.length-4,n=e.length-2;t[Ye]=ue(e.substr(0,i));t[He]=ue(e.substr(i,2));t[We]=ue(e.substr(n))});var tr,rr=ce("Hours",true);function ir(e,t,r){if(e>11)return r?"pm":"PM";else return r?"am":"AM"}var nr={calendar:L,longDateFormat:Y,invalidDate:W,ordinal:Q,dayOfMonthOrdinalParse:K,relativeTime:X,months:Je,monthsShort:et,week:Et,weekdays:Lt,weekdaysMin:Pt,weekdaysShort:Ot,meridiemParse:/[ap]\.?m?\.?/i},ar={},sr={},or;function lr(e,t){var r,i=Math.min(e.length,t.length);for(r=0;r<i;r+=1)if(e[r]!==t[r])return r;return i}function ur(e){return e?e.toLowerCase().replace("_","-"):e}function cr(e){var t=0,r,i,n,a;while(t<e.length){a=ur(e[t]).split("-");r=a.length;i=ur(e[t+1]);i=i?i.split("-"):null;while(r>0){n=hr(a.slice(0,r).join("-"));if(n)return n;if(i&&i.length>=r&&lr(a,i)>=r-1)break;r--}t++}return or}function hr(t){var e=null,r;if(ar[t]===undefined&&"object"!=="undefined"&&ls&&ls.exports)try{e=or._abbr;r=commonjsRequire;r("./locale/"+t);dr(e)}catch(e){ar[t]=null}return ar[t]}function dr(e,t){var r;if(e){if(a(t))r=mr(e);else r=fr(e,t);if(r)or=r;else if(typeof console!=="undefined"&&console.warn)console.warn("Locale "+e+" not found. Did you forget to load it?")}return or._abbr}function fr(e,t){if(t!==null){var r,i=nr;t.abbr=e;if(ar[e]!=null){x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=ar[e]._config}else if(t.parentLocale!=null)if(ar[t.parentLocale]!=null)i=ar[t.parentLocale]._config;else{r=hr(t.parentLocale);if(r!=null)i=r._config;else{if(!sr[t.parentLocale])sr[t.parentLocale]=[];sr[t.parentLocale].push({name:e,config:t});return null}}ar[e]=new w(k(i,t));if(sr[e])sr[e].forEach(function(e){fr(e.name,e.config)});dr(e);return ar[e]}else{delete ar[e];return null}}function pr(e,t){if(t!=null){var r,i,n=nr;if(ar[e]!=null&&ar[e].parentLocale!=null)ar[e].set(k(ar[e]._config,t));else{i=hr(e);if(i!=null)n=i._config;t=k(n,t);if(i==null)t.abbr=e;r=new w(t);r.parentLocale=ar[e];ar[e]=r}dr(e)}else if(ar[e]!=null)if(ar[e].parentLocale!=null){ar[e]=ar[e].parentLocale;if(e===dr())dr(e)}else if(ar[e]!=null)delete ar[e];return ar[e]}function mr(e){var t;if(e&&e._locale&&e._locale._abbr)e=e._locale._abbr;if(!e)return or;if(!s(e)){t=hr(e);if(t)return t;e=[e]}return cr(e)}function gr(){return _(ar)}function yr(e){var t,r=e._a;if(r&&m(e).overflow===-2){t=r[Ue]<0||r[Ue]>11?Ue:r[Ge]<1||r[Ge]>qe(r[Ve],r[Ue])?Ge:r[Ye]<0||r[Ye]>24||r[Ye]===24&&(r[He]!==0||r[We]!==0||r[$e]!==0)?Ye:r[He]<0||r[He]>59?He:r[We]<0||r[We]>59?We:r[$e]<0||r[$e]>999?$e:-1;if(m(e)._overflowDayOfYear&&(t<Ve||t>Ge))t=Ge;if(m(e)._overflowWeeks&&t===-1)t=Qe;if(m(e)._overflowWeekday&&t===-1)t=Ke;m(e).overflow=t}return e}var vr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,br=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sr=/Z|[+-]\d\d(?::?\d\d)?/,Mr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],Tr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ar=/^\/?Date\((-?\d+)/i,Er=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Dr={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _r(e){var t,r,i=e._i,n=vr.exec(i)||br.exec(i),a,s,o,l;if(n){m(e).iso=true;for(t=0,r=Mr.length;t<r;t++)if(Mr[t][1].exec(n[1])){s=Mr[t][0];a=Mr[t][2]!==false;break}if(s==null){e._isValid=false;return}if(n[3]){for(t=0,r=Tr.length;t<r;t++)if(Tr[t][1].exec(n[3])){o=(n[2]||" ")+Tr[t][0];break}if(o==null){e._isValid=false;return}}if(!a&&o!=null){e._isValid=false;return}if(n[4])if(Sr.exec(n[4]))l="Z";else{e._isValid=false;return}e._f=s+(o||"")+(l||"");Fr(e)}else e._isValid=false}function xr(e,t,r,i,n,a){var s=[Ir(e),et.indexOf(t),parseInt(r,10),parseInt(i,10),parseInt(n,10)];if(a)s.push(parseInt(a,10));return s}function Ir(e){var t=parseInt(e,10);if(t<=49)return 2e3+t;else if(t<=999)return 1900+t;return t}function Cr(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kr(e,t,r){if(e){var i=Ot.indexOf(e),n=new Date(t[0],t[1],t[2]).getDay();if(i!==n){m(r).weekdayMismatch=true;r._isValid=false;return false}}return true}function wr(e,t,r){if(e)return Dr[e];else if(t)return 0;else{var i=parseInt(r,10),n=i%100,a=(i-n)/100;return a*60+n}}function Lr(e){var t=Er.exec(Cr(e._i)),r;if(t){r=xr(t[4],t[3],t[2],t[5],t[6],t[7]);if(!kr(t[1],r,e))return;e._a=r;e._tzm=wr(t[8],t[9],t[10]);e._d=vt.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);m(e).rfc2822=true}else e._isValid=false}function Or(e){var t=Ar.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}_r(e);if(e._isValid===false)delete e._isValid;else return;Lr(e);if(e._isValid===false)delete e._isValid;else return;if(e._strict)e._isValid=false;else c.createFromInputFallback(e)}function Pr(e,t,r){if(e!=null)return e;if(t!=null)return t;return r}function Nr(e){var t=new Date(c.now());if(e._useUTC)return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()];return[t.getFullYear(),t.getMonth(),t.getDate()]}function Rr(e){var t,r,i=[],n,a,s;if(e._d)return;n=Nr(e);if(e._w&&e._a[Ge]==null&&e._a[Ue]==null)jr(e);if(e._dayOfYear!=null){s=Pr(e._a[Ve],n[Ve]);if(e._dayOfYear>pt(s)||e._dayOfYear===0)m(e)._overflowDayOfYear=true;r=vt(s,0,e._dayOfYear);e._a[Ue]=r.getUTCMonth();e._a[Ge]=r.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=n[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];if(e._a[Ye]===24&&e._a[He]===0&&e._a[We]===0&&e._a[$e]===0){e._nextDay=true;e._a[Ye]=0}e._d=(e._useUTC?vt:yt).apply(null,i);a=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null)e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);if(e._nextDay)e._a[Ye]=24;if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==a)m(e).weekdayMismatch=true}function jr(e){var t,r,i,n,a,s,o,l,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;s=4;r=Pr(t.GG,e._a[Ve],Mt(Wr(),1,4).year);i=Pr(t.W,1);n=Pr(t.E,1);if(n<1||n>7)l=true}else{a=e._locale._week.dow;s=e._locale._week.doy;u=Mt(Wr(),a,s);r=Pr(t.gg,e._a[Ve],u.year);i=Pr(t.w,u.week);if(t.d!=null){n=t.d;if(n<0||n>6)l=true}else if(t.e!=null){n=t.e+a;if(t.e<0||t.e>6)l=true}else n=a}if(i<1||i>Tt(r,a,s))m(e)._overflowWeeks=true;else if(l!=null)m(e)._overflowWeekday=true;else{o=St(r,i,n,a,s);e._a[Ve]=o.year;e._dayOfYear=o.dayOfYear}}function Fr(e){if(e._f===c.ISO_8601){_r(e);return}if(e._f===c.RFC_2822){Lr(e);return}e._a=[];m(e).empty=true;var t=""+e._i,r,i,n,a,s,o=t.length,l=0,u;n=G(e._f,e._locale).match(N)||[];for(r=0;r<n.length;r++){a=n[r];i=(t.match(Pe(a,e))||[])[0];if(i){s=t.substr(0,t.indexOf(i));if(s.length>0)m(e).unusedInput.push(s);t=t.slice(t.indexOf(i)+i.length);l+=i.length}if(F[a]){if(i)m(e).empty=false;else m(e).unusedTokens.push(a);Be(a,i,e)}else if(e._strict&&!i)m(e).unusedTokens.push(a)}m(e).charsLeftOver=o-l;if(t.length>0)m(e).unusedInput.push(t);if(e._a[Ye]<=12&&m(e).bigHour===true&&e._a[Ye]>0)m(e).bigHour=undefined;m(e).parsedDateParts=e._a.slice(0);m(e).meridiem=e._meridiem;e._a[Ye]=zr(e._locale,e._a[Ye],e._meridiem);u=m(e).era;if(u!==null)e._a[Ve]=e._locale.erasConvertYear(u,e._a[Ve]);Rr(e);yr(e)}function zr(e,t,r){var i;if(r==null)return t;if(e.meridiemHour!=null)return e.meridiemHour(t,r);else if(e.isPM!=null){i=e.isPM(r);if(i&&t<12)t+=12;if(!i&&t===12)t=0;return t}else return t}function Br(e){var t,r,i,n,a,s,o=false;if(e._f.length===0){m(e).invalidFormat=true;e._d=new Date(NaN);return}for(n=0;n<e._f.length;n++){a=0;s=false;t=S({},e);if(e._useUTC!=null)t._useUTC=e._useUTC;t._f=e._f[n];Fr(t);if(g(t))s=true;a+=m(t).charsLeftOver;a+=m(t).unusedTokens.length*10;m(t).score=a;if(!o){if(i==null||a<i||s){i=a;r=t;if(s)o=true}}else if(a<i){i=a;r=t}}f(e,r||t)}function Vr(e){if(e._d)return;var t=ie(e._i),r=t.day===undefined?t.date:t.day;e._a=i([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Rr(e)}function Ur(e){var t=new M(yr(Gr(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Gr(e){var t=e._i,r=e._f;e._locale=e._locale||mr(e._l);if(t===null||r===undefined&&t==="")return y({nullInput:true});if(typeof t==="string")e._i=t=e._locale.preparse(t);if(T(t))return new M(yr(t));else if(d(t))e._d=t;else if(s(r))Br(e);else if(r)Fr(e);else Yr(e);if(!g(e))e._d=null;return e}function Yr(e){var t=e._i;if(a(t))e._d=new Date(c.now());else if(d(t))e._d=new Date(t.valueOf());else if(typeof t==="string")Or(e);else if(s(t)){e._a=i(t.slice(0),function(e){return parseInt(e,10)});Rr(e)}else if(o(t))Vr(e);else if(h(t))e._d=new Date(t);else c.createFromInputFallback(e)}function Hr(e,t,r,i,n){var a={};if(t===true||t===false){i=t;t=undefined}if(r===true||r===false){i=r;r=undefined}if(o(e)&&u(e)||s(e)&&e.length===0)e=undefined;a._isAMomentObject=true;a._useUTC=a._isUTC=n;a._l=r;a._i=e;a._f=t;a._strict=i;return Ur(a)}function Wr(e,t,r,i){return Hr(e,t,r,i,false)}c.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var $r=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Wr.apply(null,arguments);if(this.isValid()&&e.isValid())return e<this?this:e;else return y()}),Qr=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Wr.apply(null,arguments);if(this.isValid()&&e.isValid())return e>this?this:e;else return y()});function Kr(e,t){var r,i;if(t.length===1&&s(t[0]))t=t[0];if(!t.length)return Wr();r=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](r))r=t[i];return r}function Zr(){var e=[].slice.call(arguments,0);return Kr("isBefore",e)}function Xr(){var e=[].slice.call(arguments,0);return Kr("isAfter",e)}var qr=function(){return Date.now?Date.now():+new Date},Jr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ei(e){var t,r=false,i;for(t in e)if(l(e,t)&&!(Ze.call(Jr,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return false;for(i=0;i<Jr.length;++i)if(e[Jr[i]]){if(r)return false;if(parseFloat(e[Jr[i]])!==ue(e[Jr[i]]))r=true}return true}function ti(){return this._isValid}function ri(){return Di(NaN)}function ii(e){var t=ie(e),r=t.year||0,i=t.quarter||0,n=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=ei(t);this._milliseconds=+c+u*1e3+l*6e4+o*1e3*60*60;this._days=+s+a*7;this._months=+n+i*3+r*12;this._data={};this._locale=mr();this._bubble()}function ni(e){return e instanceof ii}function ai(e){if(e<0)return Math.round(-1*e)*-1;else return Math.round(e)}function si(e,t,r){var i=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),a=0,s;for(s=0;s<i;s++)if(r&&e[s]!==t[s]||!r&&ue(e[s])!==ue(t[s]))a++;return a+n}function oi(e,r){z(e,0,0,function(){var e=this.utcOffset(),t="+";if(e<0){e=-e;t="-"}return t+P(~~(e/60),2)+r+P(~~e%60,2)})}oi("Z",":"),oi("ZZ",""),Oe("Z",Ce),Oe("ZZ",Ce),Fe(["Z","ZZ"],function(e,t,r){r._useUTC=true;r._tzm=ui(Ce,e)});var li=/([\+\-]|\d\d)/gi;function ui(e,t){var r=(t||"").match(e),i,n,a;if(r===null)return null;i=r[r.length-1]||[];n=(i+"").match(li)||["-",0,0];a=+(n[1]*60)+ue(n[2]);return a===0?0:n[0]==="+"?a:-a}function ci(e,t){var r,i;if(t._isUTC){r=t.clone();i=(T(e)||d(e)?e.valueOf():Wr(e).valueOf())-r.valueOf();r._d.setTime(r._d.valueOf()+i);c.updateOffset(r,false);return r}else return Wr(e).local()}function hi(e){return-Math.round(e._d.getTimezoneOffset())}function di(e,t,r){var i=this._offset||0,n;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e==="string"){e=ui(Ce,e);if(e===null)return this}else if(Math.abs(e)<16&&!r)e=e*60;if(!this._isUTC&&t)n=hi(this);this._offset=e;this._isUTC=true;if(n!=null)this.add(n,"m");if(i!==e)if(!t||this._changeInProgress)ki(this,Di(e-i,"m"),1,false);else if(!this._changeInProgress){this._changeInProgress=true;c.updateOffset(this,true);this._changeInProgress=null}return this}else return this._isUTC?i:hi(this)}function fi(e,t){if(e!=null){if(typeof e!=="string")e=-e;this.utcOffset(e,t);return this}else return-this.utcOffset()}function pi(e){return this.utcOffset(0,e)}function mi(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e)this.subtract(hi(this),"m")}return this}function gi(){if(this._tzm!=null)this.utcOffset(this._tzm,false,true);else if(typeof this._i==="string"){var e=ui(Ie,this._i);if(e!=null)this.utcOffset(e);else this.utcOffset(0,true)}return this}function yi(e){if(!this.isValid())return false;e=e?Wr(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function vi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bi(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={},t;S(e,this);e=Gr(e);if(e._a){t=e._isUTC?p(e._a):Wr(e._a);this._isDSTShifted=this.isValid()&&si(e._a,t.toArray())>0}else this._isDSTShifted=false;return this._isDSTShifted}function Si(){return this.isValid()?!this._isUTC:false}function Mi(){return this.isValid()?this._isUTC:false}function Ti(){return this.isValid()?this._isUTC&&this._offset===0:false}c.updateOffset=function(){};var Ai=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ei=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Di(e,t){var r=e,i=null,n,a,s;if(ni(e))r={ms:e._milliseconds,d:e._days,M:e._months};else if(h(e)||!isNaN(+e)){r={};if(t)r[t]=+e;else r.milliseconds=+e}else if(i=Ai.exec(e)){n=i[1]==="-"?-1:1;r={y:0,d:ue(i[Ge])*n,h:ue(i[Ye])*n,m:ue(i[He])*n,s:ue(i[We])*n,ms:ue(ai(i[$e]*1e3))*n}}else if(i=Ei.exec(e)){n=i[1]==="-"?-1:1;r={y:_i(i[2],n),M:_i(i[3],n),w:_i(i[4],n),d:_i(i[5],n),h:_i(i[6],n),m:_i(i[7],n),s:_i(i[8],n)}}else if(r==null)r={};else if(typeof r==="object"&&("from"in r||"to"in r)){s=Ii(Wr(r.from),Wr(r.to));r={};r.ms=s.milliseconds;r.M=s.months}a=new ii(r);if(ni(e)&&l(e,"_locale"))a._locale=e._locale;if(ni(e)&&l(e,"_isValid"))a._isValid=e._isValid;return a}function _i(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function xi(e,t){var r={};r.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(r.months,"M").isAfter(t))--r.months;r.milliseconds=+t-+e.clone().add(r.months,"M");return r}function Ii(e,t){var r;if(!(e.isValid()&&t.isValid()))return{milliseconds:0,months:0};t=ci(t,e);if(e.isBefore(t))r=xi(e,t);else{r=xi(t,e);r.milliseconds=-r.milliseconds;r.months=-r.months}return r}function Ci(n,a){return function(e,t){var r,i;if(t!==null&&!isNaN(+t)){x(a,"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");i=e;e=t;t=i}r=Di(e,t);ki(this,r,n);return this}}function ki(e,t,r,i){var n=t._milliseconds,a=ai(t._days),s=ai(t._months);if(!e.isValid())return;i=i==null?true:i;if(s)lt(e,he(e,"Month")+s*r);if(a)de(e,"Date",he(e,"Date")+a*r);if(n)e._d.setTime(e._d.valueOf()+n*r);if(i)c.updateOffset(e,a||s)}Di.fn=ii.prototype,Di.invalid=ri;var wi=Ci(1,"add"),Li=Ci(-1,"subtract");function Oi(e){return typeof e==="string"||e instanceof String}function Pi(e){return T(e)||d(e)||Oi(e)||h(e)||Ri(e)||Ni(e)||e===null||e===undefined}function Ni(e){var t=o(e)&&!u(e),r=false,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,a;for(n=0;n<i.length;n+=1){a=i[n];r=r||l(e,a)}return t&&r}function Ri(t){var e=s(t),r=false;if(e)r=t.filter(function(e){return!h(e)&&Oi(t)}).length===0;return e&&r}function ji(e){var t=o(e)&&!u(e),r=false,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,a;for(n=0;n<i.length;n+=1){a=i[n];r=r||l(e,a)}return t&&r}function Fi(e,t){var r=e.diff(t,"days",true);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function zi(e,t){if(arguments.length===1)if(!arguments[0]){e=undefined;t=undefined}else if(Pi(arguments[0])){e=arguments[0];t=undefined}else if(ji(arguments[0])){t=arguments[0];e=undefined}var r=e||Wr(),i=ci(r,this).startOf("day"),n=c.calendarFormat(this,i)||"sameElse",a=t&&(I(t[n])?t[n].call(this,r):t[n]);return this.format(a||this.localeData().calendar(n,this,Wr(r)))}function Bi(){return new M(this)}function Vi(e,t){var r=T(e)?e:Wr(e);if(!(this.isValid()&&r.isValid()))return false;t=re(t)||"millisecond";if(t==="millisecond")return this.valueOf()>r.valueOf();else return r.valueOf()<this.clone().startOf(t).valueOf()}function Ui(e,t){var r=T(e)?e:Wr(e);if(!(this.isValid()&&r.isValid()))return false;t=re(t)||"millisecond";if(t==="millisecond")return this.valueOf()<r.valueOf();else return this.clone().endOf(t).valueOf()<r.valueOf()}function Gi(e,t,r,i){var n=T(e)?e:Wr(e),a=T(t)?t:Wr(t);if(!(this.isValid()&&n.isValid()&&a.isValid()))return false;i=i||"()";return(i[0]==="("?this.isAfter(n,r):!this.isBefore(n,r))&&(i[1]===")"?this.isBefore(a,r):!this.isAfter(a,r))}function Yi(e,t){var r=T(e)?e:Wr(e),i;if(!(this.isValid()&&r.isValid()))return false;t=re(t)||"millisecond";if(t==="millisecond")return this.valueOf()===r.valueOf();else{i=r.valueOf();return this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()}}function Hi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Wi(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $i(e,t,r){var i,n,a;if(!this.isValid())return NaN;i=ci(e,this);if(!i.isValid())return NaN;n=(i.utcOffset()-this.utcOffset())*6e4;t=re(t);switch(t){case"year":a=Qi(this,i)/12;break;case"month":a=Qi(this,i);break;case"quarter":a=Qi(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-n)/864e5;break;case"week":a=(this-i-n)/6048e5;break;default:a=this-i}return r?a:le(a)}function Qi(e,t){if(e.date()<t.date())return-Qi(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(r,"months"),n,a;if(t-i<0){n=e.clone().add(r-1,"months");a=(t-i)/(i-n)}else{n=e.clone().add(r+1,"months");a=(t-i)/(n-i)}return-(r+a)||0}function Ki(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zi(e){if(!this.isValid())return null;var t=e!==true,r=t?this.clone().utc():this;if(r.year()<0||r.year()>9999)return U(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");if(I(Date.prototype.toISOString))if(t)return this.toDate().toISOString();else return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",U(r,"Z"));return U(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Xi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,i,n,a;if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}r="["+e+'("]';i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";n="-MM-DD[T]HH:mm:ss.SSS";a=t+'[")]';return this.format(r+i+n+a)}function qi(e){if(!e)e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat;var t=U(this,e);return this.localeData().postformat(t)}function Ji(e,t){if(this.isValid()&&(T(e)&&e.isValid()||Wr(e).isValid()))return Di({to:this,from:e}).locale(this.locale()).humanize(!t);else return this.localeData().invalidDate()}function en(e){return this.from(Wr(),e)}function tn(e,t){if(this.isValid()&&(T(e)&&e.isValid()||Wr(e).isValid()))return Di({from:this,to:e}).locale(this.locale()).humanize(!t);else return this.localeData().invalidDate()}function rn(e){return this.to(Wr(),e)}function nn(e){var t;if(e===undefined)return this._locale._abbr;else{t=mr(e);if(t!=null)this._locale=t;return this}}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var an=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined)return this.localeData();else return this.locale(e)});function sn(){return this._locale}var on=1e3,ln=60*on,un=60*ln,cn=(365*400+97)*24*un;function hn(e,t){return(e%t+t)%t}function dn(e,t,r){if(e<100&&e>=0)return new Date(e+400,t,r)-cn;else return new Date(e,t,r).valueOf()}function fn(e,t,r){if(e<100&&e>=0)return Date.UTC(e+400,t,r)-cn;else return Date.UTC(e,t,r)}function pn(e){var t,r;e=re(e);if(e===undefined||e==="millisecond"||!this.isValid())return this;r=this._isUTC?fn:dn;switch(e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf();t-=hn(t+(this._isUTC?0:this.utcOffset()*ln),un);break;case"minute":t=this._d.valueOf();t-=hn(t,ln);break;case"second":t=this._d.valueOf();t-=hn(t,on);break}this._d.setTime(t);c.updateOffset(this,true);return this}function mn(e){var t,r;e=re(e);if(e===undefined||e==="millisecond"||!this.isValid())return this;r=this._isUTC?fn:dn;switch(e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf();t+=un-hn(t+(this._isUTC?0:this.utcOffset()*ln),un)-1;break;case"minute":t=this._d.valueOf();t+=ln-hn(t,ln)-1;break;case"second":t=this._d.valueOf();t+=on-hn(t,on)-1;break}this._d.setTime(t);c.updateOffset(this,true);return this}function gn(){return this._d.valueOf()-(this._offset||0)*6e4}function yn(){return Math.floor(this.valueOf()/1e3)}function vn(){return new Date(this.valueOf())}function bn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Mn(){return this.isValid()?this.toISOString():null}function Tn(){return g(this)}function An(){return f({},m(this))}function En(){return m(this).overflow}function Dn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function _n(e,t){var r,i,n,a=this._eras||mr("en")._eras;for(r=0,i=a.length;r<i;++r){switch(typeof a[r].since){case"string":n=c(a[r].since).startOf("day");a[r].since=n.valueOf();break}switch(typeof a[r].until){case"undefined":a[r].until=+Infinity;break;case"string":n=c(a[r].until).startOf("day").valueOf();a[r].until=n.valueOf();break}}return a}function xn(e,t,r){var i,n,a=this.eras(),s,o,l;e=e.toUpperCase();for(i=0,n=a.length;i<n;++i){s=a[i].name.toUpperCase();o=a[i].abbr.toUpperCase();l=a[i].narrow.toUpperCase();if(r)switch(t){case"N":case"NN":case"NNN":if(o===e)return a[i];break;case"NNNN":if(s===e)return a[i];break;case"NNNNN":if(l===e)return a[i];break}else if([s,o,l].indexOf(e)>=0)return a[i]}}function In(e,t){var r=e.since<=e.until?+1:-1;if(t===undefined)return c(e.since).year();else return c(e.since).year()+(t-e.offset)*r}function Cn(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){r=this.clone().startOf("day").valueOf();if(i[e].since<=r&&r<=i[e].until)return i[e].name;if(i[e].until<=r&&r<=i[e].since)return i[e].name}return""}function kn(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){r=this.clone().startOf("day").valueOf();if(i[e].since<=r&&r<=i[e].until)return i[e].narrow;if(i[e].until<=r&&r<=i[e].since)return i[e].narrow}return""}function wn(){var e,t,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){r=this.clone().startOf("day").valueOf();if(i[e].since<=r&&r<=i[e].until)return i[e].abbr;if(i[e].until<=r&&r<=i[e].since)return i[e].abbr}return""}function Ln(){var e,t,r,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){r=n[e].since<=n[e].until?+1:-1;i=this.clone().startOf("day").valueOf();if(n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return(this.year()-c(n[e].since).year())*r+n[e].offset}return this.year()}function On(e){if(!l(this,"_erasNameRegex"))Bn.call(this);return e?this._erasNameRegex:this._erasRegex}function Pn(e){if(!l(this,"_erasAbbrRegex"))Bn.call(this);return e?this._erasAbbrRegex:this._erasRegex}function Nn(e){if(!l(this,"_erasNarrowRegex"))Bn.call(this);return e?this._erasNarrowRegex:this._erasRegex}function Rn(e,t){return t.erasAbbrRegex(e)}function jn(e,t){return t.erasNameRegex(e)}function Fn(e,t){return t.erasNarrowRegex(e)}function zn(e,t){return t._eraYearOrdinalRegex||_e}function Bn(){var e=[],t=[],r=[],i=[],n,a,s=this.eras();for(n=0,a=s.length;n<a;++n){t.push(Re(s[n].name));e.push(Re(s[n].abbr));r.push(Re(s[n].narrow));i.push(Re(s[n].name));i.push(Re(s[n].abbr));i.push(Re(s[n].narrow))}this._erasRegex=new RegExp("^("+i.join("|")+")","i");this._erasNameRegex=new RegExp("^("+t.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Vn(e,t){z(0,[e,e.length],0,t)}function Un(e){return Qn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gn(e){return Qn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Yn(){return Tt(this.year(),1,4)}function Hn(){return Tt(this.isoWeekYear(),1,4)}function Wn(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function $n(){var e=this.localeData()._week;return Tt(this.weekYear(),e.dow,e.doy)}function Qn(e,t,r,i,n){var a;if(e==null)return Mt(this,i,n).year;else{a=Tt(e,i,n);if(t>a)t=a;return Kn.call(this,e,t,r,i,n)}}function Kn(e,t,r,i,n){var a=St(e,t,r,i,n),s=vt(a.year,0,a.dayOfYear);this.year(s.getUTCFullYear());this.month(s.getUTCMonth());this.date(s.getUTCDate());return this}function Zn(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}z("N",0,0,"eraAbbr"),z("NN",0,0,"eraAbbr"),z("NNN",0,0,"eraAbbr"),z("NNNN",0,0,"eraName"),z("NNNNN",0,0,"eraNarrow"),z("y",["y",1],"yo","eraYear"),z("y",["yy",2],0,"eraYear"),z("y",["yyy",3],0,"eraYear"),z("y",["yyyy",4],0,"eraYear"),Oe("N",Rn),Oe("NN",Rn),Oe("NNN",Rn),Oe("NNNN",jn),Oe("NNNNN",Fn),Fe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,i){var n=r._locale.erasParse(e,i,r._strict);if(n)m(r).era=n;else m(r).invalidEra=e}),Oe("y",_e),Oe("yy",_e),Oe("yyy",_e),Oe("yyyy",_e),Oe("yo",zn),Fe(["y","yy","yyy","yyyy"],Ve),Fe(["yo"],function(e,t,r,i){var n;if(r._locale._eraYearOrdinalRegex)n=e.match(r._locale._eraYearOrdinalRegex);if(r._locale.eraYearOrdinalParse)t[Ve]=r._locale.eraYearOrdinalParse(e,n);else t[Ve]=parseInt(e,10)}),z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Vn("gggg","weekYear"),Vn("ggggg","weekYear"),Vn("GGGG","isoWeekYear"),Vn("GGGGG","isoWeekYear"),te("weekYear","gg"),te("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Oe("G",xe),Oe("g",xe),Oe("GG",Se,ge),Oe("gg",Se,ge),Oe("GGGG",Ee,ve),Oe("gggg",Ee,ve),Oe("GGGGG",De,be),Oe("ggggg",De,be),ze(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,i){t[i.substr(0,2)]=ue(e)}),ze(["gg","GG"],function(e,t,r,i){t[i]=c.parseTwoDigitYear(e)}),z("Q",0,"Qo","quarter"),te("quarter","Q"),ae("quarter",7),Oe("Q",me),Fe("Q",function(e,t){t[Ue]=(ue(e)-1)*3}),z("D",["DD",2],"Do","date"),te("date","D"),ae("date",9),Oe("D",Se),Oe("DD",Se,ge),Oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Fe(["D","DD"],Ge),Fe("Do",function(e,t){t[Ge]=ue(e.match(Se)[0])});var Xn=ce("Date",true);function qn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}z("DDD",["DDDD",3],"DDDo","dayOfYear"),te("dayOfYear","DDD"),ae("dayOfYear",4),Oe("DDD",Ae),Oe("DDDD",ye),Fe(["DDD","DDDD"],function(e,t,r){r._dayOfYear=ue(e)}),z("m",["mm",2],0,"minute"),te("minute","m"),ae("minute",14),Oe("m",Se),Oe("mm",Se,ge),Fe(["m","mm"],He);var Jn=ce("Minutes",false);z("s",["ss",2],0,"second"),te("second","s"),ae("second",15),Oe("s",Se),Oe("ss",Se,ge),Fe(["s","ss"],We);var ea=ce("Seconds",false),ta,ra;for(z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return this.millisecond()*10}),z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),te("millisecond","ms"),ae("millisecond",16),Oe("S",Ae,me),Oe("SS",Ae,ge),Oe("SSS",Ae,ye),ta="SSSS";ta.length<=9;ta+="S")Oe(ta,_e);function ia(e,t){t[$e]=ue(("0."+e)*1e3)}for(ta="S";ta.length<=9;ta+="S")Fe(ta,ia);function na(){return this._isUTC?"UTC":""}function aa(){return this._isUTC?"Coordinated Universal Time":""}ra=ce("Milliseconds",false),z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var sa=M.prototype;if(sa.add=wi,sa.calendar=zi,sa.clone=Bi,sa.diff=$i,sa.endOf=mn,sa.format=qi,sa.from=Ji,sa.fromNow=en,sa.to=tn,sa.toNow=rn,sa.get=fe,sa.invalidAt=En,sa.isAfter=Vi,sa.isBefore=Ui,sa.isBetween=Gi,sa.isSame=Yi,sa.isSameOrAfter=Hi,sa.isSameOrBefore=Wi,sa.isValid=Tn,sa.lang=an,sa.locale=nn,sa.localeData=sn,sa.max=Qr,sa.min=$r,sa.parsingFlags=An,sa.set=pe,sa.startOf=pn,sa.subtract=Li,sa.toArray=bn,sa.toObject=Sn,sa.toDate=vn,sa.toISOString=Zi,sa.inspect=Xi,typeof Symbol!=="undefined"&&Symbol.for!=null)sa[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"};function oa(e){return Wr(e*1e3)}function la(){return Wr.apply(null,arguments).parseZone()}function ua(e){return e}sa.toJSON=Mn,sa.toString=Ki,sa.unix=yn,sa.valueOf=gn,sa.creationData=Dn,sa.eraName=Cn,sa.eraNarrow=kn,sa.eraAbbr=wn,sa.eraYear=Ln,sa.year=mt,sa.isLeapYear=gt,sa.weekYear=Un,sa.isoWeekYear=Gn,sa.quarter=sa.quarters=Zn,sa.month=ut,sa.daysInMonth=ct,sa.week=sa.weeks=xt,sa.isoWeek=sa.isoWeeks=It,sa.weeksInYear=Wn,sa.weeksInWeekYear=$n,sa.isoWeeksInYear=Yn,sa.isoWeeksInISOWeekYear=Hn,sa.date=Xn,sa.day=sa.days=Gt,sa.weekday=Yt,sa.isoWeekday=Ht,sa.dayOfYear=qn,sa.hour=sa.hours=rr,sa.minute=sa.minutes=Jn,sa.second=sa.seconds=ea,sa.millisecond=sa.milliseconds=ra,sa.utcOffset=di,sa.utc=pi,sa.local=mi,sa.parseZone=gi,sa.hasAlignedHourOffset=yi,sa.isDST=vi,sa.isLocal=Si,sa.isUtcOffset=Mi,sa.isUtc=Ti,sa.isUTC=Ti,sa.zoneAbbr=na,sa.zoneName=aa,sa.dates=E("dates accessor is deprecated. Use date instead.",Xn),sa.months=E("months accessor is deprecated. Use month instead",ut),sa.years=E("years accessor is deprecated. Use year instead",mt),sa.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fi),sa.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",bi);var ca=w.prototype;function ha(e,t,r,i){var n=mr(),a=p().set(i,t);return n[r](a,e)}function da(e,t,r){if(h(e)){t=e;e=undefined}e=e||"";if(t!=null)return ha(e,t,r,"month");var i,n=[];for(i=0;i<12;i++)n[i]=ha(e,i,r,"month");return n}function fa(e,t,r,i){if(typeof e==="boolean"){if(h(t)){r=t;t=undefined}t=t||""}else{t=e;r=t;e=false;if(h(t)){r=t;t=undefined}t=t||""}var n=mr(),a=e?n._week.dow:0,s,o=[];if(r!=null)return ha(t,(r+a)%7,i,"day");for(s=0;s<7;s++)o[s]=ha(t,(s+a)%7,i,"day");return o}function pa(e,t){return da(e,t,"months")}function ma(e,t){return da(e,t,"monthsShort")}function ga(e,t,r){return fa(e,t,r,"weekdays")}function ya(e,t,r){return fa(e,t,r,"weekdaysShort")}function va(e,t,r){return fa(e,t,r,"weekdaysMin")}ca.calendar=O,ca.longDateFormat=H,ca.invalidDate=$,ca.ordinal=Z,ca.preparse=ua,ca.postformat=ua,ca.relativeTime=q,ca.pastFuture=J,ca.set=C,ca.eras=_n,ca.erasParse=xn,ca.erasConvertYear=In,ca.erasAbbrRegex=Pn,ca.erasNameRegex=On,ca.erasNarrowRegex=Nn,ca.months=nt,ca.monthsShort=at,ca.monthsParse=ot,ca.monthsRegex=dt,ca.monthsShortRegex=ht,ca.week=At,ca.firstDayOfYear=_t,ca.firstDayOfWeek=Dt,ca.weekdays=Ft,ca.weekdaysMin=Bt,ca.weekdaysShort=zt,ca.weekdaysParse=Ut,ca.weekdaysRegex=Wt,ca.weekdaysShortRegex=$t,ca.weekdaysMinRegex=Qt,ca.isPM=er,ca.meridiem=ir,dr("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=ue(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}}),c.lang=E("moment.lang is deprecated. Use moment.locale instead.",dr),c.langData=E("moment.langData is deprecated. Use moment.localeData instead.",mr);var ba=Math.abs;function Sa(){var e=this._data;this._milliseconds=ba(this._milliseconds);this._days=ba(this._days);this._months=ba(this._months);e.milliseconds=ba(e.milliseconds);e.seconds=ba(e.seconds);e.minutes=ba(e.minutes);e.hours=ba(e.hours);e.months=ba(e.months);e.years=ba(e.years);return this}function Ma(e,t,r,i){var n=Di(t,r);e._milliseconds+=i*n._milliseconds;e._days+=i*n._days;e._months+=i*n._months;return e._bubble()}function Ta(e,t){return Ma(this,e,t,1)}function Aa(e,t){return Ma(this,e,t,-1)}function Ea(e){if(e<0)return Math.floor(e);else return Math.ceil(e)}function Da(){var e=this._milliseconds,t=this._days,r=this._months,i=this._data,n,a,s,o,l;if(!(e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0)){e+=Ea(xa(r)+t)*864e5;t=0;r=0}i.milliseconds=e%1e3;n=le(e/1e3);i.seconds=n%60;a=le(n/60);i.minutes=a%60;s=le(a/60);i.hours=s%24;t+=le(s/24);l=le(_a(t));r+=l;t-=Ea(xa(l));o=le(r/12);r%=12;i.days=t;i.months=r;i.years=o;return this}function _a(e){return e*4800/146097}function xa(e){return e*146097/4800}function Ia(e){if(!this.isValid())return NaN;var t,r,i=this._milliseconds;e=re(e);if(e==="month"||e==="quarter"||e==="year"){t=this._days+i/864e5;r=this._months+_a(t);switch(e){case"month":return r;case"quarter":return r/3;case"year":return r/12}}else{t=this._days+Math.round(xa(this._months));switch(e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}}function Ca(){if(!this.isValid())return NaN;return this._milliseconds+this._days*864e5+this._months%12*2592e6+ue(this._months/12)*31536e6}function ka(e){return function(){return this.as(e)}}var wa=ka("ms"),La=ka("s"),Oa=ka("m"),Pa=ka("h"),Na=ka("d"),Ra=ka("w"),ja=ka("M"),Fa=ka("Q"),za=ka("y");function Ba(){return Di(this)}function Va(e){e=re(e);return this.isValid()?this[e+"s"]():NaN}function Ua(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ga=Ua("milliseconds"),Ya=Ua("seconds"),Ha=Ua("minutes"),Wa=Ua("hours"),$a=Ua("days"),Qa=Ua("months"),Ka=Ua("years");function Za(){return le(this.days()/7)}var Xa=Math.round,qa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ja(e,t,r,i,n){return n.relativeTime(t||1,!!r,e,i)}function es(e,t,r,i){var n=Di(e).abs(),a=Xa(n.as("s")),s=Xa(n.as("m")),o=Xa(n.as("h")),l=Xa(n.as("d")),u=Xa(n.as("M")),c=Xa(n.as("w")),h=Xa(n.as("y")),d=a<=r.ss&&["s",a]||a<r.s&&["ss",a]||s<=1&&["m"]||s<r.m&&["mm",s]||o<=1&&["h"]||o<r.h&&["hh",o]||l<=1&&["d"]||l<r.d&&["dd",l];if(r.w!=null)d=d||c<=1&&["w"]||c<r.w&&["ww",c];d=d||u<=1&&["M"]||u<r.M&&["MM",u]||h<=1&&["y"]||["yy",h];d[2]=t;d[3]=+e>0;d[4]=i;return Ja.apply(null,d)}function ts(e){if(e===undefined)return Xa;if(typeof e==="function"){Xa=e;return true}return false}function rs(e,t){if(qa[e]===undefined)return false;if(t===undefined)return qa[e];qa[e]=t;if(e==="s")qa.ss=t-1;return true}function is(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=false,i=qa,n,a;if(typeof e==="object"){t=e;e=false}if(typeof e==="boolean")r=e;if(typeof t==="object"){i=Object.assign({},qa,t);if(t.s!=null&&t.ss==null)i.ss=t.s-1}n=this.localeData();a=es(this,!r,i,n);if(r)a=n.pastFuture(+this,a);return n.postformat(a)}var ns=Math.abs;function as(e){return(e>0)-(e<0)||+e}function ss(){if(!this.isValid())return this.localeData().invalidDate();var e=ns(this._milliseconds)/1e3,t=ns(this._days),r=ns(this._months),i,n,a,s,o=this.asSeconds(),l,u,c,h;if(!o)return"P0D";i=le(e/60);n=le(i/60);e%=60;i%=60;a=le(r/12);r%=12;s=e?e.toFixed(3).replace(/\.?0+$/,""):"";l=o<0?"-":"";u=as(this._months)!==as(o)?"-":"";c=as(this._days)!==as(o)?"-":"";h=as(this._milliseconds)!==as(o)?"-":"";return l+"P"+(a?u+a+"Y":"")+(r?u+r+"M":"")+(t?c+t+"D":"")+(n||i||e?"T":"")+(n?h+n+"H":"")+(i?h+i+"M":"")+(e?h+s+"S":"")}var os=ii.prototype;return os.isValid=ti,os.abs=Sa,os.add=Ta,os.subtract=Aa,os.as=Ia,os.asMilliseconds=wa,os.asSeconds=La,os.asMinutes=Oa,os.asHours=Pa,os.asDays=Na,os.asWeeks=Ra,os.asMonths=ja,os.asQuarters=Fa,os.asYears=za,os.valueOf=Ca,os._bubble=Da,os.clone=Ba,os.get=Va,os.milliseconds=Ga,os.seconds=Ya,os.minutes=Ha,os.hours=Wa,os.days=$a,os.weeks=Za,os.months=Qa,os.years=Ka,os.humanize=is,os.toISOString=ss,os.toString=ss,os.toJSON=ss,os.locale=nn,os.localeData=sn,os.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ss),os.lang=an,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Oe("x",xe),Oe("X",ke),Fe("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)}),Fe("x",function(e,t,r){r._d=new Date(ue(e))}),c.version="2.29.1",e(Wr),c.fn=sa,c.min=Zr,c.max=Xr,c.now=qr,c.utc=p,c.unix=oa,c.months=pa,c.isDate=d,c.locale=dr,c.invalid=y,c.duration=Di,c.isMoment=T,c.weekdays=ga,c.parseZone=la,c.localeData=mr,c.isDuration=ni,c.monthsShort=ma,c.weekdaysMin=va,c.defineLocale=fr,c.updateLocale=pr,c.locales=gr,c.weekdaysShort=ya,c.normalizeUnits=re,c.relativeTimeRounding=ts,c.relativeTimeThreshold=rs,c.calendarFormat=Fi,c.prototype=sa,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c}()});function replaceDate(e){return moment().format("Do MMMM YYYY")}function replaceTime(e){return moment().format("HH:mm")}var textValueReplacements={date:replaceDate,time:replaceTime},lastReplacedItems={},REPLACE_DELAY_IN_MS=1e3,keysCheck=Object.keys(textValueReplacements).join("|"),checkTextValueReplacementsRegex=new RegExp("#(".concat(keysCheck,")"),"gm");function populateTextValues(e,t){if(!t.textValue)return t;var r=lastReplacedItems[e]||null;if(r&&r.time>Date.now()-REPLACE_DELAY_IN_MS)return _objectSpread2(_objectSpread2({},t),{},{textValue:r.value});checkTextValueReplacementsRegex.lastIndex=0;for(var i=t.textValue,n=checkTextValueReplacementsRegex.exec(i);null!==n;)var a=n[0],s=n[1],i=i.replace(a,textValueReplacements[s](i)),n=checkTextValueReplacementsRegex.exec(i);return lastReplacedItems[e]={time:Date.now(),value:i},_objectSpread2(_objectSpread2({},t),{},{textValue:i})}function populateDynamicValues(e,t){return populateTextValues(e,t)}var _excluded$6=["absoluteBeginTime","absoluteEndTime","id","styles","animations","type"],calculateNewStyles=function(e){return function(e){var t=e.animations,r=e.absoluteBeginTime,i=e.currentTime;if(t){t=t.reduce(function(e,t){t=getStylesFromAnimation()({absoluteBeginTime:r,animation:t,currentTime:i});return mergeTransformStyle()(e,t)},{});return getWillChangeStyle(t)}return{}}},createLayer=function(e,t){var r=e.absoluteBeginTime,i=e.absoluteEndTime,n=e.id,a=e.styles,s=e.animations,o=e.type,l=_objectWithoutProperties(e,_excluded$6),u=t.currentTime,c=t.measurements,h=(t.imageMap,t.videoState),e=t.currentState,t=null;if((h===SEEKED||h===NOT_USED)&&r<=u&&u<=i&&e!==INITIALISING){u=calculateNewStyles()({animations:s,absoluteBeginTime:r,currentTime:u}),u=combinePositionAndTranslate(adjustTransformTranslate(mergeTransformStyle()(a,u)));if(!isLayerVisible(u,{right:1600,bottom:900}))return null;c=adjustSizing(o,u,c),t=_objectSpread2(_objectSpread2({},populateDynamicValues(n,l)),{},{type:o,styles:c,absoluteBeginTime:r,absoluteEndTime:i})}return _defineProperty({},n,t)},filterLayer=function(e,t,r){return 0<t.length?!t.includes(r.id):!e||0===e.length||e.includes(r.id)},overrideWithState=function(e,a,s){return e.slice().sort(function(e,t){return e.timeApplied<=t.timeApplied?-1:1}).reduce(function(e,t){var r=a.states?a.states[t.name]:void 0;if(!r)return e;var i=s.id.slice(s.id.lastIndexOf(".")+1),r=r.elements.find(function(e){return e.id.slice(e.id.lastIndexOf(".")+1)===i});if(!r)return e;var n=t.timeApplied-s.absoluteBeginTime;return _objectSpread2(_objectSpread2(_objectSpread2({},e),r),{},{animations:r.animations?r.animations.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{beginTime:parseFloat(e.beginTime)+(e.useLayerRelativeTime?0:n)})}):e.animations})},s)},createLayers=function(c,h){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,i=t.currentTime,n=t.isFullScreen,a=t.measurements,s=t.imageMap,o=t.videoState,l=t.currentState,u=t.layerStates;return e.reduce?e.reduce(function(e,r){return _objectSpread2(_objectSpread2({},e),r.elements.reduce(function(e,t){return _objectSpread2(_objectSpread2({},e),filterLayer(c,h,t)?createLayer(overrideWithState(u,r,t),{currentTime:i,isFullScreen:n,measurements:a,imageMap:s,videoState:o,currentState:l}):{})},{}))},{}):{}}},calculateOffsets=function(e,t){return 16/9<e/t?{yOffset:0,xOffset:(e-16*t/9)/2}:e/t<16/9?{yOffset:(t-9*e/16)/2,xOffset:0}:{xOffset:0,yOffset:0}},BASE_LAYER_WIDTH_169=1600,BASE_LAYER_HEIGHT_169=900,calculateAspectRatioPercent=function(e,t){return 16/9<e/t?t/BASE_LAYER_HEIGHT_169:e/BASE_LAYER_WIDTH_169},calculateMeasurements=function(e){var t=e.clientHeight,r=e.clientWidth,e=calculateAspectRatioPercent(r,t);return _objectSpread2(_objectSpread2({},calculateOffsets(r,t)),{},{width:r,height:t,aspectRatioPercent:e})},mapImage=function(e){return _defineProperty({},e.key,{width:e.width,height:e.height,url:e.url})},recursiveFilterState=function i(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return"element"!==t&&"store"!==t?"object"===_typeof(r)&&null!==r?_objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,i(r))):_objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,r)):_objectSpread2(_objectSpread2({},e),{},_defineProperty({},t," [object Object]"))},{})},logMobxState=function(e,t){t&&console.groupCollapsed("State Update"),console.log(recursiveFilterState(e)),t&&console.groupEnd()},_excluded$7=["originalVideoWidth","videoStartOffsetTime","videoEndOffsetTime","video","videoPlayerContainer","layersJson","enabledLayerIds","disabledLayerIds"],_dec$3,_dec2$2,_dec3$1,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_dec11,_dec12,_dec13,_dec14,_dec15,_dec16,_dec17,_dec18,_dec19,_dec20,_dec21,_class$3,_descriptor$3,_descriptor2$1,_descriptor3$1,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_descriptor10,_descriptor11,_descriptor12,_descriptor13,_descriptor14,_descriptor15,_descriptor16,_descriptor17,_descriptor18,_descriptor19,_descriptor20,_descriptor21,_descriptor22,_descriptor23,_descriptor24,_descriptor25,_descriptor26,_descriptor27,_descriptor28,_descriptor29,_descriptor30,_descriptor31,_descriptor32,_descriptor33,_descriptor34,_descriptor35,_descriptor36,_descriptor37;configure({enforceActions:"observed"});var RootStore=(_dec$3=action.bound,_dec2$2=action.bound,_dec3$1=action.bound,_dec4=action.bound,_dec5=action.bound,_dec6=action.bound,_dec7=action.bound,_dec8=action.bound,_dec9=action.bound,_dec10=action.bound,_dec11=action.bound,_dec12=action.bound,_dec13=action.bound,_dec14=action.bound,_dec15=action.bound,_dec16=action.bound,_dec17=action.bound,_dec18=action.bound,_dec19=action.bound,_dec20=action.bound,_dec21=action.bound,_class$3=function(){function e(){_classCallCheck(this,e),this.hasInitialised=!1,_initializerDefineProperty(this,"autoLoop",_descriptor$3,this),_initializerDefineProperty(this,"originalVideoWidth",_descriptor2$1,this),_initializerDefineProperty(this,"originalVideoHeight",_descriptor3$1,this),_initializerDefineProperty(this,"videoStartOffsetTime",_descriptor4,this),_initializerDefineProperty(this,"videoEndOffsetTime",_descriptor5,this),_initializerDefineProperty(this,"videoPlayerContainer",_descriptor6,this),_initializerDefineProperty(this,"clientWidth",_descriptor7,this),_initializerDefineProperty(this,"clientHeight",_descriptor8,this),_initializerDefineProperty(this,"state",_descriptor9,this),_initializerDefineProperty(this,"previousState",_descriptor10,this),_initializerDefineProperty(this,"videoState",_descriptor11,this),_initializerDefineProperty(this,"currentTime",_descriptor12,this),_initializerDefineProperty(this,"startTime",_descriptor13,this),_initializerDefineProperty(this,"duration",_descriptor14,this),_initializerDefineProperty(this,"absoluteBumperBeginTime",_descriptor15,this),_initializerDefineProperty(this,"isFullScreen",_descriptor16,this),_initializerDefineProperty(this,"originalVideoWidth",_descriptor17,this),_initializerDefineProperty(this,"originalVideoHeight",_descriptor18,this),_initializerDefineProperty(this,"controls",_descriptor19,this),_initializerDefineProperty(this,"errorMessage",_descriptor20,this),_initializerDefineProperty(this,"layerStates",_descriptor21,this),_initializerDefineProperty(this,"imageMap",_descriptor22,this),_initializerDefineProperty(this,"hasImageMapLoaded",_descriptor23,this),_initializerDefineProperty(this,"fontMap",_descriptor24,this),_initializerDefineProperty(this,"hasFontMapLoaded",_descriptor25,this),_initializerDefineProperty(this,"showSubtitles",_descriptor26,this),_initializerDefineProperty(this,"displaySubtitlesButton",_descriptor27,this),_initializerDefineProperty(this,"muted",_descriptor28,this),_initializerDefineProperty(this,"volume",_descriptor29,this),_initializerDefineProperty(this,"mobileLandscapeOnFullscreen",_descriptor30,this),_initializerDefineProperty(this,"loadingStartTime",_descriptor31,this),_initializerDefineProperty(this,"layersJson",_descriptor32,this),this.enabledLayerIds=[],this.disabledLayerIds=[],_initializerDefineProperty(this,"useGrid",_descriptor33,this),_initializerDefineProperty(this,"useTimeInMillis",_descriptor34,this),_initializerDefineProperty(this,"showMouseCoords",_descriptor35,this),_initializerDefineProperty(this,"autoLoop",_descriptor36,this),_initializerDefineProperty(this,"logStateChange",_descriptor37,this)}return _createClass(e,[{key:"setLoadingStartTime",value:function(){0===this.loadingStartTime&&(this.loadingStartTime=Date.now())}},{key:"resetLoadingStartTime",value:function(){this.loadingStartTime=0}},{key:"currentState",get:function(){return this.hasImageMapLoaded&&this.hasFontMapLoaded||this.state===LOADING_ERROR?this.state:this.previousState!==PLAYING?INITIALISING:LOADING}},{key:"readyToShow",get:function(){return this.hasImageMapLoaded&&this.hasFontMapLoaded}},{key:"layers",get:function(){return createLayers(this.enabledLayerIds,this.disabledLayerIds)(this.layersJson,{currentTime:this.currentTime,imageMap:this.imageMap,isFullScreen:this.isFullScreen,measurements:this.measurements,videoState:this.videoState,currentState:this.currentState,layerStates:this.layerStates.getState()})}},{key:"measurements",get:function(){return this.videoPlayerContainer&&this.state?this.video?_objectSpread2({clientWidth:this.clientWidth,clientHeight:this.clientHeight,videoWidth:this.video.clientWidth(),videoHeight:this.video.clientHeight()},calculateMeasurements({clientWidth:this.clientWidth,clientHeight:this.clientHeight})):_objectSpread2({clientWidth:this.clientWidth,clientHeight:this.clientHeight,videoHeight:this.clientWidth,videoWidth:this.clientHeight},calculateMeasurements({clientWidth:this.clientWidth,clientHeight:this.clientHeight})):{}}},{key:"getState",value:function(){return _objectSpread2({currentState:this.currentState,previousState:this.previousState,videoState:this.videoState,currentTime:this.currentTime,startTime:this.startTime,duration:this.duration,isFullScreen:this.isFullScreen,showSubtitles:this.showSubtitles,muted:this.muted,volume:this.volume,mobileLandscapeOnFullscreen:this.mobileLandscapeOnFullscreen,autoLoop:this.autoLoop,hasImageMapLoaded:this.hasImageMapLoaded,hasFontMapLoaded:this.hasFontMapLoaded,imageMap:this.imageMap,fontMap:this.fontMap,measurements:this.measurements,layers:this.layers,controls:this.controls.getState(),videoStartOffsetTime:this.videoStartOffsetTime,videoEndOffsetTime:this.videoEndOffsetTime,originalVideoWidth:this.originalVideoWidth,originalVideoHeight:this.originalVideoHeight,clientWidth:this.clientWidth,clientHeight:this.clientHeight},{enabledLayerIds:this.enabledLayerIds,disabledLayerIds:this.disabledLayerIds,layersJson:this.layersJson,useGrid:this.useGrid,useTimeInMillis:this.useTimeInMillis,showMouseCoords:this.showMouseCoords,autoLoop:this.autoLoop,logStateChange:this.logStateChange})}},{key:"updateCurrentTime",value:function(e){e<this.duration?this.currentTime=e:this.currentTime=this.duration}},{key:"updateDuration",value:function(e){this.duration=e,this.updateCurrentTime(0)}},{key:"updateStartTime",value:function(e){this.startTime=e}},{key:"updateControlsAlwaysOn",value:function(e){this.controls.updateAlwaysOn(e)}},{key:"setShowControlsTimeout",value:function(){this.controls.setShowControlsTimeout(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)}},{key:"clearShowControlsTimeout",value:function(){this.controls.clearShowControlsTimeout()}},{key:"updateIsMouseOnControls",value:function(e){this.controls.updateIsMouseOnControls(e),this.clearShowControlsTimeout()}},{key:"update",value:function(e){var t=e.state,r=e.previousState,i=e.videoState,n=e.currentTime,a=e.duration,s=e.startTime,o=e.layersJson,l=e.errorMessage,u=e.isFullScreen,c=e.imageMap,h=e.hasImageMapLoaded,d=e.hasFontMapLoaded,f=e.fontMap,p=e.showControls,m=e.bumperBeginTime,g=e.showSubtitles,y=e.muted,v=e.volume,b=e.mobileLandscapeOnFullscreen,S=e.displaySubtitlesButton,e=e.videoStartOffsetTime;isNullOrUndefined(t)||this.state===t||(this.previousState=this.state,this.state=t),isNullOrUndefined(r)||(this.previousState=r),isNullOrUndefined(i)||(this.videoState=i),isNullOrUndefined(n)||this.updateCurrentTime(n),isNullOrUndefined(a)||this.updateDuration(a),isNullOrUndefined(s)||this.updateStartTime(s),isNullOrUndefined(o)||(this.layersJson=o),isNullOrUndefined(l)||this.errorMessage.update(l),isNullOrUndefined(u)||(this.isFullScreen=u),isNullOrUndefined(h)||(this.hasImageMapLoaded=h),isNullOrUndefined(c)||this.updateImageMap(c),isNullOrUndefined(d)||(this.hasFontMapLoaded=d),isNullOrUndefined(f)||this.updateFontMap(f),isNullOrUndefined(p)||this.controls.updateShowControls(p),isNullOrUndefined(m)||(this.absoluteBumperBeginTime=m),isNullOrUndefined(g)||(this.showSubtitles=g),isNullOrUndefined(y)||(this.muted=y),isNullOrUndefined(v)||(this.volume=v),isNullOrUndefined(b)||(this.mobileLandscapeOnFullscreen=b),isNullOrUndefined(S)||(this.displaySubtitlesButton=S),isNullOrUndefined(e)||(this.videoStartOffsetTime=e)}},{key:"updateAutoLoop",value:function(e){this.autoLoop=e}},{key:"updateShowMouseCoords",value:function(e){this.showMouseCoords=e}},{key:"updateUseTimeInMillis",value:function(e){this.useTimeInMillis=e}},{key:"updateUseGrid",value:function(e){this.useGrid=e}},{key:"updateLogStateChange",value:function(e){this.logStateChange=e}},{key:"updateMeasurements",value:function(e){var t=e.isFullScreen,r=e.originalVideoWidth,e=e.originalVideoHeight;this.videoPlayerContainer&&(this.clientWidth=this.videoPlayerContainer.clientWidth(t),this.clientHeight=this.videoPlayerContainer.clientHeight(t)),isNullOrUndefined(t)||(this.isFullScreen=t),isNullOrUndefined(r)||(this.originalVideoWidth=r),isNullOrUndefined(e)||(this.originalVideoHeight=e)}},{key:"updateErrorMessage",value:function(e){this.errorMessage.update(e)}},{key:"updateImageMap",value:function(e){this.imageMap=_objectSpread2(_objectSpread2({},this.imageMap),Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return _objectSpread2(_objectSpread2({},e),mapImage(_objectSpread2({key:t},r)))},{}))}},{key:"updateFontMap",value:function(e){this.fontMap=_objectSpread2(_objectSpread2({},this.fontMap),Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,{url:r}))},{}))}},{key:"updateDevOptions",value:function(e){var t=e.autoLoop,r=e.controlsAlwaysOn,i=e.logStateChange,n=e.showMouseCoords,a=e.useGrid,s=e.useTimeInMillis,e=e.duration;isNullOrUndefined(t)||(this.autoLoop=t),isNullOrUndefined(r)||this.updateControlsAlwaysOn(r),isNullOrUndefined(i)||(this.logStateChange=i),isNullOrUndefined(n)||(this.showMouseCoords=n),isNullOrUndefined(a)||(this.useGrid=a),isNullOrUndefined(s)||(this.useTimeInMillis=s),isNullOrUndefined(e)||this.updateDuration(e)}},{key:"init",value:function(e){var t=this,r=e.originalVideoWidth,i=void 0===r?this.originalVideoWidth:r,n=e.videoStartOffsetTime,a=void 0===n?this.videoStartOffsetTime:n,s=e.videoEndOffsetTime,o=void 0===s?this.videoEndOffsetTime:s,l=e.video,u=e.videoPlayerContainer,r=e.layersJson,n=e.enabledLayerIds,s=void 0===n?[]:n,n=e.disabledLayerIds,n=void 0===n?[]:n,e=_objectWithoutProperties(e,_excluded$7);this.hasInitialised||(this.originalVideoWidth=i,this.videoStartOffsetTime=a,this.videoEndOffsetTime=o,this.videoPlayerContainer=u,this.video=l,this.layersJson=r,this.enabledLayerIds=s,this.disabledLayerIds=n,this.update(e),this.hasInitialised=!0,autorun(function(){!0===t.logStateChange&&logMobxState(t.getState(),!1)},autorunConfig),window.updateDevOptions=this.updateDevOptions)}}]),e}(),_descriptor$3=_applyDecoratedDescriptor(_class$3.prototype,"autoLoop",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor2$1=_applyDecoratedDescriptor(_class$3.prototype,"originalVideoWidth",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1600}}),_descriptor3$1=_applyDecoratedDescriptor(_class$3.prototype,"originalVideoHeight",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 900}}),_descriptor4=_applyDecoratedDescriptor(_class$3.prototype,"videoStartOffsetTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor5=_applyDecoratedDescriptor(_class$3.prototype,"videoEndOffsetTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor6=_applyDecoratedDescriptor(_class$3.prototype,"videoPlayerContainer",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor7=_applyDecoratedDescriptor(_class$3.prototype,"clientWidth",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor8=_applyDecoratedDescriptor(_class$3.prototype,"clientHeight",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor9=_applyDecoratedDescriptor(_class$3.prototype,"state",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return INITIALISING}}),_descriptor10=_applyDecoratedDescriptor(_class$3.prototype,"previousState",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return INITIALISING}}),_descriptor11=_applyDecoratedDescriptor(_class$3.prototype,"videoState",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return INITIALISING}}),_descriptor12=_applyDecoratedDescriptor(_class$3.prototype,"currentTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor13=_applyDecoratedDescriptor(_class$3.prototype,"startTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor14=_applyDecoratedDescriptor(_class$3.prototype,"duration",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor15=_applyDecoratedDescriptor(_class$3.prototype,"absoluteBumperBeginTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor16=_applyDecoratedDescriptor(_class$3.prototype,"isFullScreen",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor17=_applyDecoratedDescriptor(_class$3.prototype,"originalVideoWidth",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor18=_applyDecoratedDescriptor(_class$3.prototype,"originalVideoHeight",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor19=_applyDecoratedDescriptor(_class$3.prototype,"controls",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Controls(this)}}),_descriptor20=_applyDecoratedDescriptor(_class$3.prototype,"errorMessage",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ErrorMessage(this)}}),_descriptor21=_applyDecoratedDescriptor(_class$3.prototype,"layerStates",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new LayerStates(this)}}),_descriptor22=_applyDecoratedDescriptor(_class$3.prototype,"imageMap",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_descriptor23=_applyDecoratedDescriptor(_class$3.prototype,"hasImageMapLoaded",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor24=_applyDecoratedDescriptor(_class$3.prototype,"fontMap",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_descriptor25=_applyDecoratedDescriptor(_class$3.prototype,"hasFontMapLoaded",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor26=_applyDecoratedDescriptor(_class$3.prototype,"showSubtitles",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_descriptor27=_applyDecoratedDescriptor(_class$3.prototype,"displaySubtitlesButton",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_descriptor28=_applyDecoratedDescriptor(_class$3.prototype,"muted",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor29=_applyDecoratedDescriptor(_class$3.prototype,"volume",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_descriptor30=_applyDecoratedDescriptor(_class$3.prototype,"mobileLandscapeOnFullscreen",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor31=_applyDecoratedDescriptor(_class$3.prototype,"loadingStartTime",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_applyDecoratedDescriptor(_class$3.prototype,"setLoadingStartTime",[_dec$3],Object.getOwnPropertyDescriptor(_class$3.prototype,"setLoadingStartTime"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"resetLoadingStartTime",[_dec2$2],Object.getOwnPropertyDescriptor(_class$3.prototype,"resetLoadingStartTime"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"currentState",[computed],Object.getOwnPropertyDescriptor(_class$3.prototype,"currentState"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"readyToShow",[computed],Object.getOwnPropertyDescriptor(_class$3.prototype,"readyToShow"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"layers",[computed],Object.getOwnPropertyDescriptor(_class$3.prototype,"layers"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"measurements",[computed],Object.getOwnPropertyDescriptor(_class$3.prototype,"measurements"),_class$3.prototype),_descriptor32=_applyDecoratedDescriptor(_class$3.prototype,"layersJson",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_descriptor33=_applyDecoratedDescriptor(_class$3.prototype,"useGrid",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor34=_applyDecoratedDescriptor(_class$3.prototype,"useTimeInMillis",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor35=_applyDecoratedDescriptor(_class$3.prototype,"showMouseCoords",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor36=_applyDecoratedDescriptor(_class$3.prototype,"autoLoop",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor37=_applyDecoratedDescriptor(_class$3.prototype,"logStateChange",[observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_applyDecoratedDescriptor(_class$3.prototype,"updateCurrentTime",[_dec3$1],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateCurrentTime"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateDuration",[_dec4],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateDuration"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateStartTime",[_dec5],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateStartTime"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateControlsAlwaysOn",[_dec6],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateControlsAlwaysOn"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"setShowControlsTimeout",[_dec7],Object.getOwnPropertyDescriptor(_class$3.prototype,"setShowControlsTimeout"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"clearShowControlsTimeout",[_dec8],Object.getOwnPropertyDescriptor(_class$3.prototype,"clearShowControlsTimeout"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateIsMouseOnControls",[_dec9],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateIsMouseOnControls"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"update",[_dec10],Object.getOwnPropertyDescriptor(_class$3.prototype,"update"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateAutoLoop",[_dec11],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateAutoLoop"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateShowMouseCoords",[_dec12],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateShowMouseCoords"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateUseTimeInMillis",[_dec13],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateUseTimeInMillis"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateUseGrid",[_dec14],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateUseGrid"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateLogStateChange",[_dec15],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateLogStateChange"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateMeasurements",[_dec16],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateMeasurements"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateErrorMessage",[_dec17],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateErrorMessage"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateImageMap",[_dec18],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateImageMap"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateFontMap",[_dec19],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateFontMap"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"updateDevOptions",[_dec20],Object.getOwnPropertyDescriptor(_class$3.prototype,"updateDevOptions"),_class$3.prototype),_applyDecoratedDescriptor(_class$3.prototype,"init",[_dec21],Object.getOwnPropertyDescriptor(_class$3.prototype,"init"),_class$3.prototype),_class$3),actions=function(e){e=e.store;return{updateBackgroundColour:e.updateBackgroundColour,updateUseGrid:e.updateUseGrid,updateUseTimeInMillis:e.updateUseTimeInMillis,updateShowMouseCoords:e.updateShowMouseCoords,updateControlsAlwaysOn:e.updateControlsAlwaysOn,updateAutoLoop:e.updateAutoLoop,updateLogStateChange:e.updateLogStateChange,updateDuration:e.updateDuration,updateDevOptions:e.updateDevOptions}},IMAGE="image",TEXT="text",SUBTITLE="subtitle",BLOCK="block",INFOGRAPHIC="infographic",VIDEO="video",_excluded$8=["key"],fetchImageFromUrl=function(i,n){return new Promise(function(e,t){var r=new Image;r.src=n,r.onload=function(){return e({key:i,url:n,image:r})},r.onerror=function(){return t({key:i,url:n})}})},fetchImagesFromUrls=function(r){return new Promise(function(t){var e=r.map(function(e){var t=e.url,e=e.key;return fetchImageFromUrl(e,t)});0<e.length?Promise.all(e).then(function(e){t(e.map(function(e){var t=e.image,e=e.key;return{url:t.src,height:t.height,width:t.width,key:e}}))}):t([])})},fetchAssetUrlsFromServer=function(e,t){var r=t.map(function(e){return{key:e,url:e}}),i={};return 0<r.length?new Promise(function(t){e("asset_urls",{body:JSON.stringify({assets:r}),method:"POST",credentials:"omit"}).then(function(e){e.assets.forEach(function(e){i[e.key]=e}),t(Object.values(i))})}):Promise.resolve([])},getAssetsToFetch=function(e,t){return e.filter(function(e){return!t[e]&&!e.includes("sbtv-assets:///")}).map(function(e){return{key:e,url:e}})},getImageListFromJson=function(e){return e.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t.elements.reduce(function(e,t){if("video"===t.type)return e;var r=[];return t.url&&t.type===IMAGE&&(r=[].concat(_toConsumableArray(r),[t.url])),t.clip_thumbnail_url&&(r=[].concat(_toConsumableArray(r),[t.url])),[].concat(_toConsumableArray(e),_toConsumableArray(r))},[])))},[]).filter(function(e){return!!e})},getVideoListFromJson=function(e){return e.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t.elements.reduce(function(e,t){return t.url&&t.type===VIDEO?[].concat(_toConsumableArray(e),[t.url]):e},[])))},[]).filter(function(e){return!!e})},filterLoadedAssets=function(e,t){return e.filter(function(e){return!t[e]&&e.includes("sbtv-assets:///")})},removeDuplicateImages=function(e){return Array.from(new Set(e))},loadImagesAndVideos=function(a,e,t){var r={},i=getImageListFromJson(t),t=getVideoListFromJson(t),s=filterLoadedAssets(i,e),o=filterLoadedAssets(t,e),l=getAssetsToFetch(i,e);getAssetsToFetch(t,e);return(0<s.length||0<o.length)&&(r=[].concat(_toConsumableArray(s),_toConsumableArray(o)).reduce(function(e,t){return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,t))},{})),{needsUpdate:0<s.length||0<o.length,map:r,promise:new Promise(function(){var t=_asyncToGenerator(regenerator.mark(function e(t){var r,i,n;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetchAssetUrlsFromServer(a,[].concat(_toConsumableArray(s),_toConsumableArray(o)));case 2:return n=e.sent,r=o,i=n.filter(function(e){e=e.key;return 0<=r.indexOf(e)}),n=n.filter(function(e){e=e.key;return-1===r.indexOf(e)}),e.next=8,fetchImagesFromUrls(removeDuplicateImages([].concat(_toConsumableArray(n),_toConsumableArray(l))));case 8:n=e.sent,t([].concat(_toConsumableArray(n),_toConsumableArray(i)).reduce(function(e,t){var r=t.key,t=_objectWithoutProperties(t,_excluded$8);return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},r,t))},{}));case 10:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},fontfaceobserver_standalone=createCommonjsModule(function(e){function n(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function b(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function S(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,r=t+100;return e.f.style.width=r+"px",e.c.scrollLeft=r,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,1)}function M(e,t){function r(){var e=i;a(e)&&e.a.parentNode&&t(e.g)}var i=e;n(e.b,r),n(e.c,r),a(e)}function t(e,t){t=t||{};this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal"}function i(){return o=null===o?!!document.fonts:o}function T(e,t){return[e.style,e.weight,function(){if(null===r){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}r=""!==e.style.font}return r}()?e.stretch:"","100px",t].join(" ")}var A,s,r,o;o=r=s=A=null,t.prototype.load=function(e,t){var p=this,m=e||"BESbswy",g=0,y=t||3e3,v=(new Date).getTime();return new Promise(function(d,f){var e,t,r;i()&&!(s=null===s?!(!i()||!/Apple/.test(window.navigator.vendor))&&(!!(r=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&parseInt(r[1],10)<603):s)?(e=new Promise(function(r,e){!function t(){(new Date).getTime()-v>=y?e(Error(y+"ms timeout exceeded")):document.fonts.load(T(p,'"'+p.family+'"'),m).then(function(e){1<=e.length?r():setTimeout(t,25)},e)}()}),r=new Promise(function(e,t){g=setTimeout(function(){t(Error(y+"ms timeout exceeded"))},y)}),Promise.race([r,e]).then(function(){clearTimeout(g),d(p)},f)):(t=function(){function r(){var e;(e=-1!=s&&-1!=o||-1!=s&&-1!=l||-1!=o&&-1!=l)&&((e=s!=o&&s!=l&&o!=l)||(null===A&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),A=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=A&&(s==t&&o==t&&l==t||s==u&&o==u&&l==u||s==c&&o==c&&l==c)),e=!e),e&&(h.parentNode&&h.parentNode.removeChild(h),clearTimeout(g),d(p))}var i=new b(m),n=new b(m),a=new b(m),s=-1,o=-1,l=-1,t=-1,u=-1,c=-1,h=document.createElement("div");h.dir="ltr",S(i,T(p,"sans-serif")),S(n,T(p,"serif")),S(a,T(p,"monospace")),h.appendChild(i.a),h.appendChild(n.a),h.appendChild(a.a),document.body.appendChild(h),t=i.a.offsetWidth,u=n.a.offsetWidth,c=a.a.offsetWidth,function e(){var t;(new Date).getTime()-v>=y?(h.parentNode&&h.parentNode.removeChild(h),f(Error(y+"ms timeout exceeded"))):(!0!==(t=document.hidden)&&void 0!==t||(s=i.a.offsetWidth,o=n.a.offsetWidth,l=a.a.offsetWidth,r()),g=setTimeout(e,50))}(),M(i,function(e){s=e,r()}),S(i,T(p,'"'+p.family+'",sans-serif')),M(n,function(e){o=e,r()}),S(n,T(p,'"'+p.family+'",serif')),M(a,function(e){l=e,r()}),S(a,T(p,'"'+p.family+'",monospace'))},document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())}))})},e.exports=t}),getFontListFromJson=function(e){return e.reduce(function(e,t){return _objectSpread2(_objectSpread2({},e),t.elements.reduce(function(e,t){return t.font&&t.fontUrl?_objectSpread2(_objectSpread2({},e),{},_defineProperty({},t.font,t.fontUrl)):e},{}))},{})},filterLoadedFonts=function(i,e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return i[t]?e:_objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,r))},{})},addFontToDocument=function(e,t){var r=document.getElementsByTagName("head")[0],i=document.createElement("style");return i.innerHTML="@import url('".concat(t,"');"),r.appendChild(i),new fontfaceobserver_standalone(e).load()},loadFonts=function(e,t){var r=filterLoadedFonts(e,getFontListFromJson(t));return{needsUpdate:0<Object.entries(r).length,map:r,promise:new Promise(function(e){var t=Object.entries(r).map(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];return addFontToDocument(e,t)});Promise.all(t).then(function(){e(r)}).catch(function(e){return console.error("Something went wrong loading a font",e)})})}},loadAssets=function(e){var t=e.service,r=e.imageMapFromStore,i=e.fontMapFromStore,e=e.projectJson,n=loadImagesAndVideos(t,r,e),a=loadFonts(i,e);return{imageMap:n.map,fontMap:a.map,imagesLoading:n.needsUpdate,fontsLoading:a.needsUpdate,promise:new Promise(function(r){Promise.all([n.promise,a.promise]).then(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];r({imageMap:e,fontMap:t})})})}},parseValue=function(e){e=e.replace("{","").replace("}","").split(",");return 1<e.length?e.map(function(e){return parseFloat(e)}):parseFloat(e)};function map3dRotations(e){if(e.type&&e.type.includes("3DRotate")){var t=e.type.includes("From"),r=e.xFactor,i=e.yFactor,n=e.zFactor,a=e.angle,s="".concat(r,",").concat(i,",").concat(n,",0"),n="".concat(r,",").concat(i,",").concat(n,",").concat(a),a=t?s:n,s=t?n:s;return _objectSpread2(_objectSpread2({},e),{},{keyPath:"transform_rotation3d",toValue:a,fromValue:s})}return e}var mapKeyPath=function(e){return e.replace(/\./g,"_")},sortAnimationsByBeginTime=function(e){e=_toConsumableArray(e);return e.sort(function(e,t){return e.beginTime-t.beginTime}),e},mapAnimations=function(e){return function(e){return sortAnimationsByBeginTime(e.filter(function(e){return!(e.type&&e.type.includes("3D")&&!e.type.includes("3DRotate"))}).filter(function(e){return!(e.toValue===e.fromValue&&0===e.beginTime)}).map(map3dRotations).map(function(e){return _objectSpread2(_objectSpread2({},e),{},{keyPath:mapKeyPath(e.keyPath),beginTime:parseFloat(e.beginTime),duration:parseFloat(e.duration),toValue:parseValue(e.toValue),fromValue:parseValue(e.fromValue)})}))}},mapInfographicProperties=function(e){return{imagePositionX:e.imagePositionX,imagePositionY:e.imagePositionY,imageScale:e.imageScale}},mapVideoLayerProperties=function(e){return{audioDisabled:!!e.audioDisabled}},_excluded$9=["type","id","url","textValue","link","trigger"],mapLayerType=function(e){var t=e.type,r=e.id,i=e.url,n=e.textValue,a=e.link,s=e.trigger,e=_objectWithoutProperties(e,_excluded$9);return omitNullProps(_objectSpread2(_objectSpread2({type:t===INFOGRAPHIC?r:t,src:t===IMAGE||t===VIDEO?i:null,textValue:n,link:a,trigger:s},mapInfographicProperties(e)),mapVideoLayerProperties(e)))},mapFont=function(e,t,r,i){return e?{"font-family":e,"-webkit-font-smoothing":"auto","text-rendering":"geometricPrecision","font-size":t?{value:t,unit:"px"}:null,"line-height":r?{value:r,unit:"px"}:"normal","letter-spacing":i?{value:i,unit:"px"}:"initial"}:{}},containsTransformScaleAndTranslate=function(e){return e.some(function(e){return e.keyPath.includes("scale")})&&e.some(function(e){return e.keyPath.includes("position")})},containsTransformScaleX=function(e){return e.some(function(e){return e.keyPath.includes("scale.x")})},containsTransformScaleY=function(e){return e.some(function(e){return e.keyPath.includes("scale.y")})},containsTransformScales=function(e){return containsTransformScaleX(e)||containsTransformScaleY(e)},shouldUseAnchorPoint=function(e){return containsTransformScaleAndTranslate(e)||containsTransformScales(e)},mapTansformOrigin=function(e){var t=e.anchorPoint,e=e.otherAnimations;return e&&shouldUseAnchorPoint(e)?t?containsTransformScales(e)?{values:parseValue(t).map(function(e){return 100*e}),unit:"%"}:containsTransformScaleX(e)?{values:[parseValue(t)[0],1],unit:"%"}:containsTransformScaleY(e)?{values:[1,parseValue(t)[1]],unit:"%"}:{values:parseValue(t).map(function(e){return 100*e}),unit:"%"}:{values:[50,50],unit:"%"}:null},mapRGBAColor=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e?e.endsWith("Color")?e.replace("Color",""):"rgba(".concat(e.replace("#","").split(":").map(function(e,t){return 3===t?r(e)/100:e}).join(","),")"):null},mapFrameDimensions=function(e,t){return e?{height:{value:e.h,unit:"px"},width:{value:e.w,unit:"px"},left:{value:e.x,unit:"px"},top:{value:e.y,unit:"px"}}:t},mapZIndex=function(e,t,r){if(t===SUBTITLE)return 199;if(e.zIndex)return e.zIndex;r=e.frame||r;return 1600===r.w&&900===r.h?90:100},mapBoxShadow=function(e){var t=e.shadowOpacity,r=e.shadowRadius,i=e.shadowColor,e=e.shadowOffset;return i?{offset:{value:[e[0],e[1]],unit:"px"},radius:{value:r,unit:"px"},color:mapRGBAColor(i,function(e){return t*e})}:null},mapWhiteSpace=function(e){return e.type!==TEXT?null:"on"===e.textWrapping?"pre-wrap":"pre"},DEFAULT_169_FRAME={height:{value:900,unit:"px"},width:{value:1600,unit:"px"},left:{value:0,unit:"px"},top:{value:0,unit:"px"}},mapPadding=function(e){return e?{values:e.split(",").map(function(e){return parseFloat(e.trim())}),unit:"px"}:null},mapStyles=function(e){var t=e.parentType,e=e.config;return omitNullProps(_objectSpread2(_objectSpread2(_objectSpread2({},mapFrameDimensions(e.frame,DEFAULT_169_FRAME)),{},{position:"absolute","transform-origin":mapTansformOrigin(e),"background-color":mapRGBAColor(e.type===TEXT?e.textBackgroundColor||e.backgroundColor:e.color)},mapFont(e.font,e.fontSize,e.lineHeight,e.letterSpacing)),{},{color:mapRGBAColor(e.textColor),"z-index":mapZIndex(e,t,DEFAULT_169_FRAME),"text-align":e.textAlign,"box-shadow":mapBoxShadow(e),"white-space":mapWhiteSpace(e),padding:mapPadding(e.padding),textPadding:mapPadding(e.textPadding),"border-radius":e.type===TEXT&&e.textBackgroundRadius?e.textBackgroundRadius:e.cornerRadius}))},mapLayer=function(r,i,n,a){return function(e,t){return _objectSpread2(_objectSpread2({id:"".concat(i,".").concat(r,".").concat(t,".").concat(e.id),styles:mapStyles({config:e,width:n,height:a,parentType:r}),absoluteBeginTime:e.absoluteLayerBeginTime,absoluteEndTime:e.absoluteLayerEndTime,animations:e.otherAnimations&&mapAnimations(e.id)(e.otherAnimations)},mapLayerType(e)),{},{parentType:r})}},mapLayers=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return function(e,t,r,i){return i.map(function(){return mapLayer(r,n,e,t).apply(void 0,arguments)})}},mapStateElements=function(r,i,n,a){function s(t){return _objectSpread2(_objectSpread2(_objectSpread2({},e.find(function(e){return e.id===t.id})||{}),t),{},{otherAnimations:t.otherAnimations})}var o=n.states||{},e=n.elements;return Object.keys(o).reduce(function(e,t){return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,_objectSpread2(_objectSpread2({},o[t]),{},{elements:o[t].elements?a(r,i,n.layerType,o[t].elements.map(s)):[]})))},{})},en="en",fr="fr",it="it",de="de",supportedLanguages={en:en,fr:fr,it:it,de:de},getBrowserLanguage=function(){return Array.from(new Set(navigator.languages.map(function(e){return e.split("-")[0]}))).find(function(e){return!!supportedLanguages[e]})||supportedLanguages.en},escapeQuotes=function(e){return e.replace(/'/g,"'").replace(/\n/g,"").replace(/\\([\s\S])|(")/g,"\\$1$2")};function getVal(e,t){if(null!=t){var r,i=e.shift(),n=t;return-1<i.indexOf("[")&&(null!==(r=i.match(/(\w+)\[(\d+)\]/))&&(i=r[2],n=t[r[1]])),0===e.length?n[i]:n?getVal(e,n[i]):void 0}}function getTokenValueFromData(e,t){e=getVal(e.data_path.split("."),t)||e.default_value;return escapeQuotes(String(e))}function replaceTokensWithData(e,t){for(var r,i=RegExp("({{)(.*?)(}})","g"),n=JSON.stringify(e);r=i.exec(JSON.stringify(e));)var a=r[2].replace(/\\/g,"").trim(),a=getTokenValueFromData(JSON.parse(a),t),n=n.replaceAll(r[0],a);return JSON.parse(n)}function mapVideoToBlob(e,t){return _mapVideoToBlob.apply(this,arguments)}function _mapVideoToBlob(){return(_mapVideoToBlob=_asyncToGenerator(regenerator.mark(function e(t,r){var i;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r.src);case 2:return i=e.sent,e.next=5,i.blob();case 5:return i=e.sent,i=URL.createObjectURL(i),e.abrupt("return",_objectSpread2(_objectSpread2({},t),{},{elements:[].concat(_toConsumableArray(t.elements),[_objectSpread2(_objectSpread2({},r),{},{src:i})])}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mapVideosToBlobs(e){return _mapVideosToBlobs.apply(this,arguments)}function _mapVideosToBlobs(){return(_mapVideosToBlobs=_asyncToGenerator(regenerator.mark(function e(t){var r,i,n,a,s;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=_createForOfIteratorHelper(t);try{for(a=function(){var t=n.value,e=t.elements.filter(function(e){return"video"===e.type});r.push.apply(r,_toConsumableArray(e.map(function(e){return mapVideoToBlob(_objectSpread2(_objectSpread2({},t),{},{elements:t.elements.filter(function(e){return"video"!==e.type})}),e)})))},i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return e.next=5,Promise.all(r);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var mapQueryParamsToString=function(e){e=Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return"".concat(e,"&").concat(t,"=").concat(r)},"")||"";return 0<e.length?"?".concat(e.substring(1,e.length)):""},fetchProject=function(){var t=_asyncToGenerator(regenerator.mark(function e(t){var r,i,n,a,s,o,l,u,c,h,d,f,p,m,g,y,v,b,S,M,T;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.service,i=t.projectId,n=t.preloadedProjectJSON,a=t.clientWidth,s=t.clientHeight,o=t.transformProjectJson,c=t.serviceQueryParams,l=t.data,u=t.skipVideoLayerElementBlobs,u=void 0!==u&&u,c=mapQueryParamsToString(_objectSpread2({language:getBrowserLanguage()},c)),e.prev=2,i)return e.next=6,r("player/".concat(i).concat(c),{method:"GET",options:{mode:"cors"}});e.next=9;break;case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=JSON.parse(n);case 10:if(v=e.t0,M=v.project,h=v.name,d=v.duration,b=v.openerDuration,S=v.bumperDuration,f=v.bumperBeginTime,p=replaceTokensWithData(o(M),l),m=b,g=S,T=p.filter(function(e){return"video"===e.layerType}),y=T[0].elements[0].clip_thumbnail_url,v=T.map(function(e){return{src:e.elements[0].url,srcHLS:e.elements[0].url_hls,duration:e.elements[0].duration,videoClipStart:e.elements[0].beginTime,startTime:e.elements[0].absoluteLayerBeginTime,endTime:e.elements[0].absoluteLayerEndTime}}),M=p.filter(function(e){return"video"!==e.layerType}).map(function(e,t){return _objectSpread2(_objectSpread2({},e),{},{elements:mapLayers(t)(a,s,e.layerType,e.elements),states:mapStateElements(a,s,e,mapLayers(t))})}),b=M.filter(function(e){return!!e.elements.find(function(e){return"video"===e.type})}),S=M.filter(function(e){return void 0===e.elements.find(function(e){return"video"===e.type})}),!u){e.next=25;break}e.t1=b,e.next=28;break;case 25:return e.next=27,mapVideosToBlobs(b);case 27:e.t1=e.sent;case 28:return T=e.t1,M=[].concat(_toConsumableArray(S),_toConsumableArray(T)),T=p.filter(function(e){return e.layerType===SUBTITLE}),e.abrupt("return",{videoPoster:y,mappedLayers:M,videoStartOffsetTime:m,videoEndOffsetTime:g,projectJson:p,videos:v,projectName:h,projectDuration:d,bumperBeginTime:f,displaySubtitlesButton:T});case 34:throw e.prev=34,e.t2=e.catch(2),Error({message:"Unable to load video"});case 37:case"end":return e.stop()}},e,null,[[2,34]])}));return function(e){return t.apply(this,arguments)}}(),_excluded$a=["resize"],Component=function(){function t(e){_classCallCheck(this,t),this.refs={},this.create(e)}return _createClass(t,[{key:"create",value:function(e){e&&(this.createElement(e),this.attachListeners(e),this.attachRef(e))}},{key:"createElement",value:function(e){this.element=this.root(e),e.id||""===e.id||(this.element.id=this.constructor.name),e.id&&(this.element.id=e.id)}},{key:"attachRef",value:function(e){e.ref&&e.ref(this)}},{key:"attachListeners",value:function(e){var t;e.eventListeners&&(e=(t=e.eventListeners).resize,t=_objectWithoutProperties(t,_excluded$a),addEventListeners(this.element,t),e&&new ResizeObserver(e).observe(this.element))}},{key:"isElementInDOM",value:function(){return isElementInDOM(this.element)}},{key:"getElement",value:function(){return this.element}},{key:"getClassName",value:function(){return this.constructor.name}},{key:"root",value:function(){throw Error("Must override root()")}},{key:"update",value:function(){throw Error("Must override update()")}},{key:"addClass",value:function(e){this.element.classList.add(e)}},{key:"removeClass",value:function(e){this.element.classList.remove(e)}}]),t}(),createFactory=function(i){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _construct(i,t)}},_excluded$b=["children","ref"],ElementWrapper=function(i){return function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){var t=e.children,r=(e.ref,_objectWithoutProperties(e,_excluded$b)),e=i;return t?jsx(e,r,t):jsx(e,r)}},{key:"update",value:function(e){var r=this;Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];r.element.setAttribute(e,t)})}},{key:"setTextContent",value:function(e){this.element.textContent=e}}]),t}()},createElementWrapper=function(e){return createFactory(ElementWrapper(e))},append=function(e,t){var r;0<t.length&&(r=document.createDocumentFragment(),t.forEach(function(e){r.appendChild(e)}),e.appendChild(r))},handleTextElement=function(e){return createDOMElement({elementName:"string",textContent:e})},handleArray=function(e){return e.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(handleTypes(t)))},[])},handleFunction=function(e){return e.elementName(_objectSpread2(_objectSpread2({},e.attributes),{},{children:e.children})).getElement()},handleTypes=function(e){return"string"==typeof e||"number"==typeof e&&!Number.isNaN(e)?[handleTextElement(e.toString())]:Array.isArray(e)?handleArray(e):"function"==typeof e?[handleFunction(e)]:e?[e]:[]},jsx=function(e,t){t=t||{},"string"==typeof e&&t.ref&&(e=createElementWrapper(e));for(var r=arguments.length,i=new Array(2<r?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];e={elementName:e,attributes:t,children:i};if("string"===e.elementName)return handleTextElement(e.children?e.children[0]:null);if("string"!=typeof e.elementName)return"function"==typeof e.elementName?handleFunction(e):e;t=createDOMElement(_objectSpread2({elementName:e.elementName},e.attributes));return e.children&&(e=e.children.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(handleTypes(t)))},[]),append(t,e)),t},createRef=function(t,r){return function(e){t.refs||(t.refs={}),t.refs[r]=e}},Container=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).store=e.store,t.subscribe(t.update.bind(_assertThisInitialized(t))),t}return _createClass(i,[{key:"subscribe",value:function(){throw Error("Must override subscribe()")}},{key:"addElementToSelf",value:function(e){this.addElementToTarget(e,this.element)}},{key:"addElementToTarget",value:function(e,t){Array.isArray(e)?append(t,e):append(t,[e])}}]),i}(),styles={root:"styles_root__2yUun",fullScreen:"styles_fullScreen__2Bof3",sizer:"styles_sizer__a4fA6"},VideoPlayerContainer=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){return this.initialWidth=e.initialWidth,this.currentlySetWidth=0,this.currentlySetHeight=0,this.currentlyFullScreen=!1,this.videoBackgroundColour=e.videoBackgroundColour,jsx("div",{className:styles.root},e.children)}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({showControls:t.store.controls.showControls,measurements:t.store.measurements,isFullScreen:t.store.isFullScreen,originalVideoWidth:t.store.originalVideoWidth,originalVideoHeight:t.store.originalVideoHeight,currentState:t.store.currentState})},autorunConfig)}},{key:"update",value:function(e){var t=e.showControls,r=e.measurements,i=r.clientWidth,n=r.clientHeight,a=e.originalVideoWidth,s=e.originalVideoHeight,r=e.isFullScreen,e=e.currentState===INITIALISING;this.element.style.cursor=t?"":"none";t=i,i=a<s?i*(a/s):i*(s||n)/(a||i);!e&&(a||s)||(i=9*(t=this.initialWidth)/16);s=!1;r!==this.currentlyFullScreen&&(this.currentlyFullScreen=r,this.currentlySetWidth=t,this.currentlySetHeight=i,this.currentlyFullScreen?this.element.style=convertStyleMapToInlineStyles({height:"100%",width:"100%"}):s=!0);r=!r&&(this.currentlySetWidth!==t||this.currentlySetHeight!==i&&(0<t&&0<i));(s||r)&&(e||(this.currentlySetWidth=t,this.currentlySetHeight=i),this.element.style=convertStyleMapToInlineStyles({height:"".concat(i,"px")})),this.element.style.backgroundColor=this.videoBackgroundColour}},{key:"attachRef",value:function(e){e.ref&&e.ref(this)}},{key:"getElement",value:function(){return this.element}},{key:"setFullScreen",value:function(){this.element.classList.add(styles.fullScreen)}},{key:"removeFullScreen",value:function(){this.element.classList.remove(styles.fullScreen)}},{key:"clientWidth",value:function(e){return e?window.innerWidth:this.element.clientWidth}},{key:"clientHeight",value:function(e){return e?window.innerHeight:this.element.clientHeight}},{key:"getOffsetLeft",value:function(){return this.element.offsetLeft}}]),t}(),VideoPlayerContainer$1=createFactory(VideoPlayerContainer),transformVideoSource=function(e){return e?e.startsWith("http")&&!e.startsWith("https")&&"https:"===window.location.protocol?e.replace("http","https"):e:null},hls=createCommonjsModule(function(e,t){var r;"undefined"!=typeof window&&(r=function(){return r={"./node_modules/eventemitter3/index.js":function(e,t,r){var i=Object.prototype.hasOwnProperty,f="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");n=new a(r,i||e,n),t=f?f+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],n]:e._events[t].push(n):(e._events[t]=n,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(f=!1)),o.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,i=t.length,n=new Array(i);r<i;r++)n[r]=t[r].fn;return n},o.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},o.prototype.emit=function(e,t,r,i,n,a){var s=f?f+e:e;if(!this._events[s])return!1;var o,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,n),!0;case 6:return l.fn.call(l.context,t,r,i,n,a),!0}for(d=1,o=new Array(u-1);d<u;d++)o[d-1]=arguments[d];l.fn.apply(l.context,o)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,r);break;case 4:l[d].fn.call(l[d].context,t,r,i);break;default:if(!o)for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];l[d].fn.apply(l[d].context,o)}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,r,i){e=f?f+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var n=this._events[e];if(n.fn)n.fn!==t||i&&!n.once||r&&n.context!==r||l(this,e);else{for(var a=0,s=[],o=n.length;a<o;a++)(n[a].fn!==t||i&&!n[a].once||r&&n[a].context!==r)&&s.push(n[a]);s.length?this._events[e]=1===s.length?s[0]:s:l(this,e)}return this},o.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&l(this,e)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=f,e.exports=o.EventEmitter=o},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var i,a,n,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}i=o.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):t;t=o.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(n=a.exec(t.path),t.netLoc=n[1],t.path=n[2]),t.netLoc&&!t.path&&(t.path="/");var n,e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(e.netLoc=t.netLoc,"/"!==i.path[0]&&(i.path?(n=(n=t.path).substring(0,n.lastIndexOf("/")+1)+i.path,e.path=o.normalizePath(n)):(e.path=t.path,i.params||(e.params=t.params,i.query||(e.query=t.query))))),null===e.path&&(e.path=r.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(e)},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},"./node_modules/webworkify-webpack/index.js":function(e,t,h){function a(r){var i={};function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=r,n.c=i,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var e=n(n.s=ENTRY_MODULE);return e.default||e}var d="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+d+").*?\\)";function p(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function m(e,t,r){var i={};i[r]=[];var n=t.toString(),t=n.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!t)return i;for(var a,t=t[1],s=new RegExp("(\\\\n|\\W)"+p(t)+f,"g");a=s.exec(n);)"dll-reference"!==a[3]&&i[r].push(a[3]);for(s=new RegExp("\\("+p(t)+'\\("(dll-reference\\s('+d+'))"\\)\\)'+f,"g");a=s.exec(n);)e[a[2]]||(i[r].push(a[1]),e[a[2]]=h(a[1]).m),i[a[2]]=i[a[2]]||[],i[a[2]].push(a[4]);for(var o,l=Object.keys(i),u=0;u<l.length;u++)for(var c=0;c<i[l[u]].length;c++)o=i[l[u]][c],isNaN(+o)||(i[l[u]][c]=+i[l[u]][c]);return i}function s(e,t){for(var r={main:[t]},i={main:[]},n={main:{}};function(r){return Object.keys(r).reduce(function(e,t){return e||0<r[t].length},!1)}(r);)for(var a=Object.keys(r),s=0;s<a.length;s++){var o=a[s],l=r[o].pop();if(n[o]=n[o]||{},!n[o][l]&&e[o][l]){n[o][l]=!0,i[o]=i[o]||[],i[o].push(l);for(var u=m(e,e[o][l],o),c=Object.keys(u),h=0;h<c.length;h++)r[c[h]]=r[c[h]]||[],r[c[h]]=r[c[h]].concat(u[c[h]])}}return i}e.exports=function(e,t){var r={main:h.m},i=(t=t||{}).all?{main:Object.keys(r.main)}:s(r,e),n="";Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;i[t][e];)e++;i[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",n=n+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map(function(e){return JSON.stringify(e)+": "+r[t][e].toString()}).join(",")+"});\n"});n=n+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+r.main[e].toString()}).join(",")+"}))(self);",e=new window.Blob([n],{type:"text/javascript"});if(t.bare)return e;t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(e),e=new window.Worker(t);return e.objectURL=t,e}},"./src/crypt/decrypter.js":function(e,t,r){r.r(t);var o=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),l=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var u=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},t.initTable=function(){for(var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],r=this.invSubMix,o=r[0],l=r[1],u=r[2],c=r[3],h=new Uint32Array(256),d=0,f=0,p=0,p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var m=f^f<<1^f<<2^f<<3^f<<4;e[d]=m=m>>>8^255&m^99;var g=h[t[m]=d],y=h[g],v=h[y],b=257*h[m]^16843008*m;i[d]=b<<24|b>>>8,n[d]=b<<16|b>>>16,a[d]=b<<8|b>>>24,s[d]=b,o[m]=(b=16843009*v^65537*y^257*g^16843008*d)<<24|b>>>8,l[m]=b<<16|b>>>16,u[m]=b<<8|b>>>24,c[m]=b,d?(d=g^h[h[h[v^g]]],f^=h[h[f]]):d=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);for(var a,s,o,l=this.ksRows=4*(n+6+1),u=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),h=this.sBox,d=this.rcon,e=this.invSubMix,f=e[0],p=e[1],m=e[2],g=e[3],y=0;y<l;y++)y<n?s=u[y]=t[y]:(o=s,y%n==0?(o=h[(o=o<<8|o>>>24)>>>24]<<24|h[o>>>16&255]<<16|h[o>>>8&255]<<8|h[255&o],o^=d[y/n|0]<<24):6<n&&y%n==4&&(o=h[o>>>24]<<24|h[o>>>16&255]<<16|h[o>>>8&255]<<8|h[255&o]),u[y]=s=(u[y-n]^o)>>>0);for(a=0;a<l;a++)y=l-a,o=3&a?u[y]:u[y-4],c[a]=a<4||y<=4?o:f[h[o>>>24]]^p[h[o>>>16&255]]^m[h[o>>>8&255]]^g[h[255&o]],c[a]=c[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,i){for(var n,a,s,o,l,u,c,h,d,f,p,m,g,y,v=this.keySize+6,b=this.invKeySchedule,S=this.invSBox,M=this.invSubMix,T=M[0],A=M[1],E=M[2],D=M[3],r=this.uint8ArrayToUint32Array_(r),_=r[0],x=r[1],I=r[2],C=r[3],k=new Int32Array(e),w=new Int32Array(k.length),L=this.networkToHostOrderSwap;t<k.length;){for(d=L(k[t]),f=L(k[t+1]),p=L(k[t+2]),m=L(k[t+3]),l=d^b[0],u=m^b[1],c=p^b[2],h=f^b[3],g=4,y=1;y<v;y++)n=T[l>>>24]^A[u>>16&255]^E[c>>8&255]^D[255&h]^b[g],a=T[u>>>24]^A[c>>16&255]^E[h>>8&255]^D[255&l]^b[g+1],s=T[c>>>24]^A[h>>16&255]^E[l>>8&255]^D[255&u]^b[g+2],o=T[h>>>24]^A[l>>16&255]^E[u>>8&255]^D[255&c]^b[g+3],l=n,u=a,c=s,h=o,g+=4;n=S[l>>>24]<<24^S[u>>16&255]<<16^S[c>>8&255]<<8^S[255&h]^b[g],a=S[u>>>24]<<24^S[c>>16&255]<<16^S[h>>8&255]<<8^S[255&l]^b[g+1],s=S[c>>>24]<<24^S[h>>16&255]<<16^S[l>>8&255]<<8^S[255&u]^b[g+2],o=S[h>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^b[g+3],g+=3,w[t]=L(n^_),w[t+1]=L(o^x),w[t+2]=L(s^I),w[t+3]=L(a^C),_=d,x=f,I=p,C=m,t+=4}return i?(r=w.buffer,e=r.byteLength,(i=e&&new DataView(r).getUint8(e-1))?r.slice(0,e-i):r):w.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),a=r("./src/errors.ts"),c=r("./src/utils/logger.js"),s=r("./src/events.js"),r=r("./src/utils/get-self-scope.js"),n=Object(r.getSelfScope)(),r=function(){function e(e,t,r){r=(void 0===r?{}:r).removePKCS7Padding,r=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=r)try{var i=n.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(t,r,i,n){var e,a,s=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(c.logger.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new u),e.expandKey(r),n(e.decrypt(t,0,i,this.removePKCS7Padding))):(this.logEnabled&&(c.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),a=this.subtle,this.key!==r&&(this.key=r,this.fastAesKey=new l(a,r)),this.fastAesKey.expandKey().then(function(e){new o(a,i).decrypt(t,e).catch(function(e){s.onWebCryptoError(e,t,r,i,n)}).then(function(e){n(e)})}).catch(function(e){s.onWebCryptoError(e,t,r,i,n)}))},t.onWebCryptoError=function(e,t,r,i,n){this.config.enableSoftwareAES?(c.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,n)):(c.logger.error("decrypting error : "+e.message),this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=r},"./src/demux/demuxer-inline.js":function(e,t,r){r.r(t);var V=r("./src/events.js"),U=r("./src/errors.ts"),m=r("./src/crypt/decrypter.js"),p=r("./src/polyfills/number-isFinite.js"),G=r("./src/utils/logger.js"),i=r("./src/utils/get-self-scope.js");function n(e,t){return 255===e[t]&&240==(246&e[t+1])}function o(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function g(e,t){return!!(t+1<e.length&&n(e,t))}function y(e,t,r,i,n){e.samplerate||(n=function(e,t,r,i){var n,a,s=navigator.userAgent.toLowerCase(),o=i,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=1+((192&t[r+2])>>>6),c=(60&t[r+2])>>>2;if(!(l.length-1<c))return n=(1&t[r+2])<<2,n|=(192&t[r+3])>>>6,G.logger.log("manifest codec:"+i+",ADTS data:type:"+u+",sampleingIndex:"+c+"["+l[c]+"Hz],channelConfig:"+n),i=/firefox/i.test(s)?6<=c?(u=5,a=new Array(4),c-3):(u=2,a=new Array(2),c):-1!==s.indexOf("android")?(u=2,a=new Array(2),c):(u=5,a=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&6<=c?c-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(6<=c&&1==n||/vivaldi/i.test(s))||!i&&1==n)&&(u=2,a=new Array(2)),c)),a[0]=u<<3,a[0]|=(14&c)>>1,a[1]|=(1&c)<<7,a[1]|=n<<3,5===u&&(a[1]|=(14&i)>>1,a[2]=(1&i)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:l[c],channelCount:n,codec:"mp4a.40."+u,manifestCodec:o};e.trigger(V.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}(t,r,i,n),e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,G.logger.log("parsed codec:"+e.codec+",rate:"+n.samplerate+",nb channel:"+n.channelCount))}function f(e){return 9216e4/e}function v(e,t,r,i,n){var a=function(e,t,r,i,n){var a=e.length,s=o(e,t),e=l(e,t);if(0<(e-=s)&&t+s+e<=a)return{headerLength:s,frameLength:e,stamp:r+i*n}}(t,r,i,n,f(e.samplerate));if(a){i=a.stamp,n=a.headerLength,a=a.frameLength,i={unit:t.subarray(r+n,r+n+a),pts:i,dts:i};return e.samples.push(i),{sample:i,length:a+n}}}var _=r("./src/demux/id3.js"),A=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(_.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(function(e,t){if(g(e,t)){var r=o(e,t);if(t+r>=e.length)return;var i=l(e,t);if(i<=r)return;i=t+i;if(i===e.length||i+1<e.length&&n(e,i))return 1}}(e,t))return G.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var n=this._audioTrack,a=_.default.getID3Data(e,0)||[],s=_.default.getTimeStamp(a),o=Object(p.isFiniteNumber)(s)?90*s:9e4*t,l=0,u=o,c=e.length,h=a.length,d=[{pts:u,dts:u,data:a}];h<c-1;)if(g(e,h)&&h+5<c){y(n,this.observer,e,h,n.manifestCodec);var f=v(n,e,h,o,l);if(!f){G.logger.log("Unable to parse AAC frame");break}h+=f.length,u=f.sample.pts,l++}else _.default.isHeader(e,h)?(a=_.default.getID3Data(e,h),d.push({pts:u,dts:u,data:a}),h+=a.length):h++;this.remuxer.remux(n,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),E=r("./src/demux/mp4demuxer.js"),u={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,n){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){n=i+n*(9e4*a.samplesPerFrame/a.sampleRate),n={unit:t.subarray(r,r+a.frameLength),pts:n,dts:n};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(n),{sample:n,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!=r&&0!=n&&15!=n&&3!=a){n=1e3*u.BitratesMap[14*(3==r?3-i:3==i?3:4)+n-1],a=u.SamplingRateMap[3*(3==r?0:2==r?1:2)+a],e=e[t+3]>>6==3?1:2,t=u.SamplesCoefficients[r][i],r=u.BytesInSlot[i],i=8*t*r;return{sampleRate:a,channelCount:e,frameLength:parseInt(t*n/a+s,10)*r,samplesPerFrame:i}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),i=4,i=t+(i=r&&r.frameLength?r.frameLength:i);if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},b=u,x=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");i.set(e.subarray(r,r+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},t.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&G.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r},t.readSPS=function(){var e,t,r,i,n=0,a=0,s=0,o=0,l=this.readUByte.bind(this),u=this.readBits.bind(this),c=this.readUEG.bind(this),h=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(l(),e=l(),u(5),d(3),l(),p(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var g=c();if(3===g&&d(1),p(),p(),d(1),h())for(r=3!==g?8:12,i=0;i<r;i++)h()&&m(i<6?16:64)}p();var g=c();if(0===g)c();else if(1===g)for(d(1),f(),f(),t=c(),i=0;i<t;i++)f();p(),d(1),g=c(),p=c(),0===(u=u(1))&&d(1),d(1),h()&&(n=c(),a=c(),s=c(),o=c());var y=[1,1];if(h()&&h())switch(l()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(g+1)-2*n-2*a),height:(2-u)*(p+1)*16-(u?2:4)*(s+o),pixelRatio:y}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),a=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new m.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(t,r,i,n){var a=t[r].unit,e=a.subarray(16,a.length-a.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),s=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e),a.set(e,16),n||s.decryptAacSamples(t,r+1,i)})},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,n=32;n<=e.length-16;n+=160,i+=16)r.set(e.subarray(n,n+16),i);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e},t.decryptAvcSample=function(t,r,i,n,a,s){var o=this.discardEPB(a.data),e=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(e.buffer,function(e){a.data=l.getAvcDecryptedUnit(o,e),s||l.decryptAvcSamples(t,r,i+1,n)})},t.decryptAvcSamples=function(e,t,r,i){for(;;t++,r=0){if(t>=e.length)return void i();for(var n=e[t].units;!(r>=n.length);r++){var a=n[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,a,s),!s)return}}}},e}(),s={video:1,audio:2,id3:3,text:4},D=function(){function w(e,t,r,i){this.observer=e,this.config=r,this.typeSupported=i,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var e=w.prototype;return e.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new a(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},w.probe=function(e){e=w._syncOffset(e);return!(e<0)&&(e&&G.logger.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),!0)},w._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},w.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:s[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.resetInitSegment=function(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=w.createTrack("video",i),this._audioTrack=w.createTrack("audio",i),this._id3Track=w.createTrack("id3",i),this._txtTrack=w.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=i},e.resetTimeStamp=function(){},e.append=function(e,t,r,i){var n,a,s,o,l,u=e.length,c=!1;this.pmtUnknownTypes={},this.contiguous=r;var h=this.pmtParsed,d=this._avcTrack,f=this._audioTrack,p=this._id3Track,m=d.pid,g=f.pid,y=p.pid,v=this._pmtId,b=d.pesData,S=f.pesData,M=p.pesData,T=this._parsePAT,A=this._parsePMT.bind(this),E=this._parsePES,D=this._parseAVCPES.bind(this),_=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this),C=w._syncOffset(e);for(u-=(u+C)%188,n=C;n<u;n+=188)if(71===e[n]){if(a=!!(64&e[n+1]),s=((31&e[n+1])<<8)+e[n+2],1<(48&e[n+3])>>4){if((o=n+5+e[n+4])===n+188)continue}else o=n+4;switch(s){case m:a&&(b&&(l=E(b))&&D(l,!1),b={data:[],size:0}),b&&(b.data.push(e.subarray(o,n+188)),b.size+=n+188-o);break;case g:a&&(S&&(l=E(S))&&(f.isAAC?_:x)(l),S={data:[],size:0}),S&&(S.data.push(e.subarray(o,n+188)),S.size+=n+188-o);break;case y:a&&(M&&(l=E(M))&&I(l),M={data:[],size:0}),M&&(M.data.push(e.subarray(o,n+188)),M.size+=n+188-o);break;case 0:a&&(o+=e[o]+1),v=this._pmtId=T(e,o);break;case v:a&&(o+=e[o]+1);var k=A(e,o,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(m=k.avc)&&(d.pid=m),0<(g=k.audio)&&(f.pid=g,f.isAAC=k.isAAC),0<(y=k.id3)&&(p.pid=y),c&&!h&&(G.logger.log("reparse from beginning"),c=!1,n=C-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(V.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(l=E(b))?(D(l,!0),d.pesData=null):d.pesData=b,S&&(l=E(S))?((f.isAAC?_:x)(l),f.pesData=null):(S&&S.size&&G.logger.log("last AAC PES packet truncated,might overlap between fragments"),f.pesData=S),M&&(l=E(M))?(I(l),p.pesData=null):p.pesData=M,null==this.sampleAes?this.remuxer.remux(f,d,p,this._txtTrack,t,r,i):this.decryptAndRemux(f,d,p,this._txtTrack,t,r,i)},e.decryptAndRemux=function(e,t,r,i,n,a,s){var o;e.samples&&e.isAAC?(o=this).sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,r,i,n,a,s)}):this.decryptAndRemuxAvc(e,t,r,i,n,a,s)},e.decryptAndRemuxAvc=function(e,t,r,i,n,a,s){var o;t.samples?(o=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,r,i,n,a,s)}):this.remuxer.remux(e,t,r,i,n,a,s)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e._trackUnknownPmt=function(e,t,r){var i=this.pmtUnknownTypes[e]||0;return 0===i&&(this.pmtUnknownTypes[e]=0,t.call(G.logger,r)),this.pmtUnknownTypes[e]++,i},e._parsePMT=function(e,t,r,i){var n,a={audio:-1,avc:-1,id3:-1,isAAC:!0},s=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){switch(n=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){this._trackUnknownPmt(e[t],G.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=n);break;case 21:-1===a.id3&&(a.id3=n);break;case 219:if(!i){this._trackUnknownPmt(e[t],G.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=n);break;case 3:case 4:r?-1===a.audio&&(a.audio=n,a.isAAC=!1):this._trackUnknownPmt(e[t],G.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],G.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],G.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e._parsePES=function(e){var t,r,i,n,a,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&1<o.length;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1!==((d=o[0])[0]<<16)+(d[1]<<8)+d[2])return null;if((t=(d[4]<<8)+d[5])&&t>e.size-6)return null;if(192&(r=d[7])&&(4294967295<(i=536870912*(14&d[9])+4194304*(255&d[10])+16384*(254&d[11])+128*(255&d[12])+(254&d[13])/2)&&(i-=8589934592),64&r?(4294967295<(n=536870912*(14&d[14])+4194304*(255&d[15])+16384*(254&d[16])+128*(255&d[17])+(254&d[18])/2)&&(n-=8589934592),54e5<i-n&&(G.logger.warn(Math.round((i-n)/9e4)+"s delta between PTS and DTS, align them"),i=n)):n=i),r=d[8],e.size<=(a=r+9))return null;e.size-=a;for(var u=new Uint8Array(e.size),c=0,h=o.length;c<h;c++){var d,f=(d=o[c]).byteLength;if(a){if(f<a){a-=f;continue}d=d.subarray(a),f-=a,a=0}u.set(d,s),s+=f}return t&&(t-=r+3),{data:u,pts:i,dts:n,len:t}},e.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,i=r.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;var n=r[i-1];e.pts=n.pts,e.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&&G.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e._parseAVCPES=function(g,e){function y(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}}var v,b,S,M=this,T=this._avcTrack,t=this._parseAVCNALu(g.data),A=this.avcSample,E=!1,D=this.pushAccesUnit.bind(this);g.data=null,A&&t.length&&!T.audFound&&(D(A,T),A=this.avcSample=y(!1,g.pts,g.dts,"")),t.forEach(function(e){switch(e.type){case 1:b=!0,(A=A||(M.avcSample=y(!0,g.pts,g.dts,""))).frame=!0;var t=e.data;E&&4<t.length&&(2!==(d=new x(t).readSliceType())&&4!==d&&7!==d&&9!==d||(A.key=!0));break;case 5:b=!0,(A=A||(M.avcSample=y(!0,g.pts,g.dts,""))).key=!0,A.frame=!0;break;case 6:b=!0,(v=new x(M.discardEPB(e.data))).readUByte();for(var r=0,i=0,n=!1,a=0;!n&&1<v.bytesAvailable;){for(r=0;r+=a=v.readUByte(),255===a;);for(i=0;i+=a=v.readUByte(),255===a;);if(4===r&&0!==v.bytesAvailable){var n=!0,s=v.readUByte();if(181===s)if(49===v.readUShort()){s=v.readUInt();if(1195456820===s)if(3===v.readUByte()){var s=v.readUByte(),o=31&s,l=[s,v.readUByte()];for(S=0;S<o;S++)l.push(v.readUByte()),l.push(v.readUByte()),l.push(v.readUByte());M._insertSampleInOrder(M._txtTrack.samples,{type:3,pts:g.pts,bytes:l})}}}else if(5===r&&0!==v.bytesAvailable){if(n=!0,16<i){var u=[];for(S=0;S<16;S++)u.push(v.readUByte().toString(16)),3!==S&&5!==S&&7!==S&&9!==S||u.push("-");var c=i-16,h=new Uint8Array(c);for(S=0;S<c;S++)h[S]=v.readUByte();M._insertSampleInOrder(M._txtTrack.samples,{pts:g.pts,payloadType:r,uuid:u.join(""),userDataBytes:h,userData:Object(_.utf8ArrayToStr)(h.buffer)})}}else if(i<v.bytesAvailable)for(S=0;S<i;S++)v.readUByte()}break;case 7:if(E=b=!0,!T.sps){var d=(v=new x(e.data)).readSPS();T.width=d.width,T.height=d.height,T.pixelRatio=d.pixelRatio,T.sps=[e.data],T.duration=M._duration;var f=e.data.subarray(1,4),p="avc1.";for(S=0;S<3;S++){var m=f[S].toString(16);p+=m=m.length<2?"0"+m:m}T.codec=p}break;case 8:b=!0,T.pps||(T.pps=[e.data]);break;case 9:b=!1,T.audFound=!0,A&&D(A,T),A=M.avcSample=y(!1,g.pts,g.dts,"");break;case 12:b=!1;break;default:b=!1,A&&(A.debug+="unknown NAL "+e.type+" ")}A&&b&&A.units.push(e)}),e&&A&&(D(A,T),this.avcSample=null)},e._insertSampleInOrder=function(e,t){var r=e.length;if(0<r){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;0<=i;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e._getLastNalUnit=function(){var e,t,r=this.avcSample;return t=(r=!r||0===r.units.length?(e=this._avcTrack.samples)[e.length-1]:r)?(r=r.units)[r.length-1]:t},e._parseAVCNALu=function(e){var t,r,i,n,a,s=0,o=e.byteLength,l=this._avcTrack,u=p=l.naluState||0,c=[],h=-1;for(-1===p&&(i=31&e[h=0],p=0,s=1);s<o;){var d,f,p,m=e[s++];p?p=1!==p?m?1===m?(0<=h?(r={data:e.subarray(h,s-p-1),type:i},c.push(r)):(d=this._getLastNalUnit())&&(u&&s<=4-u&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-u)),0<(t=s-p-1)&&((f=new Uint8Array(d.data.byteLength+t)).set(d.data,0),f.set(e.subarray(0,t),d.data.byteLength),d.data=f)),s<o?(i=31&e[h=s],0):-1):0:3:m?0:2:p=m?0:1}return 0<=h&&0<=p&&(r={data:e.subarray(h,o),type:i,state:p},c.push(r)),0!==c.length||(n=this._getLastNalUnit())&&((a=new Uint8Array(n.data.byteLength+e.byteLength)).set(n.data,0),a.set(e,n.data.byteLength),n.data=a),l.naluState=p,c},e.discardEPB=function(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;for(var n=t-r.length,a=new Uint8Array(n),s=0,i=0;i<n;s++,i++)s===r[0]&&(s++,r.shift()),a[i]=e[s];return a},e._parseAACPES=function(e){var t,r,i,n,a=this._audioTrack,s=e.data,o=e.pts,l=this.aacOverFlow,u=this.aacLastPTS;for(l&&((e=new Uint8Array(l.byteLength+s.byteLength)).set(l,0),e.set(s,l.byteLength),s=e),r=0,n=s.length;r<n-1&&!g(s,r);r++);if(r){var c,h=r<n-1?(c="AAC PES did not start with ADTS header,offset:"+r,!1):(c="no ADTS header found in AAC PES",!0);if(G.logger.warn("parsing error:"+c),this.observer.trigger(V.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:h,reason:c}),h)return}for(y(a,this.observer,s,r,this.audioCodec),t=0,h=f(a.samplerate),l&&u&&(h=u+h,1<Math.abs(h-o)&&(G.logger.log("AAC: align PTS for overlapping frames by "+Math.round((h-o)/90)),o=h));r<n;){if(g(s,r)){if(r+5<n){var d=v(a,s,r,o,t);if(d){r+=d.length,i=d.sample.pts,t++;continue}}break}r++}l=r<n?s.subarray(r,n):null,this.aacOverFlow=l,this.aacLastPTS=i},e._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,n=0,a=e.pts;n<r;)if(b.isHeader(t,n)){var s=b.appendFrame(this._audioTrack,t,n,a,i);if(!s)break;n+=s.length,i++}else n++},e._parseID3PES=function(e){this._id3Track.samples.push(e)},w}(),I=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,i=_.default.getID3Data(e,0);if(i&&void 0!==_.default.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(b.probe(e,t))return G.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var n=_.default.getID3Data(e,0),a=_.default.getTimeStamp(n),s=a?90*a:9e4*t,o=n.length,l=e.length,u=0,c=0,h=this._audioTrack,d=[{pts:s,dts:s,data:n}];o<l;)if(b.isHeader(e,o)){var f=b.appendFrame(h,e,o,s,u);if(!f)break;o+=f.length,c=f.sample.pts,u++}else _.default.isHeader(e,o)?(n=_.default.getID3Data(e,o),d.push({pts:c,dts:c,data:n}),o+=n.length):o++;this.remuxer.remux(h,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),F=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),c=Math.pow(2,32)-1,Y=function(){function h(){}return h.init=function(){for(var e in h.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})h.types.hasOwnProperty(e)&&(h.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={video:t,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=n,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,t,n,t,r),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,i))},h.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,n=r.length,a=n;n--;)i+=r[n].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),n=0,i=8;n<a;n++)t.set(r[n],i),i+=r[n].byteLength;return t},h.hdlr=function(e){return h.box(h.types.hdlr,h.HDLR_TYPES[e])},h.mdat=function(e){return h.box(h.types.mdat,e)},h.mdhd=function(e,t){t*=e;var r=Math.floor(t/(1+c)),t=Math.floor(t%(1+c));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},h.mdia=function(e){return h.box(h.types.mdia,h.mdhd(e.timescale,e.duration),h.hdlr(e.type),h.minf(e))},h.mfhd=function(e){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},h.minf=function(e){return"audio"===e.type?h.box(h.types.minf,h.box(h.types.smhd,h.SMHD),h.DINF,h.stbl(e)):h.box(h.types.minf,h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(e))},h.moof=function(e,t,r){return h.box(h.types.moof,h.mfhd(e),h.traf(r,t))},h.moov=function(e){for(var t=e.length,r=[];t--;)r[t]=h.trak(e[t]);return h.box.apply(null,[h.types.moov,h.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(h.mvex(e)))},h.mvex=function(e){for(var t=e.length,r=[];t--;)r[t]=h.trex(e[t]);return h.box.apply(null,[h.types.mvex].concat(r))},h.mvhd=function(e,t){t*=e;var r=Math.floor(t/(1+c)),t=Math.floor(t%(1+c)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,t)},h.sdtp=function(e){for(var t,r=e.samples||[],i=new Uint8Array(4+r.length),n=0;n<r.length;n++)t=r[n].flags,i[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return h.box(h.types.sdtp,i)},h.stbl=function(e){return h.box(h.types.stbl,h.stsd(e),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))},h.avc1=function(e){for(var t,r,i=[],n=[],a=0;a<e.sps.length;a++)r=(t=e.sps[a]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)r=(t=e.pps[a]).byteLength,n.push(r>>>8&255),n.push(255&r),n=n.concat(Array.prototype.slice.call(t));var s=h.box(h.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(n))),o=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},h.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},h.mp4a=function(e){var t=e.samplerate;return h.box(h.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),h.box(h.types.esds,h.esds(e)))},h.mp3=function(e){var t=e.samplerate;return h.box(h.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},h.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?h.box(h.types.stsd,h.STSD,h.mp4a(e)):h.box(h.types.stsd,h.STSD,h.mp3(e)):h.box(h.types.stsd,h.STSD,h.avc1(e))},h.tkhd=function(e){var t=e.id,r=e.duration*e.timescale,i=e.width,n=e.height,e=Math.floor(r/(1+c)),r=Math.floor(r%(1+c));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,n>>8&255,255&n,0,0]))},h.traf=function(e,t){var r=h.sdtp(e),i=e.id,n=Math.floor(t/(1+c)),t=Math.floor(t%(1+c));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t])),h.trun(e,r.length+16+20+8+16+8+8),r)},h.trak=function(e){return e.duration=e.duration||4294967295,h.box(h.types.trak,h.tkhd(e),h.mdia(e))},h.trex=function(e){e=e.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},h.trun=function(e,t){var r,i,n,a,s,o=e.samples||[],l=o.length,e=12+16*l,u=new Uint8Array(e);for(u.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<l;r++)i=(s=o[r]).duration,n=s.size,a=s.flags,s=s.cts,u.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*r);return h.box(h.types.trun,u)},h.initSegment=function(e){h.types||h.init();var t=h.moov(e),e=new Uint8Array(h.FTYP.byteLength+t.byteLength);return e.set(h.FTYP),e.set(t,h.FTYP.byteLength),e},h}();function h(e,t,r,i){r=e*t*(r=void 0===r?1:r);return(i=void 0===i?!1:i)?Math.round(r):r}function H(e,t){return h(e,1e3,1/9e4,t=void 0===t?!1:t)}function d(e,t){return h(e,9e4,1/(t=void 0===t?1:t))}var S,z=d(10),W=d(.2),C=function(){function e(e,t,r,i){this.observer=e,this.config=t,this.typeSupported=r;r=navigator.userAgent;this.isSafari=i&&-1<i.indexOf("Apple")&&r&&!r.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,r,i,n,a,s){var o,l,u,c,h,d;this.ISGenerated||this.generateIS(e,t,n),this.ISGenerated&&(h=e.samples.length,o=t.samples.length,u=l=n,h&&o&&(c=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale,l+=Math.max(0,c),u+=Math.max(0,-c)),h?(e.timescale||(G.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,n)),h=this.remuxAudio(e,l,a,s),o&&(h&&(d=h.endPTS-h.startPTS),t.timescale||(G.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,n)),this.remuxVideo(t,u,a,d,s))):!o||(s=this.remuxVideo(t,u,a,0,s))&&e.codec&&this.remuxEmptyAudio(e,l,a,s)),r.samples.length&&this.remuxID3(r,n),i.samples.length&&this.remuxText(i,n),this.observer.trigger(V.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var i,n,a=this.observer,s=e.samples,o=t.samples,l=this.typeSupported,u="audio/mp4",c={},h={tracks:c},d=void 0===this._initPTS;d&&(i=n=1/0),e.config&&s.length&&(e.timescale=e.samplerate,G.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={container:u,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:Y.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(i=n=s[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&o.length?(e=t.inputTimeScale,t.timescale=e,c.video={container:"video/mp4",codec:t.codec,initSegment:Y.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(i=Math.min(i,o[0].pts-e*r),n=Math.min(n,o[0].dts-e*r),this.observer.trigger(V.default.INIT_PTS_FOUND,{initPTS:i}))):d&&c.audio&&this.observer.trigger(V.default.INIT_PTS_FOUND,{initPTS:i}),Object.keys(c).length?(a.trigger(V.default.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,d&&(this._initPTS=i,this._initDTS=n)):a.trigger(V.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,i,n){var a,s,o=8,l=e.timescale,u=e.samples,c=[],h=u.length,d=this._PTSNormalize,f=this._initPTS,p=this.nextAvcDts,m=this.isSafari;if(0!==h){m&&(r|=u.length&&p&&(n&&Math.abs(t-p/l)<.1||Math.abs(u[0].pts-p-f)<l/5)),r||(p=t*l),u.forEach(function(e){e.pts=d(e.pts-f,p),e.dts=d(e.dts-f,p)}),u.sort(function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id});var g=u.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*W)},0);if(g<0){G.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+H(g,!0)+" ms to overcome this issue");for(var y=0;y<u.length;y++)u[y].dts+=g}var n=u[0],v=Math.max(n.dts,0),b=Math.max(n.pts,0),t=v-p;r&&t&&(1<t?G.logger.log("AVC: "+H(t,!0)+" ms hole between fragments detected,filling it"):t<-1&&G.logger.log("AVC: "+H(-t,!0)+" ms overlapping between fragments detected"),v=p,u[0].dts=v,b=Math.max(b-t,p),u[0].pts=b,G.logger.log("Video: PTS/DTS adjusted: "+H(b,!0)+"/"+H(v,!0)+", delta: "+H(t,!0)+" ms")),n=u[u.length-1],r=Math.max(n.dts,0),t=Math.max(n.pts,0,r),m&&(a=Math.round((r-v)/(u.length-1)));for(var S=0,M=0,T=0;T<h;T++){for(var A=u[T],E=A.units,D=E.length,_=0,x=0;x<D;x++)_+=E[x].data.length;M+=_,S+=D,A.length=_,A.dts=m?v+T*a:Math.max(A.dts,v),A.pts=Math.max(A.pts,A.dts)}n=M+4*S+8;try{s=new Uint8Array(n)}catch(e){return void this.observer.trigger(V.default.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:n,reason:"fail allocating video mdat "+n})}var I=new DataView(s.buffer);I.setUint32(0,n),s.set(Y.types.mdat,4);for(var C=0;C<h;C++){for(var k,w,L=u[C],O=L.units,P=0,N=void 0,R=0,j=O.length;R<j;R++){var F=O[R],z=F.data,F=F.data.byteLength;I.setUint32(o,F),o+=4,s.set(z,o),o+=F,P+=4+F}N=m?Math.max(0,a*Math.round((L.pts-L.dts)/a)):(C<h-1?a=u[C+1].dts-L.dts:(w=this.config,k=L.dts-u[0<C?C-1:C].dts,w.stretchShortVideoTrack?(w=w.maxBufferHole,Math.floor(w*l)<(w=(i?b+i*l:this.nextAudioPts)-L.pts)?((a=w-k)<0&&(a=k),G.logger.log("It is approximately "+H(w,!1)+" ms to the next segment; using duration "+H(a,!1)+" ms for the last video frame.")):a=k):a=k),Math.round(L.pts-L.dts)),c.push({size:P,duration:a,cts:N,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:L.key?2:1,isNonSync:L.key?0:1}})}this.nextAvcDts=r+a;var B,r=e.dropped;e.nbNalu=0,e.dropped=0,c.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((B=c[0].flags).dependsOn=2,B.isNonSync=0),e.samples=c,B=Y.moof(e.sequenceNumber++,v,e),e.samples=[];r={data1:B,data2:s,startPTS:b/l,endPTS:(t+a)/l,startDTS:v/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:r};return this.observer.trigger(V.default.FRAG_PARSING_DATA,r),r}},t.remuxAudio=function(e,t,r,i){var n,a,s,o,l=e.inputTimeScale,u=e.timescale,c=l/u,h=(e.isAAC?1024:1152)*c,d=this._PTSNormalize,f=this._initPTS,p=!e.isAAC&&this.typeSupported.mpeg,m=p?0:8,g=e.samples,y=[],v=this.nextAudioPts;if(r|=g.length&&v&&(i&&Math.abs(t-v/l)<.1||Math.abs(g[0].pts-v-f)<20*h),g.forEach(function(e){e.pts=e.dts=d(e.pts-f,t*l)}),0!==(g=g.filter(function(e){return 0<=e.pts})).length){if(r||(v=i?t*l:g[0].pts),e.isAAC)for(var b=this.config.maxAudioFramesDrift,S=0,M=v;S<g.length;){var T=g[S],A=T.pts-M;if(A<=-b*h)G.logger.warn("Dropping 1 audio frame @ "+H(M,!0)+" ms due to "+H(A,!0)+" ms overlap."),g.splice(S,1);else if(b*h<=A&&A<z&&M){var E=Math.round(A/h);G.logger.warn("Injecting "+E+" audio frames @ "+H(M,!0)+" ms due to "+H(A,!0)+" ms gap.");for(var D=0;D<E;D++){var _,x=Math.max(M,0);(_=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(G.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),_=T.unit.subarray()),g.splice(S,0,{unit:_,pts:x,dts:x}),M+=h,S++}T.pts=T.dts=M,M+=h,S++}else T.pts=T.dts=M,M+=h,S++}for(var I=g.length,C=0;I--;)C+=g[I].unit.byteLength;for(var k=0,w=g.length;k<w;k++){var L=g[k],O=L.unit,L=L.pts;if(void 0!==o)n.duration=Math.round((L-o)/c);else{var P=L-v,N=0;if(r&&e.isAAC&&P){if(0<P&&P<z)N=Math.round((L-v)/h),G.logger.log(H(P,!0)+" ms hole between AAC samples detected,filling it"),0<N&&(C+=N*(_=(_=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||O.subarray()).length);else if(P<-12){G.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+H(v,!0)+" ms / "+H(L,!0)+" ms / "+H(-P,!0)+" ms"),C-=O.byteLength;continue}L=v}if(s=L,!(0<C))return;C+=m;try{a=new Uint8Array(C)}catch(e){return void this.observer.trigger(V.default.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:C,reason:"fail allocating audio mdat "+C})}p||(new DataView(a.buffer).setUint32(0,C),a.set(Y.types.mdat,4));for(var R=0;R<N;R++)(_=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(G.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),_=O.subarray()),a.set(_,m),m+=_.byteLength,n={size:_.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(n)}a.set(O,m);P=O.byteLength;m+=P,y.push(n={size:P,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),o=L}var j=0;if(2<=(I=y.length)&&(j=y[I-2].duration,n.duration=j),I){this.nextAudioPts=v=o+c*j,e.samples=y,u=p?new Uint8Array:Y.moof(e.sequenceNumber++,s/c,e),e.samples=[];i=s/l,j=v/l,j={data1:u,data2:a,startPTS:i,endPTS:j,startDTS:i,endDTS:j,type:"audio",hasAudio:!0,hasVideo:!1,nb:I};return this.observer.trigger(V.default.FRAG_PARSING_DATA,j),j}return null}},t.remuxEmptyAudio=function(e,t,r,i){var n=e.inputTimeScale,a=e.samplerate||n,s=this.nextAudioPts,o=(void 0!==s?s:i.startDTS*n)+this._initDTS,i=i.endDTS*n+this._initDTS,l=1024*(n/a),u=Math.ceil((i-o)/l),c=F.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(G.logger.warn("remux empty Audio"),c){for(var h=[],d=0;d<u;d++){var f=o+d*l;h.push({unit:c,pts:f,dts:f})}e.samples=h,this.remuxAudio(e,t,r)}else G.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t=e.samples.length;if(t){for(var r=e.inputTimeScale,i=this._initPTS,n=this._initDTS,a=0;a<t;a++){var s=e.samples[a];s.pts=(s.pts-i)/r,s.dts=(s.dts-n)/r}this.observer.trigger(V.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,i=e.inputTimeScale,n=this._initPTS;if(r){for(var a=0;a<r;a++)(t=e.samples[a]).pts=(t.pts-n)/i;this.observer.trigger(V.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=r;return e},e}(),k=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,i,n,a,s,o){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(V.default.FRAG_PARSING_DATA,{data1:o,startPTS:n,startDTS:n,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(V.default.FRAG_PARSED)},e}(),i=Object(i.getSelfScope)();try{S=i.performance.now.bind(i.performance)}catch(e){G.logger.debug("Unable to use Performance API on this environment"),S=i.Date.now}i=function(){function e(e,t,r,i){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,r,i,n,a,s,o,l,u,c,h,d){var t,f,p=this;0<e.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method?(null==(t=this.decrypter)&&(t=this.decrypter=new m.default(this.observer,this.config)),f=S(),t.decrypt(e,r.key.buffer,r.iv.buffer,function(e){var t=S();p.observer.trigger(V.default.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:t}}),p.pushDecrypted(new Uint8Array(e),r,new Uint8Array(i),n,a,s,o,l,u,c,h,d)})):this.pushDecrypted(new Uint8Array(e),r,new Uint8Array(i),n,a,s,o,l,u,c,h,d)},t.pushDecrypted=function(e,t,r,i,n,a,s,o,l,u,c,h){if(!(M=this.demuxer)||(s||o)&&!this.probe(e)){for(var d=this.observer,f=this.typeSupported,p=this.config,m=[{demux:D,remux:C},{demux:E.default,remux:k},{demux:A,remux:C},{demux:I,remux:C}],g=0,y=m.length;g<y;g++){var v=m[g],b=v.demux.probe;if(b(e)){var S=this.remuxer=new v.remux(d,p,f,this.vendor),M=new v.demux(d,S,p,f);this.probe=b;break}}if(!M)return void d.trigger(V.default.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=M}var T=this.remuxer;(s||o)&&(M.resetInitSegment(r,i,n,u),T.resetInitSegment()),s&&(M.resetTimeStamp(h),T.resetTimeStamp(h)),"function"==typeof M.setDecryptData&&M.setDecryptData(t),M.append(e,a,l,c)},e}(),t.default=i},"./src/demux/demuxer-worker.js":function(e,t,r){r.r(t);var s=r("./src/demux/demuxer-inline.js"),o=r("./src/events.js"),l=r("./src/utils/logger.js"),u=r("./node_modules/eventemitter3/index.js");t.default=function(i){var n=new u.EventEmitter;n.trigger=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))};function a(e,t){i.postMessage({event:e,data:t})}i.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var r=JSON.parse(t.config);i.demuxer=new s.default(n,t.typeSupported,r,t.vendor),Object(l.enableLogs)(r.debug),a("init",null);break;case"demux":i.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),n.on(o.default.FRAG_DECRYPTED,a),n.on(o.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(o.default.FRAG_PARSED,a),n.on(o.default.ERROR,a),n.on(o.default.FRAG_PARSING_METADATA,a),n.on(o.default.FRAG_PARSING_USERDATA,a),n.on(o.default.INIT_PTS_FOUND,a),n.on(o.default.FRAG_PARSING_DATA,function(e,t){var r=[],e={event:e,data:t};t.data1&&(e.data1=t.data1.buffer,r.push(t.data1.buffer),delete t.data1),t.data2&&(e.data2=t.data2.buffer,r.push(t.data2.buffer),delete t.data2),i.postMessage(e,r)})}},"./src/demux/id3.js":function(e,t,r){r.r(t),r.d(t,"utf8ArrayToStr",function(){return i});var c,h=r("./src/utils/get-self-scope.js"),r=function(){function o(){}return o.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o.getID3Data=function(e,t){for(var r=t,i=0;o.isHeader(e,t);)i+=10,i+=o._readSize(e,t+6),o.isFooter(e,t+10)&&(i+=10),t+=i;if(0<i)return e.subarray(r,r+i)},o._readSize=function(e,t){var r=(127&e[t])<<21;return r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},o.getTimeStamp=function(e){for(var t=o.getID3Frames(e),r=0;r<t.length;r++){var i=t[r];if(o.isTimeStampFrame(i))return o._readTimeStamp(i)}},o.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},o._getFrameData=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=o._readSize(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}},o.getID3Frames=function(e){for(var t=0,r=[];o.isHeader(e,t);){for(var i=o._readSize(e,t+6),n=(t+=10)+i;t+8<n;){var a=o._getFrameData(e.subarray(t)),s=o._decodeFrame(a);s&&r.push(s),t+=a.size+10}o.isFooter(e,t)&&(t+=10)}return r},o._decodeFrame=function(e){return"PRIV"===e.type?o._decodePrivFrame(e):"T"===e.type[0]?o._decodeTextFrame(e):"W"===e.type[0]?o._decodeURLFrame(e):void 0},o._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}},o._decodePrivFrame=function(e){if(!(e.size<2)){var t=o._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}},o._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=o._utf8ArrayToStr(e.data.subarray(1),!0);t+=r.length+1;t=o._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:t}}t=o._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:t}}},o._decodeURLFrame=function(e){if("WXXX"!==e.type){var t=o._utf8ArrayToStr(e.data);return{key:e.type,data:t}}if(!(e.size<2)){var r=1,t=o._utf8ArrayToStr(e.data.subarray(1));r+=t.length+1;r=o._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:t,data:r}}},o._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=function(){var e=Object(h.getSelfScope)();c||void 0===e.TextDecoder||(c=new e.TextDecoder("utf-8"));return c}();if(r){var i=r.decode(e);if(t){r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var n,a,s,o=e.length,l="",u=0;u<o;){if(0===(n=e[u++])&&t)return l;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&n)<<6|63&a);break;case 14:a=e[u++],s=e[u++],l+=String.fromCharCode((15&n)<<12|(63&a)<<6|(63&s)<<0)}}return l},o}();var i=r._utf8ArrayToStr;t.default=r},"./src/demux/mp4demuxer.js":function(e,t,r){r.r(t);var a=r("./src/utils/logger.js"),o=r("./src/events.js"),s=Math.pow(2,32)-1,r=function(){function d(e,t){this.observer=e,this.remuxer=t}var e=d.prototype;return e.resetTimeStamp=function(e){this.initPTS=e},e.resetInitSegment=function(e,t,r,i){var n,a;e&&e.byteLength?(null==t&&(t="mp4a.40.5"),null==r&&(r="avc1.42e01e"),a={},(n=this.initData=d.parseInitSegment(e)).audio&&n.video?a.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:i?e:null}:(n.audio&&(a.audio={container:"audio/mp4",codec:t,initSegment:i?e:null}),n.video&&(a.video={container:"video/mp4",codec:r,initSegment:i?e:null})),this.observer.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,{tracks:a})):(t&&(this.audioCodec=t),r&&(this.videoCodec=r))},d.probe=function(e){return 0<d.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},d.bin2str=function(e){return String.fromCharCode.apply(null,e)},d.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<8|e[t+1];return t<0?65536+t:t},d.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t},d.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},d.findBox=function(e,t){var r,i,n,a,s,o=[];if(e.data?(a=e.start,i=e.end,e=e.data):(a=0,i=e.byteLength),!t.length)return null;for(r=a;r<i;)s=1<(n=d.readUint32(e,r))?r+n:i,d.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?o.push({data:e,start:r+8,end:s}):(n=d.findBox({data:e,start:r+8,end:s},t.slice(1))).length&&(o=o.concat(n))),r=s;return o},d.parseSegmentIndex=function(e){var t=d.findBox(e,["moov"])[0],t=t?t.end:null,r=0,i=d.findBox(e,["sidx"]);if(!i||!i[0])return null;var n=[],e=(i=i[0]).data[0],r=0===e?8:16,a=d.readUint32(i,r);r+=4;r+=0===e?8:16;var s=i.end+0,o=d.readUint16(i,r+=2);r+=2;for(var l=0;l<o;l++){var u=r,c=d.readUint32(i,u);u+=4;var h=2147483647&c;if(1==(2147483648&c)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");c=d.readUint32(i,u);u+=4,n.push({referenceSize:h,subsegmentDuration:c,info:{duration:c/a,start:s,end:s+h-1}}),s+=h,r=u+=4}return{earliestPresentationTime:0,timescale:a,version:e,referencesCount:o,references:n,moovEndOffset:t}},d.parseInitSegment=function(e){var n=[];return d.findBox(e,["moov","trak"]).forEach(function(e){var t,r,i=d.findBox(e,["tkhd"])[0];i&&(r=i.data[i.start],t=d.readUint32(i,0===r?12:20),(i=d.findBox(e,["mdia","mdhd"])[0])&&(r=i.data[i.start],i=d.readUint32(i,0===r?12:20),!(r=d.findBox(e,["mdia","hdlr"])[0])||(r={soun:"audio",vide:"video"}[d.bin2str(r.data.subarray(r.start+8,r.start+12))])&&((e=d.findBox(e,["mdia","minf","stbl","stsd"])).length&&(e=e[0],e=d.bin2str(e.data.subarray(e.start+12,e.start+16)),a.logger.log("MP4Demuxer:"+r+":"+e+" found")),n[t]={timescale:i,type:r},n[r]={timescale:i,id:t})))}),n},d.getStartDTS=function(r,e){var e=d.findBox(e,["moof","traf"]),e=[].concat.apply([],e.map(function(t){return d.findBox(t,["tfhd"]).map(function(e){var e=d.readUint32(e,4),e=r[e].timescale||9e4;return d.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=d.readUint32(e,4);return 1===t&&(r*=Math.pow(2,32),r+=d.readUint32(e,8)),r})[0]/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},d.offsetStartDTS=function(r,e,n){d.findBox(e,["moof","traf"]).map(function(t){return d.findBox(t,["tfhd"]).map(function(e){var e=d.readUint32(e,4),i=r[e].timescale||9e4;d.findBox(t,["tfdt"]).map(function(e){var t=e.data[e.start],r=d.readUint32(e,4);0===t?d.writeUint32(e,4,r-n*i):(r*=Math.pow(2,32),r+=d.readUint32(e,8),r-=n*i,r=Math.max(r,0),t=Math.floor(r/(1+s)),r=Math.floor(r%(1+s)),d.writeUint32(e,4,t),d.writeUint32(e,8,r))})})})},e.append=function(e,t,r,i){var n=this.initData;n||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),n=this.initData);var a,s=this.initPTS;void 0===s&&(a=d.getStartDTS(n,e),this.initPTS=s=a-t,this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:s})),d.offsetStartDTS(n,e,s),s=d.getStartDTS(n,e),this.remuxer.remux(n.audio,n.video,null,null,s,r,i,e)},e.destroy=function(){},d}();t.default=r},"./src/errors.ts":function(e,t,r){var i,n;r.r(t),r.d(t,"ErrorTypes",function(){return i}),r.d(t,"ErrorDetails",function(){return n}),(t=i=i||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(t=n=n||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"},"./src/events.js":function(e,t,r){r.r(t);t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return Zt});var i={};r.r(i),r.d(i,"newCue",function(){return ct});var f,a,n=r("./node_modules/url-toolkit/src/url-toolkit.js"),g=r("./src/errors.ts"),D=r("./src/polyfills/number-isFinite.js"),M=r("./src/events.js"),_=r("./src/utils/logger.js"),s={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},o=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(s[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(t,e){try{!function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}.call(this,t,e).call()}catch(e){_.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},e}();(Qe=f=f||{}).MANIFEST="manifest",Qe.LEVEL="level",Qe.AUDIO_TRACK="audioTrack",Qe.SUBTITLE_TRACK="subtitleTrack",(Ze=a=a||{}).MAIN="main",Ze.AUDIO="audio",Ze.SUBTITLE="subtitle";var l=r("./src/demux/mp4demuxer.js");function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c,x=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r,i;return t=e,(r=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(n.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&u(t.prototype,r),i&&u(t,i),e}();function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(et=c=c||{}).AUDIO="audio",et.VIDEO="video";var I=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[c.AUDIO]=!1,e[c.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,i=e.prototype;return i.setByteRange=function(e,t){var r=e.split("@",2),e=[];1===r.length?e[0]=t?t.byteRangeEndOffset:0:e[0]=parseInt(r[1]),e[1]=parseInt(r[0])+e[0],this._byteRange=e},i.addElementaryStream=function(e){this._elementaryStreams[e]=!0},i.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},i.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},i.setDecryptDataFromLevelKey=function(e,t){var r=e;return null!=e&&e.method&&e.uri&&!e.iv&&((r=new x(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(i=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(n.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this.levelkey||this._decryptdata?(!this._decryptdata&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&_.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)),this._decryptdata):null;var e}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(D.isFiniteNumber)(this.programDateTime))return null;var e=Object(D.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&h(t.prototype,i),r&&h(t,r),e}();function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r,i;return t=e,(r=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(D.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&d(t.prototype,r),i&&d(t,i),e}(),p=/^(\d+)x(\d+)$/,m=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function r(e){for(var t in e="string"==typeof e?r.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}var e=r.prototype;return e.decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.enumeratedString=function(e){return this[e]},e.decimalResolution=function(e){e=p.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},r.parseAttrList=function(e){var t,r={};for(m.lastIndex=0;null!==(t=m.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},r}(),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function v(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var b=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,S=/#EXT-X-MEDIA:(.*)/g,w=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),L=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,O=/\.(mp4|m4s|m4v|m4a)$/i,T=function(){function c(){}return c.findGroup=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i}},c.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return 2<r.length?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},c.resolve=function(e,t){return n.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},c.parseMasterPlaylist=function(e,t){var r,i,n,a,s=[],o={},l=!1;function u(i,n){["video","audio"].forEach(function(r){var e,t=i.filter(function(e){return t=e,!!(e=y[e=r])&&!0===e[t.slice(0,4)];var t});t.length&&(e=t.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}),n[r+"Codec"]=(0<e.length?e:t)[0],i=i.filter(function(e){return-1===t.indexOf(e)}))}),n.unknownCodecs=i}for(b.lastIndex=0;null!=(a=b.exec(e));)a[1]?(i=(r={}).attrs=new k(a[1]),r.url=c.resolve(a[2],t),(n=i.decimalResolution("RESOLUTION"))&&(r.width=n.width,r.height=n.height),r.bitrate=i.decimalInteger("AVERAGE-BANDWIDTH")||i.decimalInteger("BANDWIDTH"),r.name=i.NAME,u([].concat((i.CODECS||"").split(/[ ,]+/)),r),r.videoCodec&&-1!==r.videoCodec.indexOf("avc1")&&(r.videoCodec=c.convertAVC1ToAVCOTI(r.videoCodec)),s.push(r)):!a[3]||(a=new k(a[3]))["DATA-ID"]&&(l=!0,o[a["DATA-ID"]]=a);return{levels:s,sessionData:l?o:null}},c.parseMasterPlaylistMedia=function(e,t,r,i){void 0===i&&(i=[]);var n=[],a=0;for(S.lastIndex=0;null!==(s=S.exec(e));){var s,o=new k(s[1]);o.TYPE===r&&(s={attrs:o,id:a++,groupId:o["GROUP-ID"],instreamId:o["INSTREAM-ID"],name:o.NAME||o.LANGUAGE,type:r,default:"YES"===o.DEFAULT,autoselect:"YES"===o.AUTOSELECT,forced:"YES"===o.FORCED,lang:o.LANGUAGE},o.URI&&(s.url=c.resolve(o.URI,t)),i.length&&(o=c.findGroup(i,s.groupId),s.audioCodec=(o||i[0]).codec),n.push(s))}return n},c.parseLevelPlaylist=function(e,t,r,i,n){var a,s,o,l=0,u=0,c=new C(t),h=0,d=null,f=new I,p=null;for(w.lastIndex=0;null!==(a=w.exec(e));){var m=a[1];if(m){f.duration=parseFloat(m);var g=(" "+a[2]).slice(1);f.title=g||null,f.tagList.push(g?["INF",m,g]:["INF",m])}else if(a[3])Object(D.isFiniteNumber)(f.duration)&&(y=l++,f.type=i,f.start=u,o&&(f.levelkey=o),f.sn=y,f.level=r,f.cc=h,f.urlId=n,f.baseurl=t,f.relurl=(" "+a[3]).slice(1),function(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime);Object(D.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}(f,d),c.fragments.push(f),u+=(d=f).duration,f=new I);else if(a[4]){var y=(" "+a[4]).slice(1);d?f.setByteRange(y,d):f.setByteRange(y)}else if(a[5])f.rawProgramDateTime=(" "+a[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),null===p&&(p=c.fragments.length);else if(a=a[0].match(L)){for(s=1;s<a.length&&void 0===a[s];s++);var v=(" "+a[s+1]).slice(1),b=(" "+a[s+2]).slice(1);switch(a[s]){case"#":f.tagList.push(b?[v,b]:[v]);break;case"PLAYLIST-TYPE":c.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":l=c.startSN=parseInt(v);break;case"TARGETDURATION":c.targetduration=parseFloat(v);break;case"VERSION":c.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":h++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(v);break;case"KEY":var S=new k(v),M=S.enumeratedString("METHOD"),T=S.URI,A=S.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(S.KEYFORMAT||"identity")){_.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}M&&(o=new x(t,T),T&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)&&(o.method=M,o.key=null,o.iv=A));break;case"START":var E=new k(v).decimalFloatingPoint("TIME-OFFSET");Object(D.isFiniteNumber)(E)&&(c.startTimeOffset=E);break;case"MAP":E=new k(v);f.relurl=E.URI,E.BYTERANGE&&f.setByteRange(E.BYTERANGE),f.baseurl=t,f.level=r,f.type=i,f.sn="initSegment",c.initSegment=f,(f=new I).rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:_.logger.warn("line parsed but not handled: "+a)}}else _.logger.warn("No matches on slow regex match for level playlist!")}return(f=d)&&!f.relurl&&(c.fragments.pop(),u-=f.duration),c.totalduration=u,c.averagetargetduration=u/c.fragments.length,c.endSN=l-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=h,!c.initSegment&&c.fragments.length&&c.fragments.every(function(e){return O.test(e.relurl)})&&(_.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(f=new I).relurl=c.fragments[0].relurl,f.baseurl=t,f.level=r,f.type=i,f.sn="initSegment",c.initSegment=f,c.needSidxRanges=!0),p&&function(e,t){for(var r=e[t],i=t-1;0<=i;i--){var n=e[i];n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(c.fragments,p),c},c}();var A=window.performance,E=function(t){var e;function d(e){e=t.call(this,e,M.default.MANIFEST_LOADING,M.default.LEVEL_LOADING,M.default.AUDIO_TRACK_LOADING,M.default.SUBTITLE_TRACK_LOADING)||this;return e.loaders={},e}r=t,(e=d).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r,d.canHaveQualityLevels=function(e){return e!==f.AUDIO_TRACK&&e!==f.SUBTITLE_TRACK},d.mapContextToLevelType=function(e){switch(e.type){case f.AUDIO_TRACK:return a.AUDIO;case f.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},d.getResponseUrl=function(e,t){e=e.url;return e=void 0===e||0===e.indexOf("data:")?t.url:e};var r=d.prototype;return r.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,t=new(r||i)(t);return e.loader=t,this.loaders[e.type]=t},r.getInternalLoader=function(e){return this.loaders[e.type]},r.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.onManifestLoading=function(e){this.load({url:e.url,type:f.MANIFEST,level:0,id:null,responseType:"text"})},r.onLevelLoading=function(e){this.load({url:e.url,type:f.LEVEL,level:e.level,id:e.id,responseType:"text"})},r.onAudioTrackLoading=function(e){this.load({url:e.url,type:f.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},r.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:f.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},r.load=function(e){var t,r,i,n,a=this.hls.config;if(_.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id),o=this.getInternalLoader(e)){var s=o.context;if(s&&s.url===e.url)return _.logger.trace("playlist request ongoing"),!1;_.logger.warn("aborting previous loader for type: "+e.type),o.abort()}switch(e.type){case f.MANIFEST:t=a.manifestLoadingMaxRetry,r=a.manifestLoadingTimeOut,i=a.manifestLoadingRetryDelay,n=a.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:i=n=t=0,r=a.levelLoadingTimeOut;break;default:t=a.levelLoadingMaxRetry,r=a.levelLoadingTimeOut,i=a.levelLoadingRetryDelay,n=a.levelLoadingMaxRetryTimeout}var o=this.createInternalLoader(e),l={timeout:r,maxRetry:t,retryDelay:i,maxRetryDelay:n},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return _.logger.debug("Calling internal loader delegate for URL: "+e.url),o.load(e,l,s),!0},r.loadsuccess=function(e,t,r,i){if(void 0===i&&(i=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,i);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=e.data;t.tload=A.now(),0===n.indexOf("#EXTM3U")?0<n.indexOf("#EXTINF:")||0<n.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i)},r.loaderror=function(e,t,r){this._handleNetworkError(t,r=void 0===r?null:r,!1,e)},r.loadtimeout=function(e,t,r){this._handleNetworkError(t,r=void 0===r?null:r,!0)},r._handleMasterPlaylist=function(e,t,r,i){var n,a,s=this.hls,o=e.data,l=d.getResponseUrl(e,r),u=T.parseMasterPlaylist(o,l),c=u.levels,h=u.sessionData;c.length?(n=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),u=T.parseMasterPlaylistMedia(o,l,"AUDIO",n),n=T.parseMasterPlaylistMedia(o,l,"SUBTITLES"),o=T.parseMasterPlaylistMedia(o,l,"CLOSED-CAPTIONS"),u.length&&(a=!1,u.forEach(function(e){e.url||(a=!0)}),!1===a&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(_.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))),s.trigger(M.default.MANIFEST_LOADED,{levels:c,audioTracks:u,subtitles:n,captions:o,url:l,stats:t,networkDetails:i,sessionData:h})):this._handleManifestParsingError(e,r,"no level found in manifest",i)},r._handleTrackOrLevelPlaylist=function(e,t,r,i){var n=this.hls,a=r.id,s=r.level,o=r.type,l=d.getResponseUrl(e,r),u=Object(D.isFiniteNumber)(a)?a:0,c=Object(D.isFiniteNumber)(s)?s:u,h=d.mapContextToLevelType(r),h=T.parseLevelPlaylist(e.data,l,c,h,u);h.tload=t.tload,h.fragments.length?(o===f.MANIFEST&&n.trigger(M.default.MANIFEST_LOADED,{levels:[{url:l,details:h}],audioTracks:[],url:l,stats:t,networkDetails:i,sessionData:null}),t.tparsed=A.now(),h.needSidxRanges?(u=h.initSegment.url,this.load({url:u,isSidxRequest:!0,type:o,level:s,levelDetails:h,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})):(r.levelDetails=h,this._handlePlaylistLoaded(e,t,r,i))):n.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},r._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r,i=l.default.parseSegmentIndex(new Uint8Array(e.data));i&&(e=i.references,r=t.levelDetails,e.forEach(function(e,t){e=e.info;!r||0===(t=r.fragments[t]).byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}),r&&r.initSegment.setByteRange(String(i.moovEndOffset)+"@0"))},r._handleManifestParsingError=function(e,t,r,i){this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:i})},r._handleNetworkError=function(e,t,r,i){var n,a;void 0===r&&(r=!1),void 0===i&&(i=null),_.logger.info("A network error occured while loading a "+e.type+"-type playlist");var s=this.getInternalLoader(e);switch(e.type){case f.MANIFEST:n=r?g.ErrorDetails.MANIFEST_LOAD_TIMEOUT:g.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case f.LEVEL:n=r?g.ErrorDetails.LEVEL_LOAD_TIMEOUT:g.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case f.AUDIO_TRACK:n=r?g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}s&&(s.abort(),this.resetInternalLoader(e.type));t={type:g.ErrorTypes.NETWORK_ERROR,details:n,fatal:a,url:e.url,loader:s,context:e,networkDetails:t};i&&(t.response=i),this.hls.trigger(M.default.ERROR,t)},r._handlePlaylistLoaded=function(e,t,r,i){var n=r.type,a=r.level,s=r.id,o=r.levelDetails;if(o&&o.targetduration)if(d.canHaveQualityLevels(r.type))this.hls.trigger(M.default.LEVEL_LOADED,{details:o,level:a||0,id:s||0,stats:t,networkDetails:i});else switch(n){case f.AUDIO_TRACK:this.hls.trigger(M.default.AUDIO_TRACK_LOADED,{details:o,id:s,stats:t,networkDetails:i});break;case f.SUBTITLE_TRACK:this.hls.trigger(M.default.SUBTITLE_TRACK_LOADED,{details:o,id:s,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},d}(o);var P=function(i){var e;function t(e){e=i.call(this,e,M.default.FRAG_LOADING)||this;return e.loaders={},e}r=i,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.destroy=function(){var e,t=this.loaders;for(e in t){var r=t[e];r&&r.destroy()}this.loaders={},i.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,r=t.type,i=this.loaders,n=this.hls.config,a=n.fLoader,s=n.loader;t.loaded=0,(e=i[r])&&(_.logger.warn("abort previous fragment loader for type: "+r),e.abort());var e=i[r]=t.loader=new(n.fLoader?a:s)(n),a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},s=t.byteRangeStartOffset,t=t.byteRangeEndOffset;Object(D.isFiniteNumber)(s)&&Object(D.isFiniteNumber)(t)&&(a.rangeStart=s,a.rangeEnd=t),t={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},n={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},e.load(a,t,n)},r.loadsuccess=function(e,t,r,i){void 0===i&&(i=null);e=e.data,r=r.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(M.default.FRAG_LOADED,{payload:e,frag:r,stats:t,networkDetails:i})},r.loaderror=function(e,t,r){void 0===r&&(r=null);var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.loadtimeout=function(e,t,r){void 0===r&&(r=null);var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.loadprogress=function(e,t,r,i){void 0===i&&(i=null);t=t.frag;t.loaded=e.loaded,this.hls.trigger(M.default.FRAG_LOAD_PROGRESS,{frag:t,stats:e,networkDetails:i})},t}(o);var N=function(t){var e;function r(e){e=t.call(this,e,M.default.KEY_LOADING)||this;return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}i=t,(e=r).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=r.prototype;return i.destroy=function(){for(var e in this.loaders){e=this.loaders[e];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onKeyLoading=function(e){var t,r=e.frag,i=r.type,n=this.loaders[i];r.decryptdata?(t=r.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,n&&(_.logger.warn("abort previous key loader for type:"+i),n.abort()),t?(r.loader=this.loaders[i]=new e.loader(e),this.decrypturl=t,this.decryptkey=null,i={url:t,frag:r,responseType:"arraybuffer"},t={timeout:e.fragLoadingTimeOut,maxRetry:0,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},e={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.loader.load(i,t,e)):_.logger.warn("key uri is falsy")):this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(M.default.KEY_LOADED,{frag:r})):_.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(e,t,r){r=r.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(M.default.KEY_LOADED,{frag:r})):_.logger.error("after key load, decryptdata unset")},i.loaderror=function(e,t){var r=t.frag,t=r.loader;t&&t.abort(),delete this.loaders[r.type],this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},i.loadtimeout=function(e,t){var r=t.frag,t=r.loader;t&&t.abort(),delete this.loaders[r.type],this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.NETWORK_ERROR,details:g.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},r}(o);var R="NOT_LOADED",j="APPENDING",F="PARTIAL",z="OK",B=function(r){var e;function t(e){var t=r.call(this,e,M.default.BUFFER_APPENDED,M.default.FRAG_BUFFERED,M.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}i=r,(e=t).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=t.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,o.prototype.destroy.call(this),r.prototype.destroy.call(this)},i.getBufferedFrag=function(t,r){var i=this.fragments,e=Object.keys(i).filter(function(e){e=i[e];if(e.body.type!==r)return!1;if(!e.buffered)return!1;e=e.body;return e.startPTS<=t&&t<=e.endPTS});if(0===e.length)return null;e=e.pop();return i[e].body},i.detectEvictedFragments=function(a,s){var o=this;Object.keys(this.fragments).forEach(function(e){var t=o.fragments[e];if(t&&t.buffered){e=t.range[a];if(e)for(var r=e.time,i=0;i<r.length;i++){var n=r[i];if(!o.isTimeBuffered(n.startPTS,n.endPTS,s)){o.removeFragment(t.body);break}}}})},i.detectPartialFragments=function(r){var i=this,e=this.getFragmentKey(r),n=this.fragments[e];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){var t;r.hasElementaryStream(e)&&(t=i.timeRanges[e],n.range[e]=i.getBufferedTimes(r.startPTS,r.endPTS,t))}))},i.getBufferedTimes=function(e,t,r){for(var i,n,a=[],s=!1,o=0;o<r.length;o++){if(i=r.start(o)-this.bufferPadding,n=r.end(o)+this.bufferPadding,i<=e&&t<=n){a.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))});break}if(e<n&&i<t)a.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))}),s=!0;else if(t<=i)break}return{time:a,partial:s}},i.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},i.getPartialFragment=function(t){var r,i,n=this,a=null,s=0;return Object.keys(this.fragments).forEach(function(e){e=n.fragments[e];n.isPartial(e)&&(r=e.body.startPTS-n.bufferPadding,i=e.body.endPTS+n.bufferPadding,r<=t&&t<=i&&(i=Math.min(t-r,i-t),s<=i&&(a=e.body,s=i)))}),a},i.getState=function(e){var t=this.getFragmentKey(e),e=this.fragments[t],t=R;return t=void 0!==e?e.buffered?!0===this.isPartial(e)?F:z:j:t},i.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},i.isTimeBuffered=function(e,t,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,i<=e&&t<=n)return!0;if(t<=i)return!1}return!1},i.onFragLoaded=function(e){e=e.frag;Object(D.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(e){var r=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=r.timeRanges[e];r.detectEvictedFragments(e,t)})},i.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},i.hasFragment=function(e){e=this.getFragmentKey(e);return void 0!==this.fragments[e]},i.removeFragment=function(e){e=this.getFragmentKey(e);delete this.fragments[e]},i.removeAllFragments=function(){this.fragments=Object.create(null)},t}(o),V={search:function(e,t){for(var r=0,i=e.length-1,n=null,a=null;r<=i;){var s=t(a=e[n=(r+i)/2|0]);if(0<s)r=1+n;else{if(!(s<0))return a;i=n-1}}return null}},U=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){for(var i=e.buffered,n=[],a=0;a<i.length;a++)n.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(n,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end});var i=[];if(r)for(var n=0;n<e.length;n++){var a,s=i.length;s?(a=i[s-1].end,e[n].start-a<r?e[n].end>a&&(i[s-1].end=e[n].end):i.push(e[n])):i.push(e[n])}else i=e;for(var o,l=0,u=t,c=t,h=0;h<i.length;h++){var d=i[h].start,f=i[h].end;if(d<=t+r&&t<f)u=d,l=(c=f)-t;else if(t+r<d){o=d;break}}return{len:l,start:u,end:c,nextStart:o}},e}(),G=r("./node_modules/eventemitter3/index.js"),Y=r("./node_modules/webworkify-webpack/index.js"),H=r("./src/demux/demuxer-inline.js");function W(){return window.MediaSource||window.WebKitMediaSource}var $=r("./src/utils/get-self-scope.js");var Q=function(e){var t,r;function i(){return e.apply(this,arguments)||this}return r=e,(t=i).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,i.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.emit.apply(this,[e,e].concat(r))},i}(G.EventEmitter),K=Object($.getSelfScope)(),Z=W()||{isTypeSupported:function(){return!1}},X=function(){function e(r,e){var i=this;this.hls=r,this.id=e;var t=this.observer=new Q,n=r.config,a=function(e,t){(t=t||{}).frag=i.frag,t.id=i.id,r.trigger(e,t)};t.on(M.default.FRAG_DECRYPTED,a),t.on(M.default.FRAG_PARSING_INIT_SEGMENT,a),t.on(M.default.FRAG_PARSING_DATA,a),t.on(M.default.FRAG_PARSED,a),t.on(M.default.ERROR,a),t.on(M.default.FRAG_PARSING_METADATA,a),t.on(M.default.FRAG_PARSING_USERDATA,a),t.on(M.default.INIT_PTS_FOUND,a);var s,o={mp4:Z.isTypeSupported("video/mp4"),mpeg:Z.isTypeSupported("audio/mpeg"),mp3:Z.isTypeSupported('audio/mp4; codecs="mp3"')},a=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){_.logger.log("demuxing in webworker");try{s=this.w=Y("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(e){r.trigger(M.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:o,vendor:a,id:e,config:JSON.stringify(n)})}catch(e){_.logger.warn("Error in worker:",e),_.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&K.URL.revokeObjectURL(s.objectURL),this.demuxer=new H.default(t,o,n,a),this.w=void 0}}else this.demuxer=new H.default(t,o,n,a)}var t=e.prototype;return t.destroy=function(){var e=this.w;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null):(t=this.demuxer)&&(t.destroy(),this.demuxer=null);var t=this.observer;t&&(t.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,i,n,a,s,o){var l=this.w,u=Object(D.isFiniteNumber)(n.startPTS)?n.startPTS:n.start,c=n.decryptdata,h=this.frag,d=!(h&&n.cc===h.cc),f=!(h&&n.level===h.level),h=h&&n.sn===h.sn+1,h=!f&&h;d&&_.logger.log(this.id+":discontinuity detected"),f&&_.logger.log(this.id+":switch detected"),this.frag=n,l?l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:u,discontinuity:d,trackSwitch:f,contiguous:h,duration:a,accurateTimeOffset:s,defaultInitPTS:o},e instanceof ArrayBuffer?[e]:[]):(l=this.demuxer)&&l.push(e,c,t,r,i,u,d,f,h,a,s,o)},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":K.URL.revokeObjectURL(this.w.objectURL);break;case M.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function q(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function J(e,t,r){var i=e[t],n=e[r],e=n.startPTS;Object(D.isFiniteNumber)(e)?t<r?(i.duration=e-i.start,i.duration<0&&_.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(n.duration=i.start-e,n.duration<0&&_.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=t<r?i.start+i.duration:Math.max(i.start-n.duration,0)}function ee(e,t,r,i,n,a){var s=r;Object(D.isFiniteNumber)(t.startPTS)&&(o=Math.abs(t.startPTS-r),Object(D.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(o,t.deltaPTS):t.deltaPTS=o,s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),i=Math.max(i,t.endPTS),n=Math.min(n,t.startDTS),a=Math.max(a,t.endDTS));var o=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=i,t.startDTS=n,t.endDTS=a,t.duration=i-r;var l,u,r=t.sn;if(!e||r<e.startSN||r>e.endSN)return 0;for(r=r-e.startSN,(l=e.fragments)[r]=t,u=r;0<u;u--)J(l,u,u-1);for(u=r;u<l.length-1;u++)J(l,u,u+1);return e.PTSKnown=!0,o}function te(e,r){r.initSegment&&e.initSegment&&(r.initSegment=e.initSegment);var i,n=0;if(re(e,r,function(e,t){n=e.cc-t.cc,Object(D.isFiniteNumber)(e.startPTS)&&(t.start=t.startPTS=e.startPTS,t.endPTS=e.endPTS,t.duration=e.duration,t.backtracked=e.backtracked,t.dropped=e.dropped,i=t),r.PTSKnown=!0}),r.PTSKnown){if(n){_.logger.log("discontinuity sliding from playlist, take drift into account");for(var t=r.fragments,a=0;a<t.length;a++)t[a].cc+=n}i?ee(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):function(e,t){var r=t.startSN-e.startSN,i=e.fragments,n=t.fragments;if(!(r<0||r>i.length))for(var a=0;a<n.length;a++)n[a].start+=i[r].start}(e,r),r.PTSKnown=e.PTSKnown}}function re(e,t,r){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,n=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=i;s<=n;s++){var o=e.fragments[a+s],l=t.fragments[s];if(!o||!l)break;r(o,l,s)}}function ie(e,t,r){var i=1e3*(t.averagetargetduration||t.targetduration),n=i/2;return e&&t.endSN===e.endSN&&(i=n),r&&(i=Math.max(n,i-(window.performance.now()-r))),Math.round(i)}var ne={toString:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function ae(e,t){e=e.fragments,t=t.fragments;if(t.length&&e.length){t=function(e,t){for(var r=null,i=0;i<e.length;i+=1){var n=e[i];if(n&&n.cc===t){r=n;break}}return r}(e,t[0].cc);if(t&&(!t||t.startPTS))return t;_.logger.log("No frag in previous level to align on")}else _.logger.log("No fragments to align")}function se(r,e){e.fragments.forEach(function(e){var t;e&&(t=e.start+r,e.start=e.startPTS=t,e.endPTS=t+e.duration)}),e.PTSKnown=!0}function oe(e,t,r){var i;!function(e,t,r){var i=!1;return i=t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)?!0:i}(e,i=t,e=r)||(i=ae(i.details,e))&&(_.logger.log("Adjusting PTS using last level due to CC increase within current level"),se(i.start,e)),!r.PTSKnown&&t&&function(e,t){{var r;t&&t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime&&(r=t.fragments[0].programDateTime,t=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start,Object(D.isFiniteNumber)(t)&&(_.logger.log("adjusting PTS using programDateTime delta, sliding:"+t.toFixed(3)),se(t,e)))}}(r,t.details)}function le(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(D.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if((e[e.length-1].endProgramDateTime||0)<=t)return null;r=r||0;for(var i=0;i<e.length;++i){var n=e[i];if(function(e,t,r){t=1e3*Math.min(t,r.duration+(r.deltaPTS||0));return(r.endProgramDateTime||0)-t>e}(t,r,n))return n}return null}function ue(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=null;if(e?n=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(n=t[0]),n&&0===ce(r,i,n))return n;i=V.search(t,ce.bind(null,r,i));return i||n}function ce(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,r.duration+(r.deltaPTS||0));return r.start+r.duration-t<=e?1:r.start-t>e&&r.start?-1:0}var he=function(){function e(e,t,r,i){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,i=this.stalled,n=r.currentTime,a=r.seeking,s=this.seeking&&!a,o=!this.seeking&&a;if(this.seeking=a,n!==e)return this.moved=!0,void(null!==i&&(this.stallReported&&(l=self.performance.now()-i,_.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(l)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0));if((o||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var e=U.bufferInfo(r,n,0),l=0<e.len,o=e.nextStart||0;if(l||o){if(a){s=2<e.len,l=!o||2<o-n&&!this.fragmentTracker.getPartialFragment(n);if(s||l)return;this.moved=!1}if(!this.moved&&this.stalled){var u=Math.max(o,e.start||0)-n;if(0<u&&u<=2)return void this._trySkipBufferHole(null)}u=self.performance.now();null!==i?(i=u-i,!a&&250<=i&&this._reportStall(e.len),t=U.bufferInfo(r,n,t.maxBufferHole),this._tryFixBufferStall(t,i)):this.stalled=u}}},t._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,n=this.media.currentTime,n=i.getPartialFragment(n);if(n&&this._trySkipBufferHole(n))return;e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(_.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,_.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,i=this.media,n=i.currentTime,a=0,s=0;s<i.buffered.length;s++){var o=i.buffered.start(s);if(n+t.maxBufferHole>=a&&n<o){o=Math.max(o+.05,i.currentTime+.1);return _.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+o),this.moved=!0,this.stalled=null,i.currentTime=o,e&&r.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+o,frag:e}),o}a=i.buffered.end(s)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=r.currentTime,n=(this.nudgeRetry||0)+1;(this.nudgeRetry=n)<e.nudgeMaxRetry?(n=i+n*e.nudgeOffset,_.logger.warn("Nudging 'currentTime' from "+i+" to "+n),r.currentTime=n,t.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(_.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0}))},e}();var de=function(n){var e;function t(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return(e=n.call.apply(n,[this,e].concat(r))||this)._boundTick=void 0,e._tickTimer=null,e._tickInterval=null,e._tickCallCount=0,e._boundTick=e.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)),e}r=n,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},t}(o);var fe="STOPPED",pe="STARTING",me="IDLE",ge="PAUSED",ye="KEY_LOADING",ve="FRAG_LOADING",be="FRAG_LOADING_WAITING_RETRY",Se="WAITING_TRACK",Me="PARSING",Te="PARSED",Ae="BUFFER_FLUSHING",Ee="ENDED",De="ERROR",_e="WAITING_INIT_PTS",xe="WAITING_LEVEL",Ie=function(e){var t;function r(){return e.apply(this,arguments)||this}i=e,(t=r).prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i;var i=r.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=fe},i._streamEnded=function(e,t){var r=this.fragCurrent,i=this.fragmentTracker;if(t.live||!r||r.backtracked||r.sn!==t.endSN||e.nextStart)return!1;r=i.getState(r);return r===F||r===z},i.onMediaSeeking=function(){var e,t=this.config,r=this.media,i=this.mediaBuffer,n=this.state,a=r?r.currentTime:null,s=U.bufferInfo(i||r,a,this.config.maxBufferHole);Object(D.isFiniteNumber)(a)&&_.logger.log("media seeking to "+a.toFixed(3)),n===ve?(e=this.fragCurrent,0===s.len&&e&&(i=t.maxFragLookUpTolerance,t=e.start-i,i=e.start+e.duration+i,a<t||i<a?(e.loader&&(_.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=me):_.logger.log("seeking outside of buffer but within currently loaded fragment range"))):n===Ee&&(0===s.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=me),r&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=fe,this.fragmentTracker=null},i.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r}(de);function Ce(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ke,we=function(i){function e(e,t){var r=i.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.MANIFEST_LOADING,M.default.MANIFEST_PARSED,M.default.LEVEL_LOADED,M.default.LEVELS_UPDATED,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.FRAG_LOAD_EMERGENCY_ABORTED,M.default.FRAG_PARSING_INIT_SEGMENT,M.default.FRAG_PARSING_DATA,M.default.FRAG_PARSED,M.default.ERROR,M.default.AUDIO_TRACK_SWITCHING,M.default.AUDIO_TRACK_SWITCHED,M.default.BUFFER_CREATED,M.default.BUFFER_APPENDED,M.default.BUFFER_FLUSHED)||this;return r.fragmentTracker=t,r.config=e.config,r.audioCodecSwap=!1,r._state=fe,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r.audioOnly=!1,r.bitrateTest=!1,r}t=i,(n=e).prototype=Object.create(t.prototype),(n.prototype.constructor=n).__proto__=t;var t,r,n=e.prototype;return n.startLoad=function(e){var t,r,i;this.levels?(t=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(i=r.startLevel)&&(r.config.testBandwidth?this.bitrateTest=!(i=0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1),0<t&&-1===e&&(_.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=me,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=fe)},n.stopLoad=function(){this.forceStartLoad=!1,i.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case Ae:this.fragLoadError=0;break;case me:this._doTickIdle();break;case xe:var e=this.levels[this.level];e&&e.details&&(this.state=me);break;case be:var t=window.performance.now(),e=this.retryDate;(!e||e<=t||this.media&&this.media.seeking)&&(_.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=me)}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var i=this.loadedmetadata?r.currentTime:this.nextLoadPosition,n=e.nextLoadLevel,a=this.levels[n];if(a){var s=a.bitrate,s=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength;s=Math.min(s,t.maxMaxBufferLength);t=i<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,r=U.bufferInfo(this.mediaBuffer||r,i,t),t=r.len;if(!(s<=t)){_.logger.trace("buffer length of "+t.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=n;a=a.details;if(!a||a.live&&this.levelLastLoaded!==n)this.state=xe;else{if(this._streamEnded(r,a)){n={};return this.altAudio&&(n.type="video"),this.hls.trigger(M.default.BUFFER_EOS,n),void(this.state=Ee)}this._fetchPayloadOrEos(i,r,a)}}}}},n._fetchPayloadOrEos=function(e,t,r){var i=this.fragPrevious,n=(this.level,r.fragments),a=n.length;if(0!==a){var s,o=n[0].start,l=n[a-1].start+n[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){t=this.config.initialLiveManifestSize;if(a<t)return void _.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+t);if(null===(s=this._ensureFragmentAtLivePoint(r,u,o,l,i,n)))return}else u<o&&(s=n[0]);(s=s||this._findFragment(o,i,a,n,u,l,r))&&(s.encrypted?this._loadKey(s,r):this._loadFragment(s,r,e,u))}},n._ensureFragmentAtLivePoint=function(e,t,r,i,n,a){var s,o=this.hls.config,l=this.media,u=1/0;return void 0!==o.liveMaxLatencyDuration?u=o.liveMaxLatencyDuration:Object(D.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(u=o.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-o.maxFragLookUpTolerance,i-u)&&(t=r=this.liveSyncPosition=this.computeLivePosition(r,e),l&&!l.paused&&l.readyState&&l.duration>r&&r>l.currentTime&&(_.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+r.toFixed(3)),l.currentTime=r),this.nextLoadPosition=r),e.PTSKnown&&i<t&&l&&l.readyState?null:(this.startFragRequested&&!e.PTSKnown&&n&&(e.hasProgramDateTime?(_.logger.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),s=le(a,n.endProgramDateTime,o.maxFragLookUpTolerance)):((o=n.sn+1)>=e.startSN&&o<=e.endSN&&(e=a[o-e.startSN],n.cc===e.cc&&_.logger.log("live playlist, switching playlist, load frag with next SN: "+(s=e).sn)),s||(s=V.search(a,function(e){return n.cc-e.cc}))&&_.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn))),s)},n._findFragment=function(e,t,r,i,n,a,s){var o,l=this.hls.config;return(o=n<a?ue(t,i,n,n>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[r-1])&&(n=o.sn-s.startSN,a=t&&o.level===t.level,r=i[n-1],i=i[1+n],t&&o.sn===t.sn&&(a&&!o.backtracked?o.sn<s.endSN?(s=t.deltaPTS)&&s>l.maxBufferHole&&t.dropped&&n?(o=r,_.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):_.logger.log("Re-loading fragment with SN: "+(o=i).sn):o=null:o.backtracked&&(i&&i.backtracked?(_.logger.warn("Already backtracked from fragment "+i.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+i.sn),o=i):(_.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,r?(o=r).backtracked=!0:n&&(o=null))))),o},n._loadKey=function(e,t){_.logger.log("Loading key for "+e.sn+" of ["+t.startSN+" ,"+t.endSN+"],level "+this.level),this.state=ye,this.hls.trigger(M.default.KEY_LOADING,{frag:e})},n._loadFragment=function(e,t,r,i){var n=this.fragmentTracker.getState(e);"initSegment"!==(this.fragCurrent=e).sn&&(this.startFragRequested=!0),Object(D.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||n===R||n===F?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,_.logger.log("Loading "+e.sn+" of ["+t.startSN+" ,"+t.endSN+"],level "+this.level+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),this.hls.trigger(M.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new X(this.hls,"main")),this.state=ve):n===j&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},n._checkFragmentChanged=function(){var e,t,r=this.media;r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),U.isBuffered(r,t)?e=this.getBufferedFrag(t):U.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),!e||(t=e)!==this.fragPlaying&&(this.hls.trigger(M.default.FRAG_CHANGED,{frag:t}),e=t.level,this.fragPlaying&&this.fragPlaying.level===e||this.hls.trigger(M.default.LEVEL_SWITCHED,{level:e}),this.fragPlaying=t))},n.immediateLevelSwitch=function(){var e;_.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,U.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.nextLevelSwitch=function(){var e,t,r=this.media;r&&r.readyState&&((t=this.getBufferedFrag(r.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),e=r.paused?0:(e=this.hls.nextLoadLevel,t=this.levels[e],(e=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*t.bitrate/(1e3*e)+1:0),(r=(r=this.getBufferedFrag(r.currentTime+e))&&this.followingBufferedFrag(r))&&((e=this.fragCurrent)&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)))},n.flushMainBuffer=function(e,t){this.state=Ae;t={startOffset:e,endOffset:t};this.altAudio&&(t.type="video"),this.hls.trigger(M.default.BUFFER_FLUSHING,t)},n.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new he(e,t,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(_.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:void 0;Object(D.isFiniteNumber)(e)&&_.logger.log("media seeked to "+e.toFixed(3)),this.tick()},n.onManifestLoading=function(){_.logger.log("trigger BUFFER_RESET"),this.hls.trigger(M.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(e){var t,r=!1,i=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&_.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;e=this.config;(e.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(e.startPosition)},n.onLevelLoaded=function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],n=this.levels[r],a=t.totalduration,s=0;_.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live?(e=n.details)&&0<t.fragments.length?(te(e,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,e),t.PTSKnown&&Object(D.isFiniteNumber)(s)?_.logger.log("live playlist sliding:"+s.toFixed(3)):(_.logger.log("live playlist - outdated PTS, unknown sliding"),oe(this.fragPrevious,i,t))):(_.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,oe(this.fragPrevious,i,t)):t.PTSKnown=!1,n.details=t,this.levelLastLoaded=r,this.hls.trigger(M.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(r=t.startTimeOffset,Object(D.isFiniteNumber)(r)?(r<0&&(_.logger.log("negative start time offset "+r+", count from end of last fragment"),r=s+a+r),_.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?(this.startPosition=this.computeLivePosition(s,t),_.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===xe&&(this.state=me),this.tick()},n.onKeyLoaded=function(){this.state===ye&&(this.state=me,this.tick())},n.onFragLoaded=function(e){var t,r,i=this.fragCurrent,n=this.hls,a=this.levels,s=this.media,o=e.frag;this.state===ve&&i&&"main"===o.type&&o.level===i.level&&o.sn===i.sn&&(r=e.stats,a=(t=a[i.level]).details,this.bitrateTest=!1,this.stats=r,_.logger.log("Loaded "+i.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+i.level),o.bitrateTest&&n.nextLoadLevel?(this.state=me,this.startFragRequested=!1,r.tparsed=r.tbuffered=window.performance.now(),n.trigger(M.default.FRAG_BUFFERED,{stats:r,frag:i,id:"main"}),this.tick()):"initSegment"===o.sn?(this.state=me,r.tparsed=r.tbuffered=window.performance.now(),a.initSegment.data=e.payload,n.trigger(M.default.FRAG_BUFFERED,{stats:r,frag:i,id:"main"}),this.tick()):(_.logger.log("Parsing "+i.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+i.level+", cc "+i.cc),this.state=Me,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o})),r=!(s&&s.seeking)&&(a.PTSKnown||!a.live),o=a.initSegment?a.initSegment.data:[],s=this._getAudioCodec(t),(this.demuxer=this.demuxer||new X(this.hls,"main")).push(e.payload,o,s,t.videoCodec,i,a.totalduration,r))),this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Me){var i,n,a=e.tracks;for(i in this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,(n=a.audio)&&(r=this.levels[this.level].audioCodec,t=navigator.userAgent.toLowerCase(),r&&this.audioCodecSwap&&(_.logger.log("swapping playlist audio codec"),r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===t.indexOf("firefox")&&(r="mp4a.40.5"),-1!==t.indexOf("android")&&"audio/mpeg"!==n.container&&_.logger.log("Android: force audio codec to "+(r="mp4a.40.2")),n.levelCodec=r,n.id=e.id),(n=a.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=e.id),this.hls.trigger(M.default.BUFFER_CODECS,a),a){n=a[i],_.logger.log("main track:"+i+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var s=n.initSegment;s&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(M.default.BUFFER_APPENDING,{type:i,data:s,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(t){var r=this,e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===Me){var n=this.levels[this.level],i=e;if(Object(D.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&i.addElementaryStream(c.AUDIO),!0===t.hasVideo&&i.addElementaryStream(c.VIDEO),_.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(i.dropped=t.dropped,i.dropped)if(i.backtracked)_.logger.warn("Already backtracked on this fragment, appending with the gap",i.sn);else{e=n.details;if(!e||i.sn!==e.startSN)return _.logger.warn("missing video frame(s), backtracking fragment",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=me,this.fragPrevious=i,void this.tick();_.logger.warn("missing video frame(s) on first frag, appending with gap",i.sn)}else i.backtracked=!1;var i=ee(n.details,i,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(M.default.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:i,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===Me&&(r.appended=!0,r.pendingBuffering=!0,a.trigger(M.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Me&&(this.stats.tparsed=window.performance.now(),this.state=Te,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(e){var t,r=!!e.url,e=e.id;r||(this.mediaBuffer!==this.media&&(_.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(_.logger.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=me),(t=this.hls).trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),t.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1)},n.onAudioTrackSwitched=function(e){var t=e.id,e=!!this.hls.audioTracks[t].url;!e||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(_.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=e,this.tick()},n.onBufferCreated=function(e){var t,r,i,n=e.tracks,a=!1;for(i in n){var s=n[i];"main"===s.id?(t=s,"video"===(r=i)&&(this.videoBuffer=n[i].buffer)):a=!0}a&&t?(_.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(e){var t;"main"===e.parent&&((t=this.state)!==Me&&t!==Te||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},n._checkAppendedParsed=function(){var e,t;this.state!==Te||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer||this.media,_.logger.log("main buffered : "+ne.toString(t.buffered)),this.fragPrevious=e,(t=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(M.default.FRAG_BUFFERED,{stats:t,frag:e,id:"main"}),this.state=me),(this.loadedmetadata||this.startPosition<=0)&&this.tick())},n.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r,i=!!this.media&&U.isBuffered(this.media,this.media.currentTime)&&U.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),_.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=be):(_.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=De));break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==De&&(e.fatal?(this.state=De,_.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==xe||(this.state=me));break;case g.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Me&&this.state!==Te||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=me):(_.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,_.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var e=this.media;e&&0!==e.readyState&&(e=(this.mediaBuffer||e).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e))},n.onFragLoadEmergencyAborted=function(){this.state=me,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var e,t=this.mediaBuffer||this.media;t&&(e=this.audioOnly?c.AUDIO:c.VIDEO,this.fragmentTracker.detectEvictedFragments(e,t.buffered)),this.state=me,this.fragPrevious=null},n.onLevelsUpdated=function(e){this.levels=e.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var e=this.media,t=this.startPosition,r=e.currentTime;r!==t&&0<=t&&(e.seeking?_.logger.log("could not seek to "+t+", already seeking at "+r):(_.logger.log("seek to target start position "+t+" from current time "+r+". ready state "+e.readyState),e.currentTime=t))},n._getAudioCodec=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(_.logger.log("swapping playlist audio codec"),e=e&&(-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},t=e,(n=[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,_.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(M.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getBufferedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&Ce(t.prototype,n),r&&Ce(t,r),e}(Ie);function Le(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oe=function(t){function e(e){e=t.call(this,e,M.default.MANIFEST_LOADED,M.default.LEVEL_LOADED,M.default.AUDIO_TRACK_SWITCHED,M.default.FRAG_LOADED,M.default.ERROR)||this;return e.canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,ke=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}r=t,(n=e).prototype=Object.create(r.prototype),(n.prototype.constructor=n).__proto__=r;var r,i,n=e.prototype;return n.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},n.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},n.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},n.stopLoad=function(){this.canload=!1},n.onManifestLoaded=function(e){var t,r=[],i=[],n={},a=null,s=!1,o=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,s=s||!!e.videoCodec,o=o||!!e.audioCodec,ke&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=n[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,n[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&q(a||e,"audio",t.AUDIO),t.SUBTITLES&&q(a||e,"text",t.SUBTITLES))}),r=(r=s&&o?r.filter(function(e){return!!e.videoCodec}):r).filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||v(t,"audio"))&&(!e||v(e,"video"))}),e.audioTracks&&(i=e.audioTracks.filter(function(e){return!e.audioCodec||v(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),0<r.length){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var l=0;l<r.length;l++)if(r[l].bitrate===t){this._firstLevel=l,_.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var u=o&&!s;this.hls.trigger(M.default.MANIFEST_PARSED,{levels:r,audioTracks:i,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:!u&&i.some(function(e){return!!e.url})})}else this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},n.setLevelInternal=function(e){var t,r=this._levels,i=this.hls;0<=e&&e<r.length?(this.clearTimer(),this.currentLevelIndex!==e&&(_.logger.log("switching to level "+e),(t=r[this.currentLevelIndex=e]).level=e,i.trigger(M.default.LEVEL_SWITCHING,t)),(r=(t=r[e]).details)&&!r.live||(r=t.urlId,i.trigger(M.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r}))):i.trigger(M.default.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},n.onError=function(e){if(e.fatal)e.type===g.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,i=!1;switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case g.ErrorDetails.LEVEL_LOAD_ERROR:case g.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case g.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,i)}},n.recoverLevel=function(e,t,r,i){var n=this,a=this.hls.config,s=e.details,o=this._levels[t];if(o.loadError++,o.fragmentError=i,r){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return _.logger.error("level controller, cannot recover from "+s+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return n.loadLevel()},a),e.levelRetry=!0,this.levelRetryCount++,_.logger.warn("level controller, "+s+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&(1<(r=o.url.length)&&o.loadError<r?(o.urlId=(o.urlId+1)%r,o.details=void 0,_.logger.warn("level controller, "+s+" for level "+t+": switching to redundant URL-id "+o.urlId)):-1===this.manualLevelIndex?(t=0===t?this._levels.length-1:t-1,_.logger.warn("level controller, "+s+": switch to "+t),this.hls.nextAutoLevel=this.currentLevelIndex=t):i&&(_.logger.warn("level controller, "+s+": reload a fragment"),this.currentLevelIndex=null))},n.onFragLoaded=function(e){e=e.frag;void 0===e||"main"!==e.type||void 0!==(e=this._levels[e.level])&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)},n.onLevelLoaded=function(e){var t=this,r=e.level,i=e.details;r===this.currentLevelIndex&&((r=this._levels[r]).fragmentError||(r.loadError=0,this.levelRetryCount=0),i.live?(e=ie(r.details,i,e.stats.trequest),_.logger.log("live playlist, reload in "+Math.round(e)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},e)):this.clearTimer())},n.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,n=0;n<r.audioGroupIds.length;n++)if(r.audioGroupIds[n]===t){i=n;break}i!==r.urlId&&(r.urlId=i,this.startLoad())}},n.loadLevel=function(){var e,t,r;_.logger.debug("call to loadLevel"),null===this.currentLevelIndex||!this.canload||"object"==typeof(r=this._levels[this.currentLevelIndex])&&0<r.url.length&&(e=this.currentLevelIndex,t=r.urlId,r=r.url[t],_.logger.log("Attempt loading level index "+e+" with URL-id "+t),this.hls.trigger(M.default.LEVEL_LOADING,{url:r,level:e,id:t}))},n.removeLevel=function(r,i){var e=this.levels.filter(function(e,t){return t!==r||1<e.url.length&&void 0!==i&&(e.url=e.url.filter(function(e,t){return t!==i}),!(e.urlId=0))}).map(function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(M.default.LEVELS_UPDATED,{levels:e})},r=e,(n=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Le(r.prototype,n),i&&Le(r,i),e}(o),Pe=r("./src/demux/id3.js");function Ne(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Re(e){if(null!=e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}var je=function(t){var e;function r(e){e=t.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.FRAG_PARSING_METADATA,M.default.LIVE_BACK_BUFFER_REACHED)||this;return e.id3Track=void 0,e.media=void 0,e}i=t,(e=r).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=r.prototype;return i.destroy=function(){o.prototype.destroy.call(this)},i.onMediaAttached=function(e){this.media=e.media,this.media},i.onMediaDetaching=function(){Re(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Ne(r,this.media),r}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,n=0;n<r.length;n++){var a=Pe.default.getID3Frames(r[n].data);if(a){var s=Math.max(r[n].pts,0),o=n<r.length-1?r[n+1].pts:t.endPTS;s===(o=o||t.start+t.duration)?o+=1e-4:o<s&&(_.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),o=s+.25);for(var l=0;l<a.length;l++){var u,c=a[l];Pe.default.isTimeStampFrame(c)||((u=new i(s,o,"")).value=c,this.id3Track.addCue(u))}}}},i.onLiveBackBufferReached=function(e){var e=e.bufferEnd,t=this.id3Track;if(t&&t.cues&&t.cues.length){var r=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,i=e.length-1;r<=i;){var n=Math.floor((i+r)/2);if(t<e[n].endTime)i=n-1;else{if(!(t>e[n].endTime))return e[n];r=n+1}}return e[r].endTime-t<t-e[i].endTime?e[r]:e[i]}(t.cues,e);if(r)for(;t.cues[0]!==r;)t.removeCue(t.cues[0])}},r}(o);var Fe=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),ze=function(){function e(e,t,r,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Fe(t),this.fast_=new Fe(r)}var t=e.prototype;return t.sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function Be(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ve=window.performance,Ue=function(r){function e(e){var t=r.call(this,e,M.default.FRAG_LOADING,M.default.FRAG_LOADED,M.default.FRAG_BUFFERED,M.default.ERROR)||this;return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}t=r,(n=e).prototype=Object.create(t.prototype),(n.prototype.constructor=n).__proto__=t;var t,i,n=e.prototype;return n.destroy=function(){this.clearTimer(),o.prototype.destroy.call(this)},n.onFragLoading=function(e){var t,r,i=e.frag;"main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(e=(t=this.hls).config,i=i.level,i=t.levels[i].details.live?(r=e.abrEwmaFastLive,e.abrEwmaSlowLive):(r=e.abrEwmaFastVoD,e.abrEwmaSlowVoD),this._bwEstimator=new ze(t,i,r,e.abrEwmaDefaultEstimate)))},n._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var i=r.loader;if(!i||i.stats&&i.stats.aborted)return _.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=Ve.now()-n.trequest,s=Math.abs(t.playbackRate);if(a>500*r.duration/s){var o=e.levels,l=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/a),u=o[r.level];if(u){var c=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,u=n.total||Math.max(n.loaded,Math.round(r.duration*c/8)),c=t.currentTime,u=(u-n.loaded)/l,h=(U.bufferInfo(t,c,e.config.maxBufferHole).end-c)/s;if(h<2*r.duration/s&&h<u){for(var d=e.minAutoLevel,f=r.level-1;d<f;f--){var p=o[f].realBitrate?Math.max(o[f].realBitrate,o[f].bitrate):o[f].bitrate;if(r.duration*p/(6.4*l)<h)break}void 0<u&&(_.logger.warn("loading too slow, abort fragment loading and switch to level "+f+":fragLoadedDelay["+f+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+u.toFixed(1)+":"+h.toFixed(1)),e.nextLoadLevel=f,this._bwEstimator.sample(a,n.loaded),i.abort(),this.clearTimer(),e.trigger(M.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}}},n.onFragLoaded=function(e){var t,r,i=e.frag;"main"===i.type&&Object(D.isFiniteNumber)(i.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(i=((t=this.hls.levels[i.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,r=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:i,duration:r},t.realBitrate=Math.round(8*i/r)),e.frag.bitrateTest&&((r=e.stats).tparsed=r.tbuffered=r.tload,this.onFragBuffered(e)))},n.onFragBuffered=function(e){var t=e.stats,r=e.frag;!0===t.aborted||"main"!==r.type||!Object(D.isFiniteNumber)(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered||(e=t.tparsed-t.trequest,_.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(e,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=e/1e3:this.bitrateTestDelay=0)},n.onError=function(e){switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){clearInterval(this.timer),this.timer=null},n._findBestLevel=function(e,t,r,i,n,a,s,o,l){for(var u=n;i<=u;u--){var c=l[u];if(c){var h=c.details,d=h?h.totalduration/h.fragments.length:t,f=!!h&&h.live,p=void 0,p=u<=e?s*r:o*r,c=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,h=c*d/p;if(_.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+c+"/"+d+"/"+a+"/"+h),c<p&&(!h||f&&!this.bitrateTestDelay||h<a))return u}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this._nextABRAutoLevel;return t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,n=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(U.bufferInfo(a,l,i.maxBufferHole).end-l)/u,d=this._findBestLevel(s,o,c,n,t,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(0<=d)return d;_.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");e=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,a=i.abrBandWidthFactor,l=i.abrBandWidthUpFactor;return 0!=h||(u=this.bitrateTestDelay)&&(e=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-u,_.logger.trace("bitrate test took "+Math.round(1e3*u)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),a=l=1),d=this._findBestLevel(s,o,c,n,t,h+e,a,l,r),Math.max(d,0)}}])&&Be(t.prototype,n),i&&Be(t,i),e}(o);var Ge=W(),Ye=function(t){var e;function r(e){var s=t.call(this,e,M.default.MEDIA_ATTACHING,M.default.MEDIA_DETACHING,M.default.MANIFEST_PARSED,M.default.BUFFER_RESET,M.default.BUFFER_APPENDING,M.default.BUFFER_CODECS,M.default.BUFFER_EOS,M.default.BUFFER_FLUSHING,M.default.LEVEL_PTS_UPDATED,M.default.LEVEL_UPDATED)||this;return s._msDuration=null,s._levelDuration=null,s._levelTargetDuration=10,s._live=null,s._objectUrl=null,s._needsFlush=!1,s._needsEos=!1,s.config=void 0,s.audioTimestampOffset=void 0,s.bufferCodecEventsExpected=0,s._bufferCodecEventsTotal=0,s.media=null,s.mediaSource=null,s.segments=[],s.parent=void 0,s.appending=!1,s.appended=0,s.appendError=0,s.flushBufferCounter=0,s.tracks={},s.pendingTracks={},s.sourceBuffer={},s.flushRange=[],s._onMediaSourceOpen=function(){_.logger.log("media source opened"),s.hls.trigger(M.default.MEDIA_ATTACHED,{media:s.media});var e=s.mediaSource;e&&e.removeEventListener("sourceopen",s._onMediaSourceOpen),s.checkPendingTracks()},s._onMediaSourceClose=function(){_.logger.log("media source closed")},s._onMediaSourceEnded=function(){_.logger.log("media source ended")},s._onSBUpdateEnd=function(){s.audioTimestampOffset&&s.sourceBuffer.audio&&(t=s.sourceBuffer.audio,_.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+s.audioTimestampOffset),t.timestampOffset=s.audioTimestampOffset,delete s.audioTimestampOffset),s._needsFlush&&s.doFlush(),s._needsEos&&s.checkEos(),s.appending=!1;var e,r=s.parent,t=s.segments.reduce(function(e,t){return t.parent===r?e+1:e},0),i={},n=s.sourceBuffer;for(e in n){var a=n[e];if(!a)throw Error("handling source buffer update end error: source buffer for "+e+" uninitilized and unable to update buffered TimeRanges.");i[e]=a.buffered}s.hls.trigger(M.default.BUFFER_APPENDED,{parent:r,pending:t,timeRanges:i}),s._needsFlush||s.doAppending(),s.updateMediaElementDuration(),0===t&&s.flushLiveBackBuffer()},s._onSBUpdateError=function(e){_.logger.error("sourceBuffer error:",e),s.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},s.config=e.config,s}i=t,(e=r).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=r.prototype;return i.destroy=function(){o.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){t=this.sourceBuffer.audio;if(!t)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(.1<Math.abs(t.timestampOffset-e.start)){r=t.updating;try{t.abort()}catch(e){_.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(_.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.start),t.timestampOffset=e.start)}}},i.onManifestParsed=function(e){var t=2;(!e.audio||e.video)&&e.altAudio||(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,_.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(e){var t=this.media=e.media;t&&Ge&&((e=this.mediaSource=new Ge).addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(e),this._objectUrl=t.src)},i.onMediaDetaching=function(){_.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){_.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):_.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(M.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var e,t=this.sourceBuffer;for(e in t){var r=t[e];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(t){var r=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){r.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(e){var t,r=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!r[t]){var n=e[t];if(!n)throw Error("source buffer exists for track "+t+", however track does not");var a=n.levelCodec||n.codec,s=n.container+";codecs="+a;_.logger.log("creating sourceBuffer("+s+")");try{var o=r[t]=i.addSourceBuffer(s);o.addEventListener("updateend",this._onSBUpdateEnd),o.addEventListener("error",this._onSBUpdateError),this.tracks[t]={buffer:o,codec:a,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(e){_.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(M.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},i.onBufferEos=function(e){for(var t in this.sourceBuffer){var r;e.type&&e.type!==t||(r=this.sourceBuffer[t])&&!r.ended&&(r.ended=!0,_.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){r=e[r];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}_.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){_.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),n=t-Math.max(e,this._levelTargetDuration),a=i.length-1;0<=a;a--){var s,o=i[a],l=r[o];!l||0<(s=l.buffered).length&&n>s.start(0)&&this.removeBufferRange(o,l,0,n)&&this.hls.trigger(M.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}else _.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(e){e=e.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){r=this.sourceBuffer[r];if(r&&!0===r.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(_.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(D.isFiniteNumber)(e))&&(_.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r){var n=r[i];n&&(t+=n.buffered.length)}}catch(e){_.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(M.default.BUFFER_FLUSHED)}},i.doAppending=function(){var t=this.config,r=this.hls,i=this.segments,e=this.sourceBuffer;if(Object.keys(e).length){if(!this.media||this.media.error)return this.segments=[],void _.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=i.shift();if(n)try{var a=e[n.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void i.unshift(n);a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(e){_.logger.error("error while trying to append buffer:"+e.message),i.unshift(n);n={type:g.ErrorTypes.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===e.code?(this.segments=[],n.details=g.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,n.details=g.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(_.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],n.fatal=!0)),r.trigger(M.default.ERROR,n)}}}},i.flushBuffer=function(e,t,r){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),_.logger.log("flushBuffer,pos/start/end: "+n+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return _.logger.warn("abort flushing too many retries"),!0;i=i[r];if(i){if(i.ended=!1,i.updating)return _.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,i,e,t))return this.flushBufferCounter++,!1}return _.logger.log("buffer flushed"),!0},i.removeBufferRange=function(e,t,r,i){try{for(var n=0;n<t.buffered.length;n++){var a=t.buffered.start(n),s=t.buffered.end(n),o=Math.max(a,r),l=Math.min(s,i);if(.5<Math.min(l,s)-o){var u="null";return this.media&&(u=this.media.currentTime.toString()),_.logger.log("sb remove "+e+" ["+o+","+l+"], of ["+a+","+s+"], pos:"+u),t.remove(o,l),!0}}}catch(e){_.logger.warn("removeBufferRange failed",e)}return!1},r}(o);function He(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var We=function(t){function n(e){e=t.call(this,e,M.default.FPS_DROP_LEVEL_CAPPING,M.default.MEDIA_ATTACHING,M.default.MANIFEST_PARSED,M.default.LEVELS_UPDATED,M.default.BUFFER_CODECS,M.default.MEDIA_DETACHING)||this;return e.autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e.clientRect=null,e}r=t,(e=n).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var e,r,i=n.prototype;return i.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},i.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},i.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},i.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},i.onLevelsUpdated=function(e){this.levels=e.levels},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},i.getMaxLevel=function(r){var i=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return n.isLevelAllowed(t,i.restrictedLevels)&&t<=r});return this.clientRect=null,n.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},i.getDimensions=function(){if(this.clientRect)return this.clientRect;var e,t=this.media,r={width:0,height:0};return t&&(e=t.getBoundingClientRect(),r.width=e.width,r.height=e.height,r.width||r.height||(r.width=e.right-e.left||t.width||0,r.height=e.bottom-e.top||t.height||0)),this.clientRect=r},n.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var i,n,a=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=r)&&(i=o,!(n=e[s+1])||(i.width!==n.width||i.height!==n.height))){a=s;break}}return a},e=n,r=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(i=[{key:"mediaWidth",get:function(){return this.getDimensions().width*n.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*n.contentScaleFactor}}])&&He(e.prototype,i),r&&He(e,r),n}(o);var $e=window.performance,t=function(t){var e;function r(e){return t.call(this,e,M.default.MEDIA_ATTACHING)||this}i=t,(e=r).prototype=Object.create(i.prototype),(e.prototype.constructor=e).__proto__=i;var i=r.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},i.checkFPS=function(e,t,r){var i,n,a,s,o=$e.now();t&&(this.lastTime&&(a=o-this.lastTime,i=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,n=1e3*i/a,(a=this.hls).trigger(M.default.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:r}),0<n&&i>a.config.fpsDroppedMonitoringThreshold*s&&(s=a.currentLevel,_.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+s),0<s&&(-1===a.autoLevelCapping||a.autoLevelCapping>=s)&&(a.trigger(M.default.FPS_DROP_LEVEL_CAPPING,{level:s-=1,droppedLevel:a.currentLevel}),a.autoLevelCapping=s,a.streamController.nextLevelSwitch()))),this.lastTime=o,this.lastDroppedFrames=r,this.lastDecodedFrames=t)},i.checkFPSInterval=function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},r}(o),Qe=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var t=this.context,r=this.loader=new window.XMLHttpRequest,i=this.stats;i.tfirst=0,i.loaded=0;i=this.xhrSetup;try{if(i)try{i(r,t.url)}catch(e){r.open("GET",t.url,!0),i(r,t.url)}r.readyState||r.open("GET",t.url,!0)}catch(e){return void this.callbacks.onError({code:r.status,text:e.message},t,r)}t.rangeEnd&&r.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),r.send()},t.readystatechange=function(e){var t,r=e.currentTarget,i=r.readyState,n=this.stats,a=this.context,s=this.config;n.aborted||2<=i&&(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===i?200<=(e=r.status)&&e<300?(n.tload=Math.max(n.tfirst,window.performance.now()),i="arraybuffer"===a.responseType?(t=r.response).byteLength:(t=r.responseText).length,n.loaded=n.total=i,t={url:r.responseURL,data:t},this.callbacks.onSuccess(t,n,a,r)):n.retry>=s.maxRetry||400<=e&&e<499?(_.logger.error(e+" while loading "+a.url),this.callbacks.onError({code:e,text:r.statusText},a,r)):(_.logger.warn(e+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),n.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout))},t.loadtimeout=function(){_.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);e=this.callbacks.onProgress;e&&e(r,this.context,null,t)},e}();function Ke(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ze=function(t){function e(e){e=t.call(this,e,M.default.MANIFEST_LOADING,M.default.MANIFEST_PARSED,M.default.AUDIO_TRACK_LOADED,M.default.AUDIO_TRACK_SWITCHED,M.default.LEVEL_LOADED,M.default.ERROR)||this;return e._trackId=-1,e._selectDefaultTrack=!0,e.tracks=[],e.trackIdBlacklist=Object.create(null),e.audioGroupId=null,e}r=t,(n=e).prototype=Object.create(r.prototype),(n.prototype.constructor=n).__proto__=r;var r,i,n=e.prototype;return n.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},n.onManifestParsed=function(e){e=this.tracks=e.audioTracks||[];this.hls.trigger(M.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},n.onAudioTrackLoaded=function(e){var t;e.id>=this.tracks.length?_.logger.warn("Invalid audio track id:",e.id):(_.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()&&(t=1e3*e.details.targetduration,this.setInterval(t)),!e.details.live&&this.hasInterval()&&this.clearInterval())},n.onAudioTrackSwitched=function(e){e=this.tracks[e.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},n.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},n.onError=function(e){e.type===g.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(_.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},n._setAudioTrack=function(e){var t,r,i;this._trackId===e&&this.tracks[this._trackId].details?_.logger.debug("Same id as current audio-track passed, and track details available -> no-op"):e<0||e>=this.tracks.length?_.logger.warn("Invalid id passed to audio-track controller"):(t=this.tracks[e],_.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e,r=t.url,i=t.type,e=t.id,this.hls.trigger(M.default.AUDIO_TRACK_SWITCHING,{id:e,type:i,url:r}),this._loadTrackDetailsIfNeeded(t))},n.doTick=function(){this._updateTrack(this._trackId)},n._selectAudioGroup=function(e){e=this.hls.levels[e];e&&e.audioGroupIds&&(e=e.audioGroupIds[e.urlId],this.audioGroupId!==e&&(this.audioGroupId=e,this._selectInitialAudioTrack()))},n._selectInitialAudioTrack=function(){var e,t,r,i,n=this,a=this.tracks;a.length&&(e=this.tracks[this._trackId],t=null,e&&(t=e.name),this._selectDefaultTrack&&((i=a.filter(function(e){return e.default})).length?a=i:_.logger.warn("No default audio tracks defined")),r=!1,(i=function(){a.forEach(function(e){r||n.audioGroupId&&e.groupId!==n.audioGroupId||t&&t!==e.name||(n._setAudioTrack(e.id),r=!0)})})(),r||(t=null,i()),r||(_.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0})))},n._needsTrackLoading=function(e){var t=e.details,e=e.url;return!(t&&!t.live)&&!!e},n._loadTrackDetailsIfNeeded=function(e){var t;this._needsTrackLoading(e)&&(t=e.url,e=e.id,_.logger.log("loading audio-track playlist for id: "+e),this.hls.trigger(M.default.AUDIO_TRACK_LOADING,{url:t,id:e}))},n._updateTrack=function(e){e<0||e>=this.tracks.length||(this.clearInterval(),this._trackId=e,_.logger.log("trying to update audio-track "+e),e=this.tracks[e],this._loadTrackDetailsIfNeeded(e))},n._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,i=t.language,t=t.groupId;_.logger.warn("Loading failed on audio track id: "+e+", group-id: "+t+', name/language: "'+r+'" / "'+i+'"');for(var n=e,a=0;a<this.tracks.length;a++)if(!this.trackIdBlacklist[a])if(this.tracks[a].name===r){n=a;break}n!==e?(_.logger.log("Attempting audio-track fallback id:",n,"group-id:",this.tracks[n].groupId),this._setAudioTrack(n)):_.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"')},r=e,(n=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&Ke(r.prototype,n),i&&Ke(r,i),e}(de);function Xe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qe(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var Je=window.performance,et=function(i){function e(e,t){var r=i.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.AUDIO_TRACKS_UPDATED,M.default.AUDIO_TRACK_SWITCHING,M.default.AUDIO_TRACK_LOADED,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.FRAG_PARSING_INIT_SEGMENT,M.default.FRAG_PARSING_DATA,M.default.FRAG_PARSED,M.default.ERROR,M.default.BUFFER_RESET,M.default.BUFFER_CREATED,M.default.BUFFER_APPENDED,M.default.BUFFER_FLUSHED,M.default.INIT_PTS_FOUND)||this;return r.fragmentTracker=t,r.config=e.config,r.audioCodecSwap=!1,r._state=fe,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}t=i,(n=e).prototype=Object.create(t.prototype),(n.prototype.constructor=n).__proto__=t;var t,r,n=e.prototype;return n.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,e=e.initPTS;"main"===t&&(this.initPTS[r]=e,this.videoTrackCC=r,_.logger.log("InitPTS for cc: "+r+" found from video track: "+e),this.state===_e&&this.tick())},n.startLoad=function(e){var t;this.tracks?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(_.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=me):(this.lastCurrentTime=this.startPosition||e,this.state=pe),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=e,this.state=fe)},n.doTick=function(){var e,t,r,i,n=this.hls,a=n.config;switch(this.state){case De:case ge:case Ae:break;case pe:this.state=Se,this.loadedmetadata=!1;break;case me:var s=this.tracks;if(!s)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer||this.media,l=this.videoBuffer||this.media,u=e<a.maxBufferHole?Math.max(2,a.maxBufferHole):a.maxBufferHole,c=U.bufferInfo(o,e,u),h=U.bufferInfo(l,e,u),d=c.len,f=c.end,p=this.fragPrevious,m=Math.min(a.maxBufferLength,a.maxMaxBufferLength),l=Math.max(m,h.len),u=this.audioSwitch,m=this.trackId;if((d<l||u)&&m<s.length){if(void 0===(r=s[m].details)){this.state=Se;break}if(!u&&this._streamEnded(c,r))return this.hls.trigger(M.default.BUFFER_EOS,{type:"audio"}),void(this.state=Ee);h=r.fragments,d=h.length,l=h[0].start,s=h[d-1].start+h[d-1].duration;if(u)if(r.live&&!r.PTSKnown)_.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),f=0;else if(f=e,r.PTSKnown&&e<l){if(!(c.end>l||c.nextStart))return;_.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=l+.05}if(r.initSegment&&!r.initSegment.data)b=r.initSegment;else if(f<=l){if(b=h[0],null!==this.videoTrackCC&&b.cc!==this.videoTrackCC&&(i=this.videoTrackCC,b=V.search(h,function(e){return e.cc<i?1:e.cc>i?-1:0})),r.live&&b.loadIdx&&b.loadIdx===this.fragLoadIdx){var g=c.nextStart||l;return _.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(g+.05)),void(this.media.currentTime=g+.05)}}else{var y=a.maxFragLookUpTolerance,c=p?h[p.sn-h[0].sn+1]:void 0,g=function(e){var t=Math.min(y,e.duration);return e.start+e.duration-t<=f?1:e.start-t>f&&e.start?-1:0},d=f<s?(s-y<f&&(y=0),c&&!g(c)?c:V.search(h,g)):h[d-1];d&&(l=(b=d).start,p&&b.level===p.level&&b.sn===p.sn&&(b.sn<r.endSN?(b=h[b.sn+1-r.startSN],_.logger.log("SN just loaded, load next one: "+b.sn)):b=null))}b&&(b.encrypted?(_.logger.log("Loading key for "+b.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+m),this.state=ye,n.trigger(M.default.KEY_LOADING,{frag:b})):(this.fragCurrent=b,!u&&this.fragmentTracker.getState(b)!==R||(_.logger.log("Loading "+b.sn+", cc: "+b.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+m+", currentTime:"+e+",bufferEnd:"+f.toFixed(3)),"initSegment"!==b.sn&&(this.startFragRequested=!0),Object(D.isFiniteNumber)(b.sn)&&(this.nextLoadPosition=b.start+b.duration),n.trigger(M.default.FRAG_LOADING,{frag:b}),this.state=ve)))}break;case Se:(t=this.tracks[this.trackId])&&t.details&&(this.state=me);break;case be:var v=Je.now(),b=this.retryDate,S=(o=this.media)&&o.seeking;(!b||b<=v||S)&&(_.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=me);break;case _e:v=this.videoTrackCC;if(void 0===this.initPTS[v])break;S=this.waitingFragment;S?v!==(S=S.frag.cc)?(t=this.tracks[this.trackId]).details&&t.details.live&&(_.logger.warn("Waiting fragment CC ("+S+") does not match video track CC ("+v+")"),this.waitingFragment=null,this.state=me):(this.state=ve,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null):this.state=me}},n.onMediaAttached=function(e){e=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);e=this.config;this.tracks&&e.autoStartLoad&&this.startLoad(e.startPosition)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(_.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(e){_.logger.log("audio tracks updated"),this.tracks=e.audioTracks},n.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=ge,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=me),this.tick()},n.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,i=this.tracks[r],n=t.totalduration,e=0;_.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live?(n=i.details)&&0<t.fragments.length?(te(n,t),e=t.fragments[0].start,t.PTSKnown?_.logger.log("live audio playlist sliding:"+e.toFixed(3)):_.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,_.logger.log("live audio playlist - first load, unknown sliding")):t.PTSKnown=!1,i.details=t,this.startFragRequested||(-1===this.startPosition&&(i=t.startTimeOffset,Object(D.isFiniteNumber)(i)?(_.logger.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i):t.live?(this.startPosition=this.computeLivePosition(e,t),_.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0),this.nextLoadPosition=this.startPosition),this.state===Se&&(this.state=me),this.tick()},n.onKeyLoaded=function(){this.state===ye&&(this.state=me,this.tick())},n.onFragLoaded=function(e){var t,r,i,n,a,s,o,l=this.fragCurrent,u=e.frag;this.state===ve&&l&&"audio"===u.type&&u.level===l.level&&u.sn===l.sn&&(r=(t=(o=this.tracks[this.trackId]).details).totalduration,i=l.level,n=l.sn,a=l.cc,s=this.config.defaultAudioCodec||o.audioCodec||"mp4a.40.2",u=this.stats=e.stats,"initSegment"===n?(this.state=me,u.tparsed=u.tbuffered=Je.now(),t.initSegment.data=e.payload,this.hls.trigger(M.default.FRAG_BUFFERED,{stats:u,frag:l,id:"audio"}),this.tick()):(this.state=Me,this.appended=!1,this.demuxer||(this.demuxer=new X(this.hls,"audio")),o=this.initPTS[a],u=t.initSegment?t.initSegment.data:[],t.initSegment||void 0!==o?(this.pendingBuffering=!0,_.logger.log("Demuxing "+n+" of ["+t.startSN+" ,"+t.endSN+"],track "+i),this.demuxer.push(e.payload,u,s,null,l,r,!1,o)):(_.logger.log("unknown video PTS for continuity counter "+a+", waiting for video PTS before demuxing audio frag "+n+" of ["+t.startSN+" ,"+t.endSN+"],track "+i),this.waitingFragment=e,this.state=_e))),this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Me&&((r=e.tracks).video&&delete r.video,(t=r.audio)&&(t.levelCodec=t.codec,t.id=e.id,this.hls.trigger(M.default.BUFFER_CODECS,r),_.logger.log("audio track:audio,container:"+t.container+",codecs[level/parsed]=["+t.levelCodec+"/"+t.codec+"]"),(t=t.initSegment)&&(t={type:"audio",data:t,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[t]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(M.default.BUFFER_APPENDING,t))),this.tick()))},n.onFragParsingData=function(t){var r=this,e=this.fragCurrent,i=t.frag;if(e&&"audio"===t.id&&"audio"===t.type&&i.sn===e.sn&&i.level===e.level&&this.state===Me){var n=this.trackId,a=this.tracks[n],s=this.hls;Object(D.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),e.addElementaryStream(c.AUDIO),_.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),ee(a.details,e,t.startPTS,t.endPTS);i=this.audioSwitch,a=this.media,e=!1;i&&(a&&a.readyState?(a=a.currentTime,_.logger.log("switching audio track : currentTime:"+a),a>=t.startPTS&&(_.logger.log("switching audio track : flushing all audio"),this.state=Ae,s.trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.audioSwitch=!(e=!0),s.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:n}))):(this.audioSwitch=!1,s.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:n})));var o=this.pendingData;if(!o)return _.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(M.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&o.push({type:t.type,data:e,parent:"audio",content:"data"})}),!e&&o.length&&(o.forEach(function(e){r.state===Me&&(r.pendingBuffering=!0,r.hls.trigger(M.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Me&&(this.stats.tparsed=Je.now(),this.state=Te,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},n.onBufferAppended=function(e){var t;"audio"===e.parent&&((t=this.state)!==Me&&t!==Te||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},n._checkAppendedParsed=function(){var e,t,r;this.state!==Te||this.appended&&this.pendingBuffering||(r=this.fragCurrent,e=this.stats,t=this.hls,r&&(this.fragPrevious=r,e.tbuffered=Je.now(),t.trigger(M.default.FRAG_BUFFERED,{stats:e,frag:r,id:"audio"}),(r=this.mediaBuffer||this.media)&&_.logger.log("audio buffered : "+ne.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,t.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=me),this.tick())},n.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:var r,i,n=e.frag;if(n&&"audio"!==n.type)break;e.fatal||((n=this.fragLoadError)?n++:n=1,n<=(r=this.config).fragLoadingMaxRetry?(this.fragLoadError=n,i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout),_.logger.warn("AudioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=Je.now()+i,this.state=be):(_.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=De));break;case g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==De&&(this.state=e.fatal?De:me,_.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case g.ErrorDetails.BUFFER_FULL_ERROR:"audio"!==e.parent||this.state!==Me&&this.state!==Te||(r=this.mediaBuffer,i=this.media.currentTime,r&&U.isBuffered(r,i)&&U.isBuffered(r,i+.5)?((i=this.config).maxMaxBufferLength>=i.maxBufferLength&&(i.maxMaxBufferLength/=2,_.logger.warn("AudioStreamController: reduce max buffer length to "+i.maxMaxBufferLength+"s")),this.state=me):(_.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ae,this.hls.trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})))}},n.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(_.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(M.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Te):(this.state=me,this.fragPrevious=null,this.tick())},t=e,(n=[{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,_.logger.log("audio stream:"+t+"->"+e))},get:function(){return this._state}}])&&Xe(t.prototype,n),r&&Xe(t,r),e}(Ie),tt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var b={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function S(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function M(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)e[r]=i[r]}return e}function e(e,t,r){var i=this,n={enumerable:!0};i.hasBeenReset=!1;var a="",s=!1,o=e,l=t,u=r,c=null,h="",d=!0,f="auto",p="start",m=50,g="middle",y=50,v="middle";Object.defineProperty(i,"id",M({},n,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",M({},n,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(i,"startTime",M({},n,{get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",M({},n,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",M({},n,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",M({},n,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",M({},n,{get:function(){return h},set:function(e){e="string"==typeof(e=e)&&(!!b[e.toLowerCase()]&&e.toLowerCase());if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",M({},n,{get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",M({},n,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",M({},n,{get:function(){return p},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",M({},n,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",M({},n,{get:function(){return g},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",M({},n,{get:function(){return y},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",M({},n,{get:function(){return v},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),i.displayState=void 0}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}();function rt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new qe,this.regionList=[]}function it(){this.values=Object.create(null)}function nt(e,t,r,i){var n,a,s=i?e.split(i):[e];for(n in s)"string"==typeof s[n]&&(2===(a=s[n].split(r)).length&&t(a[0],a[1]))}it.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var at=new tt(0,0,0),st="middle"===at.align?"middle":"center";function ot(r,e,a){var t,i,s,n=r;function o(){var e,e=(e=(e=r).match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null;function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}if(null===e)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){r=r.replace(/^\s+/,"")}if(l(),e.startTime=o(),l(),"--\x3e"!==r.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);r=r.substr(3),l(),e.endTime=o(),l(),t=r,i=e,s=new it,nt(t,function(e,t){switch(e){case"region":for(var r=a.length-1;0<=r;r--)if(a[r].id===t){s.set(e,a[r].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];s.integer(e,n),s.percent(e,n)&&s.set("snapToLines",!1),s.alt(e,n,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start",st,"end"]);break;case"position":i=t.split(","),s.percent(e,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start",st,"end","line-left","line-right","auto"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start",st,"end","left","right"])}},/:/,/\s/),i.region=s.get("region",null),i.vertical=s.get("vertical",""),"auto"===(t=s.get("line","auto"))&&-1===at.line&&(t=-1),i.line=t,i.lineAlign=s.get("lineAlign","start"),i.snapToLines=s.get("snapToLines",!0),i.size=s.get("size",100),i.align=s.get("align",st),"auto"===(t=s.get("position","auto"))&&50===at.position&&(t="start"===i.align||"left"===i.align?0:"end"===i.align||"right"===i.align?100:50),i.position=t}function lt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}rt.prototype={parse:function(e){var i=this;function t(){for(var e=0,t=lt(t=i.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),r}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r,n=(r=t()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:r=t(),i.state){case"HEADER":/:/.test(r)?nt(r,function(e,t){},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new tt(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{ot(r,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(a=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ut=rt;function ct(e,t,r,i){for(var n,a,s,o,l,u=[],c=window.VTTCue||TextTrackCue,h=0;h<i.rows.length;h++)if(s=!0,o=0,l="",!(n=i.rows[h]).isEmpty()){for(var d=0;d<n.chars.length;d++)n.chars[d].uchar.match(/\s/)&&s?o++:(l+=n.chars[d].uchar,s=!1);(n.cueStartTime=t)===r&&(r+=1e-4),a=new c(t,r,lt(l.trim())),16<=o?o--:o++,navigator.userAgent.match(/Firefox\//)?a.line=h+1:a.line=7<h?h-2:h+1,a.align="left",a.position=Math.max(0,Math.min(100,o/32*100)),u.push(a),e&&e.addCue(a)}return u}function ht(e){var t=e;return ft.hasOwnProperty(e)&&(t=ft[e]),String.fromCharCode(t)}var dt,ft={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},pt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},mt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},gt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},yt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},vt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(G=dt=dt||{})[G.ERROR=0]="ERROR",G[G.TEXT=1]="TEXT",G[G.WARNING=2]="WARNING",G[G.INFO=2]="INFO",G[G.DEBUG=3]="DEBUG",G[G.DATA=3]="DATA";function bt(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t}var St=function(){function e(){this.time=null,this.verboseLevel=dt.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&_.logger.log(this.time+" ["+e+"] "+t)},e}(),Mt=function(){function e(e,t,r,i,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=i||"black",this.flash=n||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Tt=function(){function e(e,t,r,i,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Mt(t,r,i,n,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),At=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new Tt);this.logger=e,this.pos=0,this.currPenState=new Mt}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(dt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(this.logger.log(dt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){144<=e&&this.backSpace();var t=ht(e);100<=this.pos?this.logger.log(dt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){for(var t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Et=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new At(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(dt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(dt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(n.rows[i+o])}}this.currRow=t;a=this.rows[this.currRow];null!==e.indent&&(s=e.indent,s=Math.max(s-1,0),a.setCursor(e.indent),e.color=a.chars[s].penState.foreground);e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(e)},t.setBkgData=function(e){this.logger.log(dt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e;null!==this.nrRollUpRows?(this.logger.log(dt.TEXT,this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(dt.INFO,"Rolling up")):this.logger.log(dt.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=0;i<15;i++){var n=this.rows[i].getTextString();n&&(e?t.push("Row "+(i+1)+": '"+n+"'"):t.push(n.trim()))}return r=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):r},t.getTextAndFormat=function(){return this.rows},e}(),Dt=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Et(r),this.nonDisplayedMemory=new Et(r),this.lastOutputScreen=new Et(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(dt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(dt.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(dt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(dt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(dt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(dt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(dt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(dt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(dt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(dt.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(dt.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(dt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(dt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(dt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e;this.logger.log(dt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(dt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(dt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(dt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function _t(e,t,r){r.a=e,r.b=t}function xt(e,t,r){return r.a===e&&r.b===t}function It(){return{a:null,b:null}}function Ct(e,t,r){return e.substr(r||0,t.length)===t}function kt(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var wt=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new St;this.channels=[null,new Dt(e,t,i),new Dt(e+1,r,i)],this.cmdHistory=It(),this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,i=!1;this.logger.time=e;for(var n=0;n<t.length;n+=2){var a,s=127&t[n],o=127&t[n+1];0==s&&0==o||(this.logger.log(dt.DATA,"["+bt([t[n],t[n+1]])+"] -> ("+bt([s,o])+")"),(r=(r=(r=(r=this.parseCmd(s,o))||this.parseMidrow(s,o))||this.parsePAC(s,o))||this.parseBackgroundAttributes(s,o))||(i=this.parseChars(s,o))&&((a=this.currentChannel)&&0<a?this.channels[a].insertChars(i):this.logger.log(dt.WARNING,"No channel found yet. TEXT-MODE?")),r||i||this.logger.log(dt.WARNING,"Couldn't parse cleaned data "+bt([s,o])+" orig: "+bt([t[n],t[n+1]])))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(xt(e,t,r))return _t(null,null,r),this.logger.log(dt.DEBUG,"Repeated command ("+bt([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,n=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),_t(e,t,r),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&32<=t&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(dt.ERROR,"Mismatch channel in midrow parsing"),!1;r=this.channels[r];return r?(r.ccMIDROW(t),this.logger.log(dt.DEBUG,"MIDROW ("+bt([e,t])+")"),!0):!1}return!1},t.parsePAC=function(e,t){var r=this.cmdHistory;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(xt(e,t,r))return _t(null,null,r),!0;var i=e<=23?1:2,n=(64<=t&&t<=95?1==i?pt:gt:1==i?mt:yt)[e],a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,t)),_t(e,t,r),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var r=t,e={color:null,italics:!1,indent:null,underline:!1,row:e},r=95<t?t-96:t-64;return e.underline=1==(1&r),r<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((r-16)/2),e},t.parseChars=function(e,t){var r,i,n=null,a=null;return 17<=(a=25<=e?(r=2,e-8):(r=1,e))&&a<=19?(i=t,this.logger.log(dt.INFO,"Special char '"+ht(i=17===a?t+80:18===a?t+112:t+144)+"' in channel "+r),n=[i]):32<=e&&e<=127&&(n=0===t?[e]:[e,t]),n&&(i=bt(n),this.logger.log(dt.DEBUG,"Char codes =  "+i.join(",")),_t(e,t,this.cmdHistory)),n},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47))return!1;var i={};return 16===e||24===e?(r=Math.floor((t-32)/2),i.background=vt[r],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),this.channels[e<=23?1:2].setBkgData(i),_t(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory=It()},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}(),Lt=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Ot={parse:function(e,t,i,n,r,a){var s,e=Object(Pe.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),o="00:00.000",l=0,u=0,c=0,h=[],d=!0,f=!1,p=new ut;p.oncue=function(e){var t=i[n],r=i.ccOffset;t&&t.new&&(void 0!==u?r=i.ccOffset=t.start:function(e,t,r){var i=e[t],n=e[i.prevCC];if(!n||!n.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,i.new=!1;for(;n&&n.new;)e.ccOffset+=i.start-n.start,i.new=!1,n=e[(i=n).prevCC];e.presentationOffset=r}(i,n,c)),c&&(r=c-i.presentationOffset),f&&(e.startTime+=r-u,e.endTime+=r-u),e.id=kt(e.startTime.toString())+kt(e.endTime.toString())+kt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),0<e.endTime&&h.push(e)},p.onparsingerror=function(e){s=e},p.onflush=function(){s&&a?a(s):r(h)},e.forEach(function(e){if(d){if(Ct(e,"X-TIMESTAMP-MAP=")){f=!(d=!1),e.substr(16).split(",").forEach(function(e){Ct(e,"LOCAL:")?o=e.substr(6):Ct(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{t+(9e4*i[n].start||0)<0&&(t+=8589934592),l-=t,u=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),n=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(D.isFiniteNumber)(t)&&Object(D.isFiniteNumber)(r)&&Object(D.isFiniteNumber)(i)&&Object(D.isFiniteNumber)(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*i,t+=36e5*n}(o)/1e3,c=l/9e4}catch(e){f=!1,s=e}return}""===e&&(d=!1)}p.parse(e+"\n")}),p.flush()}};function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}$=function(a){var e;function t(e){var t,r,i,n=a.call(this,e,M.default.MEDIA_ATTACHING,M.default.MEDIA_DETACHING,M.default.FRAG_PARSING_USERDATA,M.default.FRAG_DECRYPTED,M.default.MANIFEST_LOADING,M.default.MANIFEST_LOADED,M.default.FRAG_LOADED,M.default.INIT_PTS_FOUND)||this;return n.media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=Nt(),n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions&&(t=new Lt(Pt(n),"textTrack1"),r=new Lt(Pt(n),"textTrack2"),i=new Lt(Pt(n),"textTrack3"),e=new Lt(Pt(n),"textTrack4"),n.cea608Parser1=new wt(1,t,r),n.cea608Parser2=new wt(3,i,e)),n}r=a,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.addCues=function(e,t,r,i,n){for(var a,s,o=!1,l=n.length;l--;){var u=n[l],c=(a=u[0],s=u[1],c=t,Math.min(s,r)-Math.max(a,c));if(0<=c&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],r),o=!0,.5<c/(r-t)))return}o||n.push([t,r]),this.config.renderTextTracksNatively?this.Cues.newCue(this.captionsTracks[e],t,r,i):(i=this.Cues.newCue(null,t,r,i),this.hls.trigger(M.default.CUES_PARSED,{type:"captions",cues:i,track:e}))},r.onInitPtsFound=function(e){var t=this,r=e.frag,i=e.id,n=e.initPTS,e=this.unparsedVttFrags;"main"===i&&(this.initPTS[r.cc]=n),e.length&&(this.unparsedVttFrags=[],e.forEach(function(e){t.onFragLoaded(e)}))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},r.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},r.createNativeTrack=function(e){var t,r,i,n,a;this.captionsTracks[e]||(a=this.captionsProperties,t=this.captionsTracks,r=this.media,i=(n=a[e]).label,a=n.languageCode,(n=this.getExistingTrack(e))?(t[e]=n,Re(t[e]),Ne(t[e],r)):(a=this.createTextTrack("captions",i,a))&&(a[e]=!0,t[e]=a))},r.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(M.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},r.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},r.destroy=function(){a.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Re(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=Nt(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Re(t[r])}},r.onManifestLoaded=function(e){var o,t,l=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT&&(t=e.subtitles||[],t=this.tracks&&t&&this.tracks.length===t.length,this.tracks=e.subtitles||[],this.config.renderTextTracksNatively?(o=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var r,i,n;if(t<o.length){for(var a=null,s=0;s<o.length;s++)if(i=o[s],n=e,i&&i.label===n.name&&!(i.textTrack1||i.textTrack2)){a=o[s];break}a&&(r=a)}r=r||l.createTextTrack("subtitles",e.name,e.lang),e.default?r.mode=l.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",l.textTracks.push(r)})):!t&&this.tracks&&this.tracks.length&&(t=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}),this.hls.trigger(M.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t}))),this.config.enableCEA708Captions&&e.captions&&e.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],(t=l.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e))})},r.onFragLoaded=function(e){var t=e.frag,r=e.payload,i=this.cea608Parser1,n=this.cea608Parser2,a=this.initPTS,s=this.lastSn,o=this.unparsedVttFrags;if("main"===t.type){var l=t.sn;t.sn!==s+1&&i&&n&&(i.reset(),n.reset()),this.lastSn=l}else if("subtitle"===t.type)if(r.byteLength){if(!Object(D.isFiniteNumber)(a[t.cc]))return o.push(e),void(a.length&&this.hls.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,r)}else this.hls.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(r,e){var n=this,a=this.hls,t=this.prevCC,s=this.textTracks,i=this.vttCCs;i[r.cc]||(i[r.cc]={start:r.start,prevCC:t,new:!0},this.prevCC=r.cc),Ot.parse(e,this.initPTS[r.cc],i,r.cc,function(e){if(n.config.renderTextTracksNatively){var i=s[r.level];if("disabled"===i.mode)return void a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r});e.forEach(function(t){if(!i.cues.getCueById(t.id))try{if(i.addCue(t),!i.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(e){_.logger.debug("Failed occurred on adding cues: "+e);var r=new window.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,i.addCue(r)}})}else{var t=n.tracks[r.level].default?"default":"subtitles"+r.level;a.trigger(M.default.CUES_PARSED,{type:"subtitles",cues:e,track:t})}a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},function(e){_.logger.log("Failed to parse VTT cue: "+e),a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})})},r.onFragDecrypted=function(e){var t=e.frag,r=e.payload;"subtitle"===t.type&&(Object(D.isFiniteNumber)(this.initPTS[t.cc])?this._parseVTTs(t,r):this.unparsedVttFrags.push(e))},r.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var i=0;i<e.samples.length;i++){var n=e.samples[i].bytes;n&&(n=this.extractCea608Data(n),t.addData(e.samples[i].pts,n[0]),r.addData(e.samples[i].pts,n[1]))}},r.extractCea608Data=function(e){for(var t=31&e[0],r=2,i=[[],[]],n=0;n<t;n++){var a=e[r++],s=127&e[r++],o=127&e[r++],l=3&a;0==s&&0==o||0!=(4&a)&&(0!=l&&1!=l||(i[l].push(s),i[l].push(o)))}return i},t}(o);function Rt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"subtitles"===i.kind&&i.label&&t.push(e[r])}return t}var de=function(t){function e(e){e=t.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.MANIFEST_LOADED,M.default.SUBTITLE_TRACK_LOADED)||this;return e.tracks=[],e.trackId=-1,e.media=null,e.stopped=!0,e.subtitleDisplay=!0,e.queuedDefaultTrack=null,e}r=t,(n=e).prototype=Object.create(r.prototype),(n.prototype.constructor=n).__proto__=r;var r,i,n=e.prototype;return n.destroy=function(){o.prototype.destroy.call(this)},n.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(D.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(D.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),jt(this.media.textTracks).forEach(function(e){Re(e)}),this.subtitleTrack=-1,this.media=null)},n.onManifestLoaded=function(e){var t=this,e=e.subtitles||[];this.tracks=e,this.hls.trigger(M.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:e}),e.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},n.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,i=e.details,n=this.trackId,a=this.tracks,s=a[n];r>=a.length||r!==n||!s||this.stopped?this._clearReloadTimer():(_.logger.log("subtitle track "+r+" loaded"),i.live?(e=ie(s.details,i,e.stats.trequest),_.logger.log("Reloading live subtitle playlist in "+e+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},e)):this._clearReloadTimer())},n.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},n._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,t=t[e];e<0||!t||t.details&&!t.details.live||(_.logger.log("Loading subtitle track "+e),r.trigger(M.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))},n._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,i=this.trackId;t&&(t=jt(t.textTracks),-1===e?[].slice.call(t).forEach(function(e){e.mode="disabled"}):(i=t[i])&&(i.mode="disabled"),(e=t[e])&&(e.mode=r?"showing":"hidden"))},n._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(D.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,_.logger.log("Switching to subtitle track "+e),t.trigger(M.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},n._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=jt(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},r=e,(n=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Rt(r.prototype,n),i&&Rt(r,i),e}(o),Ft=r("./src/crypt/decrypter.js");var zt,Bt=window.performance,G=function(i){var e;function t(e,t){var r=i.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.ERROR,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.SUBTITLE_TRACKS_UPDATED,M.default.SUBTITLE_TRACK_SWITCH,M.default.SUBTITLE_TRACK_LOADED,M.default.SUBTITLE_FRAG_PROCESSED,M.default.LEVEL_UPDATED)||this;return r.fragmentTracker=t,r.config=e.config,r.state=fe,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new Ft.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=i,(e=t).prototype=Object.create(r.prototype),(e.prototype.constructor=e).__proto__=r;var r=t.prototype;return r.onSubtitleFragProcessed=function(e){var t=e.frag,e=e.success;if(this.fragPrevious=t,this.state=me,e){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,n=t.start,a=0;a<r.length;a++)if(n>=r[a].start&&n<=r[a].end){i=r[a];break}t=t.start+t.duration;i?i.end=t:r.push(i={start:n,end:t})}}},r.onMediaAttached=function(e){e=e.media;(this.media=e).addEventListener("seeking",this._onMediaSeeking),this.state=me},r.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]}),this.media=null,this.state=fe)},r.onError=function(e){e=e.frag;e&&"subtitle"===e.type&&(this.state=me)},r.onSubtitleTracksUpdated=function(e){var t=this;_.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},r.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId?(e=this.tracks[this.currentTrackId])&&e.details&&this.setInterval(500):this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,i=this.currentTrackId,n=this.tracks,e=n[i];t>=n.length||t!==i||!e||(r.live&&function(e,t,r){void 0===r&&(r=0);var i=-1;re(e,t,function(e,t,r){t.start=e.start,i=r});var n=t.fragments;if(i<0)n.forEach(function(e){e.start+=r});else for(var a=i+1;a<n.length;a++)n[a].start=n[a-1].start+n[a-1].duration}(e.details,r,this.lastAVStart),e.details=r,this.setInterval(500))},r.onKeyLoaded=function(){this.state===ye&&(this.state=me)},r.onFragLoaded=function(e){var r,t=this.fragCurrent,i=e.frag.decryptdata,n=e.frag,a=this.hls;this.state===ve&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&0<e.payload.byteLength&&i&&i.key&&"AES-128"===i.method&&(r=Bt.now(),this.decrypter.decrypt(e.payload,i.key.buffer,i.iv.buffer,function(e){var t=Bt.now();a.trigger(M.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:r,tdecrypt:t}})}))},r.onLevelUpdated=function(e){e=e.details.fragments;this.lastAVStart=e.length?e[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case me:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,i=this.media,n=this.tracks;if(!n||!n[t]||!n[t].details)break;var a=e.maxBufferHole,s=e.maxFragLookUpTolerance,o=Math.min(e.maxBufferLength,e.maxMaxBufferLength),l=U.bufferedInfo(this._getBuffered(),i.currentTime,a),e=l.end,i=l.len,a=n[t].details,l=a.fragments,n=l.length,t=l[n-1].start+l[n-1].duration;if(o<i)return;var u,i=this.fragPrevious;(u=e<t?(u=i&&a.hasProgramDateTime?le(l,i.endProgramDateTime,s):u)||ue(i,l,e,s):l[n-1])&&u.encrypted?(_.logger.log("Loading key for "+u.sn),this.state=ye,this.hls.trigger(M.default.KEY_LOADING,{frag:u})):u&&r.getState(u)===R&&(this.fragCurrent=u,this.state=ve,this.hls.trigger(M.default.FRAG_LOADING,{frag:u}))}else this.state=me},r.stopLoad=function(){this.lastAVStart=0,i.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){this.fragPrevious=null},t}(Ie);(r=zt=zt||{}).WIDEVINE="com.widevine.alpha",r.PLAYREADY="com.microsoft.playready";Ie="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Vt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r=function(t){function e(e){var r=t.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHED,M.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(t){if(_.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!r.mediaKeysPromise)return _.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});function e(e){r._media&&(r._attemptSetMediaKeys(e),r._generateRequestWithPreferredKeySession(t.initDataType,t.initData))}r.mediaKeysPromise.then(e).catch(e)},r._config=e.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=e.config.drmSystemOptions,r}r=t,(n=e).prototype=Object.create(r.prototype),(n.prototype.constructor=n).__proto__=r;var r,i,n=e.prototype;return n.getLicenseServerUrl=function(e){switch(e){case zt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},n._attemptKeySystemAccess=function(t,e,r){var i=this,r=function(e,t,r,i){if(e!==zt.WIDEVINE)throw new Error("Unknown key-system: "+e);return r=r,n=i,a={audioCapabilities:[],videoCapabilities:[]},t.forEach(function(e){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})}),r.forEach(function(e){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})}),[a];var n,a}(t,e,r,this._drmSystemOptions);_.logger.log("Requesting encrypted media key-system access");r=this.requestMediaKeySystemAccess(t,r);this.mediaKeysPromise=r.then(function(e){return i._onMediaKeySystemAccessObtained(t,e)}),r.catch(function(e){_.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},n._onMediaKeySystemAccessObtained=function(t,e){var r=this;_.logger.log('Access for key-system "'+t+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i);var n=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return i.mediaKeys=e,_.logger.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e});return n.catch(function(e){_.logger.error("Failed to create media-keys:",e)}),n},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},n._onNewMediaKeySession=function(t){var r=this;_.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){r._onKeySessionMessage(t,e.message)},!1)},n._onKeySessionMessage=function(t,e){_.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){_.logger.log("Received license data (length: "+(e&&e.byteLength)+"), updating key-session"),t.update(e)})},n._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return _.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});_.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(e,t){var r=this,i=this._mediaKeysList[0];if(!i)return _.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!i.mediaKeysSessionInitialized){var n=i.mediaKeysSession;return n?t?(_.logger.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,void n.generateRequest(e,t).then(function(){_.logger.debug("Key-session generation succeeded")}).catch(function(e){_.logger.error("Error generating key-session request:",e),r.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(_.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(_.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))}_.logger.warn("Key-Session already initialized but requested again")},n._createLicenseXhr=function(t,e,r){var i=new XMLHttpRequest,n=this._licenseXhrSetup;try{if(n)try{n(i,t)}catch(e){i.open("POST",t,!0),n(i,t)}i.readyState||i.open("POST",t,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,r),i},n._onLicenseRequestReadyStageChange=function(e,t,r,i){if(4===e.readyState)if(200===e.status)this._requestLicenseFailureCount=0,_.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&_.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(e.response);else{if(_.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)return void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});e=3-this._requestLicenseFailureCount+1;_.logger.warn("Retrying license request, "+e+" attempts left"),this._requestLicense(r,i)}},n._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===zt.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},n._requestLicense=function(e,t){_.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return _.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(i,e,t);_.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(r,e);n.send(a)}catch(e){_.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(M.default.ERROR,{type:g.ErrorTypes.KEY_SYSTEM_ERROR,details:g.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(e){this._emeEnabled&&(e=e.media,(this._media=e).addEventListener("encrypted",this._onMediaEncrypted))},n.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},n.onManifestParsed=function(e){var t;this._emeEnabled&&(t=e.levels.map(function(e){return e.audioCodec}),e=e.levels.map(function(e){return e.videoCodec}),this._attemptKeySystemAccess(zt.WIDEVINE,t,e))},r=e,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Vt(r.prototype,n),i&&Vt(r,i),e}(o);function Ut(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function Gt(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}var Yt=Gt(Gt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Qe,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ue,bufferController:Ye,capLevelController:We,fpsController:t,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ie,testBandwidth:!0},{cueHandler:i,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:G,subtitleTrackController:de,timelineController:$,audioStreamController:et,audioTrackController:Ze,emeController:r});function Ht(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function Wt(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(e){var t,r;t=i,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kt(e,t,r){return t&&Qt(e.prototype,t),r&&Qt(e,r),e}var Zt=function(p){var e;function m(e){var t;void 0===e&&(e={}),(t=p.call(this)||this).config=void 0,t._autoLevelCapping=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var r=m.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=Wt(Wt({},r),e);var i=$t(t).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(_.enableLogs)(i.debug),t._autoLevelCapping=-1;var n=t.abrController=new i.abrController($t(t)),a=new i.bufferController($t(t)),s=t.capLevelController=new i.capLevelController($t(t)),o=new i.fpsController($t(t)),l=new E($t(t)),u=new P($t(t)),c=new N($t(t)),h=new je($t(t)),d=t.levelController=new Oe($t(t)),r=new B($t(t)),e=[d,t.streamController=new we($t(t),r)],d=i.audioStreamController;d&&e.push(new d($t(t),r)),t.networkControllers=e;var f,o=[l,u,c,n,a,s,o,h,r];return(d=i.audioTrackController)&&(h=new d($t(t)),t.audioTrackController=h,o.push(h)),(d=i.subtitleTrackController)&&(f=new d($t(t)),t.subtitleTrackController=f,e.push(f)),(d=i.emeController)&&(f=new d($t(t)),t.emeController=f,o.push(f)),(d=i.subtitleStreamController)&&e.push(new d($t(t),r)),(d=i.timelineController)&&o.push(new d($t(t))),t.coreComponents=o,t}t=p,(e=m).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,m.isSupported=function(){if(!(t=W()))return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!t&&!!e},Kt(m,null,[{key:"version",get:function(){return"0.13.3-canary.5704"}},{key:"Events",get:function(){return M.default}},{key:"ErrorTypes",get:function(){return g.ErrorTypes}},{key:"ErrorDetails",get:function(){return g.ErrorDetails}},{key:"DefaultConfig",get:function(){return m.defaultConfig||Yt},set:function(e){m.defaultConfig=e}}]);var t=m.prototype;return t.destroy=function(){_.logger.log("destroy"),this.trigger(M.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.attachMedia=function(e){_.logger.log("attachMedia"),this.media=e,this.trigger(M.default.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){_.logger.log("detachMedia"),this.trigger(M.default.MEDIA_DETACHING),this.media=null},t.loadSource=function(e){e=n.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),_.logger.log("loadSource:"+e),this.url=e,this.trigger(M.default.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),_.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){_.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){_.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){_.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},Kt(m,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){_.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){_.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){_.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){_.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){_.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){_.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,i=0;i<r;i++)if(t<(e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate))return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping,t=-1===t&&e&&e.length?e.length-1:t;return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),m}(Q);Zt.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":function(e,t,r){r.r(t),r.d(t,"isFiniteNumber",function(){return i});var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":function(e,t,r){function i(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",function(){return i})},"./src/utils/logger.js":function(e,t,r){r.r(t),r.d(t,"enableLogs",function(){return l}),r.d(t,"logger",function(){return u});r=r("./src/utils/get-self-scope.js");function i(){}var n={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=n;var o=Object(r.getSelfScope)();function s(a){var s=o.console[a];return s?function(){for(var e,t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];i[0]&&(i[0]=(e=a,t=i[0],t="["+e+"] > "+t)),s.apply(o.console,i)}:i}var l=function(e){if(o.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach(function(e){a[e]=t[e]?t[e].bind(t):s(e)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=n}}else a=n},u=a}},i={},n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts").default;function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,i},e.exports=r())}),Hls=unwrapExports(hls),VideoProxy=function(){function t(e){e=e.muted;_classCallCheck(this,t),this.clips=[],this.currentClip=0,this.paused=!0,this.muted=e,this.volume=1,this.clipLoadGracePeriod=500,this.isFullScreen=!1,this.originalVideoWidth=0,this.originalVideoHeight=0,this.clientWidth=0,this.currentClipLoadTime=Date.now()}var e;return _createClass(t,[{key:"currentClipEl",value:function(){return this.clips[this.currentClip].ref.element}},{key:"loadHLS",value:function(e){var t,r=!!e.ref.element.canPlayType&&(""!=e.ref.element.canPlayType("application/vnd.apple.mpegURL")||""!=e.ref.element.canPlayType("audio/mpegurl")),i=!1;return!r&&Hls.isSupported?((t=new Hls).attachMedia(e.ref.element),t.on(Hls.Events.MEDIA_ATTACHED,function(){t.loadSource(e.src)}),i=!0):r&&(e.ref.element.setAttribute("src",e.src),e.ref.element.load(),i=!0),i}},{key:"addClip",value:function(e){var t=!0;this.clips.push(e),1===this.clips.length&&(e.isHLS?t=this.loadHLS(e):(e.ref.element.setAttribute("src",e.src),e.ref.element.load())),!t&&e.isHLS&&e.fallbackSrc&&(e.ref.element.setAttribute("src",e.fallbackSrc),e.ref.element.load())}},{key:"isPaused",value:function(){return this.paused}},{key:"hasEnded",value:function(){return this.clips[this.clips.length-1].ref.element.ended}},{key:"readyState",value:function(){return Date.now()-this.currentClipLoadTime<this.clipLoadGracePeriod?4:this.currentClipEl().readyState}},{key:"duration",value:function(){return this.clips.reduce(function(e,t){return e+t.duration},0)}},{key:"getInvisibleStylemap",value:function(){return convertStyleMapToInlineStyles({display:"none"})}},{key:"getVisibleStylemap",value:function(){var e=convertStyleMapToInlineStyles({display:"block",height:this.isFullScreen?null:"100%",width:this.isFullScreen?"100%":null});return e=this.isFullScreen&&this.originalVideoWidth<this.originalVideoHeight?convertStyleMapToInlineStyles({"max-height":"".concat(this.clientWidth/(16/9),"px"),"align-self":"center"}):e}},{key:"parseTime",value:function(e){return parseFloat(Number(e).toFixed(3))}},{key:"updateClipForCurrentTime",value:function(e){if(0!==this.clips.length){var t=this.getVisibleStylemap(),r=this.clips[this.clips.length-1],i=this.clips[0],n=this.parseTime(e),a=this.parseTime(i.startTime),s=this.parseTime(r.endTime),r=s<=n||n<a;if(r){for(var o=0;o<this.clips.length;o++){var l=this.clips[o];l.ref.element.style=convertStyleMapToInlineStyles({display:"none"}),l.ref.element.pause()}return this.pause(),i.ref.element.style=this.getInvisibleStylemap(),e<a&&(i.ref.element.currentTime=i.fragmentStart),void(this.currentClip=0)}var u=0;if(a<=n)for(var c=0;c<this.clips.length;c++){var h=this.clips[c];if(this.parseTime(h.startTime)<=n&&this.parseTime(h.endTime)>n){u=c;break}}var d,a=this.clips[u];this.currentClip!==u&&(this.currentClipLoadTime=Date.now(),(d=this.clips[this.currentClip].ref).element.style=convertStyleMapToInlineStyles({display:"none"}),d.element.pause(),a.ref.element.style=t,this.currentClip=u,this.currentClipEl().currentTime=n+a.fragmentStart-this.parseTime(a.startTime),this.currentClipEl().muted=this.muted,this.currentClipEl().volume=this.volume),this.currentClip<this.clips.length-1&&1<this.clips.length&&((a=(d=this.clips[this.currentClip+1]).ref.element).paused&&(a.muted=!0,a.setCurrentTime=d.fragmentStart+.5,a.setCurrentTime=d.fragmentStart,a.play().catch(function(){}))),!r&&n<s-.1&&(!this.paused&&this.currentClipEl().paused?this.currentClipEl().play().catch(function(){}):this.paused&&!this.currentClipEl().paused&&this.currentClipEl().pause()),!r&&this.currentClipEl()&&"none"===this.currentClipEl().style.display&&(this.currentClipEl().style=t)}}},{key:"setMuted",value:function(e){this.muted=e,this.currentClipEl().muted=e}},{key:"setVolume",value:function(e){this.volume=e,this.currentClipEl().volume=e}},{key:"play",value:(e=_asyncToGenerator(regenerator.mark(function e(){var i,t,r,n=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.currentClipEl(),t=new Promise(function(t){function r(e){4===e.target.readyState&&(i.removeEventListener("timeupdate",r),t(n.currentTime()))}i.addEventListener("timeupdate",r)}),r=i.play(),this.paused=!1,void 0!==r)return e.abrupt("return",r.catch(function(e){}).then(function(){return t}));e.next=6;break;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"pause",value:function(){this.currentClipEl().pause(),this.paused=!0}},{key:"setCurrentTime",value:function(e,t){this.currentClipLoadTime=Date.now(),this.updateClipForCurrentTime(t);var r=this.clips[this.currentClip],t=0===this.currentClip?0:r.videoClipStart;r.ref.element.currentTime=r.fragmentStart+e-t}},{key:"currentTime",value:function(){var e=this.clips[this.currentClip],t=this.currentClipEl();return(0===this.currentClip?0:e.videoClipStart)+t.currentTime-e.fragmentStart}},{key:"setDisplayProperties",value:function(e){var t=e.isFullScreen,r=e.originalVideoWidth,i=e.originalVideoHeight,n=e.clientWidth,e=this.isFullScreen!==t||this.clientWidth!==n||this.originalVideoWidth!==r||this.originalVideoHeight!==i;this.isFullScreen=t,this.originalVideoWidth=r,this.originalVideoHeight=i,this.clientWidth=n,e&&(this.currentClipEl().style=this.getVisibleStylemap())}},{key:"clearClips",value:function(){for(var e=0;e<this.clips.length;e++){var t=this.clips[e].ref.element;0<e&&t&&(t.pause(),t.setAttribute("src",""),t.innerHTML="",t.remove())}this.clips=[]}}]),t}(),styles$1={fullScreen:"styles_fullScreen__23imI",video:"styles_video__16wgh"},Video=function(){_inherits(i,Container);var e,r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).video=new VideoProxy({muted:e.muted}),t.props=e,t}return _createClass(i,[{key:"root",value:function(e){return jsx("video",{ref:createRef(this,"mainVideo"),className:styles$1.video,styles:{display:"block",width:"100%"},controls:!1,preload:"yes",playsInline:!0,"webkit-playsinline":!0,muted:e.muted},e.src&&jsx("source",{src:transformVideoSource(e.src),type:"video/mp4"}))}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({measurements:t.store.measurements,isFullScreen:t.store.isFullScreen,originalVideoWidth:t.store.originalVideoWidth,originalVideoHeight:t.store.originalVideoHeight,currentTime:t.store.currentTime})},autorunConfig)}},{key:"updateClipForCurrentTime",value:function(e){this.video.updateClipForCurrentTime(e)}},{key:"update",value:function(e){var t=e.isFullScreen,r=e.originalVideoWidth,i=e.originalVideoHeight,n=e.currentTime,e=e.measurements.clientWidth;this.video&&(this.video.setDisplayProperties({originalVideoWidth:r,originalVideoHeight:i,isFullScreen:t,clientWidth:e}),this.updateClipForCurrentTime(n))}},{key:"paused",value:function(){return this.video.isPaused()}},{key:"ended",value:function(){return this.video.hasEnded()}},{key:"readyState",value:function(){return this.video.readyState()}},{key:"duration",value:function(){return this.video.duration()}},{key:"play",value:(e=_asyncToGenerator(regenerator.mark(function e(){return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.video.play());case 1:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"pause",value:function(){return this.video.pause()}},{key:"setCurrentTime",value:function(e,t){this.video.setCurrentTime(e,t)}},{key:"currentTime",value:function(){return this.video.currentTime()}},{key:"setVolume",value:function(e){this.video.setVolume(e)}},{key:"setMuted",value:function(e){this.video.setMuted(e)}},{key:"toggleMuted",value:function(){this.video.setMuted(!this.video.muted)}},{key:"clientHeight",value:function(){return this.element.clientHeight}},{key:"clientWidth",value:function(){return this.element.clientWidth}},{key:"videoHeight",value:function(){return this.element.videoHeight}},{key:"videoWidth",value:function(){return this.element.videoWidth}},{key:"setFullScreen",value:function(){this.element.classList.add(styles$1.fullScreen)}},{key:"removeFullScreen",value:function(){this.element.classList.remove(styles$1.fullScreen)}},{key:"load",value:function(){this.element.load()}},{key:"hasEnded",value:function(){return this.video.hasEnded()}},{key:"preload",value:function(){var i=this;return new Promise(function(e){var t,r;browserDetection.isSafari?(t=i.element.muted,i.element.muted=!0,void 0!==(r=i.element.play())?r.then(function(){i.element.pause(),i.element.currentTime=0,i.element.muted=t,e()}):(i.element.pause(),i.element.currentTime=0,i.element.muted=t,e())):e()})}},{key:"clearClips",value:function(){this.video.clearClips()}},{key:"fixNewClipTimes",value:function(e){if(null!==e.startTime&&void 0!==e.startTime&&null!==e.endTime&&void 0!==e.endTime&&null!==e.videoClipStart&&void 0!==e.videoClipStart)return e;var t=_toConsumableArray(this.video.clips).sort(function(e,t){return e.startTime>t.startTime?-1:1})[0];return _objectSpread2(_objectSpread2({},e),{},{startTime:t.endTime,endTime:t.endTime+e.duration,videoClipStart:t.videoClipStart+t.duration})}},{key:"trimClipTimes",value:function(e){var t=e.src.split("#");if(1<t.length&&0===t[1].indexOf("t=")){var r=t[1].slice(2).split(","),t=parseFloat(r[0]);r[1];return _objectSpread2(_objectSpread2({},e),{},{fragmentStart:t})}return _objectSpread2(_objectSpread2({},e),{},{fragmentStart:0})}},{key:"hasClip",value:function(t){return!!this.video.clips.find(function(e){return e.src===transformVideoSource(t.srcHLS||t.src)&&e.startTime===t.startTime&&e.duration===t.duration})}},{key:"addClip",value:function(e,t){var r=this.trimClipTimes(this.fixNewClipTimes(e)),i=transformVideoSource(r.srcHLS||r.src),n=r.srcHLS?transformVideoSource(r.src):null,a=this.refs.mainVideo;1<=this.video.clips.length&&(s="videoClip_".concat(this.video.clips.length,"_").concat(r.startTime),e=jsx("video",{styles:{display:"none",width:"100%"},controls:!1,preload:"auto",src:i,playsInline:!0,"webkit-playsinline":!0,ref:createRef(this,s),type:"video/mp4"}),attachToDOM(t,e),a=this.refs[s]);var s=!!r.srcHLS;this.video.addClip({startTime:r.startTime,endTime:r.startTime+r.duration,videoClipStart:r.videoClipStart,duration:r.duration,fragmentStart:r.fragmentStart,isHLS:s,src:i,fallbackSrc:n,ref:a})}},{key:"clear",value:function(){this.element.pause(),this.element.setAttribute("src",""),this.element.innerHTML="",this.element.remove(),this.video&&this.video.clearClips()}}]),i}(),Video$1=createFactory(Video);function capitalizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}function prefixProperty(e,t,r){if(e.hasOwnProperty(t)){for(var i={},n=e[t],a=capitalizeString(t),s=Object.keys(r),o=0;o<s.length;o++){var l=s[o];if(l===t)for(var u=0;u<n.length;u++)i[n[u]+a]=r[t];i[l]=r[l]}return i}return r}function prefixValue(e,t,r,i,n){for(var a=0,s=e.length;a<s;++a){var o=e[a](t,r,i,n);if(o)return o}}function addIfNew(e,t){-1===e.indexOf(t)&&e.push(t)}function addNewValuesOnly(e,t){if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)addIfNew(e,t[r]);else addIfNew(e,t)}function isObject$1(e){return e instanceof Object&&!Array.isArray(e)}function createPrefixer(e){var l=e.prefixMap,u=e.plugins;return function e(t){for(var r in t){var i=t[r];if(isObject$1(i))t[r]=e(i);else if(Array.isArray(i)){for(var n=[],a=0,s=i.length;a<s;++a)addNewValuesOnly(n,prefixValue(u,r,i[a],t,l)||i[a]);0<n.length&&(t[r]=n)}else{var o=prefixValue(u,r,i,t,l);o&&(t[r]=o),t=prefixProperty(l,r,t)}}return t}}var w=["Webkit"],m=["Moz"],ms=["ms"],wm=["Webkit","Moz"],wms=["Webkit","ms"],wmms=["Webkit","Moz","ms"],data={plugins:[],prefixMap:{appearance:wm,textEmphasisPosition:w,textEmphasis:w,textEmphasisStyle:w,textEmphasisColor:w,boxDecorationBreak:w,maskImage:w,maskMode:w,maskRepeat:w,maskPosition:w,maskClip:w,maskOrigin:w,maskSize:w,maskComposite:w,mask:w,maskBorderSource:w,maskBorderMode:w,maskBorderSlice:w,maskBorderWidth:w,maskBorderOutset:w,maskBorderRepeat:w,maskBorder:w,maskType:w,textDecorationStyle:w,textDecorationSkip:w,textDecorationLine:w,textDecorationColor:w,userSelect:wmms,backdropFilter:w,fontKerning:w,scrollSnapType:wms,scrollSnapPointsX:wms,scrollSnapPointsY:wms,scrollSnapDestination:wms,scrollSnapCoordinate:wms,clipPath:w,shapeImageThreshold:w,shapeImageMargin:w,shapeImageOutside:w,filter:w,hyphens:wms,flowInto:wms,flowFrom:wms,breakBefore:wms,breakAfter:wms,breakInside:wms,regionFragment:wms,writingMode:w,textOrientation:w,tabSize:m,fontFeatureSettings:w,columnCount:w,columnFill:w,columnGap:w,columnRule:w,columnRuleColor:w,columnRuleStyle:w,columnRuleWidth:w,columns:w,columnSpan:w,columnWidth:w,wrapFlow:ms,wrapThrough:ms,wrapMargin:ms,textSizeAdjust:w}};function backgroundClip(e,t){if("string"==typeof t&&"text"===t)return["-webkit-text","text"]}var prefixes=["-webkit-","-moz-",""],values={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function cursor(e,t){if("cursor"===e&&values.hasOwnProperty(t))return prefixes.map(function(e){return e+t})}var isPrefixedValue_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default}),isPrefixedValue=unwrapExports(isPrefixedValue_1),prefixes$1=["-webkit-",""];function crossFade(e,t){if("string"==typeof t&&!isPrefixedValue(t)&&-1<t.indexOf("cross-fade("))return prefixes$1.map(function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")})}var prefixes$2=["-webkit-",""];function filter(e,t){if("string"==typeof t&&!isPrefixedValue(t)&&-1<t.indexOf("filter("))return prefixes$2.map(function(e){return t.replace(/filter\(/g,e+"filter(")})}var values$1={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function flex(e,t){if("display"===e&&values$1.hasOwnProperty(t))return values$1[t]}var alternativeValues={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},alternativeProps={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};function flexboxOld(e,t,r){"flexDirection"===e&&"string"==typeof t&&(-1<t.indexOf("column")?r.WebkitBoxOrient="vertical":r.WebkitBoxOrient="horizontal",-1<t.indexOf("reverse")?r.WebkitBoxDirection="reverse":r.WebkitBoxDirection="normal"),alternativeProps.hasOwnProperty(e)&&(r[alternativeProps[e]]=alternativeValues[t]||t)}var prefixes$3=["-webkit-","-moz-",""],values$2=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;function gradient(e,r){if("string"==typeof r&&!isPrefixedValue(r)&&values$2.test(r))return prefixes$3.map(function(t){return r.replace(values$2,function(e){return t+e})})}var _slicedToArray$1=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function isSimplePositionValue(e){return"number"==typeof e&&!isNaN(e)}function isComplexSpanValue(e){return"string"==typeof e&&e.includes("/")}var alignmentValues=["center","end","start","stretch"],displayValues={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},propertyConverters={alignSelf:function(e,t){-1<alignmentValues.indexOf(e)&&(t.msGridRowAlign=e)},gridColumn:function(e,t){var r,i,n,a;isSimplePositionValue(e)?t.msGridColumn=e:isComplexSpanValue(e)?(n=e.split("/"),r=(a=_slicedToArray$1(n,2))[0],i=a[1],propertyConverters.gridColumnStart(+r,t),n=i.split(/ ?span /),n=(a=_slicedToArray$1(n,2))[0],a=a[1],""===n?propertyConverters.gridColumnEnd(+r+ +a,t):propertyConverters.gridColumnEnd(+i,t)):propertyConverters.gridColumnStart(e,t)},gridColumnEnd:function(e,t){var r=t.msGridColumn;isSimplePositionValue(e)&&isSimplePositionValue(r)&&(t.msGridColumnSpan=e-r)},gridColumnStart:function(e,t){isSimplePositionValue(e)&&(t.msGridColumn=e)},gridRow:function(e,t){var r,i,n,a;isSimplePositionValue(e)?t.msGridRow=e:isComplexSpanValue(e)?(n=e.split("/"),r=(a=_slicedToArray$1(n,2))[0],i=a[1],propertyConverters.gridRowStart(+r,t),n=i.split(/ ?span /),n=(a=_slicedToArray$1(n,2))[0],a=a[1],""===n?propertyConverters.gridRowEnd(+r+ +a,t):propertyConverters.gridRowEnd(+i,t)):propertyConverters.gridRowStart(e,t)},gridRowEnd:function(e,t){var r=t.msGridRow;isSimplePositionValue(e)&&isSimplePositionValue(r)&&(t.msGridRowSpan=e-r)},gridRowStart:function(e,t){isSimplePositionValue(e)&&(t.msGridRow=e)},gridTemplateColumns:function(e,t){t.msGridColumns=e},gridTemplateRows:function(e,t){t.msGridRows=e},justifySelf:function(e,t){-1<alignmentValues.indexOf(e)&&(t.msGridColumnAlign=e)}};function grid(e,t,r){if("display"===e&&t in displayValues)return displayValues[t];e in propertyConverters&&(0,propertyConverters[e])(t,r)}var prefixes$4=["-webkit-",""];function imageSet(e,t){if("string"==typeof t&&!isPrefixedValue(t)&&-1<t.indexOf("image-set("))return prefixes$4.map(function(e){return t.replace(/image-set\(/g,e+"image-set(")})}var alternativeProps$1={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function logical(e,t,r){if(Object.prototype.hasOwnProperty.call(alternativeProps$1,e))for(var i=alternativeProps$1[e],n=0,a=i.length;n<a;++n)r[i[n]]=t}function position$1(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}var prefixes$5=["-webkit-","-moz-",""],properties={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},values$3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function sizing(e,t){if(properties.hasOwnProperty(e)&&values$3.hasOwnProperty(t))return prefixes$5.map(function(e){return e+t})}var uppercasePattern=/[A-Z]/g,msPattern=/^ms-/,cache={};function toHyphenLower(e){return"-"+e.toLowerCase()}function hyphenateStyleName(e){if(cache.hasOwnProperty(e))return cache[e];var t=e.replace(uppercasePattern,toHyphenLower);return cache[e]=msPattern.test(t)?"-"+t:t}var hyphenateProperty_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var r,i=(r=hyphenateStyleName)&&r.__esModule?r:{default:r};e.exports=t.default}),hyphenateProperty=unwrapExports(hyphenateProperty_1),properties$1={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},prefixMapping={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function prefixValue$1(e,t){if(isPrefixedValue(e))return e;for(var r=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),i=0,n=r.length;i<n;++i){var a,s=r[i],o=[s];for(a in t){var l=hyphenateProperty(a);if(-1<s.indexOf(l)&&"order"!==l)for(var u=t[a],c=0,h=u.length;c<h;++c)o.unshift(s.replace(l,prefixMapping[u[c]]+l))}r[i]=o.join(",")}return r.join(",")}function transition(e,t,r,i){if("string"==typeof t&&properties$1.hasOwnProperty(e)){var n=prefixValue$1(t,i),t=n.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-moz-|-ms-/.test(e)}).join(",");if(-1<e.indexOf("Webkit"))return t;i=n.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-webkit-|-ms-/.test(e)}).join(",");return-1<e.indexOf("Moz")?i:(r["Webkit"+capitalizeString(e)]=t,r["Moz"+capitalizeString(e)]=i,n)}}var plugins=[backgroundClip,crossFade,cursor,filter,flexboxOld,gradient,grid,imageSet,logical,position$1,sizing,transition,flex],prefix=createPrefixer({prefixMap:data.prefixMap,plugins:plugins}),getValue=function i(t){return Array.isArray(t)?t.map(function(e){return"object"===_typeof(e)&&null!==e?"".concat(e.value).concat(e.unit||""):e}):"object"===_typeof(t)?null===t||!t.value&&0!==t.value?t.values?i(t.values.map(function(e){return{value:e.value||0===e.value?e.value:e,unit:e.unit||t.unit}})):Object.entries(t).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,i(r)))},{}):"".concat(t.value).concat(t.unit||""):t},parseTransformValue=function(e,t){var r=t;Array.isArray(t)&&t.length<3&&r.push("0px");t=Array.isArray(r)?r.reduce(function(e,t){return"".concat(e,",").concat(t)},"").substring(1):r,e="translate"===e&&Array.isArray(r)&&3===r.length?"translate3d":e;return"".concat(e,"(").concat(t,")")},mapTransformStyle=function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),t=r[0],r=r[1];return"".concat(e," ").concat(parseTransformValue(t,getValue(r)))},"").trim()},mapShadowStyle=function(e){return"".concat(e.offset.value[0]).concat(e.offset.unit," ").concat(e.offset.value[1]).concat(e.offset.unit," ").concat(e.radius.value).concat(e.radius.unit," ").concat(e.color)},mapPaddingStyle=function(e){var r=e.unit;return e.values&&0!==e.values.length?e.values.reduce(function(e,t){return"".concat(e," ").concat(t).concat(r)},"").trim():null},convertLayerStylesToStyleMap=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return prefix(_objectSpread2(_objectSpread2({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),i=r[0],t=r[1];if("transform"===i)return _objectSpread2(_objectSpread2({},e),{},{transform:mapTransformStyle(t)});if("padding"===i||"textPadding"===i)return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},i,mapPaddingStyle(t)));if("box-shadow"===i||"text-shadow"===i)return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},i,mapShadowStyle(t)));r=null,r=Array.isArray(t)?"will-change"===i?t.join(", "):t.join(" "):getValue(t);return Array.isArray(r)&&(r=r.join(" ")),_objectSpread2(_objectSpread2({},e),{},_defineProperty({},i,r))},{})))},linkStyles=convertLayerStylesToStyleMap({display:"block","text-decoration":"none"}),handleTimeTrigger=function(e,t,r,i){i&&e.layerStates.addLayerState(i),"pause"===r?t.getActions().pause():t.getActions().play()},Layer=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this)).defaultStyles={margin:0,padding:0,"max-width":"inherit","max-height":"inherit",transform:"translate3d(0px 0px 0px)"},t.create(e),t}return _createClass(i,[{key:"create",value:function(e){e&&(_get(_getPrototypeOf(i.prototype),"create",this).call(this,e),this.type=e.type)}},{key:"getType",value:function(){return this.type}},{key:"root",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.elementName;this.id=e.id,this.store=e.store,this.videoPlayerEngine=e.videoPlayerEngine;var i=e.trigger?e.triggerEventListeners:e.link?e.linkEventListeners:null;return jsx(r,{id:e.id,styles:convertLayerStylesToStyleMap(e.styles,this.defaultStyles),attributes:t,textContent:e.textValue||"",eventListeners:i,"data-link":e.link})}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({currentTime:t.store.currentTime})},autorunConfig)}},{key:"applyStyles",value:function(e,t,r,i){var n=this.element,a=t||r?{cursor:"pointer"}:null;n.setAttribute("style",convertStyleMapToInlineStyles(convertLayerStylesToStyleMap(_objectSpread2(_objectSpread2({},e),a),this.defaultStyles))),t&&((a="string"==typeof t)||"OPEN"===t.action?(this.element.setAttribute("data-href",a?t:t.url),this.element.setAttribute("data-method",a?"LEGACY":t.action)):(this.element.setAttribute("data-href",t.url),this.element.setAttribute("data-method",t.action),this.element.setAttribute("data-params",t.requestParameters),this.element.setAttribute("data-headers",t.headers?JSON.stringify(t.headers):void 0))),r&&("click"===r.event&&(n.setAttribute("data-triggerevent",r.event),r.applyState&&n.setAttribute("data-triggerstate",r.applyState),0<=r.setCurrentTime&&n.setAttribute("data-trigger-setcurrenttime",r.setCurrentTime),r.playerAction&&n.setAttribute("data-trigger-playeraction",r.playerAction)),"time"===r.event&&i>=r.targetTime&&i<r.targetTime+.05&&handleTimeTrigger(this.store,this.videoPlayerEngine,r.playerAction,r.applyState)),(t||r)&&n.setAttribute("data-layer-id",this.id)}},{key:"update",value:function(e){var t=e.styles,r=e.link,i=e.trigger,e=e.currentTime;this.applyStyles(t,r,i,e)}},{key:"remove",value:function(){this.element.remove()}}]),i}(),BlockLayer=function(){_inherits(i,Layer);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this)).elementName="div",t.create(e),t}return i}(),BlockLayer$1=createFactory(BlockLayer),ImageLayer=function(){_inherits(i,Layer);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this)).elementName="img",t.create(e),t}return _createClass(i,[{key:"update",value:function(e){var t=e.styles,r=e.src,e=e.link;_get(_getPrototypeOf(i.prototype),"update",this).call(this,{styles:t,link:e});e=this.element.getAttribute("src");r&&r!==e&&this.element.setAttribute("src",r)}},{key:"root",value:function(e){var t={};return e.src&&(t={src:e.src}),_get(_getPrototypeOf(i.prototype),"root",this).call(this,e,t)}}]),i}(),ImageLayer$1=createFactory(ImageLayer),featureDetection={hasObjectFit:!(!document.body.style.objectFit&&""!==document.body.style.objectFit),hasPointerEvents:!!window.PointerEvent},_excluded$c=["styles","src","imageScale","imagePositionX","imagePositionY"],InfographicLayer=function(){_inherits(u,Layer);var i=_createSuper(u);function u(e,t){var r;return _classCallCheck(this,u),(r=i.call(this)).type=INFOGRAPHIC,featureDetection.hasObjectFit?(r.elementName="img",r.defaultStyles=_objectSpread2(_objectSpread2({},r.defaultStyles),{},{position:"relative","background-color":"#000","object-fit":"contain",height:"100%",width:"100%",transform:"translateZ(0)",opacity:0})):(r.wrapperElementName="div",r.elementName="img",r.defaultStyles=_objectSpread2(_objectSpread2({},r.defaultStyles),{},{"background-color":"#000",height:"100%",width:"100%","text-align":"center",transform:"translateZ(0)",opacity:0})),r.element=r.root(e,t),r.attachRef(e),r}return _createClass(u,[{key:"root",value:function(e){var t=this.elementName;if(this.wrapperElementName){var r=this.wrapperElementName;return jsx(r,{ref:createRef(this,"wrapper"),styles:convertLayerStylesToStyleMap(this.defaultStyles)},jsx(t,{src:e.src,ref:createRef(this,"infographic"),styles:convertLayerStylesToStyleMap({height:"100%",width:"initial",margin:"0 auto",right:"0px"})}))}return jsx(t,{styles:convertLayerStylesToStyleMap(this.defaultStyles),src:e.src})}},{key:"update",value:function(e,t){var r=this,i=e.styles,n=e.src,a=e.imageScale,s=e.imagePositionX,o=e.imagePositionY,l=(_objectWithoutProperties(e,_excluded$c),t.measurements.aspectRatioPercent),t=a&&null!=s&&null!=o;t&&this.defaultStyles["background-color"]?delete this.defaultStyles["background-color"]:t||this.defaultStyles["background-color"]||(this.defaultStyles["background-color"]="#000"),this.wrapperElementName?this.refs.wrapper.element.setAttribute("style",convertStyleMapToInlineStyles(convertLayerStylesToStyleMap(_objectSpread2({},i),this.defaultStyles))):t?(t=function(){var e=r.element.naturalWidth*a*l||i.width.value,t=r.element.naturalHeight*a*l||i.height.value,t=_objectSpread2(_objectSpread2({},i),{},{width:{value:e,unit:i.width.unit},height:{value:t,unit:i.height.unit},left:{value:s*l,unit:"px"},top:{value:o*l,unit:"px"}});_get(_getPrototypeOf(u.prototype),"update",r).call(r,{styles:t,src:n})},0===this.element.naturalWidth?(this.element.onload=t,this.element.src=n):t()):_get(_getPrototypeOf(u.prototype),"update",this).call(this,{styles:i,src:n})}}]),u}(),InfographicLayer$1=createFactory(InfographicLayer),_excluded$d=["height","width","left","top","position","transform","opacity"],_excluded2=["textPadding","background-color","border-radius"],TextLayer=function(){_inherits(n,Layer);var r=_createSuper(n);function n(e){var t;return _classCallCheck(this,n),(t=r.call(this)).elementName="p",t.create(e),t}return _createClass(n,[{key:"getStyles",value:function(e){var t=e.height,r=e.width,i=e.left,n=e.top,a=e.position,s=e.transform,o=e.opacity,l=_objectWithoutProperties(e,_excluded$d),e=null;l["text-align"]&&("left"===l["text-align"]?e="flex-start":"center"===l["text-align"]?e=l["text-align"]:"right"===l["text-align"]&&(e="flex-end"));var a=omitNullProps({height:t,width:r,left:i,top:n,position:a,transform:s,opacity:o,"z-index":l["z-index"],"will-change":l["will-change"],display:e?"inline-flex":null,"justify-content":e}),u=l.textPadding,s=l["background-color"],o=l["border-radius"],e=_objectWithoutProperties(l,_excluded2),c=null;if(u)switch(u.values.length){case 1:case 2:c={unit:"px",values:[u.values[0],0,u.values[0],0]};break;default:c={unit:"px",values:[u.values[0],0,u.values[2],0]}}return{wrapperStyles:a,pStyles:omitNullProps(_objectSpread2(_objectSpread2({"line-height":"normal"},e),{},{"will-change":null,"box-shadow":l["background-color"]?l["box-shadow"]:null,overflow:"hidden",padding:c})),spanStyles:omitNullProps({"text-shadow":l["background-color"]?null:l["box-shadow"],"-webkit-box-decoration-break":"clone","box-decoration-break":"clone",padding:u,"background-color":s,"border-radius":o})}}},{key:"root",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.id=e.id;var r=this.getStyles(e.styles),i=r.wrapperStyles,n=r.pStyles,r=r.spanStyles,n=jsx("p",{styles:convertLayerStylesToStyleMap(n,this.defaultStyles),ref:createRef(this,"p")},jsx("span",{id:"".concat(e.id,".span"),styles:convertLayerStylesToStyleMap(r),textContent:"".concat(e.textValue," ")||"",ref:createRef(this,"span")})),r=e.trigger?e.triggerEventListeners:e.link?e.linkEventListeners:null;return jsx("div",{id:e.id,styles:convertLayerStylesToStyleMap(i,this.defaultStyles),attributes:t,eventListeners:r},n)}},{key:"applyStyles",value:function(e,t,r){var i=this.getStyles(e),n=i.wrapperStyles,a=i.pStyles,e=i.spanStyles,i=t||r?{cursor:"pointer"}:{};this.element.setAttribute("style",convertStyleMapToInlineStyles(convertLayerStylesToStyleMap(_objectSpread2(_objectSpread2({},n),i),this.defaultStyles))),this.refs.p.getElement().setAttribute("style",convertStyleMapToInlineStyles(convertLayerStylesToStyleMap(a,this.defaultStyles))),t&&((a="string"==typeof t)||"OPEN"===t.action?(this.element.setAttribute("data-href",a?t:t.url),this.element.setAttribute("data-method",a?"LEGACY":t.action),this.element.setAttribute("data-layer-id",this.id)):(this.element.setAttribute("data-href",t.url),this.element.setAttribute("data-method",t.action),this.element.setAttribute("data-params",t.requestParameters),this.element.setAttribute("data-headers",t.headers?JSON.stringify(t.headers):void 0))),r&&(this.element.setAttribute("data-triggerevent",r.event),this.element.setAttribute("data-triggerstate",r.applyState)),(t||r)&&this.element.setAttribute("data-layer-id",this.id),this.refs.span.getElement().setAttribute("style",convertStyleMapToInlineStyles(convertLayerStylesToStyleMap(e)))}},{key:"update",value:function(e){var t=e.styles,r=e.textValue,i=e.link,e=e.trigger;_get(_getPrototypeOf(n.prototype),"update",this).call(this,{styles:t,link:i,trigger:e}),r!==this.refs.span.getElement().textContent&&(this.refs.span.getElement().textContent="".concat(r," "))}}]),n}(),TextLayer$1=createFactory(TextLayer),_excluded$e=["styles","src","absoluteBeginTime","absoluteEndTime","onChangeLoadState","audioDisabled"],VideoLayer=function(){_inherits(i,Layer);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).elementName="video",t.props=e,t.videoReady=!1,t.onChangeLoadState=null,t.shouldFixTime=!0,t}return _createClass(i,[{key:"getType",value:function(){return VIDEO}},{key:"root",value:function(e){return jsx("video",{ref:createRef(this,"video"),styles:{display:"none",width:"100%",position:"absolute",top:0,left:0,right:0,bottom:0,inset:0},controls:!1,playsInline:!0,"webkit-playsInline":!0,muted:!0,src:transformVideoSource(e.src)})}},{key:"setTime",value:function(e,t,r){var i=this.element;t<=e&&e<=r&&(i.currentTime=e-t)}},{key:"update",value:function(e,t){e.styles,e.src;var r=e.absoluteBeginTime,i=e.absoluteEndTime,n=e.onChangeLoadState,a=(e.audioDisabled,_objectWithoutProperties(e,_excluded$e),t.currentTime),e=t.currentState,t=(t.muted,this.element);t.muted||(t.muted=!0),this.onChangeLoadState=n,this.videoReady||n(!(this.videoReady=!0));n=r<=a&&a<=i;n&&"none"===t.style.display?t.style.display="block":n||"none"===t.style.display||(t.style.display="none"),e===SEEKING&&(this.setTime(a,r,i),this.shouldFixTime=!0),this.shouldFixTime&&(this.setTime(a,r,i),this.shouldFixTime=!1),e===PLAYING&&t.paused&&n&&2<t.readyState?t.play():(e===PAUSED||e===SEEKING||e===LOADING$1||e===LAYER_LOADING||t.readyState<2)&&!t.paused&&t.pause()}}]),i}(),VideoLayer$1=createFactory(VideoLayer),createLayer$1=function(e){switch(e){case INFOGRAPHIC:return InfographicLayer$1;case IMAGE:return ImageLayer$1;case TEXT:return TextLayer$1;case VIDEO:return VideoLayer$1;default:return BlockLayer$1}},styles$2={root:"styles_root__2UBKF",controlsShowing:"styles_controlsShowing__2XUFE"},LayerContainer=function(){_inherits(i,Container);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).layers={},t.stateBeforeLoad=null,t.videoLayerElementContainerId=e.videoLayerElementContainerId,t}return _createClass(i,[{key:"root",value:function(e){return this.linkEventListeners=e.linkEventListeners,this.triggerEventListeners=e.triggerEventListeners,this.store=e.store,this.videoPlayerEngine=e.videoPlayerEngine,jsx("div",{className:styles$2.root})}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({layers:t.store.layers,imageMap:t.store.imageMap,measurements:t.store.measurements,controls:t.store.controls,currentTime:t.store.currentTime,absoluteBumperBeginTime:t.store.absoluteBumperBeginTime,showSubtitles:t.store.showSubtitles,isFullScreen:t.store.isFullScreen,muted:t.store.muted,currentState:t.store.currentState,previousState:t.store.previousState})},autorunConfig)}},{key:"update",value:function(e){var o,l,u=this,t=e.layers,c=e.imageMap,h=e.measurements,d=e.currentTime,f=e.showSubtitles,r=e.controls,p=e.muted,m=e.isFullScreen,g=e.currentState,y=e.previousState,v=!1;t&&(o=new DocumentFragment,l=new DocumentFragment,this.layers=Object.entries(t).reduce(function(e,t){var r=_slicedToArray(t,2),i=r[0],n=r[1];if(!n||!f&&n.parentType===SUBTITLE)return e;var a=n.parentType===INFOGRAPHIC?INFOGRAPHIC:n.type,s=null,t=function(e){var t=Date.now()-1e3*d;u.store.currentState!==LAYER_LOADING&&e?(u.stateBeforeLoad=g!==LAYER_LOADING?g:u.stateBeforeLoad,u.store.update({state:LAYER_LOADING,startTime:t})):u.store.currentState!==LAYER_LOADING||e||u.store.update({state:u.stateBeforeLoad,startTime:t})},r=!1;return i in u.layers?(s=u.layers[i],"video"===a&&(v=!0),a!==s.getType()&&(r=!0,s=createLayer$1(a)(_objectSpread2(_objectSpread2({},n),{},{linkEventListeners:u.linkEventListeners,triggerEventListeners:u.triggerEventListeners,id:i,src:u.getAbsoluteAssetSrc(c,n.src),onChangeLoadState:t,currentTime:d,store:u.store,videoPlayerEngine:u.videoPlayerEngine}),{imageMap:c,measurements:h}))):(r=!0,s=createLayer$1(a)(_objectSpread2(_objectSpread2({},n),{},{linkEventListeners:u.linkEventListeners,triggerEventListeners:u.triggerEventListeners,id:i,src:u.getAbsoluteAssetSrc(c,n.src),onChangeLoadState:t,currentTime:d,store:u.store,videoPlayerEngine:u.videoPlayerEngine}),{imageMap:c,measurements:h})),s.update(_objectSpread2(_objectSpread2({},n),{},{src:u.getAbsoluteAssetSrc(c,n.src),onChangeLoadState:t,currentTime:d,store:u.store,videoPlayerEngine:u.videoPlayerEngine}),{imageMap:c,measurements:h,isFullScreen:m,currentTime:d,currentState:g,previousState:y,muted:p}),"video"===s.type&&r?l.appendChild(s.getElement()):"video"!==s.type&&o.appendChild(s.getElement()),_objectSpread2(_objectSpread2({},e),{},_defineProperty({},i,s))},{}),this.element.innerHTML="",this.addElementToSelf(o),t=document.getElementById(this.videoLayerElementContainerId),0<l.childElementCount&&t?(t.innerHTML="",this.addElementToTarget(l,t)):!v&&t&&(t.innerHTML="")),r.showControls&&!this.element.classList.contains(styles$2.controlsShowing)?this.element.classList.add(styles$2.controlsShowing):!r.showControls&&this.element.classList.contains(styles$2.controlsShowing)&&this.element.classList.remove(styles$2.controlsShowing)}},{key:"getAbsoluteAssetSrc",value:function(e,t){return e&&t&&e[t]?e[t].url:t}}]),i}(),LayerContainer$1=createFactory(LayerContainer),classnames=createCommonjsModule(function(e){function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"==i||"number"==i)e.push(r);else if(Array.isArray(r)&&r.length){var n=s.apply(null,r);n&&e.push(n)}else if("object"==i)for(var a in r)o.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var o;o={}.hasOwnProperty,e.exports?(s.default=s,e.exports=s):window.classNames=s}),styles$3={handle:"styles_handle__342EU",handleHover:"styles_handleHover__13ddH",innerProgressBar:"styles_innerProgressBar__17mj_",progressBar:"styles_progressBar__3NvWY",mobile:"styles_mobile__3J9BG",progressBarContainer:"styles_progressBarContainer__1x6ob",progressBarHover:"styles_progressBarHover__xIS4R"},InnerProgressBar=function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$3.innerProgressBar})}},{key:"update",value:function(e){this.element.style.width=e}}]),t}(),InnerProgressBar$1=createFactory(InnerProgressBar),Handle=function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$3.handle})}},{key:"update",value:function(e){this.element.style.left=e}}]),t}(),Handle$1=createFactory(Handle),_excluded$f=["eventListeners"],ProgressBar=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$f);return _classCallCheck(this,i),(e=r.call(this,e)).attachListeners({eventListeners:t(e.refs.progressBar.getElement(),e.addHoverClass.bind(_assertThisInitialized(e)),e.removeHoverClass.bind(_assertThisInitialized(e)))}),e}return _createClass(i,[{key:"addHoverClass",value:function(){this.addClass(styles$3.progressBarHover),this.refs.handle.addClass(styles$3.handleHover)}},{key:"removeHoverClass",value:function(){document.body.style.cursor="",this.removeClass(styles$3.progressBarHover),this.refs.handle.removeClass(styles$3.handleHover)}},{key:"root",value:function(){return jsx("div",{className:classnames(styles$3.progressBarContainer,_defineProperty({},styles$3.mobile,browserDetection.isMobileOrTablet))},jsx("div",{className:classnames(styles$3.progressBar,_defineProperty({},styles$3.mobile,browserDetection.isMobileOrTablet)),ref:createRef(this,"progressBar")},jsx(InnerProgressBar$1,{ref:createRef(this,"innerProgressBar")}),jsx(Handle$1,{ref:createRef(this,"handle")})))}},{key:"update",value:function(e){var t=e.currentTime,e=e.duration,e="".concat(t/e*100||0,"%");this.refs.innerProgressBar.update(e),this.refs.handle.update(e)}}]),i}(),ProgressBar$1=createFactory(ProgressBar),getAssetUrl=function(e){return(window.assetUrl?"".concat(window.assetUrl,"/assets/"):"/assets/").concat(e)},Icon=function(){_inherits(a,Component);var n=_createSuper(a);function a(){var e;_classCallCheck(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).src="",e}return _createClass(a,[{key:"root",value:function(e){return this.src=e.src.startsWith("data")?e.src:getAssetUrl(e.src),jsx("img",{src:this.src})}},{key:"setIcon",value:function(e){e=e.startsWith("data")?e:getAssetUrl(e);e!==this.src&&(this.src=e,this.element.src=this.src)}}]),a}(),Icon$1=createFactory(Icon),play="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzNweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgMzMgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5JY29uczQ4eDQ4L1BsYXk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iVmlkZW8tUGxheWVyIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iUGxheWVyLUNvbnRyb2xzLS0tQWR2YW5jZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNjguMDAwMDAwLCAtMTQwLjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiPgogICAgICAgICAgICA8ZyBpZD0idmlkZW8tY29udHJvbHMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Mi4wMDAwMDAsIDEzNi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSI0OHg0OC9QbGF5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4OC4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Imljb24iPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzkuMDUzMzA1NSwyMC44ODgxMjQzIEwxMy4zMzcyODY5LDQuNTUwOTMzNDUgQzExLjAwODI4OSwzLjA2NTczNDI4IDgsNC43NDg5NjAwMSA4LDcuNjIwMzQ1MDcgTDgsNDAuMzkzNzQwMSBDOCw0My4xNjYxMTE5IDExLjAwODI4OSw0NC45NDgzNTA5IDEzLjMzNzI4NjksNDMuNDYzMTUxNyBMMzkuMDUzMzA1NSwyNy4xMjU5NjA5IEM0MS4yODUyNjE4LDI1LjU0MTc0ODQgNDEuMjg1MjYxOCwyMi4yNzQzMTAyIDM5LjA1MzMwNTUsMjAuODg4MTI0MyBaIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",pause="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5BcnRib2FyZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0yLjY0LDIwIEwzNi45NiwyMCBDMzguNDE4MDMxNywyMCAzOS42LDIxLjE5MzkwNzMgMzkuNiwyMi42NjY2NjY3IEwzOS42LDMwLjY2NjY2NjcgQzM5LjYsMzIuMTM5NDI2IDM4LjQxODAzMTcsMzMuMzMzMzMzMyAzNi45NiwzMy4zMzMzMzMzIEwyLjY0LDMzLjMzMzMzMzMgQzEuMTgxOTY4MjYsMzMuMzMzMzMzMyAxLjc4NTU3MzllLTE2LDMyLjEzOTQyNiAwLDMwLjY2NjY2NjcgTDAsMjIuNjY2NjY2NyBDLTEuNzg1NTczOWUtMTYsMjEuMTkzOTA3MyAxLjE4MTk2ODI2LDIwIDIuNjQsMjAgWiBNMi42NCwwIEwzNi45NiwwIEMzOC40MTgwMzE3LDAgMzkuNiwxLjE5MzkwNzMzIDM5LjYsMi42NjY2NjY2NyBMMzkuNiwxMC42NjY2NjY3IEMzOS42LDEyLjEzOTQyNiAzOC40MTgwMzE3LDEzLjMzMzMzMzMgMzYuOTYsMTMuMzMzMzMzMyBMMi42NCwxMy4zMzMzMzMzIEMxLjE4MTk2ODI2LDEzLjMzMzMzMzMgMS43ODU1NzM5ZS0xNiwxMi4xMzk0MjYgMCwxMC42NjY2NjY3IEwwLDIuNjY2NjY2NjcgQy0xLjc4NTU3MzllLTE2LDEuMTkzOTA3MzMgMS4xODE5NjgyNiwwIDIuNjQsMCBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJQYXVzZV8zMHgzMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNi4wMDAwMDAsIDQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcuMTY2NjY3LCAyMC4yMDAwMDApIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTcuMTY2NjY3LCAtMjAuMjAwMDAwKSB0cmFuc2xhdGUoLTIuODMzMzMzLCAzLjIwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9IkNvbG91cnMvQHdoaXRlLUNsaXBwZWQiPgogICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8L21hc2s+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBhdGgtMSI+PC9nPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDb2xvdXJzL0B3aGl0ZSIgbWFzaz0idXJsKCNtYXNrLTIpIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgLTQuMDAwMDAwKSIgaWQ9IlNoYXBlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIzOS42IiBoZWlnaHQ9IjQwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",styles$4={playButton:"styles_playButton__VWtoN"},styles$5={controlsContainer:"styles_controlsContainer__2g9B2",marginReset:"styles_marginReset__QPDpN",paddingReset:"styles_paddingReset__2H-_K",controls:"styles_controls__3kM6u",overlayBackground:"styles_overlayBackground__O_Srx",invisible:"styles_invisible__2uK5s",desktopControls:"styles_desktopControls__1M43E",leftControls:"styles_leftControls__3dZCA",rightControls:"styles_rightControls__ZLEwF",mobileControls:"styles_mobileControls__2nMaQ",mobileLeftControls:"styles_mobileLeftControls__P2KV5",mobileRightControls:"styles_mobileRightControls__5RblY",mobileProgressBarArea:"styles_mobileProgressBarArea__131Uk",fadeIn:"styles_fadeIn__3k3S4",fadeOut:"styles_fadeOut__2jZKR"},_excluded$g=["eventListeners"],buttonIcons={play:play,pause:pause},defaultValue=buttonIcons.play,PlayButton=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$g);return _classCallCheck(this,i),r.call(this,_objectSpread2(_objectSpread2({},e),{},{eventListeners:t()}))}return _createClass(i,[{key:"root",value:function(){return jsx("button",{type:"button",className:classnames(styles$4.playButton,styles$5.marginReset,styles$5.paddingReset,styles$5.controls)},jsx(Icon$1,{src:defaultValue,ref:createRef(this,"icon")}))}},{key:"update",value:function(e){e=e.currentState;this.refs.icon&&this.refs.icon.setIcon(e===PLAYING?buttonIcons.pause:buttonIcons.play)}}]),i}(),PlayButton$1=createFactory(PlayButton),formatTime=function(e,t){if(t){var r=Math.floor(e/60),t=Math.floor(e%60),i=Math.floor(1e3*e-1e3*t);return"".concat(r,":").concat((t<10?"0":"")+t,":").concat(i.toString().padStart(3,"0"))}i=Math.floor(e/60),e=Math.floor(e%60);return"".concat(i,":").concat((e<10?"0":"")+e)},styles$6={timeDisplay:"styles_timeDisplay__wI2fO",currentTime:"styles_currentTime__-6Xh1",duration:"styles_duration__1FWMW"},defaultValue$1={currentTime:"0:00",duration:"0:00"},TimeDisplay=function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$6.timeDisplay},jsx("div",{ref:createRef(this,"currentTime"),className:styles$6.currentTime},defaultValue$1.currentTime)," ",jsx("div",null,"/"),jsx("div",{ref:createRef(this,"duration"),className:styles$6.duration},defaultValue$1.duration))}},{key:"update",value:function(e){var t=e.useTimeInMillis,r=e.currentTime,e=e.duration;this.refs.currentTime.getElement().textContent=formatTime(r,t),this.refs.duration.getElement().textContent=formatTime(e,t)}}]),t}(),TimeDisplay$1=createFactory(TimeDisplay),smallScreenImg="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIyMCIKICBoZWlnaHQ9IjIwIgogIHZpZXdCb3g9IjAgMCAyMCAyMCIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxwYXRoCiAgICBkPSJNMTEuOTA5MSA5QzExLjYzNjQgOSAxMS40NTQ1IDguOTA5MDkgMTEuMjcyNyA4LjcyNzI3QzEwLjkwOTEgOC4zNjM2NCAxMC45MDkxIDcuODE4MTggMTEuMjcyNyA3LjQ1NDU1TDE4LjQ1NDUgMC4yNzI3MjdDMTguODE4MiAtMC4wOTA5MDkxIDE5LjM2MzYgLTAuMDkwOTA5MSAxOS43MjczIDAuMjcyNzI3QzIwLjA5MDkgMC42MzYzNjQgMjAuMDkwOSAxLjE4MTgyIDE5LjcyNzMgMS41NDU0NUwxMi41NDU1IDguNzI3MjdDMTIuMzYzNiA4LjkwOTA5IDEyLjE4MTggOSAxMS45MDkxIDlaIgogICAgZmlsbD0id2hpdGUiCiAgLz4KICA8cGF0aAogICAgZD0iTTAuOTA5MDkxIDIwLjAwMTdDMC42MzYzNjQgMjAuMDAxNyAwLjQ1NDU0NSAxOS45MTA4IDAuMjcyNzI3IDE5LjcyOUMtMC4wOTA5MDkxIDE5LjM2NTQgLTAuMDkwOTA5MSAxOC44MTk5IDAuMjcyNzI3IDE4LjQ1NjNMNy40NTQ1NSAxMS4yNzQ1QzcuODE4MTggMTAuOTEwOCA4LjQ1NDU1IDExLjAwMTcgOC43MjcyNyAxMS4zNjU0QzkgMTEuNzI5IDkgMTIuMTgzNiA4LjcyNzI3IDEyLjU0NzJMMS41NDU0NSAxOS43MjlDMS4zNjM2NCAxOS45MTA4IDEuMTgxODIgMjAuMDAxNyAwLjkwOTA5MSAyMC4wMDE3WiIKICAgIGZpbGw9IndoaXRlIgogIC8+CiAgPHBhdGgKICAgIGQ9Ik04LjE4MTgyIDEyLjgxODJIMC45MDkwOTFDMC4zNjM2MzYgMTIuODE4MiAwIDEyLjQ1NDUgMCAxMS45MDkxQzAgMTEuMzYzNiAwLjM2MzYzNiAxMSAwLjkwOTA5MSAxMUg4LjE4MTgyQzguNzI3MjcgMTEgOS4wOTA5MSAxMS4zNjM2IDkuMDkwOTEgMTEuOTA5MUM5LjA5MDkxIDEyLjQ1NDUgOC43MjcyNyAxMi44MTgyIDguMTgxODIgMTIuODE4MloiCiAgICBmaWxsPSJ3aGl0ZSIKICAvPgogIDxwYXRoCiAgICBkPSJNOC4xODIwNCAyMC4wOTA5QzcuNjM2NTkgMjAuMDkwOSA3LjI3Mjk1IDE5LjcyNzMgNy4yNzI5NSAxOS4xODE4VjExLjkwOTFDNy4yNzI5NSAxMS4zNjM2IDcuNjM2NTkgMTEgOC4xODIwNCAxMUM4LjcyNzQ5IDExIDkuMDkxMTMgMTEuMzYzNiA5LjA5MTEzIDExLjkwOTFWMTkuMTgxOEM5LjA5MTEzIDE5LjcyNzMgOC43Mjc0OSAyMC4wOTA5IDguMTgyMDQgMjAuMDkwOVoiCiAgICBmaWxsPSJ3aGl0ZSIKICAvPgogIDxwYXRoCiAgICBkPSJNMTAuOTA5MSAxMC4wOTA5QzEwLjM2MzYgMTAuMDkwOSAxMCA5LjcyNzI3IDEwIDkuMTgxODJWMS45MDkwOUMxMCAxLjM2MzY0IDEwLjM2MzYgMSAxMC45MDkxIDFDMTEuNDU0NSAxIDExLjgxODIgMS4zNjM2NCAxMS44MTgyIDEuOTA5MDlWOS4xODE4MkMxMS44MTgyIDkuNzI3MjcgMTEuNDU0NSAxMC4wOTA5IDEwLjkwOTEgMTAuMDkwOVoiCiAgICBmaWxsPSJ3aGl0ZSIKICAvPgogIDxwYXRoCiAgICBkPSJNMTguMTgxOCAxMC4wOTE2SDEwLjkwOTFDMTAuMzYzNiAxMC4wOTE2IDEwIDkuNzI3OTggMTAgOS4xODI1M0MxMCA4LjYzNzA3IDEwLjM2MzYgOC4yNzM0NCAxMC45MDkxIDguMjczNDRIMTguMTgxOEMxOC43MjczIDguMjczNDQgMTkuMDkwOSA4LjYzNzA3IDE5LjA5MDkgOS4xODI1M0MxOS4wOTA5IDkuNzI3OTggMTguNzI3MyAxMC4wOTE2IDE4LjE4MTggMTAuMDkxNloiCiAgICBmaWxsPSJ3aGl0ZSIKICAvPgo8L3N2Zz4=",fullScreenImg="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIyMCIKICBoZWlnaHQ9IjIwIgogIHZpZXdCb3g9IjAgMCAyMCAyMCIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGgKICAgICAgZD0iTTExLjkwOTEgOUMxMS42MzY0IDkgMTEuNDU0NSA4LjkwOTA5IDExLjI3MjcgOC43MjcyN0MxMC45MDkxIDguMzYzNjQgMTAuOTA5MSA3LjgxODE4IDExLjI3MjcgNy40NTQ1NUwxOC40NTQ1IDAuMjcyNzI3QzE4LjgxODIgLTAuMDkwOTA5MSAxOS4zNjM2IC0wLjA5MDkwOTEgMTkuNzI3MyAwLjI3MjcyN0MyMC4wOTA5IDAuNjM2MzY0IDIwLjA5MDkgMS4xODE4MiAxOS43MjczIDEuNTQ1NDVMMTIuNTQ1NSA4LjcyNzI3QzEyLjM2MzYgOC45MDkwOSAxMi4xODE4IDkgMTEuOTA5MSA5WiIKICAgICAgZmlsbD0id2hpdGUiCiAgICAvPgogICAgPHBhdGgKICAgICAgZD0iTTAuOTA5MDkxIDIwLjAwMTdDMC42MzYzNjQgMjAuMDAxNyAwLjQ1NDU0NSAxOS45MTA4IDAuMjcyNzI3IDE5LjcyOUMtMC4wOTA5MDkxIDE5LjM2NTQgLTAuMDkwOTA5MSAxOC44MTk5IDAuMjcyNzI3IDE4LjQ1NjNMNy40NTQ1NSAxMS4yNzQ1QzcuODE4MTggMTAuOTEwOCA4LjQ1NDU1IDExLjAwMTcgOC43MjcyNyAxMS4zNjU0QzkgMTEuNzI5IDkgMTIuMTgzNiA4LjcyNzI3IDEyLjU0NzJMMS41NDU0NSAxOS43MjlDMS4zNjM2NCAxOS45MTA4IDEuMTgxODIgMjAuMDAxNyAwLjkwOTA5MSAyMC4wMDE3WiIKICAgICAgZmlsbD0id2hpdGUiCiAgICAvPgogICAgPHBhdGgKICAgICAgZD0iTTE5LjA5MSAxLjgxODE4SDExLjgxODNDMTEuMjcyOCAxLjgxODE4IDEwLjkwOTIgMS40NTQ1NSAxMC45MDkyIDAuOTA5MDkxQzEwLjkwOTIgMC4zNjM2MzYgMTEuMjcyOCAwIDExLjgxODMgMEgxOS4wOTFDMTkuNjM2NSAwIDIwLjAwMDEgMC4zNjM2MzYgMjAuMDAwMSAwLjkwOTA5MUMyMC4wMDAxIDEuNDU0NTUgMTkuNjM2NSAxLjgxODE4IDE5LjA5MSAxLjgxODE4WiIKICAgICAgZmlsbD0id2hpdGUiCiAgICAvPgogICAgPHBhdGgKICAgICAgZD0iTTE5LjA5MDcgOS4wOTA5MUMxOC41NDUzIDkuMDkwOTEgMTguMTgxNiA4LjcyNzI3IDE4LjE4MTYgOC4xODE4MlYwLjkwOTA5MUMxOC4xODE2IDAuMzYzNjM2IDE4LjU0NTMgMCAxOS4wOTA3IDBDMTkuNjM2MiAwIDE5Ljk5OTggMC4zNjM2MzYgMTkuOTk5OCAwLjkwOTA5MVY4LjE4MTgyQzE5Ljk5OTggOC43MjcyNyAxOS42MzYyIDkuMDkwOTEgMTkuMDkwNyA5LjA5MDkxWiIKICAgICAgZmlsbD0id2hpdGUiCiAgICAvPgogICAgPHBhdGgKICAgICAgZD0iTTAuOTA5MDkxIDIwLjAwMTFDMC4zNjM2MzYgMjAuMDAxMSAwIDE5LjYzNzQgMCAxOS4wOTJWMTEuODE5MkMwIDExLjI3MzggMC4zNjM2MzYgMTAuOTEwMiAwLjkwOTA5MSAxMC45MTAyQzEuNDU0NTUgMTAuOTEwMiAxLjgxODE4IDExLjI3MzggMS44MTgxOCAxMS44MTkyVjE5LjA5MkMxLjgxODE4IDE5LjYzNzQgMS40NTQ1NSAyMC4wMDExIDAuOTA5MDkxIDIwLjAwMTFaIgogICAgICBmaWxsPSJ3aGl0ZSIKICAgIC8+CiAgICA8cGF0aAogICAgICBkPSJNOC4xODE4MiAyMC4wMDE4SDAuOTA5MDkxQzAuMzYzNjM2IDIwLjAwMTggMCAxOS42MzgxIDAgMTkuMDkyN0MwIDE4LjU0NzIgMC4zNjM2MzYgMTguMTgzNiAwLjkwOTA5MSAxOC4xODM2SDguMTgxODJDOC43MjcyNyAxOC4xODM2IDkuMDkwOTEgMTguNTQ3MiA5LjA5MDkxIDE5LjA5MjdDOS4wOTA5MSAxOS42MzgxIDguNzI3MjcgMjAuMDAxOCA4LjE4MTgyIDIwLjAwMThaIgogICAgICBmaWxsPSJ3aGl0ZSIKICAgIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0id2hpdGUiIC8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+",styles$7={fullscreenButton:"styles_fullscreenButton__iJhiI",mobile:"styles_mobile__1Y08u"},_excluded$h=["eventListeners"],buttonIcons$1={smallScreen:smallScreenImg,fullScreen:fullScreenImg},defaultValue$2=buttonIcons$1.fullScreen,FullScreenButton=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$h);return _classCallCheck(this,i),r.call(this,_objectSpread2(_objectSpread2({},e),{},{eventListeners:t(),id:"FullScreenButton"}))}return _createClass(i,[{key:"root",value:function(e){return jsx("button",{"data-playerbuttontype":"fullscreen",type:"button",className:classnames(styles$7.fullscreenButton,styles$5.marginReset,styles$5.paddingReset,styles$5.controls,e.isMobileOrTablet?styles$7.mobile:null)},jsx(Icon$1,{src:defaultValue$2,ref:createRef(this,"icon")}))}},{key:"update",value:function(e){this.refs.icon&&this.refs.icon.setIcon(e?buttonIcons$1.smallScreen:buttonIcons$1.fullScreen)}}]),i}(),FullScreenButton$1=createFactory(FullScreenButton),soundOnImg="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzMHB4IiB2aWV3Qm94PSIwIDAgMzAgMzAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT4zMHgzMC9Wb2x1bWUgRW5hYmxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNi4zMDY1MDE1LDAuMTAzNDkyNTk4IEMxNS45NzAwNjg0LC0wLjA2MzIzNDU3MTQgMTUuNTY3ODU0NiwtMC4wMjY0OTEzOCAxNS4yNjc4Nzg0LDAuMTk5MTAzOTEzIEw2LjQ2OTUwMDQzLDYuODE5MTk5NzcgTDEuNTkxMDIzMTcsNi44MTkxOTk3NyBDMC43MTM2ODE4NzUsNi44MTkxOTk3NyAwLDcuNTMxMTQ4NDkgMCw4LjQwNjI2ODU5IEwwLDE1LjU5NDEwNiBDMCwxNi40Njg4MzEgMC43MTM2ODE4NzUsMTcuMTgwNzc5NyAxLjU5MTAyMzE3LDE3LjE4MDc3OTcgTDYuNDY5NTAwNDMsMTcuMTgwNzc5NyBMMTUuMjY3ODc4NCwyMy44MDA0ODA1IEMxNS40NDMwMjk2LDIzLjkzMjQzOTkgMTUuNjUzNDQ4OSwyNCAxNS44NjUwNTY5LDI0IEMxNi4wMTU2Mzk0LDI0IDE2LjE2NjYxODIsMjMuOTY1NjI3MyAxNi4zMDY1MDE1LDIzLjg5NjA5MTggQzE2LjY0MjkzNDUsMjMuNzI4OTY5NiAxNi44NTUzMzUxLDIzLjM4NjgyMzMgMTYuODU1MzM1MSwyMy4wMTIyNzk4IEwxNi44NTUzMzUxLDAuOTg3Njk5NzIgQzE2Ljg1NTMzNTEsMC42MTMxNTYyMjEgMTYuNjQyOTM0NSwwLjI3MDYxNDg1NiAxNi4zMDY1MDE1LDAuMTAzNDkyNTk4IFogTTIwLjA0Njg5MTksNi44NjM0NDk2NCBDMTkuNjU5NzM2Myw2LjQ3Nzg0MzY3IDE5LjAzMjgzNzYsNi40Nzc4NDM2NyAxOC42NDYwNzgyLDYuODYzNDQ5NjQgQzE4LjI1OTMxODksNy4yNDkwNTU2IDE4LjI1ODkyMjcsNy44NzQ0ODAwMyAxOC42NDYwNzgyLDguMjYwNDgxMDkgQzE5LjY0Nzg0ODMsOS4yNTkyNjM3NSAyMC4xOTk4NTIxLDEwLjU4NzE1NDggMjAuMTk5ODUyMSwxMS45OTk1OTQ3IEMyMC4xOTk4NTIxLDEzLjQxMjQyOTYgMTkuNjQ3ODQ4MywxNC43NDAzMjA3IDE4LjY0NjA3ODIsMTUuNzM5MTAzMyBDMTguMjU4OTIyNywxNi4xMjQ3MDkzIDE4LjI1ODkyMjcsMTYuNzUwMTMzNyAxOC42NDYwNzgyLDE3LjEzNTczOTcgQzE4LjgzOTQ1NzksMTcuMzI4NTQyNyAxOS4wOTMwNzA2LDE3LjQyNDk0NDIgMTkuMzQ2NjgzMiwxNy40MjQ5NDQyIEMxOS42MDAyOTU5LDE3LjQyNDk0NDIgMTkuODUzNTEyMywxNy4zMjg1NDI3IDIwLjA0NzI4ODIsMTcuMTM1NzM5NyBDMjEuNDIzOTI5NCwxNS43NjM5OTM5IDIyLjE4MTU5NzIsMTMuOTM5ODcyMiAyMi4xODE1OTcyLDExLjk5OTU5NDcgQzIyLjE4MTIwMSwxMC4wNTkzMTcxIDIxLjQyMzUzMzEsOC4yMzU1OTA1NCAyMC4wNDY4OTE5LDYuODYzNDQ5NjQgWiBNMjIuNzc4Nzc1OCw0LjE0MDEwNzUxIEMyMi4zOTIwMTY1LDMuNzU0MTA2NDUgMjEuNzY0MzI1MSwzLjc1NDEwNjQ1IDIxLjM3Nzk2MjEsNC4xNDAxMDc1MSBDMjAuOTkwODA2NSw0LjUyNTcxMzQ3IDIwLjk5MDgwNjUsNS4xNTExMzc5IDIxLjM3Nzk2MjEsNS41MzY3NDM4NyBDMjMuMTA5NjYxMSw3LjI2MzI3ODc4IDI0LjA2MzA4NjEsOS41NTg3NDA1MiAyNC4wNjMwODYxLDExLjk5OTk4OTggQzI0LjA2MzA4NjEsMTQuNDQxMjM5IDIzLjEwOTY2MTEsMTYuNzM2NzAwNyAyMS4zNzc5NjIxLDE4LjQ2Mjg0MDYgQzIwLjk5MDgwNjUsMTguODQ4NDQ2NSAyMC45OTA4MDY1LDE5LjQ3Mzg3MSAyMS4zNzc5NjIxLDE5Ljg1OTQ3NjkgQzIxLjU3MTM0MTgsMjAuMDUyMjc5OSAyMS44MjQ5NTQ0LDIwLjE0ODY4MTQgMjIuMDc4NTY3MSwyMC4xNDg2ODE0IEMyMi4zMzIxNzk3LDIwLjE0ODY4MTQgMjIuNTg1Mzk2MSwyMC4wNTIyNzk5IDIyLjc3OTE3MjEsMTkuODU5NDc2OSBDMjQuODg0NTUzNCwxNy43NjAzNzQgMjYuMDQ0NDM1LDE0Ljk2OTQ3MTggMjYuMDQ0NDM1LDExLjk5OTk4OTggQzI2LjA0NDQzNSw5LjAzMDUwNzc1IDI0Ljg4NDU1MzQsNi4yMzk2MDU1NiAyMi43Nzg3NzU4LDQuMTQwMTA3NTEgWiBNMjUuNTgwNzk5NCwxLjM0NjA0NDYxIEMyNS4xOTQwNDAxLDAuOTYwMDQzNTU1IDI0LjU2NjM0ODgsMC45NjAwNDM1NTUgMjQuMTc5OTg1NywxLjM0NjA0NDYxIEMyMy43OTI4MzAyLDEuNzMxNjUwNTcgMjMuNzkyODMwMiwyLjM1NzA3NSAyNC4xNzk5ODU3LDIuNzQyNjgwOTcgQzI5LjI5OTM5NSw3Ljg0NjgyMzg3IDI5LjI5OTM5NSwxNi4xNTI3NjA2IDI0LjE3OTk4NTcsMjEuMjU3Mjk4NiBDMjMuNzkyODMwMiwyMS42NDMyOTk2IDIzLjc5MjgzMDIsMjIuMjY4NzI0IDI0LjE3OTk4NTcsMjIuNjUzOTM0OSBDMjQuMzczMzY1NCwyMi44NDY3Mzc5IDI0LjYyNjk3OCwyMi45NDMxMzk0IDI0Ljg4MDU5MDcsMjIuOTQzMTM5NCBDMjUuMTM0MjAzNCwyMi45NDMxMzk0IDI1LjM4NzgxNiwyMi44NDY3Mzc5IDI1LjU4MTU5MTksMjIuNjUzOTM0OSBDMzEuNDcyOTM0OCwxNi43NzkzNzAzIDMxLjQ3MjkzNDgsNy4yMjAyMTQxNyAyNS41ODA3OTk0LDEuMzQ2MDQ0NjEgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IjMweDMwL1ZvbHVtZS1FbmFibGVkIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQ29sb3Vycy9Ad2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAzLjAwMDAwMCkiPgogICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L21hc2s+CiAgICAgICAgICAgIDx1c2UgaWQ9Ik1hc2siIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",soundOffImg="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzMHB4IiB2aWV3Qm94PSIwIDAgMzAgMzAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT4zMHgzMC9Wb2x1bWUgRGlzYWJsZWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMTYuMzA2NTAxNSwwLjEwMzQ5MjU5OCBDMTUuOTcwMDY4NCwtMC4wNjMyMzQ1NzE0IDE1LjU2Nzg1NDYsLTAuMDI2NDkxMzggMTUuMjY3ODc4NCwwLjE5OTEwMzkxMyBMNi40Njk1MDA0Myw2LjgxOTE5OTc3IEwxLjU5MTAyMzE3LDYuODE5MTk5NzcgQzAuNzEzNjgxODc1LDYuODE5MTk5NzcgMCw3LjUzMTE0ODQ5IDAsOC40MDYyNjg1OSBMMCwxNS41OTQxMDYgQzAsMTYuNDY4ODMxIDAuNzEzNjgxODc1LDE3LjE4MDc3OTcgMS41OTEwMjMxNywxNy4xODA3Nzk3IEw2LjQ2OTUwMDQzLDE3LjE4MDc3OTcgTDE1LjI2Nzg3ODQsMjMuODAwNDgwNSBDMTUuNDQzMDI5NiwyMy45MzI0Mzk5IDE1LjY1MzQ0ODksMjQgMTUuODY1MDU2OSwyNCBDMTYuMDE1NjM5NCwyNCAxNi4xNjY2MTgyLDIzLjk2NTYyNzMgMTYuMzA2NTAxNSwyMy44OTYwOTE4IEMxNi42NDI5MzQ1LDIzLjcyODk2OTYgMTYuODU1MzM1MSwyMy4zODY4MjMzIDE2Ljg1NTMzNTEsMjMuMDEyMjc5OCBMMTYuODU1MzM1MSwwLjk4NzY5OTcyIEMxNi44NTUzMzUxLDAuNjEzMTU2MjIxIDE2LjY0MjkzNDUsMC4yNzA2MTQ4NTYgMTYuMzA2NTAxNSwwLjEwMzQ5MjU5OCBaIE0xNC44NzM5ODYyLDIxLjAyOTMzMjcgTDcuMzk3OTYwNTMsMTUuNDA0ODU4OCBDNy4yMjU5Nzk0NSwxNS4yNzUyNjk5IDcuMDE2NzQ5LDE1LjIwNTMzOTMgNi44MDExNzgyNCwxNS4yMDUzMzkzIEwxLjk4MTM0ODksMTUuMjA1MzM5MyBMMS45ODEzNDg5LDguNzk0NjQwMTcgTDYuODAxMTc4MjQsOC43OTQ2NDAxNyBDNy4wMTYzNTI3Myw4Ljc5NDY0MDE3IDcuMjI1OTc5NDUsOC43MjQ3MDk1OCA3LjM5Nzk2MDUzLDguNTk1NTE1NzggTDE0Ljg3Mzk4NjIsMi45NzA2NDY3OSBMMTQuODczOTg2MiwyMS4wMjkzMzI3IFogTTI0LjkxNDIxMzYsMTIgTDI3Ljc0MjY0MDcsMTQuODI4NDI3MSBDMjguMTMzMTY1LDE1LjIxODk1MTQgMjguMTMzMTY1LDE1Ljg1MjExNjQgMjcuNzQyNjQwNywxNi4yNDI2NDA3IEMyNy4zNTIxMTY0LDE2LjYzMzE2NSAyNi43MTg5NTE0LDE2LjYzMzE2NSAyNi4zMjg0MjcxLDE2LjI0MjY0MDcgTDIzLjUsMTMuNDE0MjEzNiBMMjAuNjcxNTcyOSwxNi4yNDI2NDA3IEMyMC4yODEwNDg2LDE2LjYzMzE2NSAxOS42NDc4ODM2LDE2LjYzMzE2NSAxOS4yNTczNTkzLDE2LjI0MjY0MDcgQzE4Ljg2NjgzNSwxNS44NTIxMTY0IDE4Ljg2NjgzNSwxNS4yMTg5NTE0IDE5LjI1NzM1OTMsMTQuODI4NDI3MSBMMjIuMDg1Nzg2NCwxMiBMMTkuMjU3MzU5Myw5LjE3MTU3Mjg4IEMxOC44NjY4MzUsOC43ODEwNDg1OCAxOC44NjY4MzUsOC4xNDc4ODM2IDE5LjI1NzM1OTMsNy43NTczNTkzMSBDMTkuNjQ3ODgzNiw3LjM2NjgzNTAyIDIwLjI4MTA0ODYsNy4zNjY4MzUwMiAyMC42NzE1NzI5LDcuNzU3MzU5MzEgTDIzLjUsMTAuNTg1Nzg2NCBMMjYuMzI4NDI3MSw3Ljc1NzM1OTMxIEMyNi43MTg5NTE0LDcuMzY2ODM1MDIgMjcuMzUyMTE2NCw3LjM2NjgzNTAyIDI3Ljc0MjY0MDcsNy43NTczNTkzMSBDMjguMTMzMTY1LDguMTQ3ODgzNiAyOC4xMzMxNjUsOC43ODEwNDg1OCAyNy43NDI2NDA3LDkuMTcxNTcyODggTDI0LjkxNDIxMzYsMTIgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IjMweDMwL1ZvbHVtZS1EaXNhYmxlZCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkNvbG91cnMvQHdoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgMy4wMDAwMDApIj4KICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICA8dXNlIGlkPSJNYXNrIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8ZyBtYXNrPSJ1cmwoI21hc2stMikiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgaWQ9IlNoYXBlIj4KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAtMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",styles$8={muteButton:"styles_muteButton__3H0Mu",mobile:"styles_mobile__2qidx"},_excluded$i=["eventListeners"],buttonIcons$2={soundOn:soundOnImg,soundOff:soundOffImg},defaultValue$3=buttonIcons$2.soundOn,MuteButton=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$i);return _classCallCheck(this,i),r.call(this,_objectSpread2(_objectSpread2({},e),{},{eventListeners:t()}))}return _createClass(i,[{key:"root",value:function(e){return jsx("button",{type:"button",className:classnames(styles$8.muteButton,styles$5.marginReset,styles$5.paddingReset,styles$5.controls,e.isMobileOrTablet?styles$8.mobile:null)},jsx(Icon$1,{src:defaultValue$3,ref:createRef(this,"icon")}))}},{key:"update",value:function(e){this.refs.icon&&this.refs.icon.setIcon(e?buttonIcons$2.soundOff:buttonIcons$2.soundOn)}}]),i}(),MutedButton=createFactory(MuteButton),styles$9={slider:"styles_slider__Ce65I"},_excluded$j=["eventListeners"],VolumeSlider=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$j);return _classCallCheck(this,i),(e=r.call(this,_objectSpread2(_objectSpread2({},e),{},{eventListeners:t()}))).attachListeners({eventListeners:t(e.refs.volumeSlider.getElement())}),e}return _createClass(i,[{key:"root",value:function(e){return jsx("input",{ref:createRef(this,"volumeSlider"),className:classnames(styles$9.slider,e.isMobileOrTablet?styles$9.mobile:null),type:"range",min:"0",max:"1",step:"0.01"})}},{key:"update",value:function(e){this.element.value=e,this.element.style.backgroundImage="linear-gradient(to right, #ffffff ".concat(100*e,"%, rgba(255, 255, 255, 0.4) 0%)")}}]),i}(),VolumeSlider$1=createFactory(VolumeSlider),subtitles="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzMSIKICBoZWlnaHQ9IjIwIgogIHZpZXdCb3g9IjAgMCAzMSAyMCIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxtYXNrIGlkPSJwYXRoLTEtaW5zaWRlLTEiIGZpbGw9IndoaXRlIj4KICAgIDxwYXRoCiAgICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgICAgY2xpcC1ydWxlPSJldmVub2RkIgogICAgICBkPSJNMiAwQzAuODk1NDMxIDAgMCAwLjg5NTQzMSAwIDJWMThDMCAxOS4xMDQ2IDAuODk1NDMgMjAgMiAyMEgyOC41NDU1QzI5LjY1IDIwIDMwLjU0NTUgMTkuMTA0NiAzMC41NDU1IDE4VjJDMzAuNTQ1NSAwLjg5NTQzMSAyOS42NSAwIDI4LjU0NTUgMEgyWk0xMS41OTg5IDcuODk0NTNDMTAuNjMyMSA3Ljg5NDUzIDEwLjA4MTMgOC42NDQ1MyAxMC4wODEzIDEwLjAyMTVWMTAuODc3QzEwLjA4MTMgMTIuMjM2MyAxMC42MzIxIDEyLjk4MDUgMTEuNTk4OSAxMi45ODA1QzEyLjQ3MTkgMTIuOTgwNSAxMi45OTM0IDEyLjM1OTQgMTIuOTk5MyAxMS41MTU2SDE0Ljg1MDlWMTEuNzVDMTQuODUwOSAxMy40NDM0IDEzLjQ3OTggMTQuNTgwMSAxMS41ODEzIDE0LjU4MDFDOS4zNTQ3NiAxNC41ODAxIDguMTA2NzEgMTMuMTQ0NSA4LjEwNjcxIDEwLjg2NTJWMTAuMDIxNUM4LjEwNjcxIDcuNzMwNDcgOS4zNTQ3NiA2LjI5NDkyIDExLjU4MTMgNi4yOTQ5MkMxMy40ODU2IDYuMjk0OTIgMTQuODUwOSA3LjQ0MzM2IDE0Ljg1MDkgOS4xNzE4OFY5LjQwMDM5SDEyLjk5OTNDMTIuOTkzNCA4LjUyNzM0IDEyLjQ3MTkgNy44OTQ1MyAxMS41OTg5IDcuODk0NTNaTTE5LjIxNjEgNy44OTQ1M0MxOC4yNDkzIDcuODk0NTMgMTcuNjk4NSA4LjY0NDUzIDE3LjY5ODUgMTAuMDIxNVYxMC44NzdDMTcuNjk4NSAxMi4yMzYzIDE4LjI0OTMgMTIuOTgwNSAxOS4yMTYxIDEyLjk4MDVDMjAuMDg5MSAxMi45ODA1IDIwLjYxMDYgMTIuMzU5NCAyMC42MTY1IDExLjUxNTZIMjIuNDY4VjExLjc1QzIyLjQ2OCAxMy40NDM0IDIxLjA5NjkgMTQuNTgwMSAxOS4xOTg1IDE0LjU4MDFDMTYuOTcxOSAxNC41ODAxIDE1LjcyMzkgMTMuMTQ0NSAxNS43MjM5IDEwLjg2NTJWMTAuMDIxNUMxNS43MjM5IDcuNzMwNDcgMTYuOTcxOSA2LjI5NDkyIDE5LjE5ODUgNi4yOTQ5MkMyMS4xMDI4IDYuMjk0OTIgMjIuNDY4IDcuNDQzMzYgMjIuNDY4IDkuMTcxODhWOS40MDAzOUgyMC42MTY1QzIwLjYxMDYgOC41MjczNCAyMC4wODkxIDcuODk0NTMgMTkuMjE2MSA3Ljg5NDUzWiIKICAgIC8+CiAgPC9tYXNrPgogIDxwYXRoCiAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICBjbGlwLXJ1bGU9ImV2ZW5vZGQiCiAgICBkPSJNMiAwQzAuODk1NDMxIDAgMCAwLjg5NTQzMSAwIDJWMThDMCAxOS4xMDQ2IDAuODk1NDMgMjAgMiAyMEgyOC41NDU1QzI5LjY1IDIwIDMwLjU0NTUgMTkuMTA0NiAzMC41NDU1IDE4VjJDMzAuNTQ1NSAwLjg5NTQzMSAyOS42NSAwIDI4LjU0NTUgMEgyWk0xMS41OTg5IDcuODk0NTNDMTAuNjMyMSA3Ljg5NDUzIDEwLjA4MTMgOC42NDQ1MyAxMC4wODEzIDEwLjAyMTVWMTAuODc3QzEwLjA4MTMgMTIuMjM2MyAxMC42MzIxIDEyLjk4MDUgMTEuNTk4OSAxMi45ODA1QzEyLjQ3MTkgMTIuOTgwNSAxMi45OTM0IDEyLjM1OTQgMTIuOTk5MyAxMS41MTU2SDE0Ljg1MDlWMTEuNzVDMTQuODUwOSAxMy40NDM0IDEzLjQ3OTggMTQuNTgwMSAxMS41ODEzIDE0LjU4MDFDOS4zNTQ3NiAxNC41ODAxIDguMTA2NzEgMTMuMTQ0NSA4LjEwNjcxIDEwLjg2NTJWMTAuMDIxNUM4LjEwNjcxIDcuNzMwNDcgOS4zNTQ3NiA2LjI5NDkyIDExLjU4MTMgNi4yOTQ5MkMxMy40ODU2IDYuMjk0OTIgMTQuODUwOSA3LjQ0MzM2IDE0Ljg1MDkgOS4xNzE4OFY5LjQwMDM5SDEyLjk5OTNDMTIuOTkzNCA4LjUyNzM0IDEyLjQ3MTkgNy44OTQ1MyAxMS41OTg5IDcuODk0NTNaTTE5LjIxNjEgNy44OTQ1M0MxOC4yNDkzIDcuODk0NTMgMTcuNjk4NSA4LjY0NDUzIDE3LjY5ODUgMTAuMDIxNVYxMC44NzdDMTcuNjk4NSAxMi4yMzYzIDE4LjI0OTMgMTIuOTgwNSAxOS4yMTYxIDEyLjk4MDVDMjAuMDg5MSAxMi45ODA1IDIwLjYxMDYgMTIuMzU5NCAyMC42MTY1IDExLjUxNTZIMjIuNDY4VjExLjc1QzIyLjQ2OCAxMy40NDM0IDIxLjA5NjkgMTQuNTgwMSAxOS4xOTg1IDE0LjU4MDFDMTYuOTcxOSAxNC41ODAxIDE1LjcyMzkgMTMuMTQ0NSAxNS43MjM5IDEwLjg2NTJWMTAuMDIxNUMxNS43MjM5IDcuNzMwNDcgMTYuOTcxOSA2LjI5NDkyIDE5LjE5ODUgNi4yOTQ5MkMyMS4xMDI4IDYuMjk0OTIgMjIuNDY4IDcuNDQzMzYgMjIuNDY4IDkuMTcxODhWOS40MDAzOUgyMC42MTY1QzIwLjYxMDYgOC41MjczNCAyMC4wODkxIDcuODk0NTMgMTkuMjE2MSA3Ljg5NDUzWiIKICAgIGZpbGw9IndoaXRlIgogIC8+CiAgPHBhdGgKICAgIGQ9Ik0xMi45OTkzIDExLjUxNTZWMTAuMDE1NkgxMS41MDk3TDExLjQ5OTMgMTEuNTA1MkwxMi45OTkzIDExLjUxNTZaTTE0Ljg1MDkgMTEuNTE1NkgxNi4zNTA5VjEwLjAxNTZIMTQuODUwOVYxMS41MTU2Wk0xNC44NTA5IDkuNDAwMzlWMTAuOTAwNEgxNi4zNTA5VjkuNDAwMzlIMTQuODUwOVpNMTIuOTk5MyA5LjQwMDM5TDExLjQ5OTMgOS40MTA0NkwxMS41MDkzIDEwLjkwMDRIMTIuOTk5M1Y5LjQwMDM5Wk0yMC42MTY1IDExLjUxNTZWMTAuMDE1NkgxOS4xMjY5TDE5LjExNjUgMTEuNTA1MkwyMC42MTY1IDExLjUxNTZaTTIyLjQ2OCAxMS41MTU2SDIzLjk2OFYxMC4wMTU2SDIyLjQ2OFYxMS41MTU2Wk0yMi40NjggOS40MDAzOVYxMC45MDA0SDIzLjk2OFY5LjQwMDM5SDIyLjQ2OFpNMjAuNjE2NSA5LjQwMDM5TDE5LjExNjUgOS40MTA0NkwxOS4xMjY1IDEwLjkwMDRIMjAuNjE2NVY5LjQwMDM5Wk0xLjUgMkMxLjUgMS43MjM4NiAxLjcyMzg2IDEuNSAyIDEuNVYtMS41QzAuMDY3MDAzMSAtMS41IC0xLjUgMC4wNjcwMDQzIC0xLjUgMkgxLjVaTTEuNSAxOFYySC0xLjVWMThIMS41Wk0yIDE4LjVDMS43MjM4NiAxOC41IDEuNSAxOC4yNzYxIDEuNSAxOEgtMS41Qy0xLjUgMTkuOTMzIDAuMDY3MDAzMSAyMS41IDIgMjEuNVYxOC41Wk0yOC41NDU1IDE4LjVIMlYyMS41SDI4LjU0NTVWMTguNVpNMjkuMDQ1NSAxOEMyOS4wNDU1IDE4LjI3NjEgMjguODIxNiAxOC41IDI4LjU0NTUgMTguNVYyMS41QzMwLjQ3ODQgMjEuNSAzMi4wNDU1IDE5LjkzMyAzMi4wNDU1IDE4SDI5LjA0NTVaTTI5LjA0NTUgMlYxOEgzMi4wNDU1VjJIMjkuMDQ1NVpNMjguNTQ1NSAxLjVDMjguODIxNiAxLjUgMjkuMDQ1NSAxLjcyMzg2IDI5LjA0NTUgMkgzMi4wNDU1QzMyLjA0NTUgMC4wNjcwMDM5IDMwLjQ3ODUgLTEuNSAyOC41NDU1IC0xLjVWMS41Wk0yIDEuNUgyOC41NDU1Vi0xLjVIMlYxLjVaTTExLjU4MTMgMTAuMDIxNUMxMS41ODEzIDkuNzczNjggMTEuNjA2NSA5LjU5NTYzIDExLjYzNjcgOS40NzU5NkMxMS42NjY5IDkuMzU2NjQgMTEuNjk2OSA5LjMxNTIxIDExLjY5NTUgOS4zMTcyNkMxMS42ODk1IDkuMzI1NjMgMTEuNjYxNiA5LjM1Njg4IDExLjYxMzQgOS4zODA0OEMxMS41Njg1IDkuNDAyNDYgMTEuNTUzNSA5LjM5NDUzIDExLjU5ODkgOS4zOTQ1M1Y2LjM5NDUzQzEwLjY3NTEgNi4zOTQ1MyA5LjgyMzg4IDYuNzgxMjQgOS4yNTk2NSA3LjU2NjA0QzguNzQ3MDQgOC4yNzkwNCA4LjU4MTMyIDkuMTY2NTIgOC41ODEzMiAxMC4wMjE1SDExLjU4MTNaTTExLjU4MTMgMTAuODc3VjEwLjAyMTVIOC41ODEzMlYxMC44NzdIMTEuNTgxM1pNMTEuNTk4OSAxMS40ODA1QzExLjU1MTggMTEuNDgwNSAxMS41NjUgMTEuNDcyMiAxMS42MDg2IDExLjQ5MzRDMTEuNjU1NiAxMS41MTYyIDExLjY4NCAxMS41NDcgMTEuNjkxMiAxMS41NTdDMTEuNjkzOSAxMS41NjA3IDExLjY2NTEgMTEuNTIyMyAxMS42MzU3IDExLjQwNzRDMTEuNjA2MiAxMS4yOTIxIDExLjU4MTMgMTEuMTE5IDExLjU4MTMgMTAuODc3SDguNTgxMzJDOC41ODEzMiAxMS43MjY0IDguNzQ4MzMgMTIuNjEwMSA5LjI2MzkyIDEzLjMyQzkuODMwMDkgMTQuMDk5NSAxMC42ODAyIDE0LjQ4MDUgMTEuNTk4OSAxNC40ODA1VjExLjQ4MDVaTTExLjQ5OTMgMTEuNTA1MkMxMS40OTg5IDExLjU2MzcgMTEuNDg5NyAxMS41OTE2IDExLjQ4ODYgMTEuNTk0N0MxMS40ODc5IDExLjU5NjYgMTEuNDk1MiAxMS41NzYyIDExLjUyMTEgMTEuNTQ4MUMxMS41MzM2IDExLjUzNDUgMTEuNTQ4NCAxMS41MjE1IDExLjU2NDggMTEuNTFDMTEuNTgxMiAxMS40OTg1IDExLjU5NjcgMTEuNDkwNSAxMS42MDkzIDExLjQ4NTJDMTEuNjM2MyAxMS40NzQgMTEuNjM3OSAxMS40ODA1IDExLjU5ODkgMTEuNDgwNVYxNC40ODA1QzEyLjQxMTkgMTQuNDgwNSAxMy4xNzU1IDE0LjE3OTkgMTMuNzI3NCAxMy41ODA4QzE0LjI2NDcgMTIuOTk3NyAxNC40OTQyIDEyLjI1IDE0LjQ5OTMgMTEuNTI2TDExLjQ5OTMgMTEuNTA1MlpNMTQuODUwOSAxMC4wMTU2SDEyLjk5OTNWMTMuMDE1NkgxNC44NTA5VjEwLjAxNTZaTTE2LjM1MDkgMTEuNzVWMTEuNTE1NkgxMy4zNTA5VjExLjc1SDE2LjM1MDlaTTExLjU4MTMgMTYuMDgwMUMxMi44MjMyIDE2LjA4MDEgMTQuMDA1NSAxNS43MDcxIDE0LjkwMjYgMTQuOTQwM0MxNS44MTg2IDE0LjE1NzMgMTYuMzUwOSAxMy4wMzIgMTYuMzUwOSAxMS43NUgxMy4zNTA5QzEzLjM1MDkgMTIuMTYxMyAxMy4xOTc2IDEyLjQ1MTEgMTIuOTUzNCAxMi42NTk4QzEyLjY5MDMgMTIuODg0NyAxMi4yMzc4IDEzLjA4MDEgMTEuNTgxMyAxMy4wODAxVjE2LjA4MDFaTTYuNjA2NzEgMTAuODY1MkM2LjYwNjcxIDEyLjI2ODIgNi45OTI3NCAxMy41OTc5IDcuOTAzNDggMTQuNTkxMkM4LjgzMDk5IDE1LjYwMjcgMTAuMTMzMiAxNi4wODAxIDExLjU4MTMgMTYuMDgwMVYxMy4wODAxQzEwLjgwMjkgMTMuMDgwMSAxMC4zNjc4IDEyLjgzOTcgMTAuMTE0NiAxMi41NjM2QzkuODQ0NyAxMi4yNjkzIDkuNjA2NzEgMTEuNzQxNSA5LjYwNjcxIDEwLjg2NTJINi42MDY3MVpNNi42MDY3MSAxMC4wMjE1VjEwLjg2NTJIOS42MDY3MVYxMC4wMjE1SDYuNjA2NzFaTTExLjU4MTMgNC43OTQ5MkMxMC4xMzMxIDQuNzk0OTIgOC44MzAxMSA1LjI3MjQ2IDcuOTAyMzMgNi4yODY1N0M2Ljk5MTc2IDcuMjgxODcgNi42MDY3MSA4LjYxNDQ1IDYuNjA2NzEgMTAuMDIxNUg5LjYwNjcxQzkuNjA2NzEgOS4xMzc1IDkuODQ1NjkgOC42MDY4IDEwLjExNTggOC4zMTE1OEMxMC4zNjg3IDguMDM1MTYgMTAuODAzIDcuNzk0OTIgMTEuNTgxMyA3Ljc5NDkyVjQuNzk0OTJaTTE2LjM1MDkgOS4xNzE4OEMxNi4zNTA5IDcuODg0NTkgMTUuODI5NyA2Ljc0ODIgMTQuOTEzOCA1Ljk1MjcxQzE0LjAxNTggNS4xNzI3NSAxMi44MjkyIDQuNzk0OTIgMTEuNTgxMyA0Ljc5NDkyVjcuNzk0OTJDMTIuMjM3NyA3Ljc5NDkyIDEyLjY4NTkgNy45OTEzMSAxMi45NDY2IDguMjE3N0MxMy4xODk0IDguNDI4NTYgMTMuMzUwOSA4LjczMDY1IDEzLjM1MDkgOS4xNzE4OEgxNi4zNTA5Wk0xNi4zNTA5IDkuNDAwMzlWOS4xNzE4OEgxMy4zNTA5VjkuNDAwMzlIMTYuMzUwOVpNMTIuOTk5MyAxMC45MDA0SDE0Ljg1MDlWNy45MDAzOUgxMi45OTkzVjEwLjkwMDRaTTExLjU5ODkgOS4zOTQ1M0MxMS42MzQzIDkuMzk0NTMgMTEuNjI4OSA5LjQwMDQ1IDExLjU5ODcgOS4zODc2M0MxMS41ODQ1IDkuMzgxNjEgMTEuNTY4MiA5LjM3MjggMTEuNTUxNCA5LjM2MDc5QzExLjUzNDcgOS4zNDg4MSAxMS41MjAzIDkuMzM1NjUgMTEuNTA4NiA5LjMyMjY3QzExLjQ4NDUgOS4yOTU4NSAxMS40ODA2IDkuMjc5NTcgMTEuNDg0MSA5LjI4OTY3QzExLjQ4OCA5LjMwMDg5IDExLjQ5ODggOS4zMzkyNCAxMS40OTkzIDkuNDEwNDZMMTQuNDk5MyA5LjM5MDMyQzE0LjQ5NDQgOC42NjQ0MSAxNC4yNzI1IDcuOTEwMDQgMTMuNzQgNy4zMTc0N0MxMy4xOSA2LjcwNTQgMTIuNDIxNyA2LjM5NDUzIDExLjU5ODkgNi4zOTQ1M1Y5LjM5NDUzWk0xOS4xOTg1IDEwLjAyMTVDMTkuMTk4NSA5Ljc3MzY4IDE5LjIyMzYgOS41OTU2MyAxOS4yNTM5IDkuNDc1OTZDMTkuMjg0MSA5LjM1NjY0IDE5LjMxNDEgOS4zMTUyMSAxOS4zMTI3IDkuMzE3MjZDMTkuMzA2NiA5LjMyNTYzIDE5LjI3ODggOS4zNTY4OCAxOS4yMzA2IDkuMzgwNDhDMTkuMTg1NyA5LjQwMjQ2IDE5LjE3MDcgOS4zOTQ1MyAxOS4yMTYxIDkuMzk0NTNWNi4zOTQ1M0MxOC4yOTIzIDYuMzk0NTMgMTcuNDQxMSA2Ljc4MTI0IDE2Ljg3NjggNy41NjYwNEMxNi4zNjQyIDguMjc5MDQgMTYuMTk4NSA5LjE2NjUyIDE2LjE5ODUgMTAuMDIxNUgxOS4xOTg1Wk0xOS4xOTg1IDEwLjg3N1YxMC4wMjE1SDE2LjE5ODVWMTAuODc3SDE5LjE5ODVaTTE5LjIxNjEgMTEuNDgwNUMxOS4xNjkgMTEuNDgwNSAxOS4xODIyIDExLjQ3MjIgMTkuMjI1OCAxMS40OTM0QzE5LjI3MjggMTEuNTE2MiAxOS4zMDEyIDExLjU0NyAxOS4zMDg0IDExLjU1N0MxOS4zMTExIDExLjU2MDcgMTkuMjgyMyAxMS41MjIzIDE5LjI1MjkgMTEuNDA3NEMxOS4yMjM0IDExLjI5MjEgMTkuMTk4NSAxMS4xMTkgMTkuMTk4NSAxMC44NzdIMTYuMTk4NUMxNi4xOTg1IDExLjcyNjQgMTYuMzY1NSAxMi42MTAxIDE2Ljg4MTEgMTMuMzJDMTcuNDQ3MyAxNC4wOTk1IDE4LjI5NzQgMTQuNDgwNSAxOS4yMTYxIDE0LjQ4MDVWMTEuNDgwNVpNMTkuMTE2NSAxMS41MDUyQzE5LjExNjEgMTEuNTYzNyAxOS4xMDY5IDExLjU5MTYgMTkuMTA1OCAxMS41OTQ3QzE5LjEwNTEgMTEuNTk2NiAxOS4xMTI0IDExLjU3NjIgMTkuMTM4MyAxMS41NDgxQzE5LjE1MDggMTEuNTM0NSAxOS4xNjU2IDExLjUyMTUgMTkuMTgyIDExLjUxQzE5LjE5ODQgMTEuNDk4NSAxOS4yMTM4IDExLjQ5MDUgMTkuMjI2NSAxMS40ODUyQzE5LjI1MzUgMTEuNDc0IDE5LjI1NTEgMTEuNDgwNSAxOS4yMTYxIDExLjQ4MDVWMTQuNDgwNUMyMC4wMjkxIDE0LjQ4MDUgMjAuNzkyNyAxNC4xNzk5IDIxLjM0NDYgMTMuNTgwOEMyMS44ODE5IDEyLjk5NzcgMjIuMTExNCAxMi4yNSAyMi4xMTY0IDExLjUyNkwxOS4xMTY1IDExLjUwNTJaTTIyLjQ2OCAxMC4wMTU2SDIwLjYxNjVWMTMuMDE1NkgyMi40NjhWMTAuMDE1NlpNMjMuOTY4IDExLjc1VjExLjUxNTZIMjAuOTY4VjExLjc1SDIzLjk2OFpNMTkuMTk4NSAxNi4wODAxQzIwLjQ0MDQgMTYuMDgwMSAyMS42MjI3IDE1LjcwNzEgMjIuNTE5OCAxNC45NDAzQzIzLjQzNTggMTQuMTU3MyAyMy45NjggMTMuMDMyIDIzLjk2OCAxMS43NUgyMC45NjhDMjAuOTY4IDEyLjE2MTMgMjAuODE0OCAxMi40NTExIDIwLjU3MDUgMTIuNjU5OEMyMC4zMDc1IDEyLjg4NDcgMTkuODU1IDEzLjA4MDEgMTkuMTk4NSAxMy4wODAxVjE2LjA4MDFaTTE0LjIyMzkgMTAuODY1MkMxNC4yMjM5IDEyLjI2ODIgMTQuNjA5OSAxMy41OTc5IDE1LjUyMDcgMTQuNTkxMkMxNi40NDgyIDE1LjYwMjcgMTcuNzUwNCAxNi4wODAxIDE5LjE5ODUgMTYuMDgwMVYxMy4wODAxQzE4LjQyMDEgMTMuMDgwMSAxNy45ODUgMTIuODM5NyAxNy43MzE4IDEyLjU2MzZDMTcuNDYxOSAxMi4yNjkzIDE3LjIyMzkgMTEuNzQxNSAxNy4yMjM5IDEwLjg2NTJIMTQuMjIzOVpNMTQuMjIzOSAxMC4wMjE1VjEwLjg2NTJIMTcuMjIzOVYxMC4wMjE1SDE0LjIyMzlaTTE5LjE5ODUgNC43OTQ5MkMxNy43NTAzIDQuNzk0OTIgMTYuNDQ3MyA1LjI3MjQ2IDE1LjUxOTUgNi4yODY1N0MxNC42MDg5IDcuMjgxODcgMTQuMjIzOSA4LjYxNDQ1IDE0LjIyMzkgMTAuMDIxNUgxNy4yMjM5QzE3LjIyMzkgOS4xMzc1IDE3LjQ2MjkgOC42MDY4IDE3LjczMyA4LjMxMTU4QzE3Ljk4NTkgOC4wMzUxNiAxOC40MjAyIDcuNzk0OTIgMTkuMTk4NSA3Ljc5NDkyVjQuNzk0OTJaTTIzLjk2OCA5LjE3MTg4QzIzLjk2OCA3Ljg4NDU5IDIzLjQ0NjkgNi43NDgyIDIyLjUzMSA1Ljk1MjcxQzIxLjYzMjkgNS4xNzI3NSAyMC40NDY0IDQuNzk0OTIgMTkuMTk4NSA0Ljc5NDkyVjcuNzk0OTJDMTkuODU0OSA3Ljc5NDkyIDIwLjMwMzEgNy45OTEzMSAyMC41NjM4IDguMjE3N0MyMC44MDY2IDguNDI4NTYgMjAuOTY4IDguNzMwNjUgMjAuOTY4IDkuMTcxODhIMjMuOTY4Wk0yMy45NjggOS40MDAzOVY5LjE3MTg4SDIwLjk2OFY5LjQwMDM5SDIzLjk2OFpNMjAuNjE2NSAxMC45MDA0SDIyLjQ2OFY3LjkwMDM5SDIwLjYxNjVWMTAuOTAwNFpNMTkuMjE2MSA5LjM5NDUzQzE5LjI1MTUgOS4zOTQ1MyAxOS4yNDYgOS40MDA0NSAxOS4yMTU5IDkuMzg3NjNDMTkuMjAxNyA5LjM4MTYxIDE5LjE4NTQgOS4zNzI4IDE5LjE2ODYgOS4zNjA3OUMxOS4xNTE4IDkuMzQ4ODEgMTkuMTM3NCA5LjMzNTY1IDE5LjEyNTggOS4zMjI2N0MxOS4xMDE3IDkuMjk1ODUgMTkuMDk3NyA5LjI3OTU3IDE5LjEwMTMgOS4yODk2N0MxOS4xMDUyIDkuMzAwODkgMTkuMTE2IDkuMzM5MjQgMTkuMTE2NSA5LjQxMDQ2TDIyLjExNjQgOS4zOTAzMkMyMi4xMTE2IDguNjY0NDEgMjEuODg5NyA3LjkxMDA0IDIxLjM1NzIgNy4zMTc0N0MyMC44MDcyIDYuNzA1NCAyMC4wMzg5IDYuMzk0NTMgMTkuMjE2MSA2LjM5NDUzVjkuMzk0NTNaIgogICAgZmlsbD0id2hpdGUiCiAgICBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMSkiCiAgLz4KPC9zdmc+",styles$a={subtitlesButton:"styles_subtitlesButton__36gHZ",hide:"styles_hide__1vXoU",underline:"styles_underline__2NLwu",mobile:"styles_mobile__2m4A8"},_excluded$k=["eventListeners"],SubtitlesButton=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t=e.eventListeners,e=_objectWithoutProperties(e,_excluded$k);return _classCallCheck(this,i),r.call(this,_objectSpread2(_objectSpread2({},e),{},{eventListeners:t()}))}return _createClass(i,[{key:"root",value:function(e){return jsx("button",{type:"button",className:classnames(styles$a.subtitlesButton,styles$5.marginReset,styles$5.paddingReset,styles$5.controls,e.isMobileOrTablet?styles$a.mobile:null)},jsx("div",null),jsx(Icon$1,{src:subtitles,ref:createRef(this,"icon")}))}},{key:"update",value:function(e,t){t?(this.refs.icon&&(e?this.element.firstElementChild.classList.add(styles$a.underline):this.element.firstElementChild.classList.remove(styles$a.underline)),this.element.classList.remove(styles$a.hide)):this.element.classList.add(styles$a.hide)}}]),i}(),SubtitlesButton$1=createFactory(SubtitlesButton),styles$b={mobileTimeDisplay:"styles_mobileTimeDisplay__3S9KD",currentTime:"styles_currentTime__2ONLS",duration:"styles_duration__oryZ_"},defaultValue$4={currentTime:"0:00",duration:"0:00"},MobileTimeDisplay=function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$b.mobileTimeDisplay},jsx("div",{ref:createRef(this,"currentTime"),className:styles$b.currentTime},defaultValue$4.currentTime),jsx("div",null,"/"),jsx("div",{ref:createRef(this,"duration"),className:styles$b.duration},defaultValue$4.duration))}},{key:"update",value:function(e){var t=e.useTimeInMillis,r=e.currentTime,e=e.duration;this.refs.currentTime.getElement().textContent=formatTime(r,t),this.refs.duration.getElement().textContent=formatTime(e,t)}}]),t}(),MobileTimeDisplay$1=createFactory(MobileTimeDisplay),Controls$1=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"setupControlRestrictions",value:function(e){this.allowPlay=e.allowPlay,this.allowMute=e.allowMute,this.allowTime=e.allowTime,this.allowProgress=e.allowProgress,this.allowSubtitles=e.allowSubtitles,this.allowFS=e.allowFS,this.allowVolume=e.allowVolume}},{key:"root",value:function(e){var t=this;this.setupControlRestrictions(e.controlCapabilities);var r,i;return jsx("div",{className:classnames(styles$5.controlsContainer,e.overlayControlsBackground?styles$5.overlayBackground:null),eventListeners:e.eventListeners.container()},browserDetection.isMobileOrTablet&&(i=e.eventListeners,jsx("div",{className:styles$5.mobileControls},jsx("div",{className:styles$5.mobileLeftControls},t.allowTime&&jsx(MobileTimeDisplay$1,{ref:createRef(t,"mobileTimeDisplay")})),jsx("div",{className:styles$5.mobileRightControls},t.allowMute&&jsx(MutedButton,{eventListeners:i.mutedButton,ref:createRef(t,"mutedButton"),isMobileOrTablet:browserDetection.isMobileOrTablet}),t.allowVolume&&jsx(VolumeSlider$1,{eventListeners:i.volumeSlider,ref:createRef(t,"volumeSlider"),isMobileOrTablet:browserDetection.isMobileOrTablet}),t.allowSubtitles&&jsx(SubtitlesButton$1,{eventListeners:i.subtitlesButton,ref:createRef(t,"subtitlesButton"),isMobileOrTablet:browserDetection.isMobileOrTablet}),t.allowFS&&!browserDetection.isSafariMobile&&jsx(FullScreenButton$1,{eventListeners:i.fullScreenButton,ref:createRef(t,"fullScreenButton"),isMobileOrTablet:browserDetection.isMobileOrTablet})))),this.allowProgress&&jsx(ProgressBar$1,{eventListeners:e.eventListeners.progressBar,ref:createRef(this,"progressBar")}),!browserDetection.isMobileOrTablet&&(r=e.eventListeners,jsx("div",{className:styles$5.desktopControls},jsx("div",{className:styles$5.leftControls},t.allowPlay&&jsx(PlayButton$1,{eventListeners:r.playButton,ref:createRef(t,"playButton")}),t.allowMute&&jsx(MutedButton,{eventListeners:r.mutedButton,ref:createRef(t,"mutedButton")}),t.allowVolume&&jsx(VolumeSlider$1,{eventListeners:r.volumeSlider,ref:createRef(t,"volumeSlider")}),t.allowTime&&jsx(TimeDisplay$1,{ref:createRef(t,"timeDisplay")})),jsx("div",{className:styles$5.rightControls},t.allowSubtitles&&jsx(SubtitlesButton$1,{eventListeners:r.subtitlesButton,ref:createRef(t,"subtitlesButton")}),t.allowFS&&jsx(FullScreenButton$1,{eventListeners:r.fullScreenButton,ref:createRef(t,"fullScreenButton")})))))}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({controls:t.store.controls,isFullScreen:t.store.isFullScreen,useTimeInMillis:t.store.useTimeInMillis,currentTime:t.store.currentTime,duration:t.store.duration,currentState:t.store.currentState,previousState:t.store.previousState,muted:t.store.muted,volume:t.store.volume,showSubtitles:t.store.showSubtitles,displaySubtitlesButton:t.store.displaySubtitlesButton})},autorunConfig)}},{key:"update",value:function(e){var t=e.controls,r=e.isFullScreen,i=e.currentState,n=(e.previousState,e.currentTime),a=e.duration,s=e.useTimeInMillis,o=e.muted,l=e.volume,u=e.showSubtitles,c=e.displaySubtitlesButton,e=i!==INITIALISING;e?this.element.classList.remove(styles$5.invisible):this.element.classList.add(styles$5.invisible),e&&t&&(t.showControls?(this.allowProgress&&this.refs.progressBar.update({currentTime:n,duration:a}),browserDetection.isMobileOrTablet?this.allowTime&&this.refs.mobileTimeDisplay.update({useTimeInMillis:s,currentTime:n,duration:a}):(this.allowPlay&&this.refs.playButton.update({currentState:i}),this.allowTime&&this.refs.timeDisplay.update({useTimeInMillis:s,currentTime:n,duration:a})),this.element.classList.contains(styles$5.fadeIn)||(this.element.classList.remove(styles$5.fadeOut),this.element.classList.add(styles$5.fadeIn))):this.element.classList.contains(styles$5.fadeOut)||(this.element.classList.remove(styles$5.fadeIn),this.element.classList.add(styles$5.fadeOut)),this.allowMute&&this.refs.mutedButton.update(o),this.allowVolume&&this.refs.volumeSlider.update(l),this.allowSubtitles&&this.refs.subtitlesButton.update(u,c),this.allowFS&&this.refs.fullScreenButton.update(r))}}]),t}(),Controls$2=createFactory(Controls$1),styles$c={root:"styles_root__Doaxf",img:"styles_img__2kLAC"},disposer=null,PosterContainer=function(){_inherits(i,Container);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).store=e.store,t.src=e.src,t}return _createClass(i,[{key:"root",value:function(){return jsx("div",{className:styles$c.root},this.src&&""!==this.src&&jsx("img",{className:styles$c.img,src:this.src}))}},{key:"subscribe",value:function(e){var t=this;disposer=autorun(function(){return e({currentState:t.store.currentState,measurements:t.store.measurements})},autorunConfig)}},{key:"remove",value:function(){this.element.remove(),disposer()}},{key:"setSrc",value:function(e){e&&""!==e&&(this.src=e,e=jsx("img",{className:styles$c.img,src:e}),attachToDOM(this.element,e))}},{key:"update",value:function(e){e=e.currentState,e=e===READY||e===INITIALISING;e&&!this.isElementInDOM()?this.element=this.root():!e&&this.isElementInDOM()&&this.remove()}}]),i}(),PosterContainer$1=createFactory(PosterContainer),styles$d={root:"styles_root__Vfmc2",fadeInAndOut:"styles_fadeInAndOut__1rjqp",fadeInOut:"styles_fadeInOut__3r7Nz",fadeInDelayed:"styles_fadeInDelayed__39F41",fadeIn:"styles_fadeIn__1ORSm",fadeOut:"styles_fadeOut__ucpjX"},timeout$1=null,AnimatedIcon=function(){_inherits(i,Component);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),t=r.call(this,e),e.initialDisplay&&t.element.classList.add(styles$d.fadeIn),t}return _createClass(i,[{key:"root",value:function(e){return jsx("div",{className:styles$d.root},jsx(Icon$1,{src:e.icon}))}},{key:"animateInAndOut",value:function(){var e=this;this.element.classList.add(styles$d.fadeInAndOut),setTimeout(function(){e.element.classList.remove(styles$d.fadeInAndOut)},500)}},{key:"animateIn",value:function(){clearTimeout(timeout$1),timeout$1=null,this.element.classList.remove(styles$d.fadeIn),this.element.classList.remove(styles$d.fadeOut),this.element.classList.add(styles$d.fadeIn)}},{key:"animateInWithDelay",value:function(){clearTimeout(timeout$1),timeout$1=null,this.element.classList.remove(styles$d.fadeIn),this.element.classList.remove(styles$d.fadeInDelayed),this.element.classList.remove(styles$d.fadeOut),this.element.classList.add(styles$d.fadeInDelayed)}},{key:"animateOut",value:function(){var e=this;clearTimeout(timeout$1),timeout$1=null,this.element.classList.remove(styles$d.fadeIn),this.element.classList.remove(styles$d.fadeOut),this.element.classList.remove(styles$d.fadeInDelayed),this.element.classList.add(styles$d.fadeOut),timeout$1=setTimeout(function(){e.element.classList.remove(styles$d.fadeIn),e.element.classList.remove(styles$d.fadeOut),e.element.classList.remove(styles$d.fadeInDelayed)},500)}},{key:"isInDOM",value:function(){return this.element.classList.contains(styles$d.fadeIn)||this.element.classList.contains(styles$d.fadeInDelayed)}}]),i}(),AnimatedIcon$1=createFactory(AnimatedIcon),hasHandled$1=!0,hasNotHandled$1=!1,handlePlayingState$1=function(s){return function(i,n,e){var a=e.allowPlay;return function(e,t,r){return e===PLAYING&&t!==PLAYING||e===LOADING$1&&t===PAUSED?(s("handlePlayingState",{currentState:e,previousState:t}),a&&(i.animateOut(),r?n.animateIn():n.animateOut()),hasHandled$1):hasNotHandled$1}}},handlePausedState=function(s){return function(i,n,e){var a=e.allowPlay;return function(e,t,r){return e===PAUSED&&t!==PAUSED&&t!==LOADING$1&&t!==READY?(s("handlePausedState",{currentState:e,previousState:t}),a&&(e===PAUSED&&n.isInDOM()&&!r?n.animateOut():(i.animateOut(),n.animateIn())),hasHandled$1):hasNotHandled$1}}},handleSkippingState=function(e){return function(t){return function(e){return e===SKIPPING?(t.animateInAndOut(),hasHandled$1):hasNotHandled$1}}},handleRewindingState=function(r){return function(t){return function(e){return e===REWINDING?(r("handleRewindingState",{currentState:e}),t.animateInAndOut(),hasHandled$1):hasNotHandled$1}}},handleErrorState=function(a){return function(t,r,i,n){return function(e){return isErrorState(e)?(a("handleErrorState",{currentState:e}),[t,r,i,n].forEach(function(e){return e.animateOut()}),hasHandled$1):hasNotHandled$1}}},handleOverlayControlsState=function(e,t,r,i){var n=e.paused,a=e.playing,s=e.rewinding,e=e.skipping,o=t.currentState,l=t.previousState,t=logger({useLogger:!1,label:"handleOverlayControlsState"});return[handlePlayingState$1(t)(a,n,i),handlePausedState(t)(n,a,i),handleRewindingState(t)(s),handleSkippingState()(e),handleErrorState(t)(n,a,s,e)].some(function(e){return e(o,l,r)})},styles$e={overlayControls:"styles_overlayControls__3NWOE",mobile:"styles_mobile__11Clo",left:"styles_left__30H9O",centre:"styles_centre__BIiDC",right:"styles_right__PJId5"},rewind="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSI0MnB4IiB2aWV3Qm94PSIwIDAgMzYgNDIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5JY29ucy80OHg0OC9SZXdpbmQtMTA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iVmlkZW8tUGxheWVyIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iUGxheWVyLUNvbnRyb2xzLS0tQWR2YW5jZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzguMDAwMDAwLCAtMTM5LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiPgogICAgICAgICAgICA8ZyBpZD0idmlkZW8tY29udHJvbHMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Mi4wMDAwMDAsIDEzNi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJJY29ucy80OHg0OC9SZXdpbmQtMTAiPgogICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAwLjUwMDAwMCkiIGlkPSJpY29uIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNi4wMDAwMDAsIDMuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dCBpZD0iMTAiIGZvbnQtZmFtaWx5PSJTRlByb0Rpc3BsYXktU2VtaWJvbGQsIFNGIFBybyBEaXNwbGF5IiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iOS4xNjQwNjI1IiB5PSIyOC41Ij4xMDwvdHNwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iYmciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOS4wMDUwMDk3LDExLjc5MDAwMjggTDEzLjI2MDAwOTgsNi4wNDUwMDI5NCBMMTkuMDA1MDA5NywwLjMwMDAwMzA1MiBMMTkuMDA1MDA5NywxMS43OTAwMDI4IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjAxNzkyMzY2ODYsMjIuMTg5NDYxOSBDMC4wMDYxNTkxMTM3NiwyMi4xMjgxMTU2IDAsMjIuMDY0Nzc3MSAwLDIyIEMwLDIxLjQ0NzcxNTMgMC40NDc3MTUyNSwyMSAxLDIxIEMxLjU1MjI4NDc1LDIxIDIsMjEuNDQ3NzE1MyAyLDIyIEwyLjAzMDc0MTk4LDIyIEMyLjAxMDM0NzgxLDIyLjMzMDcxNTUgMiwyMi42NjQxNDkzIDIsMjMgQzIsMzEuODM2NTU2IDkuMTYzNDQ0LDM5IDE4LDM5IEMyNi44MzY1NTYsMzkgMzQsMzEuODM2NTU2IDM0LDIzIEMzNCwxNC4xNjM0NDQgMjYuODM2NTU2LDcgMTgsNyBDMTcuNjY0MTQ5Myw3IDE3LjMzMDcxNTUsNy4wMTAzNDc4MSAxNyw3LjAzMDc0MTk4IEwxNyw1LjAyNzMwODM4IEMxNy4zMzEwMzA0LDUuMDA5MTgxOTcgMTcuNjY0NDQyOSw1IDE4LDUgQzI3Ljk0MTEyNTUsNSAzNiwxMy4wNTg4NzQ1IDM2LDIzIEMzNiwzMi45NDExMjU1IDI3Ljk0MTEyNTUsNDEgMTgsNDEgQzguMDU4ODc0NSw0MSAwLDMyLjk0MTEyNTUgMCwyMyBDMCwyMi43MjgzNzM0IDAuMDA2MDE2NTU1MywyMi40NTgxNTIgMC4wMTc5MjM2Njg2LDIyLjE4OTQ2MTkgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",skip="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSI0MnB4IiB2aWV3Qm94PSIwIDAgMzYgNDIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5JY29ucy80OHg0OC9Gb3J3YXJkLTEwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IlZpZGVvLVBsYXllciIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IlBsYXllci1Db250cm9scy0tLUFkdmFuY2VkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzU0LjAwMDAwMCwgLTEzOC4wMDAwMDApIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPGcgaWQ9InZpZGVvLWNvbnRyb2xzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzIuMDAwMDAwLCAxMzYuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSWNvbnMvNDh4NDgvRm9yd2FyZC0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYuMDAwMDAwLCAyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IjEwIiBmb250LWZhbWlseT0iU0ZQcm9EaXNwbGF5LVNlbWlib2xkLCBTRiBQcm8gRGlzcGxheSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRzcGFuIHg9IjkuMTY0MDYyNSIgeT0iMjkiPjEwPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJiZyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTguMDAwMDAwLCAyMS4wMDAwMDApIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTE4LjAwMDAwMCwgLTIxLjAwMDAwMCkgdHJhbnNsYXRlKDAuMDAwMDAwLCAwLjUwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOS4wMDUwMDk3LDExLjc5MDAwMjggTDEzLjI2MDAwOTgsNi4wNDUwMDI5NCBMMTkuMDA1MDA5NywwLjMwMDAwMzA1MiBMMTkuMDA1MDA5NywxMS43OTAwMDI4IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjAxNzkyMzY2ODYsMjIuMTg5NDYxOSBDMC4wMDYxNTkxMTM3NiwyMi4xMjgxMTU2IDAsMjIuMDY0Nzc3MSAwLDIyIEMwLDIxLjQ0NzcxNTMgMC40NDc3MTUyNSwyMSAxLDIxIEMxLjU1MjI4NDc1LDIxIDIsMjEuNDQ3NzE1MyAyLDIyIEwyLjAzMDc0MTk4LDIyIEMyLjAxMDM0NzgxLDIyLjMzMDcxNTUgMiwyMi42NjQxNDkzIDIsMjMgQzIsMzEuODM2NTU2IDkuMTYzNDQ0LDM5IDE4LDM5IEMyNi44MzY1NTYsMzkgMzQsMzEuODM2NTU2IDM0LDIzIEMzNCwxNC4xNjM0NDQgMjYuODM2NTU2LDcgMTgsNyBDMTcuNjY0MTQ5Myw3IDE3LjMzMDcxNTUsNy4wMTAzNDc4MSAxNyw3LjAzMDc0MTk4IEwxNyw1LjAyNzMwODM4IEMxNy4zMzEwMzA0LDUuMDA5MTgxOTcgMTcuNjY0NDQyOSw1IDE4LDUgQzI3Ljk0MTEyNTUsNSAzNiwxMy4wNTg4NzQ1IDM2LDIzIEMzNiwzMi45NDExMjU1IDI3Ljk0MTEyNTUsNDEgMTgsNDEgQzguMDU4ODc0NSw0MSAwLDMyLjk0MTEyNTUgMCwyMyBDMCwyMi43MjgzNzM0IDAuMDA2MDE2NTU1MywyMi40NTgxNTIgMC4wMTc5MjM2Njg2LDIyLjE4OTQ2MTkgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",OverlayControls=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){var t=e.controlCapabilities;return this.controlCapabilities=t,jsx("div",{className:classnames(styles$e.overlayControls,_defineProperty({},styles$e.mobile,browserDetection.isMobileOrTablet))},jsx("div",{className:styles$e.left,eventListeners:e.eventListeners.left},jsx(AnimatedIcon$1,{ref:createRef(this,"rewinding"),icon:rewind})),jsx("div",{className:styles$e.centre,eventListeners:e.eventListeners.centre},t.allowPlay&&jsx(AnimatedIcon$1,{ref:createRef(this,"playing"),icon:play,initialDisplay:!0}),t.allowPlay&&jsx(AnimatedIcon$1,{ref:createRef(this,"paused"),icon:pause})),jsx("div",{className:styles$e.right,eventListeners:e.eventListeners.right},jsx(AnimatedIcon$1,{ref:createRef(this,"skipping"),icon:skip})))}},{key:"subscribe",value:function(e){var t=this;autorun(function(){e({currentState:t.store.currentState,previousState:t.store.previousState,controls:t.store.controls})},autorunConfig)}},{key:"update",value:function(e){var t=e.currentState,r=e.previousState,e=e.controls;this.element.style.opacity=t===INITIALISING||t===READY?"0":"1",handleOverlayControlsState({playing:this.refs.playing,paused:this.refs.paused,skipping:this.refs.skipping,rewinding:this.refs.rewinding},{currentState:t,previousState:r},e.showControls,this.controlCapabilities)}}]),t}(),OverlayControls$1=createFactory(OverlayControls),styles$f={root:"styles_root__34iVl"},OverlayControlsOverlay=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){return jsx("div",{ref:createRef(this,"root"),className:classnames(styles$f.root)})}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({showControls:t.store.controls.showControls,currentState:t.store.currentState})},autorunConfig)}},{key:"update",value:function(e){var t=e.showControls,e=e.currentState;t&&e!==INITIALISING&&e!==READY?this.refs.root.element.setAttribute("style","display: block;"):this.refs.root.element.setAttribute("style","display: none;")}}]),t}(),OverlayControlsOverlay$1=createFactory(OverlayControlsOverlay),lottie=createCommonjsModule(function(module){var JP0,KP0;"undefined"!=typeof navigator&&(JP0=window||{},KP0=function(window){var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){for(var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t=e.length,r=0;r<t;r+=1)BMMath[e[r]]=Math[e[r]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){for(var t=createSizedArray(e.length),r=e.length,i=0;i<r;i+=1)t[i]=Math.abs(e[i]);return t}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,r,i){this.type=e,this.currentTime=t,this.totalTime=r,this.direction=i<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,r,i){this.type=e,this.currentLoop=r,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(e,t,r){this.type=e,this.firstFrame=t,this.totalFrames=r}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=(kQ0=0,function(){return idPrefix+"__lottie_element_"+(kQ0+=1)}),kQ0;function HSVtoRGB(e,t,r){var i,n,a,s=Math.floor(6*e),e=6*e-s,o=r*(1-t),l=r*(1-e*t),u=r*(1-(1-e)*t);switch(s%6){case 0:i=r,n=u,a=o;break;case 1:i=l,n=r,a=o;break;case 2:i=o,n=r,a=u;break;case 3:i=o,n=l,a=r;break;case 4:i=u,n=o,a=r;break;case 5:i=r,n=o,a=l}return[i,n,a]}function RGBtoHSV(e,t,r){var i,n=Math.max(e,t,r),a=Math.min(e,t,r),s=n-a,o=0===n?0:s/n,l=n/255;switch(n){case a:i=0;break;case e:i=t-r+s*(t<r?6:0),i/=6*s;break;case t:i=r-e+2*s,i/=6*s;break;case r:i=e-t+4*s,i/=6*s}return[i,o,l]}function addSaturationToRGB(e,t){e=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return e[1]+=t,1<e[1]?e[1]=1:e[1]<=0&&(e[1]=0),HSVtoRGB(e[0],e[1],e[2])}function addBrightnessToRGB(e,t){e=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return e[2]+=t,1<e[2]?e[2]=1:e[2]<0&&(e[2]=0),HSVtoRGB(e[0],e[1],e[2])}function addHueToRGB(e,t){e=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return e[0]+=t/360,1<e[0]?--e[0]:e[0]<0&&(e[0]+=1),HSVtoRGB(e[0],e[1],e[2])}var rgbToHex=function(){for(var e,i=[],t=0;t<256;t+=1)e=t.toString(16),i[t]=1===e.length?"0"+e:e;return function(e,t,r){return"#"+i[e=e<0?0:e]+i[t=t<0?0:t]+i[r=r<0?0:r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var r=this._cbs[e].length,i=0;i<r;i+=1)this._cbs[e][i](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var r=0,i=this._cbs[e].length;r<i;)this._cbs[e][r]===t&&(this._cbs[e].splice(r,1),--r,--i),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,t){return"float32"===e?new Float32Array(t):"int16"===e?new Int16Array(t):"uint8c"===e?new Uint8ClampedArray(t):dR0(e,t)}:dR0;function dR0(e,t){var r,i=0,n=[];switch(e){case"int16":case"uint8c":r=1;break;default:r=1.1}for(i=0;i<t;i+=1)n.push(r);return n}function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS(svgNS,e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;for(var e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(tR0={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return tR0[e]||""}),tR0,Matrix=(vR0=Math.cos,wR0=Math.sin,xR0=Math.tan,yR0=Math.round,function(){this.reset=zR0,this.rotate=AR0,this.rotateX=BR0,this.rotateY=CR0,this.rotateZ=DR0,this.skew=FR0,this.skewFromAxis=GR0,this.shear=ER0,this.scale=HR0,this.setTransform=IR0,this.translate=JR0,this.transform=KR0,this.applyToPoint=PR0,this.applyToX=QR0,this.applyToY=RR0,this.applyToZ=SR0,this.applyToPointArray=XR0,this.applyToTriplePoints=WR0,this.applyToPointStringified=YR0,this.toCSS=ZR0,this.to2dCSS=_R0,this.clone=NR0,this.cloneFromProps=OR0,this.equals=MR0,this.inversePoints=VR0,this.inversePoint=UR0,this.getInverseMatrix=TR0,this._t=this.transform,this.isIdentity=LR0,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}),vR0,wR0,xR0,yR0;function zR0(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function AR0(e){if(0===e)return this;var t=vR0(e),e=wR0(e);return this._t(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1)}function BR0(e){if(0===e)return this;var t=vR0(e),e=wR0(e);return this._t(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1)}function CR0(e){if(0===e)return this;var t=vR0(e),e=wR0(e);return this._t(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1)}function DR0(e){if(0===e)return this;var t=vR0(e),e=wR0(e);return this._t(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1)}function ER0(e,t){return this._t(1,t,e,1,0,0)}function FR0(e,t){return this.shear(xR0(e),xR0(t))}function GR0(e,t){var r=vR0(t),t=wR0(t);return this._t(r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,xR0(e),1,0,0,0,0,1,0,0,0,0,1)._t(r,-t,0,0,t,r,0,0,0,0,1,0,0,0,0,1)}function HR0(e,t,r){return r||0===r||(r=1),1===e&&1===t&&1===r?this:this._t(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function IR0(e,t,r,i,n,a,s,o,l,u,c,h,d,f,p,m){return this.props[0]=e,this.props[1]=t,this.props[2]=r,this.props[3]=i,this.props[4]=n,this.props[5]=a,this.props[6]=s,this.props[7]=o,this.props[8]=l,this.props[9]=u,this.props[10]=c,this.props[11]=h,this.props[12]=d,this.props[13]=f,this.props[14]=p,this.props[15]=m,this}function JR0(e,t,r){return r=r||0,0!==e||0!==t||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1):this}function KR0(e,t,r,i,n,a,s,o,l,u,c,h,d,f,p,m){var g=this.props;if(1===e&&0===t&&0===r&&0===i&&0===n&&1===a&&0===s&&0===o&&0===l&&0===u&&1===c&&0===h)return g[12]=g[12]*e+g[15]*d,g[13]=g[13]*a+g[15]*f,g[14]=g[14]*c+g[15]*p,g[15]*=m,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],S=g[3],M=g[4],T=g[5],A=g[6],E=g[7],D=g[8],_=g[9],x=g[10],I=g[11],C=g[12],k=g[13],w=g[14],L=g[15];return g[0]=y*e+v*n+b*l+S*d,g[1]=y*t+v*a+b*u+S*f,g[2]=y*r+v*s+b*c+S*p,g[3]=y*i+v*o+b*h+S*m,g[4]=M*e+T*n+A*l+E*d,g[5]=M*t+T*a+A*u+E*f,g[6]=M*r+T*s+A*c+E*p,g[7]=M*i+T*o+A*h+E*m,g[8]=D*e+_*n+x*l+I*d,g[9]=D*t+_*a+x*u+I*f,g[10]=D*r+_*s+x*c+I*p,g[11]=D*i+_*o+x*h+I*m,g[12]=C*e+k*n+w*l+L*d,g[13]=C*t+k*a+w*u+L*f,g[14]=C*r+k*s+w*c+L*p,g[15]=C*i+k*o+w*h+L*m,this._identityCalculated=!1,this}function LR0(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function MR0(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function NR0(e){for(var t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function OR0(e){for(var t=0;t<16;t+=1)this.props[t]=e[t]}function PR0(e,t,r){return{x:e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}}function QR0(e,t,r){return e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12]}function RR0(e,t,r){return e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13]}function SR0(e,t,r){return e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}function TR0(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,r=-this.props[1]/e,i=-this.props[4]/e,n=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,e=new Matrix;return e.props[0]=t,e.props[1]=r,e.props[4]=i,e.props[5]=n,e.props[12]=a,e.props[13]=s,e}function UR0(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function VR0(e){for(var t=e.length,r=[],i=0;i<t;i+=1)r[i]=UR0(e[i]);return r}function WR0(e,t,r){var i,n,a,s,o,l,u=createTypedArray("float32",6);return this.isIdentity()?(u[0]=e[0],u[1]=e[1],u[2]=t[0],u[3]=t[1],u[4]=r[0],u[5]=r[1]):(i=this.props[0],n=this.props[1],a=this.props[4],s=this.props[5],o=this.props[12],l=this.props[13],u[0]=e[0]*i+e[1]*a+o,u[1]=e[0]*n+e[1]*s+l,u[2]=t[0]*i+t[1]*a+o,u[3]=t[0]*n+t[1]*s+l,u[4]=r[0]*i+r[1]*a+o,u[5]=r[0]*n+r[1]*s+l),u}function XR0(e,t,r){r=this.isIdentity()?[e,t,r]:[e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]];return r}function YR0(e,t){if(this.isIdentity())return e+","+t;var r=this.props;return Math.round(100*(e*r[0]+t*r[4]+r[12]))/100+","+Math.round(100*(e*r[1]+t*r[5]+r[13]))/100}function ZR0(){for(var e=0,t=this.props,r="matrix3d(";e<16;)r+=yR0(1e4*t[e])/1e4,r+=15===e?")":",",e+=1;return r}function $R0(e){return e<1e-6&&0<e||-1e-6<e&&e<0?yR0(1e4*e)/1e4:e}function _R0(){var e=this.props;return"matrix("+$R0(e[0])+","+$R0(e[1])+","+$R0(e[4])+","+$R0(e[5])+","+$R0(e[12])+","+$R0(e[13])+")"}!function(a,s){var o,l=this,u=256,c=6,h="random",d=s.pow(u,c),f=s.pow(2,52),p=2*f,m=u-1;function g(e){var t,r=e.length,s=this,i=0,n=s.i=s.j=0,a=s.S=[];for(r||(e=[r++]);i<u;)a[i]=i++;for(i=0;i<u;i++)a[i]=a[n=m&n+e[i%r]+(t=a[i])],a[n]=t;s.g=function(e){for(var t,r=0,i=s.i,n=s.j,a=s.S;e--;)t=a[i=m&i+1],r=r*u+a[m&(a[i]=a[n=m&n+t])+(a[n]=t)];return s.i=i,s.j=n,r}}function y(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var r,i=e+"",n=0;n<i.length;)t[m&n]=m&(r^=19*t[m&n])+i.charCodeAt(n++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}s["seed"+h]=function(e,t,r){var i=[],e=v(function e(t,r){var i,n=[],a=typeof t;if(r&&"object"==a)for(i in t)try{n.push(e(t[i],r-1))}catch(e){}return n.length?n:"string"==a?t:t+"\0"}((t=!0===t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null===e?function(){try{if(o)return b(o.randomBytes(u));var t=new Uint8Array(u);return(l.crypto||l.msCrypto).getRandomValues(t),b(t)}catch(e){t=l.navigator,t=t&&t.plugins;return[+new Date,l,t,l.screen,b(a)]}}():e,3),i),n=new g(i);return(i=function(){for(var e=n.g(c),t=d,r=0;e<f;)e=(e+r)*u,t*=u,r=n.g(1);for(;p<=e;)e/=2,t/=2,r>>>=1;return(e+r)/t}).int32=function(){return 0|n.g(4)},i.quick=function(){return n.g(4)/4294967296},i.double=i,v(b(n.S),a),(t.pass||r||function(e,t,r,i){return i&&(i.S&&y(i,n),e.state=function(){return y(n,{})}),r?(s[h]=e,t):e})(i,e,"global"in t?t.global:this==s,t.state)},v(s.random(),a)}([],BMMath);var BezierFactory=(NV0={getBezierEasing:function(e,t,r,i,n){n=n||("bez_"+e+"_"+t+"_"+r+"_"+i).replace(/\./g,"p");if(OV0[n])return OV0[n];i=new cW0([e,t,r,i]);return OV0[n]=i}},OV0={},UV0=11,VV0=1/(UV0-1),WV0="function"==typeof Float32Array,cW0.prototype={get:function(e){var t=this._p[0],r=this._p[1],i=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),t===r&&i===n?e:0===e?0:1===e?1:$V0(this._getTForX(e),r,n)},_precompute:function(){var e=this._p[0],t=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,e===t&&r===i||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;r<UV0;++r)this._mSampleValues[r]=$V0(r*VV0,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],i=this._mSampleValues,n=0,a=1,s=UV0-1;a!==s&&i[a]<=e;++a)n+=VV0;var o=n+(e-i[--a])/(i[a+1]-i[a])*VV0,l=_V0(o,t,r);return.001<=l?function(e,t,r,i){for(var n=0;n<4;++n){var a=_V0(t,r,i);if(0===a)return t;t-=($V0(t,r,i)-e)/a}return t}(e,o,t,r):0===l?o:function(e,t,r,i,n){for(var a,s,o=0;0<(a=$V0(s=t+(r-t)/2,i,n)-e)?r=s:t=s,1e-7<Math.abs(a)&&++o<10;);return s}(e,n,n+VV0,t,r)}},NV0),NV0,OV0,UV0,VV0,WV0;function XV0(e,t){return 1-3*t+3*e}function $V0(e,t,r){return((XV0(t,r)*e+(3*r-6*t))*e+3*t)*e}function _V0(e,t,r){return 3*XV0(t,r)*e*e+2*(3*r-6*t)*e+3*t}function cW0(e){this._p=e,this._mSampleValues=new(WV0?Float32Array:Array)(UV0),this._precomputed=!1,this.get=this.get.bind(this)}function extendPrototype(e,t){for(var r,i=e.length,n=0;n<i;n+=1)for(var a in r=e[n].prototype)Object.prototype.hasOwnProperty.call(r,a)&&(t.prototype[a]=r[a])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}function bezFunction(){var _=Math;function g(e,t,r,i,n,a){t=e*i+t*n+r*a-n*i-a*e-r*t;return-.001<t&&t<.001}var c=function(e,t,r,i){for(var n,a,s,o,l=defaultCurveSegments,u=0,c=[],h=[],d=bezierLengthPool.newElement(),f=r.length,p=0;p<l;p+=1){for(s=p/(l-1),n=o=0;n<f;n+=1)a=bmPow(1-s,3)*e[n]+3*bmPow(1-s,2)*s*r[n]+3*(1-s)*bmPow(s,2)*i[n]+bmPow(s,3)*t[n],c[n]=a,null!==h[n]&&(o+=bmPow(c[n]-h[n],2)),h[n]=c[n];o&&(u+=o=bmSqrt(o)),d.percents[p]=s,d.lengths[p]=u}return d.addedLength=u,d};function y(e){this.segmentLength=0,this.points=new Array(e)}function v(e,t){this.partialLength=e,this.point=t}var b,e=(b={},function(e,t,r,i){var n=(e[0]+"_"+e[1]+"_"+t[0]+"_"+t[1]+"_"+r[0]+"_"+r[1]+"_"+i[0]+"_"+i[1]).replace(/\./g,"p");if(!b[n]){for(var a,s,o,l,u,c=defaultCurveSegments,h=0,d=null,f=new y(c=2===e.length&&(e[0]!==t[0]||e[1]!==t[1])&&g(e[0],e[1],t[0],t[1],e[0]+r[0],e[1]+r[1])&&g(e[0],e[1],t[0],t[1],t[0]+i[0],t[1]+i[1])?2:c),p=r.length,m=0;m<c;m+=1){for(u=createSizedArray(p),o=m/(c-1),a=l=0;a<p;a+=1)s=bmPow(1-o,3)*e[a]+3*bmPow(1-o,2)*o*(e[a]+r[a])+3*(1-o)*bmPow(o,2)*(t[a]+i[a])+bmPow(o,3)*t[a],u[a]=s,null!==d&&(l+=bmPow(u[a]-d[a],2));h+=l=bmSqrt(l),f.points[m]=new v(l,u),d=u}f.segmentLength=h,b[n]=f}return b[n]});function x(e,t){var r=t.percents,i=t.lengths,n=r.length,a=bmFloor((n-1)*e),s=e*t.addedLength,o=0;if(a===n-1||0===a||s===i[a])return r[a];for(var l=i[a]>s?-1:1,u=!0;u;)if(i[a]<=s&&i[a+1]>s?(o=(s-i[a])/(i[a+1]-i[a]),u=!1):a+=l,a<0||n-1<=a){if(a===n-1)return r[a];u=!1}return r[a]+(r[a+1]-r[a])*o}var I=createTypedArray("float32",8);return{getSegmentsLength:function(e){for(var t=segmentsLengthPool.newElement(),r=e.c,i=e.v,n=e.o,a=e.i,s=e._length,o=t.lengths,l=0,u=0;u<s-1;u+=1)o[u]=c(i[u],i[u+1],n[u],a[u+1]),l+=o[u].addedLength;return r&&s&&(o[u]=c(i[u],i[0],n[u],a[0]),l+=o[u].addedLength),t.totalLength=l,t},getNewSegment:function(e,t,r,i,n,a,s){n<0?n=0:1<n&&(n=1);for(var o=x(n,s),n=x(a=1<a?1:a,s),l=e.length,u=(a=1-o)*a*a,c=o*a*a*3,h=o*o*a*3,d=o*o*o,f=a*a*(s=1-n),p=o*a*s+a*o*s+a*a*n,m=o*o*s+a*o*n+o*a*n,g=o*o*n,y=a*s*s,v=o*s*s+a*n*s+a*s*n,b=o*n*s+a*n*n+o*s*n,S=o*n*n,M=s*s*s,T=n*s*s+s*n*s+s*s*n,A=n*n*s+s*n*n+n*s*n,E=n*n*n,D=0;D<l;D+=1)I[4*D]=_.round(1e3*(u*e[D]+c*r[D]+h*i[D]+d*t[D]))/1e3,I[4*D+1]=_.round(1e3*(f*e[D]+p*r[D]+m*i[D]+g*t[D]))/1e3,I[4*D+2]=_.round(1e3*(y*e[D]+v*r[D]+b*i[D]+S*t[D]))/1e3,I[4*D+3]=_.round(1e3*(M*e[D]+T*r[D]+A*i[D]+E*t[D]))/1e3;return I},getPointInSegment:function(e,t,r,i,n,a){return n=x(n,a),a=1-n,[_.round(1e3*(a*a*a*e[0]+(n*a*a+a*n*a+a*a*n)*r[0]+(n*n*a+a*n*n+n*a*n)*i[0]+n*n*n*t[0]))/1e3,_.round(1e3*(a*a*a*e[1]+(n*a*a+a*n*a+a*a*n)*r[1]+(n*n*a+a*n*n+n*a*n)*i[1]+n*n*n*t[1]))/1e3]},buildBezierData:e,pointOnLine2D:g,pointOnLine3D:function(e,t,r,i,n,a,s,o,l){if(0===r&&0===a&&0===l)return g(e,t,i,n,s,o);var u=_.sqrt(_.pow(i-e,2)+_.pow(n-t,2)+_.pow(a-r,2)),r=_.sqrt(_.pow(s-e,2)+_.pow(o-t,2)+_.pow(l-r,2)),a=_.sqrt(_.pow(s-i,2)+_.pow(o-n,2)+_.pow(l-a,2));return-1e-4<(a=r<u?a<u?u-r-a:a-r-u:r<a?a-r-u:r-u-a)&&a<1e-4}}}!function(){for(var n=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-n)),i=setTimeout(function(){e(t+r)},r);return n=t+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function h(e,t,r){for(var i,n,a,s=e.length,o=0;o<s;o+=1)if("ks"in(a=e[o])&&!a.completed){if(a.completed=!0,a.tt&&(e[o-1].td=a.tt),a.hasMask)for(var l=a.masksProperties,u=l.length,c=0;c<u;c+=1)if(l[c].pt.k.i)d(l[c].pt.k);else for(n=l[c].pt.k.length,i=0;i<n;i+=1)l[c].pt.k[i].s&&d(l[c].pt.k[i].s[0]),l[c].pt.k[i].e&&d(l[c].pt.k[i].e[0]);0===a.ty?(a.layers=function(e,t){var r=0,i=t.length;for(;r<i;){if(t[r].id===e)return t[r].layers.__used?JSON.parse(JSON.stringify(t[r].layers)):(t[r].layers.__used=!0,t[r].layers);r+=1}return null}(a.refId,t),h(a.layers,t)):4===a.ty?function e(t){var r;var i=t.length;var n;var a;for(r=i-1;0<=r;--r)if("sh"===t[r].ty)if(t[r].ks.k.i)d(t[r].ks.k);else for(a=t[r].ks.k.length,n=0;n<a;n+=1)t[r].ks.k[n].s&&d(t[r].ks.k[n].s[0]),t[r].ks.k[n].e&&d(t[r].ks.k[n].e[0]);else"gr"===t[r].ty&&e(t[r].it)}(a.shapes):5===a.ty&&(0!==(a=a).t.a.length||"m"in a.t.p||(a.singleShape=!0))}}function d(e){for(var t=e.i.length,r=0;r<t;r+=1)e.i[r][0]+=e.v[r][0],e.i[r][1]+=e.v[r][1],e.o[r][0]+=e.v[r][0],e.o[r][1]+=e.v[r][1]}function o(e,t){t=t?t.split("."):[100,100,100];return e[0]>t[0]||!(t[0]>e[0])&&(e[1]>t[1]||!(t[1]>e[1])&&(e[2]>t[2]||(t[2],void e[2])))}var i,r=(i=[4,4,14],function(e){if(o(i,e.v)&&(n(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&n(e.assets[r].layers)});function n(e){for(var t,r,i=e.length,n=0;n<i;n+=1)5===e[n].ty&&(t=e[n],r=void 0,r=t.t.d,t.t.d={k:[{s:r,t:0}]})}var l,a,s=(l=[4,7,99],function(e){if(e.chars&&!o(l,e.v))for(var t,r,i,n,a=e.chars.length,s=0;s<a;s+=1)if(e.chars[s].data&&e.chars[s].data.shapes)for(r=(n=e.chars[s].data.shapes[0].it).length,t=0;t<r;t+=1)(i=n[t].ks.k).__converted||(d(n[t].ks.k),i.__converted=!0)}),u=(a=[4,1,9],function(e){if(o(a,e.v)&&(c(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&c(e.assets[r].layers)});function c(e){for(var t=e.length,r=0;r<t;r+=1)4===e[r].ty&&!function e(t){for(var r,i,n=t.length,a=0;a<n;a+=1)if("gr"===t[a].ty)e(t[a].it);else if("fl"===t[a].ty||"st"===t[a].ty)if(t[a].c.k&&t[a].c.k[0].i)for(i=t[a].c.k.length,r=0;r<i;r+=1)t[a].c.k[r].s&&(t[a].c.k[r].s[0]/=255,t[a].c.k[r].s[1]/=255,t[a].c.k[r].s[2]/=255,t[a].c.k[r].s[3]/=255),t[a].c.k[r].e&&(t[a].c.k[r].e[0]/=255,t[a].c.k[r].e[1]/=255,t[a].c.k[r].e[2]/=255,t[a].c.k[r].e[3]/=255);else t[a].c.k[0]/=255,t[a].c.k[1]/=255,t[a].c.k[2]/=255,t[a].c.k[3]/=255}(e[r].shapes)}var f,p=(f=[4,4,18],function(e){if(o(f,e.v)&&(m(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&m(e.assets[r].layers)});function m(e){for(var t,r,i,n=e.length,a=0;a<n;a+=1){if((t=e[a]).hasMask)for(var s=t.masksProperties,o=s.length,l=0;l<o;l+=1)if(s[l].pt.k.i)s[l].pt.k.c=s[l].cl;else for(i=s[l].pt.k.length,r=0;r<i;r+=1)s[l].pt.k[r].s&&(s[l].pt.k[r].s[0].c=s[l].cl),s[l].pt.k[r].e&&(s[l].pt.k[r].e[0].c=s[l].cl);4===t.ty&&!function e(t){for(var r,i,n=t.length-1;0<=n;--n)if("sh"===t[n].ty)if(t[n].ks.k.i)t[n].ks.k.c=t[n].closed;else for(i=t[n].ks.k.length,r=0;r<i;r+=1)t[n].ks.k[r].s&&(t[n].ks.k[r].s[0].c=t[n].closed),t[n].ks.k[r].e&&(t[n].ks.k[r].e[0].c=t[n].closed);else"gr"===t[n].ty&&e(t[n].it)}(t.shapes)}}var e={completeData:function(e,t){e.__complete||(u(e),r(e),s(e),p(e),h(e.layers,e.assets),e.__complete=!0)}};return e.checkColors=u,e.checkChars=s,e.checkShapes=p,e.completeLayers=h,e}var dataManager=dataFunctionManager();function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],r="normal",i="normal",n=t.length,a=0;a<n;a+=1)switch(t[a].toLowerCase()){case"italic":i="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200"}return{style:i,weight:e.fWeight||r}}var FontManager=(J_0={w:0,size:0,shapes:[]},K_0=(K_0=[]).concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]),W_0.getCombinedCharacterCodes=function(){return K_0},W_0.prototype={addChars:function(e){if(e){this.chars||(this.chars=[]);for(var t,r,i=e.length,n=this.chars.length,a=0;a<i;a+=1){for(t=0,r=!1;t<n;)this.chars[t].style===e[a].style&&this.chars[t].fFamily===e[a].fFamily&&this.chars[t].ch===e[a].ch&&(r=!0),t+=1;r||(this.chars.push(e[a]),n+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);for(var r=e.list,i=r.length,n=i,a=0;a<i;a+=1){var s,o,l,u,c=!0;if(r[a].loaded=!1,r[a].monoCase=M_0(r[a].fFamily,"monospace"),r[a].sansCase=M_0(r[a].fFamily,"sans-serif"),r[a].fPath){if("p"===r[a].fOrigin||3===r[a].origin)(c=0<(l=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[a].fFamily+'"], style[f-origin="3"][f-family="'+r[a].fFamily+'"]')).length?!1:c)&&((o=createTag("style")).setAttribute("f-forigin",r[a].fOrigin),o.setAttribute("f-origin",r[a].origin),o.setAttribute("f-family",r[a].fFamily),o.type="text/css",o.innerText="@font-face {font-family: "+r[a].fFamily+"; font-style: normal; src: url('"+r[a].fPath+"');}",t.appendChild(o));else if("g"===r[a].fOrigin||1===r[a].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),s=0;s<l.length;s+=1)-1!==l[s].href.indexOf(r[a].fPath)&&(c=!1);c&&((u=createTag("link")).setAttribute("f-forigin",r[a].fOrigin),u.setAttribute("f-origin",r[a].origin),u.type="text/css",u.rel="stylesheet",u.href=r[a].fPath,document.body.appendChild(u))}else if("t"===r[a].fOrigin||2===r[a].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),s=0;s<l.length;s+=1)r[a].fPath===l[s].src&&(c=!1);c&&((u=createTag("link")).setAttribute("f-forigin",r[a].fOrigin),u.setAttribute("f-origin",r[a].origin),u.setAttribute("rel","stylesheet"),u.setAttribute("href",r[a].fPath),t.appendChild(u))}}else r[a].loaded=!0,--n;r[a].helper=function(e,t){var r=createNS("text");r.style.fontSize="100px";var i=getFontProperties(t);return r.setAttribute("font-family",t.fFamily),r.setAttribute("font-style",i.style),r.setAttribute("font-weight",i.weight),r.textContent="1",t.fClass?(r.style.fontFamily="inherit",r.setAttribute("class",t.fClass)):r.style.fontFamily=t.fFamily,e.appendChild(r),createTag("canvas").getContext("2d").font=t.fWeight+" "+t.fStyle+" 100px "+t.fFamily,r}(t,r[a]),r[a].cache={},this.fonts.push(r[a])}0===n?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,t,r){for(var i=0,n=this.chars.length;i<n;){if(this.chars[i].ch===e&&this.chars[i].style===t&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,t,r)),J_0},getFontByName:function(e){for(var t=0,r=this.fonts.length;t<r;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,r){var i,n,a=this.getFontByName(t),s=e.charCodeAt(0);return a.cache[s+1]||(i=a.helper," "===e?(i.textContent="|"+e+"|",n=i.getComputedTextLength(),i.textContent="||",t=i.getComputedTextLength(),a.cache[s+1]=(n-t)/100):(i.textContent=e,a.cache[s+1]=i.getComputedTextLength()/100)),a.cache[s+1]*r},checkLoadedFonts:function(){for(var e,t,r=this.fonts.length,i=r,n=0;n<r;n+=1)this.fonts[n].loaded?--i:"n"===this.fonts[n].fOrigin||0===this.fonts[n].origin?this.fonts[n].loaded=!0:(e=this.fonts[n].monoCase.node,t=this.fonts[n].monoCase.w,e.offsetWidth!==t?(--i,this.fonts[n].loaded=!0):(e=this.fonts[n].sansCase.node,t=this.fonts[n].sansCase.w,e.offsetWidth!==t&&(--i,this.fonts[n].loaded=!0)),this.fonts[n].loaded&&(this.fonts[n].sansCase.parent.parentNode.removeChild(this.fonts[n].sansCase.parent),this.fonts[n].monoCase.parent.parentNode.removeChild(this.fonts[n].monoCase.parent)));0!==i&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},W_0),J_0,K_0;function M_0(e,t){var r=createTag("span");r.setAttribute("aria-hidden",!0),r.style.fontFamily=t;var i=createTag("span");i.innerText="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(i),document.body.appendChild(r);var n=i.offsetWidth;return i.style.fontFamily=function(e){for(var t=e.split(","),r=t.length,i=[],n=0;n<r;n+=1)"sans-serif"!==t[n]&&"monospace"!==t[n]&&i.push(t[n]);return i.join(",")}(e)+", "+t,{node:i,w:n,parent:r}}function W_0(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)}var PropertyFactory=(Yab=initialDefaultFrame,Zab=Math.abs,{getProp:function(e,t,r,i,n){var a;if(t.k.length)if("number"==typeof t.k[0])a=new h0b(e,t,i,n);else switch(r){case 0:a=new i0b(e,t,i,n);break;case 1:a=new j0b(e,t,i,n)}else a=new g0b(e,t,i,n);return a.effectsSequence.length&&n.addDynamicProperty(a),a}}),Yab,Zab;function $ab(e,t){var r,i=this.offsetTime;"multidimensional"===this.propType&&(r=createTypedArray("float32",this.pv.length));for(var n,a,s,o=t.lastIndex,l=o,u=this.keyframes.length-1,c=!0;c;){if(n=this.keyframes[l],a=this.keyframes[l+1],l===u-1&&e>=a.t-i){n.h&&(n=a),o=0;break}if(a.t-i>e){o=l;break}l<u-1?l+=1:(o=0,c=!1)}var h,d,f,p,m,g=a.t-i,y=n.t-i;if(n.to){n.bezierData||(n.bezierData=bez.buildBezierData(n.s,a.s||n.e,n.to,n.ti));var v=n.bezierData;if(g<=e||e<y)for(var b=g<=e?v.points.length-1:0,S=v.points[b].point.length,M=0;M<S;M+=1)r[M]=v.points[b].point[M];else{n.__fnct?s=n.__fnct:(s=BezierFactory.getBezierEasing(n.o.x,n.o.y,n.i.x,n.i.y,n.n).get,n.__fnct=s);for(var T,A=s((e-y)/(g-y)),E=v.segmentLength*A,D=t.lastFrame<e&&t._lastKeyframeIndex===l?t._lastAddedLength:0,_=t.lastFrame<e&&t._lastKeyframeIndex===l?t._lastPoint:0,c=!0,x=v.points.length;c;){if(D+=v.points[_].partialLength,0==E||0===A||_===v.points.length-1){for(S=v.points[_].point.length,M=0;M<S;M+=1)r[M]=v.points[_].point[M];break}if(D<=E&&E<D+v.points[_+1].partialLength){for(T=(E-D)/v.points[_+1].partialLength,S=v.points[_].point.length,M=0;M<S;M+=1)r[M]=v.points[_].point[M]+(v.points[_+1].point[M]-v.points[_].point[M])*T;break}_<x-1?_+=1:c=!1}t._lastPoint=_,t._lastAddedLength=D-v.points[_].partialLength,t._lastKeyframeIndex=l}}else{var I,C,k,w,L,O,P,u=n.s.length,N=a.s||n.e;if(this.sh&&1!==n.h)g<=e?(r[0]=N[0],r[1]=N[1],r[2]=N[2]):e<=y?(r[0]=n.s[0],r[1]=n.s[1],r[2]=n.s[2]):(O=b0b(n.s),P=b0b(N),h=r,d=function(e,t,r){var i,n=[],a=e[0],s=e[1],o=e[2],l=e[3],u=t[0],c=t[1],h=t[2],d=t[3];(e=a*u+s*c+o*h+l*d)<0&&(e=-e,u=-u,c=-c,h=-h,d=-d);r=1e-6<1-e?(t=Math.acos(e),e=Math.sin(t),i=Math.sin((1-r)*t)/e,Math.sin(r*t)/e):(i=1-r,r);return n[0]=i*a+r*u,n[1]=i*s+r*c,n[2]=i*o+r*h,n[3]=i*l+r*d,n}(O,P,(e-y)/(g-y)),f=d[0],p=d[1],m=d[2],O=d[3],P=Math.atan2(2*p*O-2*f*m,1-2*p*p-2*m*m),d=Math.asin(2*f*p+2*m*O),m=Math.atan2(2*f*O-2*p*m,1-2*f*f-2*m*m),h[0]=P/degToRads,h[1]=d/degToRads,h[2]=m/degToRads);else for(l=0;l<u;l+=1)1!==n.h&&(A=g<=e?1:e<y?0:(n.o.x.constructor===Array?(n.__fnct||(n.__fnct=[]),n.__fnct[l]?s=n.__fnct[l]:(I=void 0===n.o.x[l]?n.o.x[0]:n.o.x[l],C=void 0===n.o.y[l]?n.o.y[0]:n.o.y[l],k=void 0===n.i.x[l]?n.i.x[0]:n.i.x[l],w=void 0===n.i.y[l]?n.i.y[0]:n.i.y[l],s=BezierFactory.getBezierEasing(I,C,k,w).get,n.__fnct[l]=s)):n.__fnct?s=n.__fnct:(I=n.o.x,C=n.o.y,k=n.i.x,w=n.i.y,s=BezierFactory.getBezierEasing(I,C,k,w).get,n.__fnct=s),s((e-y)/(g-y)))),N=a.s||n.e,L=1===n.h?n.s[l]:n.s[l]+(N[l]-n.s[l])*A,"multidimensional"===this.propType?r[l]=L:r=L}return t.lastIndex=o,r}function b0b(e){var t=e[0]*degToRads,r=e[1]*degToRads,i=e[2]*degToRads,n=Math.cos(t/2),a=Math.cos(r/2),e=Math.cos(i/2),t=Math.sin(t/2),r=Math.sin(r/2),i=Math.sin(i/2);return[t*r*e+n*a*i,t*a*e+n*r*i,n*r*e-t*a*i,n*a*e-t*r*i]}function c0b(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;return e===this._caching.lastFrame||this._caching.lastFrame!==Yab&&(this._caching.lastFrame>=r&&r<=e||this._caching.lastFrame<t&&e<t)||(this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),t=this.interpolateValue(e,this._caching),this.pv=t),this._caching.lastFrame=e,this.pv}function d0b(e){var t;if("unidimensional"===this.propType)t=e*this.mult,1e-5<Zab(this.v-t)&&(this.v=t,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)t=e[r]*this.mult,1e-5<Zab(this.v[r]-t)&&(this.v[r]=t,this._mdf=!0),r+=1}function e0b(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;for(var e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k,r=0;r<e;r+=1)t=this.effectsSequence[r](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function f0b(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function g0b(e,t,r,i){this.propType="unidimensional",this.mult=r||1,this.data=t,this.v=r?t.k*r:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=e0b,this.setVValue=d0b,this.addEffect=f0b}function h0b(e,t,r,i){var n;this.propType="multidimensional",this.mult=r||1,this.data=t,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a=t.k.length;for(this.v=createTypedArray("float32",a),this.pv=createTypedArray("float32",a),this.vel=createTypedArray("float32",a),n=0;n<a;n+=1)this.v[n]=t.k[n]*this.mult,this.pv[n]=t.k[n];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=e0b,this.setVValue=d0b,this.addEffect=f0b}function i0b(e,t,r,i){this.propType="unidimensional",this.keyframes=t.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:Yab,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=r||1,this.elem=e,this.container=i,this.comp=e.comp,this.v=Yab,this.pv=Yab,this._isFirstFrame=!0,this.getValue=e0b,this.setVValue=d0b,this.interpolateValue=$ab,this.effectsSequence=[c0b.bind(this)],this.addEffect=f0b}function j0b(e,t,r,i){this.propType="multidimensional";for(var n,a,s,o,l=t.k.length,u=0;u<l-1;u+=1)t.k[u].to&&t.k[u].s&&t.k[u+1]&&t.k[u+1].s&&(n=t.k[u].s,a=t.k[u+1].s,s=t.k[u].to,o=t.k[u].ti,(2===n.length&&(n[0]!==a[0]||n[1]!==a[1])&&bez.pointOnLine2D(n[0],n[1],a[0],a[1],n[0]+s[0],n[1]+s[1])&&bez.pointOnLine2D(n[0],n[1],a[0],a[1],a[0]+o[0],a[1]+o[1])||3===n.length&&(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2])&&bez.pointOnLine3D(n[0],n[1],n[2],a[0],a[1],a[2],n[0]+s[0],n[1]+s[1],n[2]+s[2])&&bez.pointOnLine3D(n[0],n[1],n[2],a[0],a[1],a[2],a[0]+o[0],a[1]+o[1],a[2]+o[2]))&&(t.k[u].to=null,t.k[u].ti=null),n[0]===a[0]&&n[1]===a[1]&&0===s[0]&&0===s[1]&&0===o[0]&&0===o[1]&&(2===n.length||n[2]===a[2]&&0===s[2]&&0===o[2])&&(t.k[u].to=null,t.k[u].ti=null));this.effectsSequence=[c0b.bind(this)],this.data=t,this.keyframes=t.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=e,this.container=i,this.comp=e.comp,this.getValue=e0b,this.setVValue=d0b,this.interpolateValue=$ab,this.frameId=-1;var c=t.k[0].s.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),u=0;u<c;u+=1)this.v[u]=Yab,this.pv[u]=Yab;this._caching={lastFrame:Yab,lastIndex:0,value:createTypedArray("float32",c)},this.addEffect=f0b}var TransformPropertyFactory=(t1b=[0,0],z1b.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){var t,r,i,n;this.elem.globalData.frameId!==this.frameId&&(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),(this._mdf||e)&&(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime?r=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(t=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(t=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(t=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime)):this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime?(t=[],r=[],i=this.px,e=this.py,i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(t[0]=i.getValueAtTime((i.keyframes[0].t+.01)/n,0),t[1]=e.getValueAtTime((e.keyframes[0].t+.01)/n,0),r[0]=i.getValueAtTime(i.keyframes[0].t/n,0),r[1]=e.getValueAtTime(e.keyframes[0].t/n,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(t[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/n,0),t[1]=e.getValueAtTime(e.keyframes[e.keyframes.length-1].t/n,0),r[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/n,0),r[1]=e.getValueAtTime((e.keyframes[e.keyframes.length-1].t-.01)/n,0)):(t=[i.pv,e.pv],r[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/n,i.offsetTime),r[1]=e.getValueAtTime((e._caching.lastFrame+e.offsetTime-.01)/n,e.offsetTime))):t=r=t1b,this.v.rotate(-Math.atan2(t[1]-r[1],t[0]-r[0]))),this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),this.frameId=this.elem.globalData.frameId)},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],z1b),z1b.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},z1b.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,t,r){return new z1b(e,t,r)}}),t1b;function z1b(e,t,r){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti)for(var i=t.or.k.length,n=0;n<i;n+=1)t.or.k[n].to=null,t.or.k[n].ti=null;this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var r=0;r<t;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,r,i,n){var a;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}a[i]&&(!a[i]||n)||(a[i]=pointPool.newElement()),a[i][0]=e,a[i][1]=t},ShapePath.prototype.setTripleAt=function(e,t,r,i,n,a,s,o){this.setXYAt(e,t,"v",s,o),this.setXYAt(r,i,"o",s,o),this.setXYAt(n,a,"i",s,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,r=this.o,i=this.i,n=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],i[0][0],i[0][1],r[0][0],r[0][1],0,!1),n=1);for(var a=this._length-1,s=this._length,o=n;o<s;o+=1)e.setTripleAt(t[a][0],t[a][1],i[a][0],i[a][1],r[a][0],r[a][1],o,!1),--a;return e};var ShapePropertyFactory=function(){var n=-999999;function e(e,t,r){var i,n,a,s,o,l,u,c=r.lastIndex,h=this.keyframes;if(e<h[0].t-this.offsetTime)i=h[0].s[0],n=!0,c=0;else if(e>=h[h.length-1].t-this.offsetTime)i=(h[h.length-1].s?h[h.length-1].s:h[h.length-2].e)[0],n=!0;else{for(var d,f,p,m,g,y=c,v=h.length-1,b=!0;b&&(d=h[y],!((f=h[y+1]).t-this.offsetTime>e));)y<v-1?y+=1:b=!1;c=y,(n=1===d.h)||(m=e>=f.t-this.offsetTime?1:e<d.t-this.offsetTime?0:(d.__fnct?p=d.__fnct:(p=BezierFactory.getBezierEasing(d.o.x,d.o.y,d.i.x,d.i.y).get,d.__fnct=p),p((e-(d.t-this.offsetTime))/(f.t-this.offsetTime-(d.t-this.offsetTime)))),g=(f.s||d.e)[0]),i=d.s[0]}for(o=t._length,l=i.i[0].length,r.lastIndex=c,a=0;a<o;a+=1)for(s=0;s<l;s+=1)u=n?i.i[a][s]:i.i[a][s]+(g.i[a][s]-i.i[a][s])*m,t.i[a][s]=u,u=n?i.o[a][s]:i.o[a][s]+(g.o[a][s]-i.o[a][s])*m,t.o[a][s]=u,u=n?i.v[a][s]:i.v[a][s]+(g.v[a][s]-i.v[a][s])*m,t.v[a][s]=u}function i(){this.paths=this.localShapeCollection}function t(e){!function(e,t){if(e._length===t._length&&e.c===t.c){for(var r=e._length,i=0;i<r;i+=1)if(e.v[i][0]!==t.v[i][0]||e.v[i][1]!==t.v[i][1]||e.o[i][0]!==t.o[i][0]||e.o[i][1]!==t.o[i][1]||e.i[i][0]!==t.i[i][0]||e.i[i][1]!==t.i[i][1])return;return 1}}(this.v,e)&&(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function r(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;for(var e=this.kf?this.pv:(this.data.ks||this.data.pt).k,t=this.effectsSequence.length,r=0;r<t;r+=1)e=this.effectsSequence[r](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(e,t,r){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;t=(3===r?t.pt:t.ks).k;this.v=shapePool.clone(t),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function o(e,t,r){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=(3===r?t.pt:t.ks).k,this.k=!0,this.kf=!0;t=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,t),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=n,this.reset=i,this._caching={lastFrame:n,lastIndex:0},this.effectsSequence=[function(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==n&&(i<t&&e<t||r<i&&r<e)||(this._caching.lastIndex=i<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=r,a.prototype.setVValue=t,a.prototype.addEffect=s,o.prototype.getValue=r,o.prototype.interpolateShape=e,o.prototype.setVValue=t,o.prototype.addEffect=s;var l,u=(l=roundCorner,c.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,n=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=t-i,a.v[1][0]=n?e+r:e-r,a.v[1][1]=t,a.v[2][0]=e,a.v[2][1]=t+i,a.v[3][0]=n?e-r:e+r,a.v[3][1]=t,a.i[0][0]=n?e-r*l:e+r*l,a.i[0][1]=t-i,a.i[1][0]=n?e+r:e-r,a.i[1][1]=t-i*l,a.i[2][0]=n?e+r*l:e-r*l,a.i[2][1]=t+i,a.i[3][0]=n?e-r:e+r,a.i[3][1]=t+i*l,a.o[0][0]=n?e+r*l:e-r*l,a.o[0][1]=t-i,a.o[1][0]=n?e+r:e-r,a.o[1][1]=t+i*l,a.o[2][0]=n?e-r*l:e+r*l,a.o[2][1]=t+i,a.o[3][0]=n?e-r:e+r,a.o[3][1]=t-i*l}},extendPrototype([DynamicPropertyContainer],c),c);function c(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}var h=(d.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e=2*Math.floor(this.pt.v),t=2*Math.PI/e,r=!0,i=this.or.v,n=this.ir.v,a=this.os.v,s=this.is.v,o=2*Math.PI*i/(2*e),l=2*Math.PI*n/(2*e),u=-Math.PI/2;u+=this.r.v;for(var c=3===this.data.d?-1:1,h=this.v._length=0;h<e;h+=1){var d=r?a:s,f=r?o:l,p=(y=r?i:n)*Math.cos(u),m=y*Math.sin(u),g=0===p&&0===m?0:m/Math.sqrt(p*p+m*m),y=0===p&&0===m?0:-p/Math.sqrt(p*p+m*m);p+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(p,m,p-g*f*d*c,m-y*f*d*c,p+g*f*d*c,m+y*f*d*c,h,!0),r=!r,u+=t*c}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),r=2*Math.PI/t,i=this.or.v,n=this.os.v,a=2*Math.PI*i/(4*t),s=.5*-Math.PI,o=3===this.data.d?-1:1;for(s+=this.r.v,e=this.v._length=0;e<t;e+=1){var l=i*Math.cos(s),u=i*Math.sin(s),c=0===l&&0===u?0:u/Math.sqrt(l*l+u*u),h=0===l&&0===u?0:-l/Math.sqrt(l*l+u*u);l+=+this.p.v[0],u+=+this.p.v[1],this.v.setTripleAt(l,u,l-c*a*n*o,u-h*a*n*o,l+c*a*n*o,u+h*a*n*o,e,!0),s+=r*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],d),d);function d(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}var f=(p.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,n=bmMin(r,i,this.r.v),a=n*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+r,t-i+n,e+r,t-i+n,e+r,t-i+a,0,!0),this.v.setTripleAt(e+r,t+i-n,e+r,t+i-a,e+r,t+i-n,1,!0),0!==n?(this.v.setTripleAt(e+r-n,t+i,e+r-n,t+i,e+r-a,t+i,2,!0),this.v.setTripleAt(e-r+n,t+i,e-r+a,t+i,e-r+n,t+i,3,!0),this.v.setTripleAt(e-r,t+i-n,e-r,t+i-n,e-r,t+i-a,4,!0),this.v.setTripleAt(e-r,t-i+n,e-r,t-i+a,e-r,t-i+n,5,!0),this.v.setTripleAt(e-r+n,t-i,e-r+n,t-i,e-r+a,t-i,6,!0),this.v.setTripleAt(e+r-n,t-i,e+r-a,t-i,e+r-n,t-i,7,!0)):(this.v.setTripleAt(e-r,t+i,e-r+a,t+i,e-r,t+i,2),this.v.setTripleAt(e-r,t-i,e-r,t-i+a,e-r,t-i,3))):(this.v.setTripleAt(e+r,t-i+n,e+r,t-i+a,e+r,t-i+n,0,!0),0!==n?(this.v.setTripleAt(e+r-n,t-i,e+r-n,t-i,e+r-a,t-i,1,!0),this.v.setTripleAt(e-r+n,t-i,e-r+a,t-i,e-r+n,t-i,2,!0),this.v.setTripleAt(e-r,t-i+n,e-r,t-i+n,e-r,t-i+a,3,!0),this.v.setTripleAt(e-r,t+i-n,e-r,t+i-a,e-r,t+i-n,4,!0),this.v.setTripleAt(e-r+n,t+i,e-r+n,t+i,e-r+a,t+i,5,!0),this.v.setTripleAt(e+r-n,t+i,e+r-a,t+i,e+r-n,t+i,6,!0),this.v.setTripleAt(e+r,t+i-n,e+r,t+i-n,e+r,t+i-a,7,!0)):(this.v.setTripleAt(e-r,t-i,e-r+a,t-i,e-r,t-i,1,!0),this.v.setTripleAt(e-r,t+i,e-r,t+i-a,e-r,t+i,2,!0),this.v.setTripleAt(e+r,t+i,e+r-a,t+i,e+r,t+i,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],p),p);function p(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}var m={getShapeProp:function(e,t,r){var i;return 3===r||4===r?i=new((3===r?t.pt:t.ks).k.length?o:a)(e,t,r):5===r?i=new f(e,t):6===r?i=new u(e,t):7===r&&(i=new h(e,t)),i.k&&e.addDynamicProperty(i),i},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return o}};return m}(),ShapeModifiers=(zdb={},Adb={},zdb.registerModifier=function(e,t){Adb[e]||(Adb[e]=t)},zdb.getModifier=function(e,t,r){return new Adb[e](t,r)},zdb),zdb,Adb;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(e,t,r,i){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);for(var n,a=t.length||0,s=0;s<a;s+=1)n=PropertyFactory.getProp(e,t[s].v,0,0,this),this.k=n.k||this.k,this.dataProps[s]={n:t[s].n,p:n};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(e,t,r){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var i=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){var t;this.closed||(e.sh.container.addDynamicProperty(e.sh),t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()},this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated())},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,r,i,n){var a=[];t<=1?a.push({s:e,e:t}):1<=e?a.push({s:e-1,e:t-1}):(a.push({s:e,e:1}),a.push({s:0,e:t-1}));for(var s,o,l=[],u=a.length,c=0;c<u;c+=1)(o=a[c]).e*n<i||o.s*n>i+r||(s=o.s*n<=i?0:(o.s*n-i)/r,o=o.e*n>=i+r?1:(o.e*n-i)/r,l.push([s,o]));return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){for(var t=e.length,r=0;r<t;r+=1)segmentsLengthPool.release(e[r]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,r,i,n;this._mdf||e?((t=this.o.v%360/360)<0&&(t+=1),r=1<this.s.v?1+t:this.s.v<0?0+t:this.s.v+t,(i=1<this.e.v?1+t:this.e.v<0?0+t:this.e.v+t)<r&&(t=r,r=i,i=t),r=1e-4*Math.round(1e4*r),i=1e-4*Math.round(1e4*i),this.sValue=r,this.eValue=i):(r=this.sValue,i=this.eValue);var a,s,o,l,u,c=this.shapes.length,h=0;if(i===r)for(m=0;m<c;m+=1)this.shapes[m].localShapeCollection.releaseShapes(),this.shapes[m].shape._mdf=!0,this.shapes[m].shape.paths=this.shapes[m].localShapeCollection,this._mdf&&(this.shapes[m].pathsData.length=0);else if(1===i&&0===r||0===i&&1===r){if(this._mdf)for(m=0;m<c;m+=1)this.shapes[m].pathsData.length=0,this.shapes[m].shape._mdf=!0}else{for(var d,f,p=[],m=0;m<c;m+=1)if((d=this.shapes[m]).shape._mdf||this._mdf||e||2===this.m){if(s=(n=d.shape.paths)._length,u=0,!d.shape._mdf&&d.pathsData.length)u=d.totalShapeLength;else{for(o=this.releasePathsData(d.pathsData),a=0;a<s;a+=1)l=bez.getSegmentsLength(n.shapes[a]),o.push(l),u+=l.totalLength;d.totalShapeLength=u,d.pathsData=o}h+=u,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var g,y=r,v=i,b=0;for(m=c-1;0<=m;--m)if((d=this.shapes[m]).shape._mdf){for((f=d.localShapeCollection).releaseShapes(),2===this.m&&1<c?(g=this.calculateShapeEdges(r,i,d.totalShapeLength,b,h),b+=d.totalShapeLength):g=[[y,v]],s=g.length,a=0;a<s;a+=1){y=g[a][0],v=g[a][1],p.length=0,v<=1?p.push({s:d.totalShapeLength*y,e:d.totalShapeLength*v}):1<=y?p.push({s:d.totalShapeLength*(y-1),e:d.totalShapeLength*(v-1)}):(p.push({s:d.totalShapeLength*y,e:d.totalShapeLength}),p.push({s:0,e:d.totalShapeLength*(v-1)}));var S,M=this.addShapes(d,p[0]);p[0].s!==p[0].e&&(1<p.length&&(M=d.shape.paths.shapes[d.shape.paths._length-1].c?(S=M.pop(),this.addPaths(M,f),this.addShapes(d,p[1],S)):(this.addPaths(M,f),this.addShapes(d,p[1]))),this.addPaths(M,f))}d.shape.paths=f}}},TrimModifier.prototype.addPaths=function(e,t){for(var r=e.length,i=0;i<r;i+=1)t.addShape(e[i])},TrimModifier.prototype.addSegment=function(e,t,r,i,n,a,s){n.setXYAt(t[0],t[1],"o",a),n.setXYAt(r[0],r[1],"i",a+1),s&&n.setXYAt(e[0],e[1],"v",a),n.setXYAt(i[0],i[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,r,i){t.setXYAt(e[1],e[5],"o",r),t.setXYAt(e[2],e[6],"i",r+1),i&&t.setXYAt(e[0],e[4],"v",r),t.setXYAt(e[3],e[7],"v",r+1)},TrimModifier.prototype.addShapes=function(e,t,r){var i,n,a,s,o,l,u,c,h=e.pathsData,d=e.shape.paths.shapes,f=e.shape.paths._length,p=0,m=[],g=!0,y=r?(s=r._length,r._length):(r=shapePool.newElement(),s=0);for(m.push(r),i=0;i<f;i+=1){for(o=h[i].lengths,r.c=d[i].c,a=d[i].c?o.length:o.length+1,n=1;n<a;n+=1)if(p+(c=o[n-1]).addedLength<t.s)p+=c.addedLength,r.c=!1;else{if(p>t.e){r.c=!1;break}t.s<=p&&t.e>=p+c.addedLength?(this.addSegment(d[i].v[n-1],d[i].o[n-1],d[i].i[n],d[i].v[n],r,s,g),g=!1):(l=bez.getNewSegment(d[i].v[n-1],d[i].v[n],d[i].o[n-1],d[i].i[n],(t.s-p)/c.addedLength,(t.e-p)/c.addedLength,o[n-1]),this.addSegmentFromArray(l,r,s,g),r.c=g=!1),p+=c.addedLength,s+=1}if(d[i].c&&o.length&&(c=o[n-1],p<=t.e?(u=o[n-1].addedLength,t.s<=p&&t.e>=p+u?(this.addSegment(d[i].v[n-1],d[i].o[n-1],d[i].i[0],d[i].v[0],r,s,g),g=!1):(l=bez.getNewSegment(d[i].v[n-1],d[i].v[0],d[i].o[n-1],d[i].i[0],(t.s-p)/u,(t.e-p)/u,o[n-1]),this.addSegmentFromArray(l,r,s,g),r.c=g=!1)):r.c=!1,p+=c.addedLength,s+=1),r._length&&(r.setXYAt(r.v[y][0],r.v[y][1],"i",y),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),p>t.e)break;i<f-1&&(r=shapePool.newElement(),g=!0,m.push(r),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var r=shapePool.newElement();r.c=e.c;for(var i,n,a,s,o,l,u,c,h,d,f=e._length,p=0,m=0;m<f;m+=1)i=e.v[m],a=e.o[m],n=e.i[m],i[0]===a[0]&&i[1]===a[1]&&i[0]===n[0]&&i[1]===n[1]?0!==m&&m!==f-1||e.c?(s=0===m?e.v[f-1]:e.v[m-1],l=(o=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(o/2,t)/o:0,h=i[0]+(s[0]-i[0])*l,d=i[1]-(i[1]-s[1])*l,u=h-(h-i[0])*roundCorner,c=d-(d-i[1])*roundCorner,r.setTripleAt(h,d,u,c,h,d,p),p+=1,s=m===f-1?e.v[0]:e.v[m+1],l=(o=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(o/2,t)/o:0,u=i[0]+(s[0]-i[0])*l,c=i[1]+(s[1]-i[1])*l,h=u-(u-i[0])*roundCorner,d=c-(c-i[1])*roundCorner,r.setTripleAt(u,c,u,c,h,d,p)):r.setTripleAt(i[0],i[1],a[0],a[1],n[0],n[1],p):r.setTripleAt(e.v[m][0],e.v[m][1],e.o[m][0],e.o[m][1],e.i[m][0],e.i[m][1],p),p+=1;return r},RoundCornersModifier.prototype.processShapes=function(e){var t,r,i,n=this.shapes.length,a=this.rd.v;if(0!==a)for(var s,o,l=0;l<n;l+=1){if(o=(s=this.shapes[l]).localShapeCollection,s.shape._mdf||this._mdf||e)for(o.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(t[r],a));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){for(var r=t/100,i=[0,0],n=e._length,a=0,a=0;a<n;a+=1)i[0]+=e.v[a][0],i[1]+=e.v[a][1];i[0]/=n,i[1]/=n;var s,o,l,u,c,h,d=shapePool.newElement();for(d.c=e.c,a=0;a<n;a+=1)s=e.v[a][0]+(i[0]-e.v[a][0])*r,o=e.v[a][1]+(i[1]-e.v[a][1])*r,l=e.o[a][0]+(i[0]-e.o[a][0])*-r,u=e.o[a][1]+(i[1]-e.o[a][1])*-r,c=e.i[a][0]+(i[0]-e.i[a][0])*-r,h=e.i[a][1]+(i[1]-e.i[a][1])*-r,d.setTripleAt(s,o,l,u,c,h,a);return d},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,r,i,n=this.shapes.length,a=this.amount.v;if(0!==a)for(var s,o,l=0;l<n;l+=1){if(o=(s=this.shapes[l]).localShapeCollection,s.shape._mdf||this._mdf||e)for(o.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,i=s.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(t[r],a));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,r,i,n,a){var s=a?-1:1,o=i.s.v[0]+(1-i.s.v[0])*(1-n),l=i.s.v[1]+(1-i.s.v[1])*(1-n);e.translate(i.p.v[0]*s*n,i.p.v[1]*s*n,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*s*n),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),r.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),r.scale(a?1/o:o,a?1/l:l),r.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(e,t,r,i){for(this.elem=e,this.arr=t,this.pos=r,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[r]);0<r;)this._elements.unshift(t[--r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r]._processed=!1,"gr"===e[r].ty&&this.resetElements(e[r].it)},RepeaterModifier.prototype.cloneElements=function(e){e=JSON.parse(JSON.stringify(e));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(e,t){for(var r=e.length,i=0;i<r;i+=1)e[i]._render=t,"gr"===e[i].ty&&this.changeGroupRender(e[i].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,r,i,n,a,s=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes(),s=!0}for(i=a=0;i<=this._groups.length-1;i+=1)this._groups[i]._render=o=a<l,this.changeGroupRender(this._groups[i].it,o),o||(0!==(o=(o=this.elemsData[i].it)[o.length-1]).transform.op.v?(o.transform.op._mdf=!0,o.transform.op.v=0):o.transform.op._mdf=!1),a+=1;this._currentCopies=l;var c=this.o.v,e=c%1,h=0<c?Math.floor(c):Math.ceil(c),d=this.pMatrix.props,f=this.rMatrix.props,p=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,g,y=0;if(0<c){for(;y<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;e&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,e,!1),y+=e)}else if(c<0){for(;h<y;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),--y;e&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-e,!0),y-=e)}for(i=1===this.data.m?0:this._currentCopies-1,n=1===this.data.m?1:-1,a=this._currentCopies;a;){if(g=(r=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==y){for((0!==i&&1===n||i!==this._currentCopies-1&&-1===n)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),m=0;m<g;m+=1)r[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<g;m+=1)r[m]=this.matrix.props[m];y+=1,--a,i+=n}}else for(a=this._currentCopies,i=0,n=1;a;)r=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,--a,i+=n;return s},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){for(var e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<r;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(e,t){for(var r=0,i=this.o.length/2;r<i;){if(.01<Math.abs(e[4*r]-e[4*t+2*r]))return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){for(var t,r,i=4*this.data.p,n=0;n<i;n+=1)t=n%4==0?100:255,r=Math.round(this.prop.v[n]*t),this.c[n]!==r&&(this.c[n]=r,this._cmdf=!e);if(this.o.length)for(i=this.prop.v.length,n=4*this.data.p;n<i;n+=1)t=n%2==0?100:1,r=n%2==0?Math.round(100*this.prop.v[n]):this.prop.v[n],this.o[n-4*this.data.p]!==r&&(this.o[n-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(e,t,r,i){if(0===t)return"";for(var n=e.o,a=e.i,s=e.v,o=" M"+i.applyToPointStringified(s[0][0],s[0][1]),l=1;l<t;l+=1)o+=" C"+i.applyToPointStringified(n[l-1][0],n[l-1][1])+" "+i.applyToPointStringified(a[l][0],a[l][1])+" "+i.applyToPointStringified(s[l][0],s[l][1]);return r&&t&&(o+=" C"+i.applyToPointStringified(n[l-1][0],n[l-1][1])+" "+i.applyToPointStringified(a[0][0],a[0][1])+" "+i.applyToPointStringified(s[0][0],s[0][1]),o+="z"),o},audioControllerFactory=(Gfb.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(e){for(var t=this.audios.length,r=0;r<t;r+=1)this.audios[r].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):Howl?new Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){for(var e=this.audios.length,t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new Gfb});function Gfb(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}var ImagePreloader=(Vfb=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}(),j5b.prototype={loadAssets:function(e,t){this.imagesLoadedCb=t;for(var r=e.length,i=0;i<r;i+=1)e[i].layers||(e[i].t&&"seq"!==e[i].t?3===e[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[i]))):(this.totalImages+=1,this.images.push(this._createImageData(e[i]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,r=this.images.length;t<r;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(e){var t=Yfb(e,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){i.img=Vfb,this._imageLoaded()}.bind(this),!1),r.src=t;var i={img:r,assetData:e};return i},createImageData:function(e){var t=Yfb(e,this.assetsPath,this.path),r=createNS("image");isSafari?this.testImageLoaded(r):r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){i.img=Vfb,this._imageLoaded()}.bind(this),!1),r.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this._elementHelper.append?this._elementHelper.append(r):this._elementHelper.appendChild(r);var i={img:r,assetData:e};return i},imageLoaded:Wfb,footageLoaded:Xfb,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},j5b),Vfb;function Wfb(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Xfb(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Yfb(e,t,r){var i="";return e.e?i=e.p:t?i=t+(t=-1!==(t=e.p).indexOf("images/")?t.split("/")[1]:t):(i=r,i+=e.u||"",i+=e.p),i}function j5b(){this._imageLoaded=Wfb.bind(this),this._footageLoaded=Xfb.bind(this),this.testImageLoaded=function(e){var t=0,r=setInterval(function(){(e.getBBox().width||500<t)&&(this._imageLoaded(),clearInterval(r)),t+=1}.bind(this),50)}.bind(this),this.createFootageData=function(e){var t={assetData:e},e=Yfb(e,this.assetsPath,this.path);return assetLoader.load(e,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}var featureSupport=(S5b={maskType:!0},(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(S5b.maskType=!1),S5b),S5b,filtersFactory=(T5b={},T5b.createFilter=function(e,t){var r=createNS("filter");r.setAttribute("id",e),!0!==t&&(r.setAttribute("filterUnits","objectBoundingBox"),r.setAttribute("x","0%"),r.setAttribute("y","0%"),r.setAttribute("width","100%"),r.setAttribute("height","100%"));return r},T5b.createAlphaToLuminanceFilter=function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e},T5b),T5b,assetLoader={load:function(e,t,r){var i,n=new XMLHttpRequest;try{n.responseType="json"}catch(e){}n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)i=$5b(n),t(i);else try{i=$5b(n),t(i)}catch(e){r&&r(e)}},n.open("GET",e,!0),n.send()}};function $5b(e){return e.response&&"object"==typeof e.response?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}function TextAnimatorProperty(e,t,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}function TextAnimatorDataProperty(e,t,r){var i={propType:!1},n=PropertyFactory.getProp,a=t.a;this.a={r:a.r?n(e,a.r,0,degToRads,r):i,rx:a.rx?n(e,a.rx,0,degToRads,r):i,ry:a.ry?n(e,a.ry,0,degToRads,r):i,sk:a.sk?n(e,a.sk,0,degToRads,r):i,sa:a.sa?n(e,a.sa,0,degToRads,r):i,s:a.s?n(e,a.s,1,.01,r):i,a:a.a?n(e,a.a,1,0,r):i,o:a.o?n(e,a.o,0,.01,r):i,p:a.p?n(e,a.p,1,0,r):i,sw:a.sw?n(e,a.sw,0,0,r):i,sc:a.sc?n(e,a.sc,1,0,r):i,fc:a.fc?n(e,a.fc,1,0,r):i,fh:a.fh?n(e,a.fh,0,0,r):i,fs:a.fs?n(e,a.fs,0,.01,r):i,fb:a.fb?n(e,a.fb,0,.01,r):i,t:a.t?n(e,a.t,0,0,r):i},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,r),this.s.t=t.s.t}function LetterProps(e,t,r,i,n,a){this.o=e,this.sw=t,this.sc=r,this.fc=i,this.m=n,this.p=a,this._mdf={o:!0,sw:!!t,sc:!!r,fc:!!i,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){for(var e,t=this._textData.a.length,r=PropertyFactory.getProp,i=0;i<t;i+=1)e=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var r,i,n,a,s,o,l,u,c,h,d,f,p,m=this._moreOptions.alignment.v,g=this._animatorsData,y=this._textData,v=this.mHelper,b=this._renderType,S=this.renderedLetters.length,M=e.l;if(this._hasMaskedPath){if(p=this._pathData.m,!this._pathData.n||this._pathData._mdf){for(var T,A=p.v,E={tLength:0,segments:[]},D=(A=this._pathData.r?A.reverse():A)._length-1,_=d=0;_<D;_+=1)T=bez.buildBezierData(A.v[_],A.v[_+1],[A.o[_][0]-A.v[_][0],A.o[_][1]-A.v[_][1]],[A.i[_+1][0]-A.v[_+1][0],A.i[_+1][1]-A.v[_+1][1]]),E.tLength+=T.segmentLength,E.segments.push(T),d+=T.segmentLength;_=D,p.v.c&&(T=bez.buildBezierData(A.v[_],A.v[0],[A.o[_][0]-A.v[_][0],A.o[_][1]-A.v[_][1]],[A.i[0][0]-A.v[0][0],A.i[0][1]-A.v[0][1]]),E.tLength+=T.segmentLength,E.segments.push(T),d+=T.segmentLength),this._pathData.pi=E}if(E=this._pathData.pi,r=this._pathData.f.v,s=1,a=!(n=o=0),c=E.segments,r<0&&p.v.c)for(E.tLength<Math.abs(r)&&(r=-Math.abs(r)%E.tLength),s=(u=c[o=c.length-1].points).length-1;r<0;)r+=u[s].partialLength,--s<0&&(s=(u=c[--o].points).length-1);l=(u=c[o].points)[s-1],h=(i=u[s]).partialLength}D=M.length;var x,I,C,k,w,L,O,P,N,R,j,F,z,B,V,U,G=0,Y=0,H=1.2*e.finalSize*.714,W=!0,$=g.length,Q=-1,K=r,Z=o,X=s,q=-1,J="",ee=this.defaultPropsArray;if(2===e.j||1===e.j){var te=0,re=0,ie=2===e.j?-.5:-1,ne=0,ae=!0;for(_=0;_<D;_+=1)if(M[_].n){for(te&&(te+=re);ne<_;)M[ne].animatorJustifyOffset=te,ne+=1;ae=!(te=0)}else{for(oe=0;oe<$;oe+=1)(x=g[oe].a).t.propType&&(ae&&2===e.j&&(re+=x.t.v*ie),(C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars)).length?te+=x.t.v*C[0]*ie:te+=x.t.v*C*ie);ae=!1}for(te&&(te+=re);ne<_;)M[ne].animatorJustifyOffset=te,ne+=1}for(_=0;_<D;_+=1){if(v.reset(),O=1,M[_].n)G=0,Y+=e.yOffset,Y+=W?1:0,r=K,W=!1,this._hasMaskedPath&&(l=(u=c[o=Z].points)[(s=X)-1],h=(i=u[s]).partialLength,n=0),V=F=B=J="",ee=this.defaultPropsArray;else{if(this._hasMaskedPath){if(q!==M[_].line){switch(e.j){case 1:r+=d-e.lineWidths[M[_].line];break;case 2:r+=(d-e.lineWidths[M[_].line])/2}q=M[_].line}Q!==M[_].ind&&(M[Q]&&(r+=M[Q].extra),r+=M[_].an/2,Q=M[_].ind),r+=m[0]*M[_].an*.005;for(var se=0,oe=0;oe<$;oe+=1)(x=g[oe].a).p.propType&&((C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars)).length?se+=x.p.v[0]*C[0]:se+=x.p.v[0]*C),x.a.propType&&((C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars)).length?se+=x.a.v[0]*C[0]:se+=x.a.v[0]*C);for(a=!0;a;)r+se<=n+h||!u?(f=(r+se-n)/i.partialLength,w=l.point[0]+(i.point[0]-l.point[0])*f,L=l.point[1]+(i.point[1]-l.point[1])*f,v.translate(-m[0]*M[_].an*.005,-m[1]*H*.01),a=!1):u&&(n+=i.partialLength,(s+=1)>=u.length&&(s=0,u=c[o+=1]?c[o].points:p.v.c?c[o=s=0].points:(n-=i.partialLength,null)),u&&(l=i,h=(i=u[s]).partialLength));k=M[_].an/2-M[_].add,v.translate(-k,0,0)}else k=M[_].an/2-M[_].add,v.translate(-k,0,0),v.translate(-m[0]*M[_].an*.005,-m[1]*H*.01,0);for(oe=0;oe<$;oe+=1)(x=g[oe].a).t.propType&&(C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars),0===G&&0===e.j||(this._hasMaskedPath?C.length?r+=x.t.v*C[0]:r+=x.t.v*C:C.length?G+=x.t.v*C[0]:G+=x.t.v*C));for(e.strokeWidthAnim&&(N=e.sw||0),e.strokeColorAnim&&(P=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(R=[e.fc[0],e.fc[1],e.fc[2]]),oe=0;oe<$;oe+=1)(x=g[oe].a).a.propType&&((C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars)).length?v.translate(-x.a.v[0]*C[0],-x.a.v[1]*C[1],x.a.v[2]*C[2]):v.translate(-x.a.v[0]*C,-x.a.v[1]*C,x.a.v[2]*C));for(oe=0;oe<$;oe+=1)(x=g[oe].a).s.propType&&((C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars)).length?v.scale(1+(x.s.v[0]-1)*C[0],1+(x.s.v[1]-1)*C[1],1):v.scale(1+(x.s.v[0]-1)*C,1+(x.s.v[1]-1)*C,1));for(oe=0;oe<$;oe+=1){if(x=g[oe].a,C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars),x.sk.propType&&(C.length?v.skewFromAxis(-x.sk.v*C[0],x.sa.v*C[1]):v.skewFromAxis(-x.sk.v*C,x.sa.v*C)),x.r.propType&&(C.length?v.rotateZ(-x.r.v*C[2]):v.rotateZ(-x.r.v*C)),x.ry.propType&&(C.length?v.rotateY(x.ry.v*C[1]):v.rotateY(x.ry.v*C)),x.rx.propType&&(C.length?v.rotateX(x.rx.v*C[0]):v.rotateX(x.rx.v*C)),x.o.propType&&(C.length?O+=(x.o.v*C[0]-O)*C[0]:O+=(x.o.v*C-O)*C),e.strokeWidthAnim&&x.sw.propType&&(C.length?N+=x.sw.v*C[0]:N+=x.sw.v*C),e.strokeColorAnim&&x.sc.propType)for(j=0;j<3;j+=1)C.length?P[j]+=(x.sc.v[j]-P[j])*C[0]:P[j]+=(x.sc.v[j]-P[j])*C;if(e.fillColorAnim&&e.fc){if(x.fc.propType)for(j=0;j<3;j+=1)C.length?R[j]+=(x.fc.v[j]-R[j])*C[0]:R[j]+=(x.fc.v[j]-R[j])*C;x.fh.propType&&(R=C.length?addHueToRGB(R,x.fh.v*C[0]):addHueToRGB(R,x.fh.v*C)),x.fs.propType&&(R=C.length?addSaturationToRGB(R,x.fs.v*C[0]):addSaturationToRGB(R,x.fs.v*C)),x.fb.propType&&(R=C.length?addBrightnessToRGB(R,x.fb.v*C[0]):addBrightnessToRGB(R,x.fb.v*C))}}for(oe=0;oe<$;oe+=1)(x=g[oe].a).p.propType&&(C=g[oe].s.getMult(M[_].anIndexes[oe],y.a[oe].s.totalChars),this._hasMaskedPath?C.length?v.translate(0,x.p.v[1]*C[0],-x.p.v[2]*C[1]):v.translate(0,x.p.v[1]*C,-x.p.v[2]*C):C.length?v.translate(x.p.v[0]*C[0],x.p.v[1]*C[1],-x.p.v[2]*C[2]):v.translate(x.p.v[0]*C,x.p.v[1]*C,-x.p.v[2]*C));if(e.strokeWidthAnim&&(F=N<0?0:N),e.strokeColorAnim&&(z="rgb("+Math.round(255*P[0])+","+Math.round(255*P[1])+","+Math.round(255*P[2])+")"),e.fillColorAnim&&e.fc&&(B="rgb("+Math.round(255*R[0])+","+Math.round(255*R[1])+","+Math.round(255*R[2])+")"),this._hasMaskedPath)v.translate(0,-e.ls),v.translate(0,m[1]*H*.01+Y,0),y.p.p&&(U=(i.point[1]-l.point[1])/(i.point[0]-l.point[0]),U=180*Math.atan(U)/Math.PI,i.point[0]<l.point[0]&&(U+=180),v.rotate(-U*Math.PI/180)),v.translate(w,L,0),r-=m[0]*M[_].an*.005,M[_+1]&&Q!==M[_+1].ind&&(r+=M[_].an/2,r+=.001*e.tr*e.finalSize);else{switch(v.translate(G,Y,0),e.ps&&v.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:v.translate(M[_].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[M[_].line]),0,0);break;case 2:v.translate(M[_].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[M[_].line])/2,0,0)}v.translate(0,-e.ls),v.translate(k,0,0),v.translate(m[0]*M[_].an*.005,m[1]*H*.01,0),G+=M[_].l+.001*e.tr*e.finalSize}"html"===b?J=v.toCSS():"svg"===b?J=v.to2dCSS():ee=[v.props[0],v.props[1],v.props[2],v.props[3],v.props[4],v.props[5],v.props[6],v.props[7],v.props[8],v.props[9],v.props[10],v.props[11],v.props[12],v.props[13],v.props[14],v.props[15]],V=O}S<=_?(I=new LetterProps(V,F,z,B,J,ee),this.renderedLetters.push(I),S+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[_],this.lettersChangedFlag=I.update(V,F,z,B,J,ee)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(e,t,r,i,n,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1;var s=this._mdf.p=!1;return this.o!==e&&(this.o=e,s=this._mdf.o=!0),this.sw!==t&&(this.sw=t,s=this._mdf.sw=!0),this.sc!==r&&(this.sc=r,s=this._mdf.sc=!0),this.fc!==i&&(this.fc=i,s=this._mdf.fc=!0),this.m!==n&&(this.m=n,s=this._mdf.m=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,s=this._mdf.p=!0),s},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=1<this.data.d.k.length,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,r=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;for(var i=this.effectsSequence.length,n=e||this.data.d.k[this.keysIndex].s,a=0;a<i;a+=1)n=r!==this.keysIndex?this.effectsSequence[a](n,n.t):this.effectsSequence[a](this.currentData,n.t);t!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,r=0,i=e.length;r<=i-1&&!(r===i-1||e[r+1].t>t);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,r=FontManager.getCombinedCharacterCodes(),i=[],n=0,a=e.length;n<a;)t=e.charCodeAt(n),-1!==r.indexOf(t)?i[i.length-1]+=e.charAt(n):55296<=t&&t<=56319&&56320<=(t=e.charCodeAt(n+1))&&t<=57343?(i.push(e.substr(n,2)),n+=1):i.push(e.charAt(n)),n+=1;return i},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,r,i,n=this.elem.globalData.fontManager,a=this.data,s=[],o=0,l=a.m.g,u=0,c=0,h=0,d=[],f=0,p=0,m=n.getFontByName(e.f),g=0,y=getFontProperties(m);e.fWeight=y.weight,e.fStyle=y.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),D=e.finalText.length,e.finalLineHeight=e.lh;var v,b=e.tr/1e3*e.finalSize;if(e.sz)for(var S=!0,M=e.sz[0],T=e.sz[1];S;){for(var A,E=0,f=0,D=(A=this.buildFinalText(e.t)).length,b=e.tr/1e3*e.finalSize,_=-1,x=0;x<D;x+=1)v=A[x].charCodeAt(0),t=!1," "===A[x]?_=x:13!==v&&3!==v||(t=!(f=0),E+=e.finalLineHeight||1.2*e.finalSize),M<f+(g=n.chars?(i=n.getCharData(A[x],m.fStyle,m.fFamily),t?0:i.w*e.finalSize/100):n.measureText(A[x],e.f,e.finalSize))&&" "!==A[x]?(-1===_?D+=1:x=_,E+=e.finalLineHeight||1.2*e.finalSize,A.splice(x,_===x?1:0,"\r"),_=-1,f=0):(f+=g,f+=b);E+=m.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&T<E?(--e.finalSize,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=A,D=e.finalText.length,S=!1)}f=-b;var I,g=0,C=0;for(x=0;x<D;x+=1)if(t=!1,13===(v=(I=e.finalText[x]).charCodeAt(0))||3===v?(C=0,d.push(f),p=p<f?f:p,f=-2*b,t=!(r=""),h+=1):r=I,g=n.chars?(i=n.getCharData(I,m.fStyle,n.getFontByName(e.f).fFamily),t?0:i.w*e.finalSize/100):n.measureText(r,e.f,e.finalSize)," "===I?C+=g+b:(f+=g+b+C,C=0),s.push({l:g,an:g,add:u,n:t,anIndexes:[],val:r,line:h,animatorJustifyOffset:0}),2==l){if(u+=g,""===r||" "===r||x===D-1){for(""!==r&&" "!==r||(u-=g);c<=x;)s[c].an=u,s[c].ind=o,s[c].extra=g,c+=1;o+=1,u=0}}else if(3==l){if(u+=g,""===r||x===D-1){for(""===r&&(u-=g);c<=x;)s[c].an=u,s[c].ind=o,s[c].extra=g,c+=1;u=0,o+=1}}else s[o].ind=o,s[o].extra=0,o+=1;if(e.l=s,p=p<f?f:p,d.push(f),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=p,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=d;for(var k,w,L,O,P=a.a,N=P.length,R=[],j=0;j<N;j+=1){for((k=P[j]).a.sc&&(e.strokeColorAnim=!0),k.a.sw&&(e.strokeWidthAnim=!0),(k.a.fc||k.a.fh||k.a.fs||k.a.fb)&&(e.fillColorAnim=!0),L=k.s.b,x=O=0;x<D;x+=1)(w=s[x]).anIndexes[j]=O,(1==L&&""!==w.val||2==L&&""!==w.val&&" "!==w.val||3==L&&(w.n||" "==w.val||x==D-1)||4==L&&(w.n||x==D-1))&&(1===k.s.rn&&R.push(O),O+=1);a.a[j].s.totalChars=O;var F,z=-1;if(1===k.s.rn)for(x=0;x<D;x+=1)z!=(w=s[x]).anIndexes[j]&&(z=w.anIndexes[j],F=R.splice(Math.floor(Math.random()*R.length),1)[0]),w.anIndexes[j]=F}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=m.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var r=this.copyData({},this.data.d.k[t].s),r=this.copyData(r,e);this.data.d.k[t].s=r,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){e=this.data.d.k[e].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(g7b=Math.max,h7b=Math.min,i7b=Math.floor,j7b.prototype={getMult:function(e){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var t=0,r=0,i=1,n=1;0<this.ne.v?t=this.ne.v/100:r=-this.ne.v/100,0<this.xe.v?i=1-this.xe.v/100:n=1+this.xe.v/100;var a=BezierFactory.getBezierEasing(t,r,i,n).get,s=0,t=this.finalS,r=this.finalE,i=this.data.sh;return(s=2===i?a(s=r===t?r<=e?1:0:g7b(0,h7b(.5/(r-t)+(e-t)/(r-t),1))):3===i?a(s=r===t?r<=e?0:1:1-g7b(0,h7b(.5/(r-t)+(e-t)/(r-t),1))):4===i?(r===t?s=0:(s=g7b(0,h7b(.5/(r-t)+(e-t)/(r-t),1)))<.5?s*=2:s=1-2*(s-.5),a(s)):a(s=5===i?r===t?0:(a=-(n=r-t)/2+(e=h7b(g7b(0,e+.5-t),r-t)),n=n/2,Math.sqrt(1-a*a/(n*n))):6===i?r===t?0:(e=h7b(g7b(0,e+.5-t),r-t),(1+Math.cos(Math.PI+2*Math.PI*e/(r-t)))/2):e>=i7b(t)?g7b(0,h7b(e-t<0?h7b(r,1)-(t-e):r-e,1)):s))*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,r=this.o.v/t,e=this.s.v/t+r,t=this.e.v/t+r;t<e&&(r=e,e=t,t=r),this.finalS=e,this.finalE=t}},extendPrototype([DynamicPropertyContainer],j7b),{getTextSelectorProp:function(e,t,r){return new j7b(e,t)}}),g7b,h7b,i7b;function j7b(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),"e"in t?this.e=PropertyFactory.getProp(e,t.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}var poolFactory=function(e,t,r){var i=0,n=e,a=createSizedArray(n);return{newElement:function(){var e;e=i?a[--i]:t();return e},release:function(e){i===n&&(a=pooling.double(a),n*=2);r&&r(e);a[i]=e,i+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},pointPool=poolFactory(8,function(){return createTypedArray("float32",2)}),shapePool=($7b=poolFactory(4,function(){return new ShapePath},function(e){for(var t=e._length,r=0;r<t;r+=1)pointPool.release(e.v[r]),pointPool.release(e.i[r]),pointPool.release(e.o[r]),e.v[r]=null,e.i[r]=null,e.o[r]=null;e._length=0,e.c=!1}),$7b.clone=function(e){var t,r=$7b.newElement(),i=void 0===e._length?e.v.length:e._length;for(r.setLength(i),r.c=e.c,t=0;t<i;t+=1)r.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return r},$7b),$7b,shapeCollectionPool=(gib={newShapeCollection:function(){var e;e=hib?jib[--hib]:new ShapeCollection;return e},release:function(e){var t,r=e._length;for(t=0;t<r;t+=1)shapePool.release(e.shapes[t]);e._length=0,hib===iib&&(jib=pooling.double(jib),iib*=2);jib[hib]=e,hib+=1}},hib=0,iib=4,jib=createSizedArray(iib),gib),gib,hib,iib,jib,segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(e){for(var t=e.lengths.length,r=0;r<t;r+=1)bezierLengthPool.release(e.lengths[r]);e.lengths.length=0}),bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),markerParser=function(t){for(var e=[],r=0;r<t.length;r+=1){var i=t[r],i={time:i.tm,duration:i.dr};try{i.payload=JSON.parse(t[r].cm)}catch(e){try{i.payload=function(e){for(var t,r=e.split("\r\n"),i={},n=0,a=0;a<r.length;a+=1)2===(t=r[a].split(":")).length&&(i[t[0]]=t[1].trim(),n+=1);if(0===n)throw new Error;return i}(t[r].cm)}catch(e){i.payload={name:t[r]}}}e.push(i)}return e};function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r,i="";t&&t.title&&(e=createNS("title"),r=createElementID(),e.setAttribute("id",r),e.textContent=t.title,this.svgElement.appendChild(e),i+=r),t&&t.description&&(r=createNS("desc"),n=createElementID(),r.setAttribute("id",n),r.textContent=t.description,this.svgElement.appendChild(r),i+=" "+n),i&&this.svgElement.setAttribute("aria-labelledby",i);var n=createNS("defs");this.svgElement.appendChild(n);i=createNS("g");this.svgElement.appendChild(i),this.layerElement=i,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:n,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(e,t,r){this.data=e,this.element=t,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,n=this.globalData.defs,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";for(var s,o,l,u,c=this.masksProperties,h=0,d=[],f=createElementID(),p="clipPath",m="clip-path",g=0;g<a;g+=1)if(("a"!==c[g].mode&&"n"!==c[g].mode||c[g].inv||100!==c[g].o.k||c[g].o.x)&&(m=p="mask"),"s"!==c[g].mode&&"i"!==c[g].mode||0!==h?s=null:((s=createNS("rect")).setAttribute("fill","#ffffff"),s.setAttribute("width",this.element.comp.data.w||0),s.setAttribute("height",this.element.comp.data.h||0),d.push(s)),i=createNS("path"),"n"===c[g].mode)this.viewData[g]={op:PropertyFactory.getProp(this.element,c[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[g],3),elem:i,lastPath:""},n.appendChild(i);else{if(h+=1,i.setAttribute("fill","s"===c[g].mode?"#000000":"#ffffff"),i.setAttribute("clip-rule","nonzero"),0!==c[g].x.k?(m=p="mask",l=PropertyFactory.getProp(this.element,c[g].x,0,null,this.element),u=createElementID(),(S=createNS("filter")).setAttribute("id",u),(o=createNS("feMorphology")).setAttribute("operator","erode"),o.setAttribute("in","SourceGraphic"),o.setAttribute("radius","0"),S.appendChild(o),n.appendChild(S),i.setAttribute("stroke","s"===c[g].mode?"#000000":"#ffffff")):l=o=null,this.storedData[g]={elem:i,x:l,expan:o,lastPath:"",lastOperator:"",filterId:u,lastRadius:0},"i"===c[g].mode){for(var y=d.length,v=createNS("g"),b=0;b<y;b+=1)v.appendChild(d[b]);var S=createNS("mask");S.setAttribute("mask-type","alpha"),S.setAttribute("id",f+"_"+h),S.appendChild(i),n.appendChild(S),v.setAttribute("mask","url("+locationHref+"#"+f+"_"+h+")"),d.length=0,d.push(v)}else d.push(i);c[g].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[g]={elem:i,lastPath:"",op:PropertyFactory.getProp(this.element,c[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[g],3),invRect:s},this.viewData[g].prop.k||this.drawPath(c[g],this.viewData[g].prop.v,this.viewData[g])}for(this.maskElement=createNS(p),a=d.length,g=0;g<a;g+=1)this.maskElement.appendChild(d[g]);0<h&&(this.maskElement.setAttribute("id",f),this.element.maskedElement.setAttribute(m,"url("+locationHref+"#"+f+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(e,t){this.elem=e,this.pos=t}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(e,t,r){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=r,this.lvl=t,this._isAnimated=!!r.k;for(var i=0,n=e.length;i<n;){if(e[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGTransformData(e,t,r){this.transform={mProps:e,op:t,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r}function SVGGradientFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,r)}function SVGGradientStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,r),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(e){var t,r,i=this.layers.length;for(this.completeLayers=!0,t=i-1;0<=t;--t)this.elements[t]||(r=this.layers[t]).ip-r.st<=e-this.layers[t].st&&r.op-r.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;for(var t,r=e.length,i=this.layers.length,n=0;n<r;n+=1)for(t=0;t<i;){if(this.layers[t].id===e[n].id){this.layers[t]=e[n];break}t+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,r){for(var i=this.elements,n=this.layers,a=0,s=n.length;a<s;)n[a].ind==t&&(i[a]&&!0!==i[a]?(r.push(i[a]),i[a].setAsParent(),void 0!==n[a].parent?this.buildElementParenting(e,n[a].parent,r):e.setHierarchy(r)):(this.buildItem(a),this.addPendingElement(e))),a+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){for(var t,r=e.length,i=0;i<r;i+=1)e[i].xt&&((t=this.createComp(e[i])).initExpressions(),this.globalData.projectInterface.registerComposition(t))},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var r=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.setAttribute("x",0),i.setAttribute("y",0);var n=createElementID();r.setAttribute("id",n),r.appendChild(i),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+n+")"),t.appendChild(r),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;for(var e=this.layers?this.layers.length:0,t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t,r=this.elements;r[e]||99===this.layers[e].ty||(r[e]=!0,t=this.createItem(this.layers[e]),r[e]=t,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?t.setMatte(r[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(t))))},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,r=this.elements.length;t<r;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=r-1;0<=t;--t)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<r;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){e=e.getBaseElement();if(e){for(var r,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(e,r):this.layerElement.appendChild(e)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(e){var t;1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||(this.renderConfig.clearCanvas?(this.transformMat.cloneFromProps(e),t=this.contextData.cTr.props,this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props),t=this.contextData.cTr.props,this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])):this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13]))},CanvasRenderer.prototype.ctxOpacity=function(e){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=e<0?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();for(var r=this.contextData.saved[this.contextData.cArrPos],i=0;i<16;i+=1)r[i]=t[i];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),--this.contextData.cArrPos;for(var t=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props,i=0;i<16;i+=1)r[i]=t[i];this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),t=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=t,this.globalData.currentGlobalAlpha!==t&&(this.canvasContext.globalAlpha=t,this.globalData.currentGlobalAlpha=t)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){var t,r;this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),(t=this.animationItem.container.style).width="100%",t.height="100%",t.transformOrigin=r="0px 0px 0px",t.mozTransformOrigin=r,t.webkitTransformOrigin=r,t["-webkit-transform"]=r,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,(this.globalData.renderer=this).globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,r,i,n,a,s;this.reset(),this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")?(r=(a=this.renderConfig.preserveAspectRatio.split(" "))[1]||"meet",i=(s=a[0]||"xMidYMid").substr(0,4),n=s.substr(4),(a=e/t)<(s=this.transformCanvas.w/this.transformCanvas.h)&&"meet"===r||s<a&&"slice"===r?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===i&&(s<a&&"meet"===r||a<s&&"slice"===r)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===i&&(s<a&&"meet"===r||a<s&&"slice"===r)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===n&&(a<s&&"meet"===r||s<a&&"slice"===r)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===n&&(a<s&&"meet"===r||s<a&&"slice"===r)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0):("none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0),this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");for(var e=(this.layers?this.layers.length:0)-1;0<=e;--e)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var r;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var i=this.layers.length;for(this.completeLayers||this.checkLayers(e),r=0;r<i;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(e-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=i-1;0<=r;--r)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(e){var t,r=this.elements;r[e]||99===this.layers[e].ty||(t=this.createItem(this.layers[e],this,this.globalData),(r[e]=t).initExpressions())},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){e=this.layers[t];if(e.ddd&&this.supports3d)this.addTo3dContainer(r,t);else if(this.threeDElements)this.addTo3dContainer(r,t);else{for(var i,n,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(n=this.elements[a],i=(this.layers[a].ddd?this.getThreeDContainerByPos(a):n.getBaseElement())||i),a+=1;i?e.ddd&&this.supports3d||this.layerElement.insertBefore(r,i):e.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRenderer.prototype.createShape=function(e){return new(this.supports3d?HShapeElement:SVGShapeElement)(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return new(this.supports3d?HTextElement:SVGTextLottieElement)(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return new(this.supports3d?HImageElement:IImageElement)(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return new(this.supports3d?HCompElement:SVGCompElement)(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return new(this.supports3d?HSolidElement:ISolidElement)(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,r=this.threeDElements.length;t<r;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(e,t){var r=createTag("div");styleDiv(r);var i,n,a=createTag("div");styleDiv(a),"3d"===t&&((i=r.style).width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px",i.webkitTransformOrigin=n="50% 50%",i.mozTransformOrigin=n,i.transformOrigin=n,(i=a.style).transform=n="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",i.webkitTransform=n),r.appendChild(a);t={container:a,perspectiveElem:r,startPos:e,endPos:e,type:t};return this.threeDElements.push(t),t},HybridRenderer.prototype.build3dContainers=function(){for(var e,t=this.layers.length,r="",i=0;i<t;i+=1)this.layers[i].ddd&&3!==this.layers[i].ty?(e="3d"!==r?this.createThreeDContainer(i,r="3d"):e).endPos=Math.max(e.endPos,i):(e="2d"!==r?this.createThreeDContainer(i,r="2d"):e).endPos=Math.max(e.endPos,i);for(i=(t=this.threeDElements.length)-1;0<=i;--i)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var r=0,i=this.threeDElements.length;r<i;){if(t<=this.threeDElements[r].endPos){for(var n,a=this.threeDElements[r].startPos;a<t;)this.elements[a]&&this.elements[a].getBaseElement&&(n=this.elements[a].getBaseElement()),a+=1;n?this.threeDElements[r].container.insertBefore(e,n):this.threeDElements[r].container.appendChild(e);break}r+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=createTag("div"),r=this.animationItem.wrapper,i=t.style;i.width=e.w+"px",i.height=e.h+"px",styleDiv(this.resizerElem=t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),r.appendChild(t),i.overflow="hidden";t=createNS("svg");t.setAttribute("width","1"),t.setAttribute("height","1"),styleDiv(t),this.resizerElem.appendChild(t);i=createNS("defs");t.appendChild(i),this.data=e,this.setupGlobalData(e,t),this.globalData.defs=i,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;for(var e=this.layers?this.layers.length:0,t=0;t<e;t+=1)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,r,i=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,i=i/n<this.globalData.compSize.w/this.globalData.compSize.h?(e=i/this.globalData.compSize.w,t=i/this.globalData.compSize.w,r=0,(n-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(e=n/this.globalData.compSize.h,t=n/this.globalData.compSize.h,r=(i-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,0),n=this.resizerElem.style;n.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+r+","+i+",0,1)",n.transform=n.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else for(var e=this.globalData.compSize.w,t=this.globalData.compSize.h,r=this.threeDElements.length,i=0;i<r;i+=1){var n=this.threeDElements[i].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))+"px",n.perspective=n.webkitPerspective}},HybridRenderer.prototype.searchExtraCompositions=function(e){for(var t,r=e.length,i=createTag("div"),n=0;n<r;n+=1)e[n].xt&&((t=this.createComp(e[n],i,this.globalData.comp,null)).initExpressions(),this.globalData.projectInterface.registerComposition(t))},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){for(var t,r=this.element.finalTransform.mat,i=this.masksProperties.length,n=0;n<i;n+=1)(this.viewData[n].prop._mdf||e)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||e)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),"n"!==this.masksProperties[n].mode&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[n].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||e)&&(t=this.storedData[n].expan,this.storedData[n].x.v<0?("erode"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[n].filterId+")")),t.setAttribute("radius",-this.storedData[n].x.v)):("dilate"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",2*this.storedData[n].x.v))))},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,r){for(var i,n=" M"+t.v[0][0]+","+t.v[0][1],a=t._length,s=1;s<a;s+=1)n+=" C"+t.o[s-1][0]+","+t.o[s-1][1]+" "+t.i[s][0]+","+t.i[s][1]+" "+t.v[s][0]+","+t.v[s][1];t.c&&1<a&&(n+=" C"+t.o[s-1][0]+","+t.o[s-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),r.lastPath!==n&&(i="",r.elem&&(t.c&&(i=e.inv?this.solidPath+n:n),r.elem.setAttribute("d",i)),r.lastPath=n)},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){for(var r=this.dynamicProperties.length,i=0;i<r;i+=1)(t||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,r=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<i;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),r=0;r<i;r+=1)e=this.hierarchy[r].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var r=!0,i=this.comp;r;)i.finalTransform?(i.data.hasMask&&t.splice(0,0,i.finalTransform),i=i.comp):r=!1;for(var n,a=t.length,s=0;s<a;s+=1)n=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-n[0],e[1]-n[1],0];return e},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){for(var e=this.renderableComponents.length,t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,r){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,t),this.setGradientOpacity(t,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var r=createElementID(),i=createNS(1===t.t?"linearGradient":"radialGradient");i.setAttribute("id",r),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");for(var n,a=[],s=4*t.g.p,o=0;o<s;o+=4)n=createNS("stop"),i.appendChild(n),a.push(n);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+r+")"),this.gf=i,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var r,i=createNS("mask"),n=createNS("path");i.appendChild(n);var a=createElementID(),s=createElementID();i.setAttribute("id",s);var o=createNS(1===e.t?"linearGradient":"radialGradient");o.setAttribute("id",a),o.setAttribute("spreadMethod","pad"),o.setAttribute("gradientUnits","userSpaceOnUse");for(var l=(e.g.k.k[0].s||e.g.k.k).length,u=this.stops,c=4*e.g.p;c<l;c+=2)(r=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),o.appendChild(r),u.push(r);n.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+a+")"),this.of=o,this.ms=i,this.ost=u,this.maskId=s,t.msElem=n}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=(Ylb=new Matrix,Zlb=new Matrix,{createRenderFunction:function(e){switch(e.ty){case"fl":return cmb;case"gf":return emb;case"gs":return dmb;case"st":return fmb;case"sh":case"el":case"rc":case"sr":return bmb;case"tr":return amb;default:return null}}}),Ylb,Zlb;function amb(e,t,r){(r||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(r||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function bmb(e,t,r){for(var i,n,a,s,o,l,u,c,h,d,f=t.styles.length,p=t.lvl,m=0;m<f;m+=1){if(s=t.sh._mdf||r,t.styles[m].lvl<p){for(u=Zlb.reset(),h=p-t.styles[m].lvl,d=t.transformers.length-1;!s&&0<h;)s=t.transformers[d].mProps._mdf||s,--h,--d;if(s)for(h=p-t.styles[m].lvl,d=t.transformers.length-1;0<h;)c=t.transformers[d].mProps.v.props,u.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),--h,--d}else u=Ylb;if(n=(l=t.sh.paths)._length,s){for(a="",i=0;i<n;i+=1)(o=l.shapes[i])&&o._length&&(a+=buildShapeString(o,o._length,o.c,u));t.caches[m]=a}else a=t.caches[m];t.styles[m].d+=!0===e.hd?"":a,t.styles[m]._mdf=s||t.styles[m]._mdf}}function cmb(e,t,r){var i=t.style;(t.c._mdf||r)&&i.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r)&&i.pElem.setAttribute("fill-opacity",t.o.v)}function dmb(e,t,r){emb(e,t,r),fmb(0,t,r)}function emb(e,t,r){var i,n,a,s,o=t.gf,l=t.g._hasOpacity,u=t.s.v,c=t.e.v;if((t.o._mdf||r)&&(n="gf"===e.ty?"fill-opacity":"stroke-opacity",t.style.pElem.setAttribute(n,t.o.v)),(t.s._mdf||r)&&(n="x1"==(i=1===e.t?"x1":"cx")?"y1":"cy",o.setAttribute(i,u[0]),o.setAttribute(n,u[1]),l&&!t.g._collapsable&&(t.of.setAttribute(i,u[0]),t.of.setAttribute(n,u[1]))),t.g._cmdf||r)for(var h=t.cst,d=t.g.c,f=h.length,p=0;p<f;p+=1)(a=h[p]).setAttribute("offset",d[4*p]+"%"),a.setAttribute("stop-color","rgb("+d[4*p+1]+","+d[4*p+2]+","+d[4*p+3]+")");if(l&&(t.g._omdf||r)){var m=t.g.o;for(f=(h=t.g._collapsable?t.cst:t.ost).length,p=0;p<f;p+=1)a=h[p],t.g._collapsable||a.setAttribute("offset",m[2*p]+"%"),a.setAttribute("stop-opacity",m[2*p+1])}1===e.t?(t.e._mdf||r)&&(o.setAttribute("x2",c[0]),o.setAttribute("y2",c[1]),l&&!t.g._collapsable&&(t.of.setAttribute("x2",c[0]),t.of.setAttribute("y2",c[1]))):((t.s._mdf||t.e._mdf||r)&&(s=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),o.setAttribute("r",s),l&&!t.g._collapsable&&t.of.setAttribute("r",s)),(t.e._mdf||t.h._mdf||t.a._mdf||r)&&(s=s||Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),r=Math.atan2(c[1]-u[1],c[0]-u[0]),1<=(c=t.h.v)?c=.99:c<=-1&&(c=-.99),s=s*c,c=Math.cos(r+t.a.v)*s+u[0],u=Math.sin(r+t.a.v)*s+u[1],o.setAttribute("fx",c),o.setAttribute("fy",u),l&&!t.g._collapsable&&(t.of.setAttribute("fx",c),t.of.setAttribute("fy",u))))}function fmb(e,t,r){var i=t.style,n=t.d;n&&(n._mdf||r)&&n.dashStr&&(i.pElem.setAttribute("stroke-dasharray",n.dashStr),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset[0])),t.c&&(t.c._mdf||r)&&i.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r)&&i.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||r)&&(i.pElem.setAttribute("stroke-width",t.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",t.w.v))}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(e,t,r,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n=4;"rc"===t.ty?n=5:"el"===t.ty?n=6:"sr"===t.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,n,e);for(var a,s=r.length,o=0;o<s;o+=1)r[o].closed||(a={transforms:i.addTransformSequence(r[o].transforms),trNodes:[]},this.styledShapes.push(a),r[o].elements.push(a))}function BaseElement(){}function NullElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initFrame(),this.initTransform(e,t,r),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(e,t,r){this.initElement(e,t,r)}function AudioElement(e,t,r){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,r),this._isPlaying=!1,this._canPlay=!1;r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function FootageElement(e,t,r){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,r)}function SVGCompElement(e,t,r){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(e,t,r){this.textSpans=[],this.renderType="svg",this.initElement(e,t,r)}function SVGShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,r),this.prevViewData=[]}function SVGTintFilter(e,t){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),e.appendChild(r),(r=createNS("feColorMatrix")).setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result","f2"),e.appendChild(r),this.matrixFilter=r,100===t.effectElements[2].p.v&&!t.effectElements[2].p.k||(t=createNS("feMerge"),e.appendChild(t),(e=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),t.appendChild(e),(e=createNS("feMergeNode")).setAttribute("in","f2"),t.appendChild(e))}function SVGFillFilter(e,t){this.filterManager=t;t=createNS("feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(t),this.matrixFilter=t}function SVGGaussianBlurEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;t=createNS("feGaussianBlur");e.appendChild(t),this.feGaussianBlur=t}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;t=createNS("feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","linearRGB"),t.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.setAttribute("result","f1"),e.appendChild(t);t=createNS("feComponentTransfer");t.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(t),this.matrixFilter=t;e=createNS("feFuncR");e.setAttribute("type","table"),t.appendChild(e),this.feFuncR=e;e=createNS("feFuncG");e.setAttribute("type","table"),t.appendChild(e),this.feFuncG=e;e=createNS("feFuncB");e.setAttribute("type","table"),t.appendChild(e),this.feFuncB=e}function SVGProLevelsFilter(e,t){this.filterManager=t;var r=this.filterManager.effectElements,t=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",t)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",t)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",t)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",t)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(t.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(t),t=createNS("feComponentTransfer")),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&(t.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(t),this.feFuncRComposed=this.createFeFunc("feFuncR",t),this.feFuncGComposed=this.createFeFunc("feFuncG",t),this.feFuncBComposed=this.createFeFunc("feFuncB",t))}function SVGDropShadowEffect(e,t){var r=t.container.globalData.renderConfig.filterSize;e.setAttribute("x",r.x),e.setAttribute("y",r.y),e.setAttribute("width",r.width),e.setAttribute("height",r.height),this.filterManager=t;t=createNS("feGaussianBlur");t.setAttribute("in","SourceAlpha"),t.setAttribute("result","drop_shadow_1"),t.setAttribute("stdDeviation","0"),this.feGaussianBlur=t,e.appendChild(t);t=createNS("feOffset");t.setAttribute("dx","25"),t.setAttribute("dy","0"),t.setAttribute("in","drop_shadow_1"),t.setAttribute("result","drop_shadow_2"),this.feOffset=t,e.appendChild(t);t=createNS("feFlood");t.setAttribute("flood-color","#00ff00"),t.setAttribute("flood-opacity","1"),t.setAttribute("result","drop_shadow_3"),this.feFlood=t,e.appendChild(t);t=createNS("feComposite");t.setAttribute("in","drop_shadow_3"),t.setAttribute("in2","drop_shadow_2"),t.setAttribute("operator","in"),t.setAttribute("result","drop_shadow_4"),e.appendChild(t);t=createNS("feMerge");e.appendChild(t),e=createNS("feMergeNode"),t.appendChild(e),(e=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=e,this.feMerge=t,this.originalNodeAdded=!1,t.appendChild(e)}ShapeTransformManager.prototype={addTransformSequence:function(e){for(var t=e.length,r="_",i=0;i<t;i+=1)r+=e[i].transform.key+"_";var n=this.sequences[r];return n||(n={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=n,this.sequenceList.push(n)),n},processSequence:function(e,t){for(var r,i=0,n=e.transforms.length,a=t;i<n&&!t;){if(e.transforms[i].transform.mProps._mdf){a=!0;break}i+=1}if(a)for(e.finalTransform.reset(),i=n-1;0<=i;--i)r=e.transforms[i].transform.mProps.v.props,e.finalTransform.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]);e._mdf=a},processSequences:function(e){for(var t=this.sequenceList.length,r=0;r<t;r+=1)this.processSequence(this.sequenceList[r],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,r){this.globalData=t,this.comp=r,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,r,i,n,a,s,o=null;this.data.td?3==this.data.td||1==this.data.td?((i=createNS("mask")).setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),this.globalData.defs.appendChild(o=i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),o=n,i.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+e+")"))):2==this.data.td&&((a=createNS("mask")).setAttribute("id",this.layerId),a.setAttribute("mask-type","alpha"),s=createNS("g"),a.appendChild(s),e=createElementID(),t=filtersFactory.createFilter(e),(r=createNS("feComponentTransfer")).setAttribute("in","SourceGraphic"),t.appendChild(r),(i=createNS("feFuncA")).setAttribute("type","table"),i.setAttribute("tableValues","1.0 0.0"),r.appendChild(i),this.globalData.defs.appendChild(t),(i=createNS("rect")).setAttribute("width",this.comp.data.w),i.setAttribute("height",this.comp.data.h),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("fill","#ffffff"),i.setAttribute("opacity","0"),s.setAttribute("filter","url("+locationHref+"#"+e+")"),s.appendChild(i),s.appendChild(this.layerElement),o=s,featureSupport.maskType||(a.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),s.appendChild(i),n.appendChild(this.layerElement),o=n,s.appendChild(n)),this.globalData.defs.appendChild(a)):this.data.tt?(this.matteElement.appendChild(this.layerElement),o=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.ty||this.data.hd||(s=createNS("clipPath"),(n=createNS("path")).setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z"),a=createElementID(),s.setAttribute("id",a),s.appendChild(n),this.globalData.defs.appendChild(s),this.checkMasks()?((s=createNS("g")).setAttribute("clip-path","url("+locationHref+"#"+a+")"),s.appendChild(this.layerElement),this.transformedElement=s,o?o.appendChild(this.transformedElement):this.baseElement=this.transformedElement):this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+a+")")),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(e){for(var t=this.shapeModifiers.length,r=0;r<t;r+=1)this.shapeModifiers[r].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){for(var e=this.shapes.length,t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;0<=t&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);--t);}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(e){for(var t=this.processedElements,r=0,i=t.length;r<i;){if(t[r].elem===e)return t[r].pos;r+=1}return 0},addProcessedElement:function(e,t){for(var r=this.processedElements,i=r.length;i;)if(r[--i].elem===e)return void(r[i].pos=t);r.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(e,t,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,r),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){for(var r,i=t.length,n="",a=0;a<i;a+=1)r=t[a].ks.k,n+=buildShapeString(r,r.i.length,!0,e);return n},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,r,i,n){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r])/2,0,0)}t.translate(i,n,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){var t;this.tm._placeholder?this.renderedFrame=e/this.data.sr:((r=this.tm.v)===this.data.op&&(r=this.data.op-1),this.renderedFrame=r);var r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=r-1;0<=t;--t)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){for(var e=this.layers.length,t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},AudioElement.prototype.prepareFrame=function(e){this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder?this._currentTime=e/this.data.sr:(e=this.tm.v,this._currentTime=e)},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||.1<Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek()))&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this.audio.volume(e)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,r=e.length,i=[],n="";t<r;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(i.push(n),n=""):n+=e[t],t+=1;return i.push(n),i},SVGTextLottieElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var t,r,i=this.globalData.fontManager.getFontByName(e.f);i.fClass?this.layerElement.setAttribute("class",i.fClass):(this.layerElement.setAttribute("font-family",i.fFamily),t=e.fWeight,r=e.fStyle,this.layerElement.setAttribute("font-style",r),this.layerElement.setAttribute("font-weight",t)),this.layerElement.setAttribute("aria-label",e.t);var n,a=e.l||[],s=!!this.globalData.fontManager.chars;b=a.length;var o=this.mHelper,l="",u=this.data.singleShape,c=0,h=0,d=!0,f=.001*e.tr*e.finalSize;if(!u||s||e.sz){var p,m=this.textSpans.length;for(S=0;S<b;S+=1)s&&u&&0!==S||(n=S<m?this.textSpans[S]:createNS(s?"path":"text"),m<=S&&(n.setAttribute("stroke-linecap","butt"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("stroke-miterlimit","4"),this.textSpans[S]=n,this.layerElement.appendChild(n)),n.style.display="inherit"),o.reset(),o.scale(e.finalSize/100,e.finalSize/100),u&&(a[S].n&&(c=-f,h+=e.yOffset,h+=d?1:0,d=!1),this.applyTextPropertiesToMatrix(e,o,a[S].line,c,h),c+=a[S].l||0,c+=f),s?(p=(p=(p=this.globalData.fontManager.getCharData(e.finalText[S],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&p.data||{}).shapes?p.shapes[0].it:[],u?l+=this.createPathShape(o,p):n.setAttribute("d",this.createPathShape(o,p))):(u&&n.setAttribute("transform","translate("+o.props[12]+","+o.props[13]+")"),n.textContent=a[S].val,n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));u&&n&&n.setAttribute("d",l)}else{var g=this.textContainer,y="start";switch(e.j){case 1:y="end";break;case 2:y="middle";break;default:y="start"}g.setAttribute("text-anchor",y),g.setAttribute("letter-spacing",f);for(var v=this.buildTextContents(e.finalText),b=v.length,h=e.ps?e.ps[1]+e.ascent:0,S=0;S<b;S+=1)(n=this.textSpans[S]||createNS("tspan")).textContent=v[S],n.setAttribute("x",0),n.setAttribute("y",h),n.style.display="inherit",g.appendChild(n),this.textSpans[S]=n,h+=e.finalLineHeight;this.layerElement.appendChild(g)}for(;S<this.textSpans.length;)this.textSpans[S].style.display="none",S+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){var e;return this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged&&(this._sizeChanged=!1,e=this.layerElement.getBBox(),this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}),this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;for(var e,t,r=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l,n=i.length,a=0;a<n;a+=1)i[a].n||(e=r[a],t=this.textSpans[a],e._mdf.m&&t.setAttribute("transform",e.m),e._mdf.o&&t.setAttribute("opacity",e.o),e._mdf.sw&&t.setAttribute("stroke-width",e.sw),e._mdf.sc&&t.setAttribute("stroke",e.sc),e._mdf.fc&&t.setAttribute("fill",e.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){for(var e,t,r,i=this.shapes.length,n=this.stylesList.length,a=[],s=!1,o=0;o<n;o+=1){for(r=this.stylesList[o],s=!1,e=a.length=0;e<i;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(a.push(t),s=t._isAnimated||s);1<a.length&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var r,i=new SVGStyleData(e,t),t=i.pElem;return"st"===e.ty?r=new SVGStrokeStyleData(this,e,i):"fl"===e.ty?r=new SVGFillStyleData(this,e,i):"gf"!==e.ty&&"gs"!==e.ty||(r=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,i),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),t.setAttribute("mask","url("+locationHref+"#"+r.maskId+")"))),"st"!==e.ty&&"gs"!==e.ty||(t.setAttribute("stroke-linecap",this.lcEnum[e.lc]||"round"),t.setAttribute("stroke-linejoin",this.ljEnum[e.lj]||"round"),t.setAttribute("fill-opacity","0"),1===e.lj&&t.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&t.setAttribute("fill-rule","evenodd"),e.ln&&t.setAttribute("id",e.ln),e.cl&&t.setAttribute("class",e.cl),e.bm&&(t.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(i),this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var r=TransformPropertyFactory.getTransformProperty(this,e,this),t=new SVGTransformData(r,r.o,t);return this.addToAnimatedContents(e,t),t},SVGShapeElement.prototype.createShapeElement=function(e,t,r){var i=4;"rc"===e.ty?i=5:"el"===e.ty?i=6:"sr"===e.ty&&(i=7);i=new SVGShapeData(t,r,ShapePropertyFactory.getShapeProp(this,e,i,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var r=0,i=this.animatedContents.length;r<i;){if(this.animatedContents[r].element===t)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){for(var t=e.styles,r=this.stylesList.length,i=0;i<r;i+=1)this.stylesList[i].closed||t.push(this.stylesList[i])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var e=this.itemsData.length,t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,r,i,n,a,s){for(var o,l,u,c,h,d=[].concat(a),f=e.length-1,p=[],m=[],g=f;0<=g;--g){if((h=this.searchProcessedElement(e[g]))?t[g]=r[h-1]:e[g]._render=s,"fl"===e[g].ty||"st"===e[g].ty||"gf"===e[g].ty||"gs"===e[g].ty)h?t[g].style.closed=!1:t[g]=this.createStyleElement(e[g],n),e[g]._render&&i.appendChild(t[g].style.pElem),p.push(t[g].style);else if("gr"===e[g].ty){if(h)for(l=t[g].it.length,o=0;o<l;o+=1)t[g].prevViewData[o]=t[g].it[o];else t[g]=this.createGroupElement(e[g]);this.searchShapes(e[g].it,t[g].it,t[g].prevViewData,t[g].gr,n+1,d,s),e[g]._render&&i.appendChild(t[g].gr)}else"tr"===e[g].ty?(h||(t[g]=this.createTransformElement(e[g],i)),u=t[g].transform,d.push(u)):"sh"===e[g].ty||"rc"===e[g].ty||"el"===e[g].ty||"sr"===e[g].ty?(h||(t[g]=this.createShapeElement(e[g],d,n)),this.setElementStyles(t[g])):"tm"===e[g].ty||"rd"===e[g].ty||"ms"===e[g].ty||"pb"===e[g].ty?(h?(c=t[g]).closed=!1:((c=ShapeModifiers.getModifier(e[g].ty)).init(this,e[g]),t[g]=c,this.shapeModifiers.push(c)),m.push(c)):"rp"===e[g].ty&&(h?(c=t[g]).closed=!0:(c=ShapeModifiers.getModifier(e[g].ty),(t[g]=c).init(this,e,g,t),this.shapeModifiers.push(c),s=!1),m.push(c));this.addProcessedElement(e[g],g+1)}for(f=p.length,g=0;g<f;g+=1)p[g].closed=!0;for(f=m.length,g=0;g<f;g+=1)m[g].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();for(var e=this.stylesList.length,t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){for(var e,t=this.animatedContents.length,r=0;r<t;r+=1)e=this.animatedContents[r],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(e){var t,r;(e||this.filterManager._mdf)&&(t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,e=this.filterManager.effectElements[2].p.v/100,this.matrixFilter.setAttribute("values",r[0]-t[0]+" 0 0 0 "+t[0]+" "+(r[1]-t[1])+" 0 0 0 "+t[1]+" "+(r[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+e+" 0"))},SVGFillFilter.prototype.renderFrame=function(e){var t;(e||this.filterManager._mdf)&&(t=this.filterManager.effectElements[2].p.v,e=this.filterManager.effectElements[6].p.v,this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+e+" 0"))},SVGGaussianBlurEffect.prototype.renderFrame=function(e){var t;(e||this.filterManager._mdf)&&(t=.3*this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,this.feGaussianBlur.setAttribute("stdDeviation",(3==e?0:t)+" "+(2==e?0:t)),t=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate",this.feGaussianBlur.setAttribute("edgeMode",t))},SVGStrokeEffect.prototype.initialize=function(){var e,t,r,i,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,r=0):i=(r=this.filterManager.effectElements[0].p.v-1)+1,(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);r<i;r+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:r});if(3===this.filterManager.effectElements[10].p.v){var a=createNS("mask"),s=createElementID();a.setAttribute("id",s),a.setAttribute("mask-type","alpha"),a.appendChild(t),this.elem.globalData.defs.appendChild(a);var o=createNS("g");for(o.setAttribute("mask","url("+locationHref+"#"+s+")");n[0];)o.appendChild(n[0]);this.elem.layerElement.appendChild(o),this.masker=a,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();for(var t,r,i=this.paths.length,n=0;n<i;n+=1)if(-1!==this.paths[n].m&&(u=this.elem.maskManager.viewData[this.paths[n].m],t=this.paths[n].p,(e||this.filterManager._mdf||u.prop._mdf)&&t.setAttribute("d",u.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||u.prop._mdf)){if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){for(var a=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),s=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=t.getTotalLength(),l="0 0 0 "+o*a+" ",u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,c=Math.floor(o*(s-a)/u),h=0;h<c;h+=1)l+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+10*o+" 0 0"}else l="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;t.setAttribute("stroke-dasharray",l)}(e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),1!==this.filterManager.effectElements[10].p.v&&2!==this.filterManager.effectElements[10].p.v||(e||this.filterManager.effectElements[3].p._mdf)&&(r=this.filterManager.effectElements[3].p.v,this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*r[0])+","+bmFloor(255*r[1])+","+bmFloor(255*r[2])+")"))},SVGTritoneFilter.prototype.renderFrame=function(e){var t,r,i,n;(e||this.filterManager._mdf)&&(n=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,i=(r=this.filterManager.effectElements[2].p.v)[0]+" "+t[0]+" "+n[0],e=r[1]+" "+t[1]+" "+n[1],n=r[2]+" "+t[2]+" "+n[2],this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",e),this.feFuncB.setAttribute("tableValues",n))},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){e=createNS(e);return e.setAttribute("type","table"),t.appendChild(e),e},SVGProLevelsFilter.prototype.getTableValue=function(e,t,r,i,n){for(var a,s=0,o=Math.min(e,t),l=Math.max(e,t),u=Array.call(null,{length:256}),c=0,h=n-i,d=t-e;s<=256;)a=(a=s/256)<=o?d<0?n:i:l<=a?d<0?i:n:i+h*Math.pow((a-e)/d,1/r),u[c]=a,c+=1,s+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){var t,r;(e||this.filterManager._mdf)&&(r=this.filterManager.effectElements,this.feFuncRComposed&&(e||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(t=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(t=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(t=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(t=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(t=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",t)))},SVGDropShadowEffect.prototype.renderFrame=function(e){var t,r;(e||this.filterManager._mdf)&&((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),(e||this.filterManager.effectElements[0].p._mdf)&&(r=this.filterManager.effectElements[0].p.v,this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*r[0]),Math.round(255*r[1]),Math.round(255*r[2])))),(e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),(e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf)&&(t=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,e=t*Math.cos(r),r=t*Math.sin(r),this.feOffset.setAttribute("dx",e),this.feOffset.setAttribute("dy",r)))};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,r){this.initialized=!1,this.filterManager=t,this.filterElem=e,(this.elem=r).matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}function SVGEffects(e){var t,r,i=e.data.ef?e.data.ef.length:0,n=createElementID(),a=filtersFactory.createFilter(n,!0),s=0;for(this.filters=[],t=0;t<i;t+=1)r=null,20===e.data.ef[t].ty?(s+=1,r=new SVGTintFilter(a,e.effectsManager.effectElements[t])):21===e.data.ef[t].ty?(s+=1,r=new SVGFillFilter(a,e.effectsManager.effectElements[t])):22===e.data.ef[t].ty?r=new SVGStrokeEffect(e,e.effectsManager.effectElements[t]):23===e.data.ef[t].ty?(s+=1,r=new SVGTritoneFilter(a,e.effectsManager.effectElements[t])):24===e.data.ef[t].ty?(s+=1,r=new SVGProLevelsFilter(a,e.effectsManager.effectElements[t])):25===e.data.ef[t].ty?(s+=1,r=new SVGDropShadowEffect(a,e.effectsManager.effectElements[t])):28===e.data.ef[t].ty?r=new SVGMatte3Effect(a,e.effectsManager.effectElements[t],e):29===e.data.ef[t].ty&&(s+=1,r=new SVGGaussianBlurEffect(a,e.effectsManager.effectElements[t])),r&&this.filters.push(r);s&&(e.globalData.defs.appendChild(a),e.layerElement.setAttribute("filter","url("+locationHref+"#"+n+")")),this.filters.length&&e.addRenderableComponent(this)}function CVContextData(){var e;this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;for(this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,r)}function CVCompElement(e,t,r){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(e,t){this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);for(var r=this.masksProperties.length,i=!1,n=0;n<r;n+=1)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);(this.hasMasks=i)&&this.element.addRenderableComponent(this)}function CVShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,r)}function CVSolidElement(e,t,r){this.initElement(e,t,r)}function CVTextElement(e,t,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,r)}function CVEffects(){}function HBaseElement(){}function HSolidElement(e,t,r){this.initElement(e,t,r)}function HCompElement(e,t,r){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,r)}function HImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,r)}function HCameraElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initHierarchy();r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to)for(var i=e.ks.or.k.length,n=0;n<i;n+=1)e.ks.or.k[n].to=null,e.ks.or.k[n].ti=null;this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,r=_svgMatteSymbols.length;t<r;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var r=e.layerElement.parentNode;if(r){for(var i,n=r.children,a=0,s=n.length;a<s&&n[a]!==e.layerElement;)a+=1;a<=s-2&&(i=n[a+1]);var o=createNS("use");o.setAttribute("href","#"+t),i?r.insertBefore(o,i):r.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){var r,i,n,a;this.findSymbol(t)||(r=createElementID(),(i=createNS("mask")).setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t),(n=e.globalData.defs).appendChild(i),(a=createNS("symbol")).setAttribute("id",r),this.replaceInParent(t,r),a.appendChild(t.layerElement),n.appendChild(a),(a=createNS("use")).setAttribute("href","#"+r),i.appendChild(a),t.data.hd=!1,t.show()),e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,r=0,i=t.length;r<i;)t[r]&&t[r].data.ind===e&&this.setElementAsMask(this.elem,t[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){for(var t=this.filters.length,r=0;r<t;r+=1)this.filters[r].renderFrame(e)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);for(var r=0,r=this._length;r<e;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e,t=this.globalData;t.blendMode!==this.data.bm&&(t.blendMode=this.data.bm,e=getBlendMode(this.data.bm),t.canvasContext.globalCompositeOperation=e)},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){var e;this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),e=0===this.data.ty,this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){var e,t,r,i,n,a,s,o,l;!this.img.width||this.assetData.w===this.img.width&&this.assetData.h===this.img.height||((e=createTag("canvas")).width=this.assetData.w,e.height=this.assetData.h,t=e.getContext("2d"),r=this.img.width,i=this.img.height,a=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio,a<(n=r/i)&&"xMidYMid slice"===l||n<a&&"xMidYMid slice"!==l?s=(o=i)*a:o=(s=r)/a,t.drawImage(this.img,(r-s)/2,(i-o)/2,s,o,0,0,this.assetData.w,this.assetData.h),this.img=e)},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip();for(var t=this.layers.length-1;0<=t;--t)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){for(var e=this.layers.length-1;0<=e;--e)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,r,i,n=this.element.finalTransform.mat,a=this.element.canvasContext,s=this.masksProperties.length;for(a.beginPath(),e=0;e<s;e+=1)if("n"!==this.masksProperties[e].mode){this.masksProperties[e].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),i=this.viewData[e].v,t=n.applyToPointArray(i.v[0][0],i.v[0][1],0),a.moveTo(t[0],t[1]);for(var o=i._length,l=1;l<o;l+=1)r=n.applyToTriplePoints(i.o[l-1],i.i[l],i.v[l]),a.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);r=n.applyToTriplePoints(i.o[l-1],i.i[0],i.v[0]),a.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var r={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},i={};return"fl"===e.ty||"st"===e.ty?(i.c=PropertyFactory.getProp(this,e.c,1,255,this),i.c.k||(r.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(i.s=PropertyFactory.getProp(this,e.s,1,null,this),i.e=PropertyFactory.getProp(this,e.e,1,null,this),i.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,e.g,this)),i.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty?(r.lc=this.lcEnum[e.lc]||"round",r.lj=this.ljEnum[e.lj]||"round",1==e.lj&&(r.ml=e.ml),i.w=PropertyFactory.getProp(this,e.w,0,null,this),i.w.k||(r.wi=i.w.v),e.d&&(t=new DashProperty(this,e.d,"canvas",this),i.d=t,i.d.k||(r.da=i.d.dashArray,r.do=i.d.dashoffset[0]))):r.r=2===e.r?"evenodd":"nonzero",this.stylesList.push(r),i.style=r,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){e=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var e=this.itemsData.length,t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){for(var t=this.stylesList.length,r=0;r<t;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){for(var e=this.stylesList.length,t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,r,i,n){for(var a,s,o,l,u,c=e.length-1,h=[],d=[],f=[].concat(n),p=c;0<=p;--p){if((o=this.searchProcessedElement(e[p]))?t[p]=r[o-1]:e[p]._shouldRender=i,"fl"===e[p].ty||"st"===e[p].ty||"gf"===e[p].ty||"gs"===e[p].ty)o?t[p].style.closed=!1:t[p]=this.createStyleElement(e[p],f),h.push(t[p].style);else if("gr"===e[p].ty){if(o)for(s=t[p].it.length,a=0;a<s;a+=1)t[p].prevViewData[a]=t[p].it[a];else t[p]=this.createGroupElement(e[p]);this.searchShapes(e[p].it,t[p].it,t[p].prevViewData,i,f)}else"tr"===e[p].ty?(o||(u=this.createTransformElement(e[p]),t[p]=u),f.push(t[p]),this.addTransformToStyleList(t[p])):"sh"===e[p].ty||"rc"===e[p].ty||"el"===e[p].ty||"sr"===e[p].ty?o||(t[p]=this.createShapeElement(e[p])):"tm"===e[p].ty||"rd"===e[p].ty||"pb"===e[p].ty?(o?(l=t[p]).closed=!1:((l=ShapeModifiers.getModifier(e[p].ty)).init(this,e[p]),t[p]=l,this.shapeModifiers.push(l)),d.push(l)):"rp"===e[p].ty&&(o?(l=t[p]).closed=!0:(l=ShapeModifiers.getModifier(e[p].ty),(t[p]=l).init(this,e,p,t),this.shapeModifiers.push(l),i=!1),d.push(l));this.addProcessedElement(e[p],p+1)}for(this.removeTransformFromStyleList(),this.closeStyles(h),c=d.length,p=0;p<c;p+=1)d[p].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){for(var e,t,r,i,n,a,s,o,l=this.stylesList.length,u=this.globalData.renderer,c=this.globalData.canvasContext,h=0;h<l;h+=1)if(("st"!==(s=(o=this.stylesList[h]).type)&&"gs"!==s||0!==o.wi)&&o.data._shouldRender&&0!==o.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),n=o.elements,"st"===s||"gs"===s?(c.strokeStyle="st"===s?o.co:o.grd,c.lineWidth=o.wi,c.lineCap=o.lc,c.lineJoin=o.lj,c.miterLimit=o.ml||0):c.fillStyle="fl"===s?o.co:o.grd,u.ctxOpacity(o.coOp),"st"!==s&&"gs"!==s&&c.beginPath(),u.ctxTransform(o.preTransforms.finalTransform.props),t=n.length,e=0;e<t;e+=1){for("st"!==s&&"gs"!==s||(c.beginPath(),o.da&&(c.setLineDash(o.da),c.lineDashOffset=o.do)),i=(a=n[e].trNodes).length,r=0;r<i;r+=1)"m"===a[r].t?c.moveTo(a[r].p[0],a[r].p[1]):"c"===a[r].t?c.bezierCurveTo(a[r].pts[0],a[r].pts[1],a[r].pts[2],a[r].pts[3],a[r].pts[4],a[r].pts[5]):c.closePath();"st"!==s&&"gs"!==s||(c.stroke(),o.da&&c.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&c.fill(o.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,r,i){for(var n=e,a=t.length-1;0<=a;--a)"tr"===t[a].ty?(n=r[a].transform,this.renderShapeTransform(e,n)):"sh"===t[a].ty||"el"===t[a].ty||"rc"===t[a].ty||"sr"===t[a].ty?this.renderPath(t[a],r[a]):"fl"===t[a].ty?this.renderFill(t[a],r[a],n):"st"===t[a].ty?this.renderStroke(t[a],r[a],n):"gf"===t[a].ty||"gs"===t[a].ty?this.renderGradientFill(t[a],r[a],n):"gr"===t[a].ty?this.renderShape(n,t[a].it,r[a].it):t[a].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var r,i,n=e.trNodes,a=t.paths,s=a._length;n.length=0;for(var o=e.transforms.finalTransform,l=0;l<s;l+=1){var u=a.shapes[l];if(u&&u.v){for(i=u._length,r=1;r<i;r+=1)1===r&&n.push({t:"m",p:o.applyToPointArray(u.v[0][0],u.v[0][1],0)}),n.push({t:"c",pts:o.applyToTriplePoints(u.o[r-1],u.i[r],u.v[r])});1===i&&n.push({t:"m",p:o.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&i&&(n.push({t:"c",pts:o.applyToTriplePoints(u.o[r-1],u.i[0],u.v[0])}),n.push({t:"z"}))}}e.trNodes=n}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender)for(var r=t.styledShapes.length,i=0;i<r;i+=1)this.renderStyledShape(t.styledShapes[i],t.sh)},CVShapeElement.prototype.renderFill=function(e,t,r){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,r){var i=t.style;if(!i.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var n,a,s,o,l=this.globalData.canvasContext,u=t.s.v,c=t.e.v;o=1===e.t?l.createLinearGradient(u[0],u[1],c[0],c[1]):(n=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),a=Math.atan2(c[1]-u[1],c[0]-u[0]),1<=(s=t.h.v)?s=.99:s<=-1&&(s=-.99),c=n*s,s=Math.cos(a+t.a.v)*c+u[0],c=Math.sin(a+t.a.v)*c+u[1],l.createRadialGradient(s,c,0,u[0],u[1],n));for(var h=e.g.p,d=t.g.c,f=1,p=0;p<h;p+=1)t.g._hasOpacity&&t.g._collapsable&&(f=t.g.o[2*p+1]),o.addColorStop(d[4*p]/100,"rgba("+d[4*p+1]+","+d[4*p+2]+","+d[4*p+3]+","+f+")");i.grd=o}i.coOp=t.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(e,t,r){var i=t.style,n=t.d;n&&(n._mdf||this._isFirstFrame)&&(i.da=n.dashArray,i.do=n.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*r.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;t=!1;e.sc&&(t=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,i,n,a,s,o,l,u,c,h=this.globalData.fontManager.getFontByName(e.f),d=e.l,f=this.mHelper;this.stroke=t,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily;for(var p=e.finalText.length,m=this.data.singleShape,g=.001*e.tr*e.finalSize,y=0,v=0,b=!0,S=0,M=0;M<p;M+=1){for(r=(r=this.globalData.fontManager.getCharData(e.finalText[M],h.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&r.data||{},f.reset(),m&&d[M].n&&(y=-g,v+=e.yOffset,v+=b?1:0,b=!1),o=(a=r.shapes?r.shapes[0].it:[]).length,f.scale(e.finalSize/100,e.finalSize/100),m&&this.applyTextPropertiesToMatrix(e,f,d[M].line,y,v),u=createSizedArray(o),s=0;s<o;s+=1){for(n=a[s].ks.k.i.length,l=a[s].ks.k,c=[],i=1;i<n;i+=1)1===i&&c.push(f.applyToX(l.v[0][0],l.v[0][1],0),f.applyToY(l.v[0][0],l.v[0][1],0)),c.push(f.applyToX(l.o[i-1][0],l.o[i-1][1],0),f.applyToY(l.o[i-1][0],l.o[i-1][1],0),f.applyToX(l.i[i][0],l.i[i][1],0),f.applyToY(l.i[i][0],l.i[i][1],0),f.applyToX(l.v[i][0],l.v[i][1],0),f.applyToY(l.v[i][0],l.v[i][1],0));c.push(f.applyToX(l.o[i-1][0],l.o[i-1][1],0),f.applyToY(l.o[i-1][0],l.o[i-1][1],0),f.applyToX(l.i[0][0],l.i[0][1],0),f.applyToY(l.i[0][0],l.i[0][1],0),f.applyToX(l.v[0][0],l.v[0][1],0),f.applyToY(l.v[0][0],l.v[0][1],0)),u[s]=c}m&&(y+=d[M].l,y+=g),this.textSpans[S]?this.textSpans[S].elem=u:this.textSpans[S]={elem:u},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,r,i,n=this.canvasContext;n.font=this.values.fValue,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);for(var a,s,o,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l,c=u.length,h=null,d=null,f=null,p=0;p<c;p+=1)if(!u[p].n){if((a=l[p])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(a.p),this.globalData.renderer.ctxOpacity(a.o)),this.fill){for(a&&a.fc?h!==a.fc&&(h=a.fc,n.fillStyle=a.fc):h!==this.values.fill&&(h=this.values.fill,n.fillStyle=this.values.fill),t=(s=this.textSpans[p].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<t;e+=1)for(i=(o=s[e]).length,this.globalData.canvasContext.moveTo(o[0],o[1]),r=2;r<i;r+=6)this.globalData.canvasContext.bezierCurveTo(o[r],o[r+1],o[r+2],o[r+3],o[r+4],o[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(a&&a.sw?f!==a.sw&&(f=a.sw,n.lineWidth=a.sw):f!==this.values.sWidth&&(f=this.values.sWidth,n.lineWidth=this.values.sWidth),a&&a.sc?d!==a.sc&&(d=a.sc,n.strokeStyle=a.sc):d!==this.values.stroke&&(d=this.values.stroke,n.strokeStyle=this.values.stroke),t=(s=this.textSpans[p].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<t;e+=1)for(i=(o=s[e]).length,this.globalData.canvasContext.moveTo(o[0],o[1]),r=2;r<i;r+=6)this.globalData.canvasContext.bezierCurveTo(o[r],o[r+1],o[r+2],o[r+3],o[r+4],o[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}a&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e,t=this.transformedElement?this.transformedElement.style:{};this.finalTransform._matMdf&&(e=this.finalTransform.mat.toCSS(),t.transform=e,t.webkitTransform=e),this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var r,i=0;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(e,r):this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e,t;this.baseElement.style.fontSize=0,this.data.hasMask?(this.layerElement.appendChild(this.shapesContainer),e=this.svgElement):(e=createNS("svg"),t=this.comp.data||this.globalData.compSize,e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){for(var r=e.length,i=0;i<r;i+=1)t=e[i].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var r,i,n,a,s,o=e.sh.v,l=e.transformers,u=o._length;if(!(u<=1)){for(r=0;r<u-1;r+=1)i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),a=this.getTransformedPoint(l,o.i[r+1]),s=this.getTransformedPoint(l,o.v[r+1]),this.checkBounds(i,n,a,s,t);o.c&&(i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),a=this.getTransformedPoint(l,o.i[0]),s=this.getTransformedPoint(l,o.v[0]),this.checkBounds(i,n,a,s,t))}},HShapeElement.prototype.checkBounds=function(e,t,r,i,n){this.getBoundsOfCurve(e,t,r,i);i=this.shapeBoundingBox;n.x=bmMin(i.left,n.x),n.xMax=bmMax(i.right,n.xMax),n.y=bmMin(i.top,n.y),n.yMax=bmMax(i.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,r,i){for(var n,a,s,o,l=[[e[0],i[0]],[e[1],i[1]]],u=0;u<2;++u)n=6*e[u]-12*t[u]+6*r[u],o=-3*e[u]+9*t[u]-9*r[u]+3*i[u],s=3*t[u]-3*e[u],n|=0,s|=0,0==(o|=0)&&0==n||(0==o?0<(a=-s/n)&&a<1&&l[u].push(this.calculateF(a,e,t,r,i,u)):0<=(a=n*n-4*s*o)&&(0<(s=(-n+bmSqrt(a))/(2*o))&&s<1&&l[u].push(this.calculateF(s,e,t,r,i,u)),0<(o=(-n-bmSqrt(a))/(2*o))&&o<1&&l[u].push(this.calculateF(o,e,t,r,i,u))));this.shapeBoundingBox.left=bmMin.apply(null,l[0]),this.shapeBoundingBox.top=bmMin.apply(null,l[1]),this.shapeBoundingBox.right=bmMax.apply(null,l[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,l[1])},HShapeElement.prototype.calculateF=function(e,t,r,i,n,a){return bmPow(1-e,3)*t[a]+3*bmPow(1-e,2)*e*r[a]+3*(1-e)*bmPow(e,2)*i[a]+bmPow(e,3)*n[a]},HShapeElement.prototype.calculateBoundingBox=function(e,t){for(var r=e.length,i=0;i<r;i+=1)e[i]&&e[i].sh?this.calculateShapeBoundingBox(e[i],t):e[i]&&e[i].it&&this.calculateBoundingBox(e[i].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){var e,t;this._renderShapeFrame(),this.hidden||!this._isFirstFrame&&!this._mdf||((t=this.tempBoundingBox).x=e=999999,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t)||(e=!1,this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),e=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),e=!0),!e&&this.currentBBox.x===t.x&&this.currentBBox.y===t.y||(this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.shapeCont.style,t="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)",e.transform=t,e.webkitTransform=t)))},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){var e;this.isMasked=this.checkMasks(),this.isMasked?(this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH),e=createNS("g"),this.maskedElement.appendChild(e),this.innerElem=e):(this.renderType="html",this.innerElem=this.layerElement),this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,r=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=r,t.color=r,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var i,n=this.globalData.fontManager.getFontByName(e.f);this.globalData.fontManager.chars||(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",n.fClass?this.innerElem.className=n.fClass:(t.fontFamily=n.fFamily,i=e.fWeight,r=e.fStyle,t.fontStyle=r,t.fontWeight=i));for(var a,s,o,l,u,c,h,d,f=e.l,p=f.length,m=this.mHelper,g=0,y=0;y<p;y+=1)this.globalData.fontManager.chars?(this.textPaths[g]?a=this.textPaths[g]:((a=createNS("path")).setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[g]?o=(s=this.textSpans[g]).children[0]:((s=createTag("div")).style.lineHeight=0,(o=createNS("svg")).appendChild(a),styleDiv(s)))):this.isMasked?a=this.textPaths[g]||createNS("text"):this.textSpans[g]?(s=this.textSpans[g],a=this.textPaths[g]):(styleDiv(s=createTag("span")),styleDiv(a=createTag("span")),s.appendChild(a)),this.globalData.fontManager.chars?(c=(u=this.globalData.fontManager.getCharData(e.finalText[y],n.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))?u.data:null,m.reset(),c&&c.shapes&&(u=c.shapes[0].it,m.scale(e.finalSize/100,e.finalSize/100),l=this.createPathShape(m,u),a.setAttribute("d",l)),this.isMasked?this.innerElem.appendChild(a):(this.innerElem.appendChild(s),c&&c.shapes?(document.body.appendChild(o),d=o.getBBox(),o.setAttribute("width",d.width+2),o.setAttribute("height",d.height+2),o.setAttribute("viewBox",d.x-1+" "+(d.y-1)+" "+(d.width+2)+" "+(d.height+2)),c=o.style,h="translate("+(d.x-1)+"px,"+(d.y-1)+"px)",c.transform=h,c.webkitTransform=h,f[y].yOffset=d.y-1):(o.setAttribute("width",1),o.setAttribute("height",1)),s.appendChild(o))):(a.textContent=f[y].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(a):(this.innerElem.appendChild(s),h=a.style,d="translate3d(0,"+-e.finalSize/1.2+"px,0)",h.transform=d,h.webkitTransform=d)),this.isMasked?this.textSpans[g]=a:this.textSpans[g]=s,this.textSpans[g].style.display="block",this.textPaths[g]=a,g+=1;for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style,n="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)",e.transform=n,e.webkitTransform=n)}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){for(var t,r,i,n,a=0,s=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l,l=o.length,u=0;u<l;u+=1)o[u].n?a+=1:(r=this.textSpans[u],i=this.textPaths[u],t=s[a],a+=1,t._mdf.m&&(this.isMasked?r.setAttribute("transform",t.m):(r.style.webkitTransform=t.m,r.style.transform=t.m)),r.style.opacity=t.o,t.sw&&t._mdf.sw&&i.setAttribute("stroke-width",t.sw),t.sc&&t._mdf.sc&&i.setAttribute("stroke",t.sc),t.fc&&t._mdf.fc&&(i.setAttribute("fill",t.fc),i.style.color=t.fc));this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)&&(n=this.innerElem.getBBox(),this.currentBBox.w!==n.width&&(this.currentBBox.w=n.width,this.svgElement.setAttribute("width",n.width)),this.currentBBox.h!==n.height&&(this.currentBBox.h=n.height,this.svgElement.setAttribute("height",n.height)),this.currentBBox.w===n.width+2&&this.currentBBox.h===n.height+2&&this.currentBBox.x===n.x-1&&this.currentBBox.y===n.y-1||(this.currentBBox.w=n.width+2,this.currentBBox.h=n.height+2,this.currentBBox.x=n.x-1,this.currentBBox.y=n.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)",e.transform=n,e.webkitTransform=n))}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){for(var e,t,r,i,n,a=this.comp.threeDElements.length,s=0;s<a;s+=1)"3d"===(n=this.comp.threeDElements[s]).type&&(e=n.perspectiveElem.style,t=n.container.style,r=this.pe.v+"px",i="0px 0px 0px",n="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",e.perspective=r,e.webkitPerspective=r,t.transformOrigin=i,t.mozTransformOrigin=i,t.webkitTransformOrigin=i,e.transform=n,e.webkitTransform=n)},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,r=this._isFirstFrame;if(this.hierarchy)for(l=this.hierarchy.length,u=0;u<l;u+=1)r=this.hierarchy[u].finalTransform.mProp._mdf||r;if(r||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(u=l=this.hierarchy.length-1;0<=u;--u){var i=this.hierarchy[u].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a&&(t=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]],e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)),t=[t[0]/e,t[1]/e,t[2]/e],e=Math.sqrt(t[2]*t[2]+t[0]*t[0]),e=Math.atan2(t[1],e),t=Math.atan2(t[0],-t[2]),this.mat.rotateY(t).rotateX(-e)),this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var n=!this._prevMat.equals(this.mat);if((n||this.pe._mdf)&&this.comp.threeDElements){for(var a,s,o,l=this.comp.threeDElements.length,u=0;u<l;u+=1)"3d"===(o=this.comp.threeDElements[u]).type&&(n&&(a=this.mat.toCSS(),(s=o.container.style).transform=a,s.webkitTransform=a),this.pe._mdf&&((o=o.perspectiveElem.style).perspective=this.pe.v+"px",o.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};var animationManager=(Xzb={},Yzb=[],Zzb=0,$zb=0,_zb=0,aAb=!0,bAb=!1,Xzb.registerAnimation=dAb,Xzb.loadAnimation=function(e){var t=new AnimationItem;return hAb(t,null),t.setParams(e),t},Xzb.setSpeed=function(e,t){for(var r=0;r<$zb;r+=1)Yzb[r].animation.setSpeed(e,t)},Xzb.setDirection=function(e,t){for(var r=0;r<$zb;r+=1)Yzb[r].animation.setDirection(e,t)},Xzb.play=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.play(e)},Xzb.pause=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.pause(e)},Xzb.stop=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.stop(e)},Xzb.togglePause=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.togglePause(e)},Xzb.searchAnimations=function(e,t,r){for(var i,n=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),a=n.length,s=0;s<a;s+=1)r&&n[s].setAttribute("data-bm-type",r),dAb(n[s],e);t&&0===a&&(r=r||"svg",(i=document.getElementsByTagName("body")[0]).innerText="",(t=createTag("div")).style.width="100%",t.style.height="100%",t.setAttribute("data-bm-type",r),i.appendChild(t),dAb(t,e))},Xzb.resize=function(){for(var e=0;e<$zb;e+=1)Yzb[e].animation.resize()},Xzb.goToAndStop=function(e,t,r){for(var i=0;i<$zb;i+=1)Yzb[i].animation.goToAndStop(e,t,r)},Xzb.destroy=function(e){for(var t=$zb-1;0<=t;--t)Yzb[t].animation.destroy(e)},Xzb.freeze=function(){bAb=!0},Xzb.unfreeze=function(){bAb=!1,vAb()},Xzb.setVolume=function(e,t){for(var r=0;r<$zb;r+=1)Yzb[r].animation.setVolume(e,t)},Xzb.mute=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.mute(e)},Xzb.unmute=function(e){for(var t=0;t<$zb;t+=1)Yzb[t].animation.unmute(e)},Xzb.getRegisteredAnimations=function(){for(var e=Yzb.length,t=[],r=0;r<e;r+=1)t.push(Yzb[r].animation);return t},Xzb),Xzb,Yzb,Zzb,$zb,_zb,aAb,bAb;function cAb(e){for(var t=0,r=e.target;t<$zb;)Yzb[t].animation===r&&(Yzb.splice(t,1),--t,--$zb,r.isPaused||gAb()),t+=1}function dAb(e,t){if(!e)return null;for(var r=0;r<$zb;){if(Yzb[r].elem===e&&null!==Yzb[r].elem)return Yzb[r].animation;r+=1}var i=new AnimationItem;return hAb(i,e),i.setData(e,t),i}function fAb(){_zb+=1,vAb()}function gAb(){--_zb}function hAb(e,t){e.addEventListener("destroy",cAb),e.addEventListener("_active",fAb),e.addEventListener("_idle",gAb),Yzb.push({elem:t,animation:e}),$zb+=1}function mAb(e){for(var t=e-Zzb,r=0;r<$zb;r+=1)Yzb[r].animation.advanceTime(t);Zzb=e,_zb&&!bAb?window.requestAnimationFrame(mAb):aAb=!0}function nAb(e){Zzb=e,window.requestAnimationFrame(mAb)}function vAb(){!bAb&&_zb&&aAb&&(window.requestAnimationFrame(nAb),aAb=!1)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[]};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";switch(e.animType?t=e.animType:e.renderer&&(t=e.renderer),t){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name||"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.configAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(e.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(e,t){var r={wrapper:e,animationData:t=t&&"object"!=typeof t?JSON.parse(t):t},t=e.attributes;r.path=t.getNamedItem("data-animation-path")?t.getNamedItem("data-animation-path").value:t.getNamedItem("data-bm-path")?t.getNamedItem("data-bm-path").value:t.getNamedItem("bm-path")?t.getNamedItem("bm-path").value:"",r.animType=t.getNamedItem("data-anim-type")?t.getNamedItem("data-anim-type").value:t.getNamedItem("data-bm-type")?t.getNamedItem("data-bm-type").value:t.getNamedItem("bm-type")?t.getNamedItem("bm-type").value:t.getNamedItem("data-bm-renderer")?t.getNamedItem("data-bm-renderer").value:t.getNamedItem("bm-renderer")?t.getNamedItem("bm-renderer").value:"canvas";e=t.getNamedItem("data-anim-loop")?t.getNamedItem("data-anim-loop").value:t.getNamedItem("data-bm-loop")?t.getNamedItem("data-bm-loop").value:t.getNamedItem("bm-loop")?t.getNamedItem("bm-loop").value:"";"false"===e?r.loop=!1:"true"===e?r.loop=!0:""!==e&&(r.loop=parseInt(e,10));e=t.getNamedItem("data-anim-autoplay")?t.getNamedItem("data-anim-autoplay").value:t.getNamedItem("data-bm-autoplay")?t.getNamedItem("data-bm-autoplay").value:!t.getNamedItem("bm-autoplay")||t.getNamedItem("bm-autoplay").value;r.autoplay="false"!==e,r.name=t.getNamedItem("data-name")?t.getNamedItem("data-name").value:t.getNamedItem("data-bm-name")?t.getNamedItem("data-bm-name").value:t.getNamedItem("bm-name")?t.getNamedItem("bm-name").value:"","false"===(t.getNamedItem("data-anim-prerender")?t.getNamedItem("data-anim-prerender").value:t.getNamedItem("data-bm-prerender")?t.getNamedItem("data-bm-prerender").value:t.getNamedItem("bm-prerender")?t.getNamedItem("bm-prerender").value:"")&&(r.prerender=!1),this.setParams(r)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));for(var t,r=this.animationData.layers,i=r.length,n=e.layers,a=n.length,s=0;s<a;s+=1)for(t=0;t<i;){if(r[t].id===n[s].id){r[t]=n[s];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(i=e.assets.length,t=0;t<i;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);e=e.shift();this.timeCompleted=e.time*this.frameRate;e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(e,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,r=0;r<this.markers.length;r+=1)if((t=this.markers[r]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,r){r&&this.name!==r||(r=Number(e),isNaN(r)?(r=this.getMarkerData(e))&&this.goToAndStop(r.time,!0):t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(e,t,r){var i;r&&this.name!==r||(i=Number(e),isNaN(i)?(e=this.getMarkerData(e))&&(e.duration?this.playSegments([e.time,e.time+e.duration],!0):this.goToAndStop(e.time,!0)):this.goToAndStop(i,t,r),this.play())},AnimationItem.prototype.advanceTime=function(e){var t;!0!==this.isPaused&&!1!==this.isLoaded&&(t=!1,(e=this.currentRawFrame+e*this.frameModifier)>=this.totalFrames-1&&0<this.frameModifier?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(t=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(t=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),t&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete")))},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(0<this.frameModifier&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?r=e:this.currentRawFrame+this.firstFrame>t&&(r=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"==typeof e[0])for(var r=e.length,i=0;i<r;i+=1)this.segments.push(e[i]);else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t,r="";return e.e?r=e.p:this.assetsPath?(-1!==(t=e.p).indexOf("images/")&&(t=t.split("/")[1]),r=this.assetsPath+t):(r=this.path,r+=e.u||"",r+=e.p),r},AnimationItem.prototype.getAssetData=function(e){for(var t=0,r=this.assets.length;t<r;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){e=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(e){e=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var Expressions=(WCb={},WCb.initExpressions=function(e){var t=0,r=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0===--t&&function(){var e,t=r.length;for(e=0;e<t;e+=1)r[e].release();r.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===r.indexOf(e)&&r.push(e)}},WCb),WCb,expressionsPlugin=Expressions,ExpressionManager=function(){var ob={},Math=BMMath,easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw||0,height=elem.data.sh||0,name=elem.data.nm,loopIn,loopOut,smooth,toWorld,fromWorld,fromComp,toComp,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){for(var r=this.pv.length||1,i=createTypedArray("float32",r),n=Math.floor(5*time),a=0,s=0;a<n;){for(s=0;s<r;s+=1)i[s]+=-t+2*t*BMMath.random();a+=1}var o=5*time,l=o-Math.floor(o),u=createTypedArray("float32",r);if(1<r){for(s=0;s<r;s+=1)u[s]=this.pv[s]+i[s]+(-t+2*t*BMMath.random())*l;return u}return this.pv+i[0]+(-t+2*t*BMMath.random())*l}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty)),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty)),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function seedRandom(e){BMMath.seedrandom(randSeed+e)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null),transform||(transform=elem.layerInterface("ADBE Transform Group"))&&(anchorPoint=transform.anchorPoint),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect=effect||thisLayer(4),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt.propType,scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(e,t,r){t.x&&(r.k=!0,r.x=!0,r.initiateExpression=ExpressionManager.initiateExpression,r.effectsSequence.push(r.initiateExpression(e,t,r).bind(r)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),r=this.getValueAtTime(e+-.01),i=0;if(t.length){for(var n=0;n<t.length;n+=1)i+=Math.pow(r[n]-t[n],2);i=100*Math.sqrt(i)}else i=0;return i},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t=this.getValueAtTime(e),r=this.getValueAtTime(e+-.001);if(t.length)for(var i=createTypedArray("float32",t.length),n=0;n<t.length;n+=1)i[n]=(r[n]-t[n])/-.001;else i=(r-t)/-.001;return i},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function s(e,t,r){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var i,n,a,s,o,l=this.comp.renderedFrame,u=this.keyframes,c=u[u.length-1].t;if(l<=c)return this.pv;if(r?n=c-(i=t?Math.abs(c-this.elem.comp.globalData.frameRate*t):Math.max(0,c-this.elem.data.ip)):((!t||t>u.length-1)&&(t=u.length-1),i=c-(n=u[u.length-1-t].t)),"pingpong"===e){if(Math.floor((l-n)/i)%2!=0)return this.getValueAtTime((i-(l-n)%i+n)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var h=this.getValueAtTime(n/this.comp.globalData.frameRate,0),d=this.getValueAtTime(c/this.comp.globalData.frameRate,0),f=this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0),p=Math.floor((l-n)/i);if(this.pv.length){for(s=(o=new Array(h.length)).length,a=0;a<s;a+=1)o[a]=(d[a]-h[a])*p+f[a];return o}return(d-h)*p+f}if("continue"===e){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(o=new Array(m.length)).length,a=0;a<s;a+=1)o[a]=m[a]+(m[a]-g[a])*((l-c)/this.comp.globalData.frameRate)/5e-4;return o}return m+(l-c)/.001*(m-g)}}return this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0)}function o(e,t,r){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var i,n,a,s,o,l=this.comp.renderedFrame,u=this.keyframes,c=u[0].t;if(c<=l)return this.pv;if(r?n=c+(i=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-c)):i=(n=u[t=!t||t>u.length-1?u.length-1:t].t)-c,"pingpong"===e){if(Math.floor((c-l)/i)%2==0)return this.getValueAtTime(((c-l)%i+c)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var h=this.getValueAtTime(c/this.comp.globalData.frameRate,0),d=this.getValueAtTime(n/this.comp.globalData.frameRate,0),f=this.getValueAtTime((i-(c-l)%i+c)/this.comp.globalData.frameRate,0),p=Math.floor((c-l)/i)+1;if(this.pv.length){for(s=(o=new Array(h.length)).length,a=0;a<s;a+=1)o[a]=f[a]-(d[a]-h[a])*p;return o}return f-(d-h)*p}if("continue"===e){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(o=new Array(m.length)).length,a=0;a<s;a+=1)o[a]=m[a]+(m[a]-g[a])*(c-l)/.001;return o}return m+(m-g)*(c-l)/.001}}return this.getValueAtTime((i-((c-l)%i+c))/this.comp.globalData.frameRate,0)}function l(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;for(var r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,n=i-e,a=1<t?(i+e-n)/(t-1):1,s=0,o=0,l=this.pv.length?createTypedArray("float32",this.pv.length):0;s<t;){if(r=this.getValueAtTime(n+s*a),this.pv.length)for(o=0;o<this.pv.length;o+=1)l[o]+=r[o];else l+=r;s+=1}if(this.pv.length)for(o=0;o<this.pv.length;o+=1)l[o]/=t;else l/=t;return l}var i=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,r){r=i(e,t,r);return r.dynamicProperties.length?r.getValueAtTime=function(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t,r,i,n,a,s,o=this._transformCachingAtTime.v;return o.cloneFromProps(this.pre.props),this.appliedTransformations<1&&(t=this.a.getValueAtTime(e),o.translate(-t[0]*this.a.mult,-t[1]*this.a.mult,t[2]*this.a.mult)),this.appliedTransformations<2&&(r=this.s.getValueAtTime(e),o.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)),this.sk&&this.appliedTransformations<3&&(t=this.sk.getValueAtTime(e),r=this.sa.getValueAtTime(e),o.skewFromAxis(-t*this.sk.mult,r*this.sa.mult)),this.r&&this.appliedTransformations<4?(i=this.r.getValueAtTime(e),o.rotate(-i*this.r.mult)):!this.r&&this.appliedTransformations<4&&(i=this.rz.getValueAtTime(e),n=this.ry.getValueAtTime(e),a=this.rx.getValueAtTime(e),s=this.or.getValueAtTime(e),o.rotateZ(-i*this.rz.mult).rotateY(n*this.ry.mult).rotateX(a*this.rx.mult).rotateZ(-s[2]*this.or.mult).rotateY(s[1]*this.or.mult).rotateX(s[0]*this.or.mult)),this.data.p&&this.data.p.s?(n=this.px.getValueAtTime(e),a=this.py.getValueAtTime(e),this.data.p.z?(s=this.pz.getValueAtTime(e),o.translate(n*this.px.mult,a*this.py.mult,-s*this.pz.mult)):o.translate(n*this.px.mult,a*this.py.mult,0)):(e=this.p.getValueAtTime(e),o.translate(e[0]*this.p.mult,e[1]*this.p.mult,-e[2]*this.p.mult)),o}.bind(r):r.getValueAtTime=function(){return this.v.clone(new Matrix)}.bind(r),r.setGroupProperty=expressionHelpers.setGroupProperty,r};var u=PropertyFactory.getProp;PropertyFactory.getProp=function(e,t,r,i,n){var a=u(e,t,r,i,n);a.kf?a.getValueAtTime=expressionHelpers.getValueAtTime.bind(a):a.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a.loopOut=s,a.loopIn=o,a.smooth=l,a.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(a),a.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(a),a.numKeys=1===t.a?t.k.length:0,a.propertyIndex=t.ix;i=0;return 0!==r&&(i=createTypedArray("float32",(1===t.a?t.k[0].s:t.k).length)),a._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:i},expressionHelpers.searchExpressions(e,t,a),a.k&&n.addDynamicProperty(a),a};var e=ShapePropertyFactory.getConstructorFunction(),t=ShapePropertyFactory.getKeyframedConstructorFunction();function r(){}r.prototype={vertices:function(e,t){this.k&&this.getValue();for(var r=this.v,i=(r=void 0!==t?this.getValueAtTime(t,0):r)._length,n=r[e],a=r.v,s=createSizedArray(i),o=0;o<i;o+=1)s[o]="i"===e||"o"===e?[n[o][0]-a[o][0],n[o][1]-a[o][1]]:[n[o][0],n[o][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(r));for(var t=this._segmentsLength,i=t.lengths,n=t.totalLength*e,a=0,s=i.length,o=0;a<s;){if(o+i[a].addedLength>n){var l=a,u=r.c&&a===s-1?0:a+1,c=(n-o)/i[a].addedLength,h=bez.getPointInSegment(r.v[l],r.v[u],r.o[l],r.i[u],c,i[a]);break}o+=i[a].addedLength,a+=1}return h=h||(r.c?[r.v[0][0],r.v[0][1]]:[r.v[r._length-1][0],r.v[r._length-1][1]])},vectorOnPath:function(e,t,r){1==e?e=this.v.c:0==e&&(e=.999);var i=this.pointOnPath(e,t),e=this.pointOnPath(e+.001,t),t=e[0]-i[0],e=e[1]-i[1],i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return 0===i?[0,0]:"tangent"===r?[t/i,e/i]:[-e/i,t/i]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([r],e),extendPrototype([r],t),t.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},t.prototype.initiateExpression=ExpressionManager.initiateExpression;var a=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,r,i,n){n=a(e,t,r,i,n);return n.propertyIndex=t.ix,n.lock=!1,3===r?expressionHelpers.searchExpressions(e,t.pt,n):4===r&&expressionHelpers.searchExpressions(e,t.ks,n),n.k&&e.addDynamicProperty(n),n}}(),TextProperty.prototype.getExpressionValue=function(e,t){var r=this.calculateExpression(t);if(e.t===r)return e;t={};return this.copyData(t,e),t.t=r.toString(),t.__complete=!1,t},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(e,t,r){var i=t.sh;function n(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?n.path:null}t=propertyGroupFactory(n,r);return i.setGroupProperty(PropertyInterface("Path",t)),Object.defineProperties(n,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:r}}),n},propertyGroupFactory=function(t,r){return function(e){return(e=void 0===e?1:e)<=0?t:r(e-1)}},PropertyInterface=function(e,t){var r={_name:e};return function(e){return(e=void 0===e?1:e)<=0?r:t(e-1)}},ShapeExpressionInterface=function(e,t,i){var n;function r(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?i:n[e-1];for(var t=0,r=n.length;t<r;){if(n[t]._name===e)return n[t];t+=1}return null}return r.propertyGroup=propertyGroupFactory(r,function(){return i}),n=HGb(e,t,r.propertyGroup),r.numProperties=n.length,r._name="Contents",r};function HGb(e,t,r){for(var i=[],n=e?e.length:0,a=0;a<n;a+=1)"gr"===e[a].ty?i.push(function(e,t,r){var i=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=propertyGroupFactory(i,r);r=function(e,t,r){function i(e){for(var t=0,r=n.length;t<r;){if(n[t]._name===e||n[t].mn===e||n[t].propertyIndex===e||n[t].ix===e||n[t].ind===e)return n[t];t+=1}return"number"==typeof e?n[e-1]:null}var n;i.propertyGroup=propertyGroupFactory(i,r),n=HGb(e.it,t.it,i.propertyGroup),i.numProperties=n.length;t=PGb(e.it[e.it.length-1],t.it[t.it.length-1],i.propertyGroup);return i.transform=t,i.propertyIndex=e.cix,i._name=e.nm,i}(e,t,i.propertyGroup),t=PGb(e.it[e.it.length-1],t.it[t.it.length-1],i.propertyGroup);return i.content=r,i.transform=t,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i}(e[a],t[a],r)):"fl"===e[a].ty?i.push(function(e,t,r){function i(e){return"Color"===e||"color"===e?i.color:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",r)),t.o.setGroupProperty(PropertyInterface("Opacity",r)),i}(e[a],t[a],r)):"st"===e[a].ty?i.push(function(t,r,e){var i,e=propertyGroupFactory(o,e),n=propertyGroupFactory(s,e);var a=t.d?t.d.length:0,s={};for(i=0;i<a;i+=1)!function(e){Object.defineProperty(s,t.d[e].nm,{get:ExpressionPropertyInterface(r.d.dataProps[e].p)})}(i),r.d.dataProps[i].p.setGroupProperty(n);function o(e){return"Color"===e||"color"===e?o.color:"Opacity"===e||"opacity"===e?o.opacity:"Stroke Width"===e||"stroke width"===e?o.strokeWidth:null}return Object.defineProperties(o,{color:{get:ExpressionPropertyInterface(r.c)},opacity:{get:ExpressionPropertyInterface(r.o)},strokeWidth:{get:ExpressionPropertyInterface(r.w)},dash:{get:function(){return s}},_name:{value:t.nm},mn:{value:t.mn}}),r.c.setGroupProperty(PropertyInterface("Color",e)),r.o.setGroupProperty(PropertyInterface("Opacity",e)),r.w.setGroupProperty(PropertyInterface("Stroke Width",e)),o}(e[a],t[a],r)):"tm"===e[a].ty?i.push(function(t,e,r){function i(e){return e===t.e.ix||"End"===e||"end"===e?i.end:e===t.s.ix?i.start:e===t.o.ix?i.offset:null}var n=propertyGroupFactory(i,r);return i.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",n)),e.e.setGroupProperty(PropertyInterface("End",n)),e.o.setGroupProperty(PropertyInterface("Offset",n)),i.propertyIndex=t.ix,i.propertyGroup=r,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"tr"===e[a].ty||("el"===e[a].ty?i.push(function(t,e,r){function i(e){return t.p.ix===e?i.position:t.s.ix===e?i.size:null}r=propertyGroupFactory(i,r);i.propertyIndex=t.ix;e="tm"===e.sh.ty?e.sh.prop:e.sh;return e.s.setGroupProperty(PropertyInterface("Size",r)),e.p.setGroupProperty(PropertyInterface("Position",r)),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(e.s)},position:{get:ExpressionPropertyInterface(e.p)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"sr"===e[a].ty?i.push(function(t,e,r){function i(e){return t.p.ix===e?i.position:t.r.ix===e?i.rotation:t.pt.ix===e?i.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?i.outerRadius:t.os.ix===e?i.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?i.innerRoundness:null:i.innerRadius}r=propertyGroupFactory(i,r),e="tm"===e.sh.ty?e.sh.prop:e.sh;i.propertyIndex=t.ix,e.or.setGroupProperty(PropertyInterface("Outer Radius",r)),e.os.setGroupProperty(PropertyInterface("Outer Roundness",r)),e.pt.setGroupProperty(PropertyInterface("Points",r)),e.p.setGroupProperty(PropertyInterface("Position",r)),e.r.setGroupProperty(PropertyInterface("Rotation",r)),t.ir&&(e.ir.setGroupProperty(PropertyInterface("Inner Radius",r)),e.is.setGroupProperty(PropertyInterface("Inner Roundness",r)));return Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(e.p)},rotation:{get:ExpressionPropertyInterface(e.r)},points:{get:ExpressionPropertyInterface(e.pt)},outerRadius:{get:ExpressionPropertyInterface(e.or)},outerRoundness:{get:ExpressionPropertyInterface(e.os)},innerRadius:{get:ExpressionPropertyInterface(e.ir)},innerRoundness:{get:ExpressionPropertyInterface(e.is)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"sh"===e[a].ty?i.push(ShapePathInterface(e[a],t[a],r)):"rc"===e[a].ty?i.push(function(t,e,r){function i(e){return t.p.ix===e?i.position:t.r.ix===e?i.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?i.size:null}r=propertyGroupFactory(i,r),e="tm"===e.sh.ty?e.sh.prop:e.sh;return i.propertyIndex=t.ix,e.p.setGroupProperty(PropertyInterface("Position",r)),e.s.setGroupProperty(PropertyInterface("Size",r)),e.r.setGroupProperty(PropertyInterface("Rotation",r)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(e.p)},roundness:{get:ExpressionPropertyInterface(e.r)},size:{get:ExpressionPropertyInterface(e.s)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"rd"===e[a].ty?i.push(function(t,e,r){function i(e){return t.r.ix===e||"Round Corners 1"===e?i.radius:null}r=propertyGroupFactory(i,r);return i.propertyIndex=t.ix,e.rd.setGroupProperty(PropertyInterface("Radius",r)),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(e.rd)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"rp"===e[a].ty?i.push(function(t,e,r){function i(e){return t.c.ix===e||"Copies"===e?i.copies:t.o.ix===e||"Offset"===e?i.offset:null}r=propertyGroupFactory(i,r);return i.propertyIndex=t.ix,e.c.setGroupProperty(PropertyInterface("Copies",r)),e.o.setGroupProperty(PropertyInterface("Offset",r)),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(e.c)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[a],t[a],r)):"gf"===e[a].ty?i.push(function(e,t,r){function i(e){return"Start Point"===e||"start point"===e?i.startPoint:"End Point"===e||"end point"===e?i.endPoint:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",r)),t.e.setGroupProperty(PropertyInterface("End Point",r)),t.o.setGroupProperty(PropertyInterface("Opacity",r)),i}(e[a],t[a],r)):i.push((e[a],t[a],function(){return null})));return i}function PGb(t,e,r){function i(e){return t.a.ix===e||"Anchor Point"===e?i.anchorPoint:t.o.ix===e||"Opacity"===e?i.opacity:t.p.ix===e||"Position"===e?i.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?i.rotation:t.s.ix===e||"Scale"===e?i.scale:t.sk&&t.sk.ix===e||"Skew"===e?i.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?i.skewAxis:null}var n=propertyGroupFactory(i,r);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",n)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",n)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",n)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",n)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",n)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",n)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",n))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",n)),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),i.ty="tr",i.mn=t.mn,i.propertyGroup=r,i}var TextExpressionInterface=function(t){var r;function i(e){return"ADBE Text Document"!==e?null:i.sourceText}return Object.defineProperty(i,"sourceText",{get:function(){t.textProperty.getValue();var e=t.textProperty.currentData.t;return void 0!==e&&(t.textProperty.currentData.t=void 0,(r=new String(e)).value=e||new String(e)),r}}),i},LayerExpressionInterface=function(t){function r(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return r.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return i;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return r.effect;case"ADBE Text Properties":return r.textInterface;default:return null}}r.getMatrix=WIb,r.invertPoint=aJb,r.applyPoint=_Ib,r.toWorld=YIb,r.toWorldVec=XIb,r.fromWorld=$Ib,r.fromWorldVec=ZIb,r.toComp=YIb,r.fromComp=bJb,r.sampleImage=cJb,r.sourceRectAtTime=t.sourceRectAtTime.bind(t);var i,e=getDescriptor(i=TransformExpressionInterface((r._elem=t).finalTransform.mProp),"anchorPoint");return Object.defineProperties(r,{hasParent:{get:function(){return t.hierarchy.length}},parent:{get:function(){return t.hierarchy[0].layerInterface}},rotation:getDescriptor(i,"rotation"),scale:getDescriptor(i,"scale"),position:getDescriptor(i,"position"),opacity:getDescriptor(i,"opacity"),anchorPoint:e,anchor_point:e,transform:{get:function(){return i}},active:{get:function(){return t.isInRange}}}),r.startTime=t.data.st,r.index=t.data.ind,r.source=t.data.refId,r.height=0===t.data.ty?t.data.h:100,r.width=0===t.data.ty?t.data.w:100,r.inPoint=t.data.ip/t.comp.globalData.frameRate,r.outPoint=t.data.op/t.comp.globalData.frameRate,r._name=t.data.nm,r.registerMaskInterface=function(e){r.mask=new MaskManagerInterface(e,t)},r.registerEffectsInterface=function(e){r.effect=e},r};function WIb(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function XIb(e,t){t=this.getMatrix(t);return t.props[12]=0,t.props[13]=0,t.props[14]=0,this.applyPoint(t,e)}function YIb(e,t){t=this.getMatrix(t);return this.applyPoint(t,e)}function ZIb(e,t){t=this.getMatrix(t);return t.props[12]=0,t.props[13]=0,t.props[14]=0,this.invertPoint(t,e)}function $Ib(e,t){t=this.getMatrix(t);return this.invertPoint(t,e)}function _Ib(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length)for(var r=this._elem.hierarchy.length,i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.applyToPointArray(t[0],t[1],t[2]||0)}function aJb(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length)for(var r=this._elem.hierarchy.length,i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}function bJb(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){for(var r=this._elem.hierarchy.length,i=0;i<r;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function cJb(){return[1,1,1,1]}var FootageInterface=function(e){function t(e){return"Data"===e?t.dataInterface:null}return t._name="Data",t.dataInterface=PJb(e),t};function PJb(e){function t(e){return"Outline"===e?t.outlineInterface():null}function r(e){if(a[e])return"object"==typeof(a=a[n=e])?r:a;var t=e.indexOf(n);if(-1===t)return"";t=parseInt(e.substr(t+n.length),10);return"object"==typeof(a=a[t])?r:a}var i,n,a;return t._name="Outline",t.outlineInterface=(n="",a=(i=e).getFootageData(),function(){return n="",a=i.getFootageData(),r}),t}var CompExpressionInterface=function(i){function e(e){for(var t=0,r=i.layers.length;t<r;){if(i.layers[t].nm===e||i.layers[t].ind===e)return i.elements[t].layerInterface;t+=1}return null}return Object.defineProperty(e,"_name",{value:i.data.nm}),(e.layer=e).pixelAspect=1,e.height=i.data.h||i.globalData.compSize.h,e.width=i.data.w||i.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/i.globalData.frameRate,e.displayStartTime=0,e.numLayers=i.layers.length,e},TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var r,i,n,a;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?a=ExpressionPropertyInterface(e.p):(r=ExpressionPropertyInterface(e.px),i=ExpressionPropertyInterface(e.py),e.pz&&(n=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?a():[r(),i(),n?n():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},ProjectInterface=function(){function e(e){for(var t=0,r=this.compositions.length;t<r;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=oKb,e};function oKb(e){this.compositions.push(e)}var EffectsExpressionInterface={createEffectsInterface:function(e,t){if(e.effectsManager){var r,i=[],n=e.data.ef,a=e.effectsManager.effectElements.length;for(r=0;r<a;r+=1)i.push(function e(n,t,r,i){function a(e){for(var t=n.ef,r=0,i=t.length;r<i;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?o[r]:o[r]();r+=1}throw new Error}var s=propertyGroupFactory(a,r);var o=[];var l;var u=n.ef.length;for(l=0;l<u;l+=1)5===n.ef[l].ty?o.push(e(n.ef[l],t.effectElements[l],t.effectElements[l].propertyGroup,i)):o.push(xKb(t.effectElements[l],n.ef[l].ty,i,s));"ADBE Color Control"===n.mn&&Object.defineProperty(a,"color",{get:function(){return o[0]()}});Object.defineProperties(a,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:s}});a.enabled=0!==n.en;a.active=a.enabled;return a}(n[r],e.effectsManager.effectElements[r],t,e));var s=e.data.ef||[],o=function(e){for(r=0,a=s.length;r<a;){if(e===s[r].nm||e===s[r].mn||e===s[r].ix)return i[r];r+=1}return null};return Object.defineProperty(o,"numProperties",{get:function(){return s.length}}),o}return null}};function xKb(e,t,r,i){var n=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",i)),function(){return 10===t?r.comp.compInterface(e.p.v):n()}}var MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}});return function(t){for(var r=createSizedArray(t.viewData.length),i=t.viewData.length,n=0;n<i;n+=1)r[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<i;){if(t.masksProperties[n].nm===e)return r[n];n+=1}return null}}}(),ExpressionPropertyInterface=(iLb={pv:0,v:0,mult:1},jLb={pv:[0,0,0],v:[0,0,0],mult:1},function(e){return e?"unidimensional"===e.propType?(r=1/(t=!((t=e)&&"pv"in t)?iLb:t).mult,i=t.pv*r,(n=new Number(i)).value=i,kLb(n,t,"unidimensional"),function(){return t.k&&t.getValue(),i=t.v*r,n.value!==i&&((n=new Number(i)).value=i,kLb(n,t,"unidimensional")),n}):(s=1/(a=!((a=e)&&"pv"in a)?jLb:a).mult,o=a.data&&a.data.l||a.pv.length,l=createTypedArray("float32",o),u=createTypedArray("float32",o),l.value=u,kLb(l,a,"multidimensional"),function(){a.k&&a.getValue();for(var e=0;e<o;e+=1)u[e]=a.v[e]*s,l[e]=u[e];return l}):nLb;var t,r,i,n,a,s,o,l,u}),iLb,jLb,FLb;function kLb(i,n,a){Object.defineProperty(i,"velocity",{get:function(){return n.getVelocityAtTime(n.comp.currentFrame)}}),i.numKeys=n.keyframes?n.keyframes.length:0,i.key=function(e){if(!i.numKeys)return 0;var t="",t="s"in n.keyframes[e-1]?n.keyframes[e-1].s:"e"in n.keyframes[e-2]?n.keyframes[e-2].e:n.keyframes[e-2].s,r="unidimensional"===a?new Number(t):Object.assign({},t);return r.time=n.keyframes[e-1].t/n.elem.comp.globalData.frameRate,r.value="unidimensional"===a?t[0]:t,r},i.valueAtTime=n.getValueAtTime,i.speedAtTime=n.getSpeedAtTime,i.velocityAtTime=n.getVelocityAtTime,i.propertyGroup=n.propertyGroup}function nLb(){return iLb}function SliderEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function AngleEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function ColorEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function PointEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function LayerIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function MaskIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function CheckboxEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var r=e.ef||[];this.effectElements=[];for(var i,n=r.length,a=0;a<n;a+=1)i=new GroupEffect(r[a],t),this.effectElements.push(i)}function GroupEffect(e,t){this.init(e,t)}FLb=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(e,t,r){return 1===t.t?new TextExpressionSelectorPropFactory(e,t,r):FLb(e,t,r)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);for(var r,i=this.data.ef.length,n=this.data.ef,a=0;a<i;a+=1){switch(r=null,n[a].ty){case 0:r=new SliderEffect(n[a],t,this);break;case 1:r=new AngleEffect(n[a],t,this);break;case 2:r=new ColorEffect(n[a],t,this);break;case 3:r=new PointEffect(n[a],t,this);break;case 4:case 7:r=new CheckboxEffect(n[a],t,this);break;case 10:r=new LayerIndexEffect(n[a],t,this);break;case 11:r=new MaskIndexEffect(n[a],t,this);break;case 5:r=new EffectsManager(n[a],t,this);break;default:r=new NoValueEffect(n[a],t,this)}r&&this.effectElements.push(r)}};var lottie={};function setLocationHref(e){locationHref=e}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function setIDPrefix(e){idPrefix=e}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&1<e&&(defaultCurveSegments=e)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),r=0;r<t.length;r+=1){var i=t[r].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.7.11";var renderer="",queryString,scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer"),readyStateCheckInterval=setInterval(checkReady,100);return lottie},module.exports?module.exports=KP0(JP0):(JP0.lottie=KP0(JP0),JP0.bodymovin=JP0.lottie))}),v="5.5.7",meta={g:"LottieFiles AE 0.1.21",a:"",k:"",d:"",tc:""},fr$1=30,ip=21,op=63,w$1=480,h=480,nm="Comp 5",ddd=0,assets=[{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:162,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:146,s:[133.5,93.5,0],to:[9.167,4.083,0],ti:[-9.167,-4.083,0]},{t:174,s:[188.5,118,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.213]},t:167,s:[.211764708161,.419607847929,.760784327984,1]},{t:179,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.166,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[.037,.05],[.041,-.024],[.034,-.051],[.025,.113]],o:[[.232,.324],[.141,.156],[-.051,-.008],[.046,.05]],v:[[-46.31,-71.767],[65.643,38.336],[49.591,87.699],[-99.955,-62.29]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.211764720842,.419607873056,.760784373564,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-60.137,-29.068],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:43,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:146,s:[133.5,93.5,0],to:[-11.5,1.083,0],ti:[11.5,-1.083,0]},{t:178,s:[64.5,100,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.225]},t:167,s:[.152941182256,.333333343267,.615686297417,1]},{t:178,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.269,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[-.065,-.043],[-.067,-.064],[1.117,1.094],[-.03,.009]],o:[[4.999,4.797],[.141,.156],[-1.096,-1.074],[-.002,-.109]],v:[[-30.411,-64.812],[68.047,40.951],[50.684,89.788],[-84.45,-55.004]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.152940996955,.333332974303,.615685975318,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-57.637,-29.068],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:-76,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.113},t:146,s:[133.5,93.5,0],to:[-3.5,20.75,0],ti:[3.5,-20.75,0]},{t:173,s:[112.5,218,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.242]},t:167,s:[.023529412225,.164705887437,.40000000596,1]},{t:179,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.269,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[-.014,-.041],[-.562,-.789],[1.117,1.094],[-.037,.026]],o:[[4.999,4.797],[.141,.156],[-1.096,-1.074],[-.004,.018]],v:[[-37.202,-70.781],[68.267,54.103],[56.188,104.65],[-84.732,-58.611]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.023529413635,.164705882353,.400000029919,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-60.321,-28.562],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:4,ty:0,nm:"Spinner - final",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[150,152,0],ix:2},a:{a:0,k:[150,150,0],ix:1},s:{a:0,k:[104,104,100],ix:6}},ao:0,w:300,h:300,ip:0,op:142,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:5,ty:4,nm:"Layer 4 Outlines 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:13,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:19.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:24.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:31.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:54,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:56,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:62.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:67.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:73.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:96,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:98,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:104.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:109.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:115.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:138,s:[136,94.314,0]}],ix:2},a:{a:0,k:[61.731,47.5,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.023,1.023,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{t:14,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[61.261,36.769],[49.92,48.109],[61.261,59.45],[72.601,48.109]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.196078449488,.40784317255,.756862819195,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ty:"st",c:{a:0,k:[.431372997808,.513725968903,.909803981407,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2.3,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.195999998205,.40800000359,.757000014361,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[61.802,44.761],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[104.596,104.596],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[33.333,16.667],[0,0],[-44.444,-22.222],[11.11,-5.555]],o:[[0,0],[44.444,22.222],[-11.111,5.556],[-33.334,-16.667]],v:[[-66.666,-8.334],[-66.666,-41.666],[66.666,24.999],[33.334,41.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.195999998205,.40800000359,.757000014361,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[67.595,42.321],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:238,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 6 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:17,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:23.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:28.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:35.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:58,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:60,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:66.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:71.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:77.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:100,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:102,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:108.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:113.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:119.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:142,s:[136,94.314,0]}],ix:2},a:{a:0,k:[17.385,65.846,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.023,1.023,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:14,s:[130,130,100]},{t:178,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[16.645,54.077],[5.305,65.417],[16.645,76.757],[27.985,65.417]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.152941182256,.333333343267,.615686297417,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-11.11,5.555],[0,0],[11.111,5.555]],o:[[11.111,-5.556],[0,0],[-11.11,-5.555],[0,0]],v:[[-16.666,66.666],[16.666,50.001],[16.666,-50.001],[-16.666,-66.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.152999997606,.33300000359,.616000007181,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[16.928,66.988],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:239,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Layer 5 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:20,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:26.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:31.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:38.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:61,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:63,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:69.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:74.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:80.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:103,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:105,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:111.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:116.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:122.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:145,s:[136,94.314,0]}],ix:2},a:{a:0,k:[57.769,39.038,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.008,1.008,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{t:12,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[58.953,26.769],[47.613,38.109],[58.953,49.45],[70.293,38.109]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.023529412225,.164705887437,.40000000596,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-33.333,16.666],[-11.11,-5.556],[44.444,-22.223],[0,0]],o:[[11.111,5.555],[-44.444,22.223],[0,0],[33.333,-16.667]],v:[[33.334,-41.667],[66.666,-25],[-66.666,41.667],[-66.666,8.333]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.023999999551,.165000002992,.4,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[66.928,42.655],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:236,st:0,bm:0}]}],layers=[{ddd:0,ind:1,ty:0,nm:"part 2 spinner",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[238,237,0],ix:2},a:{a:0,k:[150,150,0],ix:1},s:{a:0,k:[92.667,92.667,100],ix:6}},ao:0,w:300,h:300,ip:-34,op:2486,st:-34,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:143,s:[0]},{t:149,s:[30]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[240,240,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,.167,16.5]},t:140,s:[0,0,100]},{t:151,s:[98.998,98.998,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[227.272,227.272],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-9.206,-.951],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[203.521,203.521],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[240,240,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[],ip:0,op:2520,st:0,bm:0}],markers=[],bufferAnimation={v:v,meta:meta,fr:fr$1,ip:ip,op:op,w:w$1,h:h,nm:nm,ddd:ddd,assets:assets,layers:layers,markers:markers},v$1="5.5.7",meta$1={g:"LottieFiles AE 0.1.21",a:"",k:"",d:"",tc:""},fr$2=30,ip$1=104,op$1=165,w$2=480,h$1=480,nm$1="Comp 5",ddd$1=0,assets$1=[{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:162,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:146,s:[133.5,93.5,0],to:[9.167,4.083,0],ti:[-9.167,-4.083,0]},{t:174,s:[188.5,118,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.213]},t:167,s:[.211764708161,.419607847929,.760784327984,1]},{t:179,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.166,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[.037,.05],[.041,-.024],[.034,-.051],[.025,.113]],o:[[.232,.324],[.141,.156],[-.051,-.008],[.046,.05]],v:[[-46.31,-71.767],[65.643,38.336],[49.591,87.699],[-99.955,-62.29]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.211764720842,.419607873056,.760784373564,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-60.137,-29.068],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:43,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:146,s:[133.5,93.5,0],to:[-11.5,1.083,0],ti:[11.5,-1.083,0]},{t:178,s:[64.5,100,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.225]},t:167,s:[.152941182256,.333333343267,.615686297417,1]},{t:178,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.269,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[-.065,-.043],[-.067,-.064],[1.117,1.094],[-.03,.009]],o:[[4.999,4.797],[.141,.156],[-1.096,-1.074],[-.002,-.109]],v:[[-30.411,-64.812],[68.047,40.951],[50.684,89.788],[-84.45,-55.004]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.152940996955,.333332974303,.615685975318,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-57.637,-29.068],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:140,s:[0]},{t:141,s:[100]}],ix:11},r:{a:0,k:-76,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.113},t:146,s:[133.5,93.5,0],to:[-3.5,20.75,0],ti:[3.5,-20.75,0]},{t:173,s:[112.5,218,0]}],ix:2},a:{a:0,k:[-59.584,-29.644,0],ix:1},s:{a:0,k:[83.75,83.75,100],ix:6}},ao:0,ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.242]},t:167,s:[.023529412225,.164705887437,.40000000596,1]},{t:179,s:[1,1,1,1]}],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.269,y:1},o:{x:.167,y:.167},t:164,s:[{i:[[-12.234,0],[0,-12.234],[12.234,0],[0,12.234]],o:[[12.234,0],[0,12.234],[-12.234,0],[0,-12.234]],v:[[0,-22.151],[22.151,0],[0,22.151],[-22.151,0]],c:!0}]},{t:179,s:[{i:[[-.014,-.041],[-.562,-.789],[1.117,1.094],[-.037,.026]],o:[[4.999,4.797],[.141,.156],[-1.096,-1.074],[-.004,.018]],v:[[-37.202,-70.781],[68.267,54.103],[56.188,104.65],[-84.732,-58.611]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.023529413635,.164705882353,.400000029919,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-60.321,-28.562],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[110.266,111.442],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:4,ty:0,nm:"Spinner - final",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[150,152,0],ix:2},a:{a:0,k:[150,150,0],ix:1},s:{a:0,k:[104,104,100],ix:6}},ao:0,w:300,h:300,ip:0,op:142,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:5,ty:4,nm:"Layer 4 Outlines 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:13,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:19.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:24.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:31.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:54,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:56,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:62.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:67.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:73.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:96,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:98,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:104.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:109.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:115.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:138,s:[136,94.314,0]}],ix:2},a:{a:0,k:[61.731,47.5,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.023,1.023,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{t:14,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[61.261,36.769],[49.92,48.109],[61.261,59.45],[72.601,48.109]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.196078449488,.40784317255,.756862819195,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ty:"st",c:{a:0,k:[.431372997808,.513725968903,.909803981407,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2.3,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.195999998205,.40800000359,.757000014361,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[61.802,44.761],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[104.596,104.596],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[33.333,16.667],[0,0],[-44.444,-22.222],[11.11,-5.555]],o:[[0,0],[44.444,22.222],[-11.111,5.556],[-33.334,-16.667]],v:[[-66.666,-8.334],[-66.666,-41.666],[66.666,24.999],[33.334,41.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.195999998205,.40800000359,.757000014361,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[67.595,42.321],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:238,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 6 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:17,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:23.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:28.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:35.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:58,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:60,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:66.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:71.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:77.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:100,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:102,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:108.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:113.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:119.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:142,s:[136,94.314,0]}],ix:2},a:{a:0,k:[17.385,65.846,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.023,1.023,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:14,s:[130,130,100]},{t:178,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[16.645,54.077],[5.305,65.417],[16.645,76.757],[27.985,65.417]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.152941182256,.333333343267,.615686297417,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-11.11,5.555],[0,0],[11.111,5.555]],o:[[11.111,-5.556],[0,0],[-11.11,-5.555],[0,0]],v:[[-16.666,66.666],[16.666,50.001],[16.666,-50.001],[-16.666,-66.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.152999997606,.33300000359,.616000007181,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[16.928,66.988],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:239,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Layer 5 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.167,y:0},t:20,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:26.605,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:31.424,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:38.432,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:61,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:63,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:69.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:74.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:80.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{i:{x:.833,y:1},o:{x:.167,y:.167},t:103,s:[136,94.314,0],to:[40.695,0,0],ti:[-40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:105,s:[136,94.314,0],to:[40.695,0,0],ti:[0,-40.695,0]},{i:{x:.667,y:1},o:{x:.167,y:.078},t:111.444,s:[209.686,168,0],to:[0,40.695,0],ti:[40.695,0,0]},{i:{x:.667,y:1},o:{x:.167,y:.114},t:116.146,s:[136,241.686,0],to:[-40.695,0,0],ti:[0,40.695,0]},{i:{x:.243,y:1},o:{x:.167,y:.367},t:122.982,s:[62.314,168,0],to:[0,-40.695,0],ti:[-40.695,0,0]},{t:145,s:[136,94.314,0]}],ix:2},a:{a:0,k:[57.769,39.038,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.141,.141,.168],y:[-.001,-.001,11.454]},t:0,s:[0,0,100]},{i:{x:[.647,.647,.685],y:[1.008,1.008,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:11,s:[140,140,100]},{t:12,s:[130,130,100]}],ix:6}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[6.263,0],[0,-6.263],[-6.263,0],[0,6.263]],o:[[-6.263,0],[0,6.263],[6.263,0],[0,-6.263]],v:[[58.953,26.769],[47.613,38.109],[58.953,49.45],[70.293,38.109]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:3.5,ix:4},nm:"Mask 1"}],ef:[{ty:21,nm:"Fill",np:9,mn:"ADBE Fill",ix:1,en:1,ef:[{ty:10,nm:"Fill Mask",mn:"ADBE Fill-0001",ix:1,v:{a:0,k:0,ix:1}},{ty:7,nm:"All Masks",mn:"ADBE Fill-0007",ix:2,v:{a:0,k:0,ix:2}},{ty:2,nm:"Color",mn:"ADBE Fill-0002",ix:3,v:{a:0,k:[.023529412225,.164705887437,.40000000596,1],ix:3}},{ty:7,nm:"Invert",mn:"ADBE Fill-0006",ix:4,v:{a:0,k:0,ix:4}},{ty:0,nm:"Horizontal Feather",mn:"ADBE Fill-0003",ix:5,v:{a:0,k:0,ix:5}},{ty:0,nm:"Vertical Feather",mn:"ADBE Fill-0004",ix:6,v:{a:0,k:0,ix:6}},{ty:0,nm:"Opacity",mn:"ADBE Fill-0005",ix:7,v:{a:0,k:1,ix:7}}]}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-33.333,16.666],[-11.11,-5.556],[44.444,-22.223],[0,0]],o:[[11.111,5.555],[-44.444,22.223],[0,0],[33.333,-16.667]],v:[[33.334,-41.667],[66.666,-25],[-66.666,41.667],[-66.666,8.333]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.023999999551,.165000002992,.4,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[66.928,42.655],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:236,st:0,bm:0}]}],layers$1=[{ddd:0,ind:1,ty:0,nm:"part 2 spinner",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[238,237,0],ix:2},a:{a:0,k:[150,150,0],ix:1},s:{a:0,k:[92.667,92.667,100],ix:6}},ao:0,w:300,h:300,ip:-34,op:2486,st:-34,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:143,s:[0]},{t:149,s:[30]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[240,240,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[.167,.167,16.5]},t:140,s:[0,0,100]},{t:151,s:[98.998,98.998,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[227.272,227.272],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-9.206,-.951],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[203.521,203.521],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:2520,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[240,240,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[],ip:0,op:2520,st:0,bm:0}],markers$1=[],readyAnimation={v:v$1,meta:meta$1,fr:fr$2,ip:ip$1,op:op$1,w:w$2,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1,markers:markers$1},styles$g={loadingAnimation:"styles_loadingAnimation__1QyEi"},Loader=function(){_inherits(t,Component);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$g.loadingAnimation})}},{key:"buffer",value:function(){lottie.loadAnimation({container:document.getElementById("Loader"),renderer:"svg",loop:!0,autoplay:!0,animationData:bufferAnimation})}},{key:"readyToPlay",value:function(){lottie.loadAnimation({container:document.getElementById("Loader"),renderer:"svg",loop:!1,autoplay:!0,animationData:readyAnimation})}},{key:"destroy",value:function(){lottie.destroy()}}]),t}(),Loader$1=createFactory(Loader),styles$h={loaderContainer:"styles_loaderContainer__yD3Bs"},LoaderContainer=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){var t=e.showLoaderOnInit,e=jsx(Loader$1,{id:"Loader",ref:createRef(this,"loader")});return jsx("div",{className:styles$h.loaderContainer},t?e:null)}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({currentState:t.store.currentState,readyToShow:t.store.readyToShow})},autorunConfig)}},{key:"update",value:function(e){var t=this,r=e.currentState,e=e.readyToShow;e||r!==INITIALISING||(this.addElementToSelf(this.refs.loader.getElement()),setTimeout(function(){return t.refs.loader.buffer()},0)),e&&r===INITIALISING&&(this.refs.loader.destroy(),this.refs.loader.readyToPlay()),!e||r!==LOADING$1&&r!==LAYER_LOADING||(this.refs.loader.destroy(),this.refs.loader.buffer()),!e||r!==PLAYING&&r!==SEEKING||this.refs.loader.destroy()}}]),t}(),LoaderContainer$1=createFactory(LoaderContainer),styles$i={root:"styles_root__1CWL-",visible:"styles_visible__2g5qd",errorMessage:"styles_errorMessage__3eiyc"},ErrorMessage$1=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({errorMessage:t.store.errorMessage.message,isVisible:t.store.errorMessage.isVisible})},autorunConfig)}},{key:"root",value:function(){return jsx("div",{className:styles$i.root},jsx("div",{ref:createRef(this,"errorMessage")}))}},{key:"update",value:function(e){var t=e.errorMessage;e.isVisible?(this.element.classList.add(styles$i.visible),this.refs.errorMessage.getElement().classList.add(styles$i.errorMessage),this.refs.errorMessage.setTextContent(t)):(this.element.classList.remove(styles$i.visible),this.refs.errorMessage.getElement().classList.remove(styles$i.errorMessage),this.refs.errorMessage.setTextContent(""))}}]),t}(),ErrorMessage$2=createFactory(ErrorMessage$1),styles$j={topOverlay:"styles_topOverlay__2Coe7",mobile:"styles_mobile__1THOG",topOverlayBackground:"styles_topOverlayBackground__1olWK",projectTitle:"styles_projectTitle__Ozdbd",poweredBy:"styles_poweredBy__3JbFU",invisible:"styles_invisible__2WnEw",fadeIn:"styles_fadeIn__2ITcH",fadeOut:"styles_fadeOut__12Ts3"},TopOverlay=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){return jsx("div",{className:classnames(styles$j.topOverlay,browserDetection.isMobileOrTablet?styles$j.mobile:null,e.overlayControlsBackground?styles$j.topOverlayBackground:null),ref:createRef(this,"topOverlay")},jsx("p",{className:styles$j.projectTitle},e.preloadedProjectJSON?e.preloadedProjectJSON.name:null),jsx("a",{className:styles$j.poweredBy,href:"https://www.vmltechnology.com",rel:"noopener noreferrer",target:"_blank"},"Powered by ",jsx("span",null,"VML")))}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({controls:t.store.controls,currentState:t.store.currentState})},autorunConfig)}},{key:"update",value:function(e){var t=e.controls;e.currentState!==INITIALISING?this.element.classList.remove(styles$j.invisible):this.element.classList.add(styles$j.invisible),t.showControls?(this.element.classList.remove(styles$j.fadeOut),this.element.classList.add(styles$j.fadeIn)):(this.element.classList.remove(styles$j.fadeIn),this.element.classList.add(styles$j.fadeOut))}}]),t}(),TopOverlay$1=createFactory(TopOverlay),styles$k={root:"styles_root__33X8H"},isNotNull=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.some(function(e){return!!e||0===e})},Grid=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(){return jsx("div",{className:styles$k.root})}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({measurements:t.store.measurements,useGrid:t.store.useGrid})},autorunConfig)}},{key:"update",value:function(e){var t=e.measurements.aspectRatioPercent;e.useGrid&&isNotNull(t)?this.element.setAttribute("style",convertStyleMapToInlineStyles({display:"initial","background-size":"".concat(100*t,"px ").concat(100*t,"px")})):this.element.setAttribute("style",convertStyleMapToInlineStyles({display:"none"}))}}]),t}(),Grid$1=createFactory(Grid),styles$l={root:"styles_root__vQYBO",noPointer:"styles_noPointer__1UOqn"},OffsetContainer=function(){_inherits(t,Container);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"root",value:function(e){var t=e.children,e=e.allowPointer;return jsx("div",{className:classnames(styles$l.root,_defineProperty({},styles$l.noPointer,!(void 0!==e&&e)))},t)}},{key:"subscribe",value:function(e){var t=this;autorun(function(){return e({measurements:t.store.measurements,isFullScreen:t.store.isFullScreen})},autorunConfig)}},{key:"update",value:function(e){var t=e.measurements,r=t.xOffset,e=t.yOffset,t=t.aspectRatioPercent;isNotNull(r,e,t)&&this.element.setAttribute("style",convertStyleMapToInlineStyles({left:"".concat(r,"px"),right:"".concat(r,"px"),top:"".concat(e,"px"),bottom:"".concat(e,"px")}))}}]),t}(),OffsetContainer$1=createFactory(OffsetContainer),styles$m={videoContainer:"webplayer-styles_videoContainer__2mHcM",videoLayerElementContainer:"webplayer-styles_videoLayerElementContainer__1t0PF"},WebPlayer=function(){function t(e){_classCallCheck(this,t),this.element=this.root(e),e.ref(this)}return _createClass(t,[{key:"getRefs",value:function(){return this.refs}},{key:"getElement",value:function(){return this.element}},{key:"root",value:function(e){var t=e.store,r=e.videoPlayerEngine,i=e.eventListeners,n=e.muted,a=e.useVideo,s=e.usePoster,o=e.useLoader,l=e.preloadedProjectJSON,u=e.useOverlayControls,c=e.overlayControlsBackground,h=e.videoBackgroundColour,d=e.disableAllControls,f=e.controlCapabilities,p=e.useErrorMessage,m=e.showLoaderOnInit,g=e.clientWidth,y=e.clientHeight,e=e.alwaysFillContainer;return jsx(VideoPlayerContainer$1,{store:t,ref:createRef(this,"videoPlayerContainer"),eventListeners:i.videoPlayerContainer,initialWidth:g,initialHeight:y,alwaysFillContainer:e,videoBackgroundColour:h},a&&jsx("div",{id:"videoContainer",className:styles$m.videoContainer},jsx(Video$1,{store:t,eventListeners:i.video,ref:createRef(this,"video"),muted:n})),jsx("div",{id:"videoLayerElementContainer",className:styles$m.videoLayerElementContainer}),!d&&u&&browserDetection.isMobileOrTablet&&jsx(OverlayControlsOverlay$1,{store:t}),jsx(OffsetContainer$1,{store:t,allowPointer:!0},s&&jsx(PosterContainer$1,{store:t,ref:createRef(this,"poster")}),jsx(LayerContainer$1,{store:t,videoPlayerEngine:r,eventListeners:i.layerContainer,linkEventListeners:i.link,triggerEventListeners:i.trigger,videoLayerElementContainerId:"videoLayerElementContainer",ref:createRef(this,"layerContainer")}),jsx(Grid$1,{store:t})),!d&&u&&browserDetection.isMobileOrTablet&&jsx(OverlayControls$1,{eventListeners:i.overlayControls,controlCapabilities:f,store:t}),o&&jsx(LoaderContainer$1,{showLoaderOnInit:m,store:t,eventListeners:i.loader}),!d&&jsx(TopOverlay$1,{store:t,preloadedProjectJSON:l,overlayControlsBackground:c}),!d&&jsx(Controls$2,{store:t,eventListeners:i.controls,controlCapabilities:f,overlayControlsBackground:c}),p&&jsx(OffsetContainer$1,{store:t},jsx(ErrorMessage$2,{ref:createRef(this,"errorMessage"),store:t})))}},{key:"update",value:function(e){var t=this,r=e.videos,e=e.videoPoster;if(this.refs.poster.setSrc(e),!r.find(function(e){return!t.refs.video.hasClip(e)}))return this.refs.video;this.refs.video.clearClips(),this.refs.video.addClip(_objectSpread2({},r[0]));for(var i=1;i<r.length;i++)this.refs.video.addClip(_objectSpread2({},r[i]),"videoContainer");return this.refs.video}},{key:"addClip",value:function(e){this.refs.video.addClip(e,"videoContainer")}}]),t}(),WebPlayer$1=createFactory(WebPlayer);function calculateControlCapabilities(e){var t=!e,e=t?{}:e.reduce(function(e,t){return _objectSpread2(_objectSpread2({},e),{},_defineProperty({},t,!0))},{});return{allowPlay:t||e.play,allowMute:t||e.mute,allowVolume:t||e.volume,allowTime:t||e.time,allowProgress:t||e.progress,allowSubtitles:t||e.subtitles,allowFS:t||e.fullscreen}}var createWebPlayer=function(e){var t=e.store,r=e.videoController,i=e.videoPlayerEngine,n=e.clientHeight,a=e.clientWidth,s=e.usePoster,o=e.useOverlayControls,l=e.overlayControlsBackground,u=e.videoBackgroundColour,c=e.allowedControls,h=e.useVideo,d=e.useErrorMessage,f=e.useLoader,p=(e.projectId,e.preloadedProjectJSON),m=e.muted,g=e.onElementClicked,y=e.createControlsEventListeners,v=e.createVideoEventListeners,b=e.createOverlayControlsEventListeners,S=e.createVideoPlayerContainerEventListeners,M=e.createLinkEventListeners,T=e.createTriggerEventListeners,A=e.createLayerContainerEventListeners,E=e.createLoaderEventListeners,D=e.eventCallbacks,_=void 0===D?{}:D,x={},e={},D=c&&0==c.length,c=calculateControlCapabilities(c);return{element:jsx(WebPlayer$1,{clientHeight:n,clientWidth:a,store:t,videoPlayerEngine:i,usePoster:s,useOverlayControls:o,overlayControlsBackground:l,videoBackgroundColour:u,controlCapabilities:c,disableAllControls:D,useVideo:h,useLoader:f,useErrorMessage:d,preloadedProjectJSON:p,showLoaderOnInit:!0,muted:m,eventListeners:{video:h?v(_objectSpread2({store:t,videoController:r,videoPlayerEngine:i},_)):null,overlayControls:!D&&o?b({store:t,playerEngine:i,controlCapabilities:c}):null,controls:!D&&y({store:t,playerEngine:i}),videoPlayerContainer:S({store:t,playerEngine:i,disableAllControls:D,controlCapabilities:c}),link:M({store:t,playerEngine:i,onElementClicked:g}),trigger:T({store:t,playerEngine:i,onElementClicked:g}),layerContainer:A({store:t}),loader:E({store:t})},ref:createRef(x,"webPlayer")}),layerContainerRef:(e=(x=x.refs.webPlayer).getRefs()).layerContainer,videoPlayerContainerRef:e.videoPlayerContainer,videoRef:e.video,webPlayerRef:x}};window.ResizeObserver||ResizeObserver_3();var create=function(e){var m=e.store,g=e.loadingPromise,y=e.videoController,n=e.videoPlayerEngine,a=e.updateLayers,s=e.createVideoEventListeners,o=e.createControlsEventListeners,l=e.createOverlayControlsEventListeners,u=e.createVideoPlayerContainerEventListeners,c=e.createLinkEventListeners,h=e.createTriggerEventListeners,v=e.createLayerContainerEventListeners,b=e.createLoaderEventListeners,t=e.useOverlayControls,S=void 0===t||t,M=e.overlayControlsBackground,T=e.videoBackgroundColour,t=e.allowedControls,A=void 0===t?null:t,t=e.usePoster,E=void 0===t||t,t=e.useVideo,D=void 0===t||t,t=e.useLoader,_=void 0===t||t,t=e.useErrorMessage,x=void 0===t||t,I=e.enabledLayerIds,C=e.disabledLayerIds,k=e.projectId,t=e.onLoad,w=void 0===t?function(){}:t,t=e.onReady,L=void 0===t?function(){}:t,t=e.onElementClicked,O=void 0===t?function(){}:t,P=e.layers,N=e.projectJSON,R=e.duration,j=e.type,F=e.service,t=e.transformProjectJson,z=void 0===t?function(e){return e}:t,t=e.muted,B=void 0!==t&&t,t=e.mobileLandscapeOnFullscreen,V=void 0!==t&&t,t=e.showSubtitles,U=void 0===t||t,G=e.clientHeight,Y=e.clientWidth,H=e.serviceQueryParams,t=e.skipVideoLayerElementBlobs,W=void 0!==t&&t,e=e.data,$=void 0===e?null:e;return new Promise(function(e){var t=createWebPlayer({store:m,videoController:y,videoPlayerEngine:n,clientHeight:G,clientWidth:Y,usePoster:E,useOverlayControls:S,overlayControlsBackground:M,videoBackgroundColour:T,allowedControls:A,useVideo:D,useErrorMessage:x,useLoader:_,projectId:k,preloadedProjectJSON:N,muted:B,onElementClicked:O,createControlsEventListeners:o,createVideoEventListeners:s,createOverlayControlsEventListeners:l,createVideoPlayerContainerEventListeners:u,createLinkEventListeners:c,createTriggerEventListeners:h,createLayerContainerEventListeners:v,createLoaderEventListeners:b,eventCallbacks:{onReady:L}}),r=t.element,i=t.layerContainerRef,d=t.videoPlayerContainerRef,f=t.webPlayerRef,p=t.videoRef;k||N?fetchProject({service:F,projectId:k,preloadedProjectJSON:N,clientHeight:G,clientWidth:Y,transformProjectJson:z,serviceQueryParams:H,data:$,skipVideoLayerElementBlobs:W}).then(function(e){var i=e.videoPoster,n=e.videos,a=e.videoStartOffsetTime,s=e.videoEndOffsetTime,o=e.mappedLayers,t=e.projectJson,l=e.projectName,u=e.projectDuration,c=e.bumperBeginTime,h=e.displaySubtitlesButton;!function(){var e;D?(e=n.reduce(function(e,t){return e+t.duration},0),y.setProps({startOffsetTime:a,endOffsetTime:s,video:p,videoDurationFromJson:e})):y.setProps({startOffsetTime:a});var r=loadAssets({service:F,imageMapFromStore:m.imageMap,fontMapFromStore:m.fontMap,projectJson:t});r.promise.then(function(e){var t=e.imageMap,e=e.fontMap;m.init({state:INITIALISING,videoStartOffsetTime:a,videoEndOffsetTime:s,enabledLayerIds:I,disabledLayerIds:C,layersJson:o,video:p,videoPlayerContainer:d,duration:u,imageMap:r.imageMap,fontMap:r.fontMap,bumperBeginTime:c,clientWidth:Y,clientHeight:G,muted:B,mobileLandscapeOnFullscreen:V,showSubtitles:U,displaySubtitlesButton:h}),m.update({imageMap:t,hasImageMapLoaded:!0,fontMap:e,hasFontMapLoaded:!0}),f.update({videoPoster:i,videos:n}),g.resolve()}),w({projectName:l})}()}).catch(function(e){console.error("The video could not be loaded",e),m.init({state:LOADING_ERROR,isFullScreen:!1,startTime:0,currentTime:0,videoPlayerContainer:d,errorMessage:"The video could not be loaded",clientHeight:G,clientWidth:Y,muted:B,mobileLandscapeOnFullscreen:V,showSubtitles:U,displaySubtitlesButton:!1})}):P?(g.resolve(),m.init({videoPlayerContainer:d,videoState:NOT_USED,state:READY,muted:B,mobileLandscapeOnFullscreen:V,showSubtitles:U,displaySubtitlesButton:!1}),a({layers:P,duration:R,type:j})):(g.resolve(),m.init({videoPlayerContainer:d,clientHeight:G,clientWidth:Y,muted:B,mobileLandscapeOnFullscreen:V,showSubtitles:U,displaySubtitlesButton:!1})),e({element:r,videoPlayerContainerRef:d,layerContainerRef:i,videoRef:p,webPlayerRef:f})})};function performLayerUpdate(e,t,r,i,n,a,s,o){var l=void 0!==o?o:r.currentTime,u=r.state===PLAYING;r.state!==INITIALISING&&n.getActions().pause();var c=replaceTokensWithData(e,a);u&&(t.fontsLoading||t.imagesLoading)&&r.update({state:LOADING$1,hasImageMapLoaded:!1,hasFontMapLoaded:!1}),t.promise.then(function(e){var t=e.imageMap,e=e.fontMap;r.update({state:READY,imageMap:t,hasImageMapLoaded:!0,fontMap:e,hasFontMapLoaded:!0,layersJson:c,duration:s,currentTime:l}),n.getActions().setCurrentTime(l),u&&n.getActions().play()})}function mapVideoLayers(e){return e.map(function(e){return{src:e.elements[0].url,srcHLS:e.elements[0].url_hls,duration:e.elements[0].duration,videoClipStart:e.elements[0].beginTime,startTime:e.elements[0].absoluteLayerBeginTime,endTime:e.elements[0].absoluteLayerEndTime}})}function nudgeBumper(e,t){var t=e.duration===t?null:e.absoluteBumperBeginTime-(e.duration-t),r=t-e.absoluteBumperBeginTime,i=null;t&&(e.update({bumperBeginTime:t}),i=e.layersJson.find(function(e){return"company_bumper"===e.layerType}));e=e.layersJson.filter(function(e){return!i||"company_bumper"!==e.layerType});return i&&e.push(_objectSpread2(_objectSpread2({},i),{},{beginTime:i.beginTime+r,elements:i.elements.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{absoluteBeginTime:e.absoluteBeginTime+r,absoluteEndTime:e.absoluteEndTime+r})})})),e}var addLayers=function(e){var l=e.store,u=e.service,c=e.videoPlayerEngine,h=e.data,d=e.webPlayerRef;return function(e){var t=e.layers,r=(e.type,e.data),i=void 0===r?null:r,n=(l.layersJson,l.measurements),a=n.clientWidth,s=n.clientHeight,e=loadAssets({service:u,imageMapFromStore:l.imageMap,fontMapFromStore:l.fontMap,projectJson:t}),r=mapVideoLayers(t.filter(function(e){return"video"===e.layerType})),n=l.duration+r.reduce(function(e,t){return e+t.duration},0);r.forEach(function(e){return d.addClip(e)});var t=t.filter(function(e){return"video"!==e.layerType}),o=nudgeBumper(l,n);performLayerUpdate([].concat(_toConsumableArray(o),_toConsumableArray(t.map(function(e,t){return _objectSpread2(_objectSpread2({},e),{},{elements:mapLayers(o.length+t)(a,s,e.layerType,e.elements)})}))),e,l,u,c,i||h,n)}},replaceLayers=function(e){var m=e.store,g=e.service,y=e.videoPlayerEngine,v=e.videoController,b=e.data,S=e.webPlayerRef,M=e.skipVideoLayerElementBlobs;return function(e){var t=e.layers,r=(e.type,e.data),i=void 0===r?null:r,n=e.duration,a=void 0===n?27:n,s=e.bumperDuration,o=void 0===s?0:s,l=e.openerDuration,r=void 0===l?0:l,n=(m.layersJson,t.filter(function(e){return"video"!==e.layerType})),s=m.measurements,u=s.clientWidth,c=s.clientHeight,h=loadAssets({service:g,imageMapFromStore:m.imageMap,fontMapFromStore:m.fontMap,projectJson:t}),e=_toConsumableArray(n.map(function(e,t){return _objectSpread2(_objectSpread2({},e),{},{elements:mapLayers(t)(u,c,e.layerType,e.elements),states:mapStateElements(u,c,e,mapLayers(t))})})),d=m.currentTime,l=t.filter(function(e){return"video"===e.layerType}),s=mapVideoLayers(l),n=l[0].elements[0].clip_thumbnail_url,t=e.find(function(e){return"company_bumper"===e.layerType}),l=e.find(function(e){return"company_opener"===e.layerType}),r=l?l.duration:r;m.update({bumperBeginTime:t?t.beginTime:a,projectDuration:a,videoStartOffsetTime:r}),m.layerStates.reset();s=S.update({videoPoster:n,videos:s});v.setProps({startOffsetTime:r,endOffsetTime:t?t.duration:o,video:s,videoDurationFromJson:a});var f=e.filter(function(e){return!!e.elements.find(function(e){return"video"===e.type})}),p=e.filter(function(e){return void 0===e.elements.find(function(e){return"video"===e.type})});(M?new Promise(function(e){return e(f)}):mapVideosToBlobs(f)).then(function(e){performLayerUpdate([].concat(_toConsumableArray(p),_toConsumableArray(e)),h,m,g,y,i||b,a,d)})}},updateLayers=function(e){var u=e.store,t=e.loadingPromise,c=e.dimensions,h=e.service,d=e.videoPlayerEngine;return function(e){var s=e.duration,o=e.layers,e=e.type,l=void 0===e?"default":e;t.promise.then(function(){var e=u,t=e.currentTime,r=e.duration,i=e.currentTime,n=s||r;n<t&&(t=n);var a=[],e={};o&&(r=[{newDuration:n,layerType:l,elements:o.map(function(e){return _objectSpread2(_objectSpread2({},e),{},{absoluteLayerBeginTime:0,absoluteLayerEndTime:n})})}],a=[_objectSpread2(_objectSpread2({},r[0]),{},{elements:mapLayers(0)(c.clientWidth,c.clientHeight,l,r[0].elements)})],e={imageMap:(r=loadAssets({service:h,imageMapFromStore:u.imageMap,fontMapFromStore:u.fontMap,projectJson:r})).imageMap,fontMap:r.fontMap},r.promise.then(function(e){var t=e.imageMap,e=e.fontMap;u.update({state:READY,imageMap:t,hasImageMapLoaded:!0,fontMap:e,hasFontMapLoaded:!0})})),u.update(_objectSpread2(_objectSpread2({layersJson:o?a:null,state:o?INITIALISING:READY},c),{},{duration:n},e)),i!==t&&d.getActions().updateCurrentTime(t)})}},_excluded$l=["createWindowEventListeners"];window.ResizeObserver||ResizeObserver_3(),registerPolyfills();var getElement=function(e){e="string"==typeof e?document.getElementById(e):e;return e},measureAttachToComponent=function(e){e=getElement(e).clientWidth;return{clientWidth:e,clientHeight:e/16*9}},createPlayer=function(e){var t=e.projectId,r=e.useOverlayControls,i=void 0===r||r,n=e.overlayControlsBackground,a=void 0===n||n,s=e.usePoster,o=void 0===s||s,l=e.useVideo,u=void 0===l||l,r=e.useLoader,c=void 0===r||r,n=e.useErrorMessage,h=void 0===n||n,d=e.disabledLayerIds,f=e.enabledLayerIds,p=e.attachTo,s=e.useGrid,m=void 0!==s&&s,l=e.logStateChange,g=void 0!==l&&l,r=e.autoLoop,y=void 0!==r&&r,n=e.showMouseCoords,v=void 0!==n&&n,s=e.useTimeInMillis,b=void 0!==s&&s,l=e.controlsAlwaysOn,S=void 0!==l&&l,r=e.skipVideoLayerElementBlobs,M=void 0!==r&&r,n=e.allowedControls,T=void 0===n?null:n,s=e.onLoad,A=void 0===s?function(){}:s,l=e.onPlay,E=void 0===l?function(){return null}:l,r=e.onPause,D=void 0===r?function(){return null}:r,n=e.onVideoEnd,s=e.onProgress,_=void 0===s?function(){return null}:s,l=e.onFullScreenToggle,x=void 0===l?function(){return null}:l,r=e.onReady,I=void 0===r?function(){return null}:r,s=e.onElementClicked,C=void 0===s?function(){return null}:s,l=e.progressInterval,k=void 0===l?3:l,w=e.layers,L=e.projectJSON,O=e.videoBackgroundColour,P=e.duration,N=e.type,R=e.service,r=e.transformProjectJson,j=void 0===r?function(e){return e}:r,s=e.showSubtitles,F=void 0===s||s,l=e.muted,z=void 0!==l&&l,r=e.mobileLandscapeOnFullscreen,B=void 0!==r&&r,s=e.assetUrl,l=void 0===s?null:s,r=e.serverUrl,s=void 0===r?null:r,r=e.useVideoPlayerEnginerLogger,V=void 0!==r&&r,r=e.serviceQueryParams,U=void 0===r?{}:r,r=e.data,G=void 0===r?null:r,e=e.useKeyboardEvents,Y=void 0===e||e,H=createVideoController(void 0===n?function(){return null}:n),W=createVideoPlayerEngine(),$=new RootStore,Q=measureAttachToComponent(p);window.assetUrl=l,window.serverUrl=s;var s=eventListeners(),K=s.createWindowEventListeners,Z=_objectWithoutProperties(s,_excluded$l),X=createLoadingPromise(),q=updateLayers({store:$,loadingPromise:X,dimensions:Q,service:R,videoPlayerEngine:W}),J=actions({store:$,videoController:H});return new Promise(function(s){create(_objectSpread2(_objectSpread2(_objectSpread2({projectId:t,useOverlayControls:i,overlayControlsBackground:a,allowedControls:T,usePoster:o,useVideo:u,useLoader:c,useErrorMessage:h,enabledLayerIds:f,disabledLayerIds:d,skipVideoLayerElementBlobs:M,autoLoop:y,onLoad:A,onReady:I,onElementClicked:C,layers:w,projectJSON:L,videoBackgroundColour:O,duration:P,type:N,service:R,transformProjectJson:j,muted:z,mobileLandscapeOnFullscreen:B,showSubtitles:F,store:$,videoController:H,videoPlayerEngine:W,loadingPromise:X,updateLayers:q},Q),Z),{},{serviceQueryParams:U,data:G})).then(function(e){var t=e.videoPlayerContainerRef,r=e.videoRef,i=e.layerContainerRef,n=e.element,a=e.webPlayerRef,e=replaceLayers({loadingPromise:X,store:$,service:R,videoPlayerEngine:W,videoController:H,data:G,webPlayerRef:a,skipVideoLayerElementBlobs:M}),a=addLayers({loadingPromise:X,store:$,service:R,videoPlayerEngine:W,data:G,webPlayerRef:a});addEventListeners(window,K({videoPlayerContainer:t,videoController:H,videoPlayerEngine:W,store:$,useKeyboardEvents:Y})),W.setProps({onPlay:E,onPause:D,onProgress:_,onFullScreenToggle:x,progressInterval:k,store:$,videoController:H,layerContainer:i,videoPlayerContainer:t,useLogger:V}),p&&attachToDOM(p,n),u||$.updateMeasurements({}),J.updateDevOptions({controlsAlwaysOn:S,logStateChange:g,autoLoop:y,showMouseCoords:v,useGrid:m,useTimeInMillis:b}),s({updateLayers:q,addLayers:a,replaceLayers:e,storeActions:J,getVideoActions:W.getActions,remove:function(){r&&r.clear(),n.remove();var e=new Event("removeAllPlayerEvents");window.dispatchEvent(e)}})})})};module.exports=createPlayer;

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
'use strict';
// For more information about browser field, check out the browser field at https://github.com/substack/browserify-handbook#browser-field.

var styleElementsInsertedAtTop = [];

var insertStyleElement = function(styleElement, options) {
    var head = document.head || document.getElementsByTagName('head')[0];
    var lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];

    options = options || {};
    options.insertAt = options.insertAt || 'bottom';

    if (options.insertAt === 'top') {
        if (!lastStyleElementInsertedAtTop) {
            head.insertBefore(styleElement, head.firstChild);
        } else if (lastStyleElementInsertedAtTop.nextSibling) {
            head.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);
        } else {
            head.appendChild(styleElement);
        }
        styleElementsInsertedAtTop.push(styleElement);
    } else if (options.insertAt === 'bottom') {
        head.appendChild(styleElement);
    } else {
        throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');
    }
};

module.exports = {
    // Create a <link> tag with optional data attributes
    createLink: function(href, attributes) {
        var head = document.head || document.getElementsByTagName('head')[0];
        var link = document.createElement('link');

        link.href = href;
        link.rel = 'stylesheet';

        for (var key in attributes) {
            if ( ! attributes.hasOwnProperty(key)) {
                continue;
            }
            var value = attributes[key];
            link.setAttribute('data-' + key, value);
        }

        head.appendChild(link);
    },
    // Create a <style> tag with optional data attributes
    createStyle: function(cssText, attributes, extraOptions) {
        extraOptions = extraOptions || {};

        var style = document.createElement('style');
        style.type = 'text/css';

        for (var key in attributes) {
            if ( ! attributes.hasOwnProperty(key)) {
                continue;
            }
            var value = attributes[key];
            style.setAttribute('data-' + key, value);
        }

        if (style.sheet) { // for jsdom and IE9+
            style.innerHTML = cssText;
            style.sheet.cssText = cssText;
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
        } else if (style.styleSheet) { // for IE8 and below
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
            style.styleSheet.cssText = cssText;
        } else { // for Chrome, Firefox, and Safari
            style.appendChild(document.createTextNode(cssText));
            insertStyleElement(style, { insertAt: extraOptions.insertAt });
        }
    }
};

},{}]},{},[1]);
